<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/45350/how-to-make-overpass-ql-query-from-local-osmpbf">How to make Overpass QL query from local .osm/pbf</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/45350/up/" id="post-45350-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-45350-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/45350/down/" id="post-45350-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/45350/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
I have about 160k WW geo-coordinates and I need some additional information for each lat/lon. I<code>m already create Overpass QL query but it seems that</code>s take a lot of time to make requests via web (overpass-turbo.eu). Is it possible to make such queries locally? Download planet.osm/pbf and execute overpass ql queries locally using some tools or libs or something similar.</p>
<p>Thanks in advance,
Vic   </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-overpass-ql" href="/tags/overpass-ql/" rel="tag" title="see questions tagged 'overpass-ql'">overpass-ql</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>18 Sep '15, 00:48</strong>
</p>
<img alt="Gaploid's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/964b4e1026e8488babee25c77ff988fa?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11480/gaploid">Gaploid</a><br/>
<span class="score" title="10 reputation points">10</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Gaploid has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/45350/">
                edited
                <strong>18 Sep '15, 06:14</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-45350">
<a name="45372"></a>
<div class="comment" id="comment-45372">
<div class="comment-score" id="post-45372-score">2</div>
<div class="comment-text"><p>crosspost: <a href="https://gis.stackexchange.com/questions/163452/how-to-get-distance-to-different-poi-around-lat-lon">https://gis.stackexchange.com/questions/163452/how-to-get-distance-to-different-poi-around-lat-lon</a></p></div>
<div class="comment-info" id="comment-45372-info">
<span class="comment-age">(18 Sep '15, 14:23)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-45350">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-45350-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/45350/how-to-make-overpass-ql-query-from-local-osmpbf?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/45350/how-to-make-overpass-ql-query-from-local-osmpbf?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/45350/how-to-make-overpass-ql-query-from-local-osmpbf?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/45350/how-to-make-overpass-ql-query-from-local-osmpbf?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="45352"></a>
<div class="answer" id="answer-container-45352">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/45352/up/" id="post-45352-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-45352-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/45352/down/" id="post-45352-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>"need some additional information for each lat/lon" is called <a href="https://wiki.openstreetmap.org/wiki/Nominatim#Reverse_Geocoding">reverse geocoding</a> if you mean to get an address/description of the location. Is there a reason for you to use Overpass? Maybe there are faster options. If you really only need reverse geocoding, <a href="/questions/12057/">bulk-geo-coding-of-business-addresses</a> .</p>
<p>See <a href="https://wiki.openstreetmap.org/wiki/Overpass_API#Introduction">https://wiki.openstreetmap.org/wiki/Overpass_API#Introduction</a> for info about the public servers and their capacity/usage policy.</p>
<p>If you want a local instance of Overpass you can get it here <a href="https://wiki.openstreetmap.org/wiki/Overpass_API#Developers_.2F_System_Administrators">https://wiki.openstreetmap.org/wiki/Overpass_API#Developers_.2F_System_Administrators</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/45352/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 Sep '15, 06:20</strong>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="aseerel4c26 has 169 accepted answers">18%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-45352">
<a name="45360"></a>
<div class="comment" id="comment-45360">
<div class="comment-score" id="post-45360-score"></div>
<div class="comment-text"><p>Thanks for the answer, I need to find distance to different POIs around each lat/lon therefore I don`t need geocoding. Maybe there is a tool like osmosis to make overpass queries locally or the best way to import planet.osm to POSTGIS and make queries there?</p></div>
<div class="comment-info" id="comment-45360-info">
<span class="comment-age">(18 Sep '15, 11:43)</span>
<a class="comment-user userinfo" href="/users/11480/gaploid">Gaploid</a>
</div>
</div>
<a name="45375"></a>
<div class="comment" id="comment-45375">
<div class="comment-score" id="post-45375-score">3</div>
<div class="comment-text"><p>To run Overpass queries locally, you really need to install Overpass API locally. See the <a href="https://wiki.openstreetmap.org/wiki/Overpass_API/Installation">installation instructions</a> for details. Loading a full planet may take quite a bit more than 24 hours (depends on your HW), maybe check out the 'clone' feature. Once you have the DB available, you can run <code>osm3s_query</code>. Skip the parts for dispatcher, attic and minutely updates. You probably don't want that. If you get lost during the installation, simply ask on the Overpass development list (see Installation page for link).</p></div>
<div class="comment-info" id="comment-45375-info">
<span class="comment-age">(18 Sep '15, 15:47)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-45352">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-45352-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/45350/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="xU75je9UTElgPxcd87ntEUVOPDEioWmc"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>