<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/67323/buildings-name-rendering">Building's name rendering</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/67323/up/" id="post-67323-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-67323-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/67323/down/" id="post-67323-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/67323/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>The building I am asking about has a shape of two plus signs merged side by side. After I added its name I expected it would appear roughly in the middle but instead, the name is shifted to the left, like it was over one of the 'plus signs'. What is the reason for that? Am I missing something important?</p>
<p><a href="https://www.openstreetmap.org/#map=19/55.95024/-3.24121">https://www.openstreetmap.org/#map=19/55.95024/-3.24121</a></p>
<p>Thanks,
Michal</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-rendering" href="/tags/rendering/" rel="tag" title="see questions tagged 'rendering'">rendering</a>
<a class="post-tag tag-link-name" href="/tags/name/" rel="tag" title="see questions tagged 'name'">name</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Dec '18, 18:53</strong>
</p>
<img alt="michau's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/cde755e8ab6fcc1c37864170c84f98db?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/13370/michau">michau</a><br/>
<span class="score" title="71 reputation points">71</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="6 badges"><span class="bronze">●</span><span class="badgecount">6</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="michau has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-67323">
</div>
<div class="comment-tools" id="comment-tools-67323">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-67323-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/67323/buildings-name-rendering?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/67323/buildings-name-rendering?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/67323/buildings-name-rendering?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/67323/buildings-name-rendering?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="67328"></a>
<div class="answer" id="answer-container-67328">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/67328/up/" id="post-67328-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-67328-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/67328/down/" id="post-67328-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This is how the Mapnik works with "interior" algorithm. It tries to find the point which is the most distant from all the borders and then adds a bit of gravity towards geometric center. I was involved in the process of changing this algorithm, because the old one had some flaws, which resulted in showing labels outside the area, which was a problem that was bugging me, because for example Lake Victoria was rendered somewhere on the ground.</p>
<p><a href="https://github.com/gravitystorm/openstreetmap-carto/issues/1465">https://github.com/gravitystorm/openstreetmap-carto/issues/1465</a></p>
<p>Finding centroid is not trivial task and it depends on the shape heavily. What works better on some of them, is just strange in some other cases. I have reviewed about 100 of different shapes when giving a feedback to the developer, and there was no clear winner and this algorithm was just sane enough.</p>
<p><a href="https://github.com/mapnik/mapnik/issues/3550">https://github.com/mapnik/mapnik/issues/3550</a></p>
<p><a href="https://github.com/mapnik/mapnik/pull/3780">https://github.com/mapnik/mapnik/pull/3780</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/67328/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Dec '18, 23:57</strong>
</p>
<img alt="kocio's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e228dd20b7da2a6c8f559e2118ce08d3?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11332/kocio">kocio</a><br/>
<span class="score" title="2054 reputation points"><span class="">2.1k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="23 badges"><span class="silver">●</span><span class="badgecount">23</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="kocio has 14 accepted answers">20%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-67328">
</div>
<div class="comment-tools" id="comment-tools-67328">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-67328-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="67325"></a>
<div class="answer" id="answer-container-67325">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/67325/up/" id="post-67325-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-67325-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/67325/down/" id="post-67325-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>While I don't know how the renderer works, my guess is that it is searching for the biggest square area to place the label in. And this happens to be at the center of the western cross.</p>
<p><img alt="alt text" src="https://help.openstreetmap.org/upfiles/osm_qFOxPAx.png"/></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/67325/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Dec '18, 20:50</strong>
</p>
<img alt="pbb's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2f19e3a960bbc861e85b69c9c13a8e8?s=32&amp;d=identicon&amp;r=g" width="32">
<p><a href="/users/4016/pbb">pbb</a><br/>
<span class="score" title="621 reputation points">621</span><span title="14 badges"><span class="badge1">●</span><span class="badgecount">14</span></span><span title="18 badges"><span class="silver">●</span><span class="badgecount">18</span></span><span title="31 badges"><span class="bronze">●</span><span class="badgecount">31</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="pbb has no accepted answers">0%</span>
</p>
</img></div>
</div>
<div class="comments-container" id="comments-container-67325">
</div>
<div class="comment-tools" id="comment-tools-67325">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-67325-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/67323/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="sv70tB9ZcIB1ZVMOhjjhzrImoXXzwy0F"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>