<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/9890/save-coordinates-and-mark-point-on-map-running-local">[closed] save coordinates and mark point on map (running local)</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/9890/up/" id="post-9890-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-9890-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/9890/down/" id="post-9890-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/9890/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
I try to mark points on a OSM map temporarily and store the coordinates to them locally at the same time. The site is just running locally (using Aptana).
My issue is that as soon as I activate the draw.feature layer for points the local store routine stops working... The JS code below for reference. Any idea how to do this? Currently I store to local storage, but I am open to other options for this (i.e. export to file or something like this)</p>
<hr/>
<p>var lon = 13.33;
var lat = 52.51;
var zoom = 10;</p>
<p>var map, vectors, controls;</p>
<p>OpenLayers.Control.Click = OpenLayers.Class(OpenLayers.Control, {              <br/>
        defaultHandlerOptions: {
            'single': true,
            'double': false,
            'pixelTolerance': 0,
            'stopSingle': false,
            'stopDouble': false
        },</p>
<pre><code>    initialize: function(options) {
            this.handlerOptions = OpenLayers.Util.extend(
                {}, this.defaultHandlerOptions
            );
            OpenLayers.Control.prototype.initialize.apply(
                this, arguments
            ); 
            this.handler = new OpenLayers.Handler.Click(
                this, {
                    'click': this.trigger
                        }, this.handlerOptions
                    );
    },   
    trigger: function(e) {
            var lonlat = new OpenLayers.LonLat(1, 1);
            lonlat = map.getLonLatFromViewPortPx(e.xy);
            var projout = new OpenLayers.Projection("EPSG:4326");
            lonlat.transform(map.getProjectionObject(), projout);
            reclat = lonlat.lat;
            reclon = lonlat.lon; 
            var blockrec= prompt(reclat + " lat, " +
                             + reclon + " lon","");
            if (blockrec!=null &amp;&amp; blockrec!="")
            { 
                var latulon = ", " + reclat + ", " + reclon;
                alert(blockrec + latulon);
                localStorage.setItem(blockrec, latulon ); 
    }
 }
}); 
        function init(){
            map = new OpenLayers.Map('map');
            var osm = new OpenLayers.Layer.OSM("OSM");
            var newl = new OpenLayers.Layer.Text( "text", {location: "textfile.txt"} );
            var pointLayer = new OpenLayers.Layer.Vector("Point Layer");

            map.addLayers([osm, newl, pointLayer]);

            var click = new OpenLayers.Control.Click();
            map.addControl(click);
            click.activate();

            map.addControl(new OpenLayers.Control.LayerSwitcher());
            map.addControl(new OpenLayers.Control.MousePosition());

            var reg = new OpenLayers.Control.DrawFeature(pointLayer,OpenLayers.Handler.Point);
            map.addControl(reg);
            reg.activate();

            map.setCenter(
                    new OpenLayers.LonLat(lon, lat).transform(
                    new OpenLayers.Projection("EPSG:4326"),
                    map.getProjectionObject()
                    ), zoom
                );
</code></pre>
<p>}</p>
<hr/>
<p>Thanx!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-draw" href="/tags/draw/" rel="tag" title="see questions tagged 'draw'">draw</a>
<a class="post-tag tag-link-local" href="/tags/local/" rel="tag" title="see questions tagged 'local'">local</a>
<a class="post-tag tag-link-store" href="/tags/store/" rel="tag" title="see questions tagged 'store'">store</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>10 Jan '12, 18:49</strong>
</p>
<img alt="dada3781's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4044250d5a0cbfeca80890694d876d92?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2633/dada3781">dada3781</a><br>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="dada3781 has no accepted answers">0%</span>
</br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/9890/">
                closed
                <strong>11 Jan '12, 08:45</strong>
</a>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-9890">
</div>
<div class="comment-tools" id="comment-tools-9890">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-9890-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<div class="question-status" style="margin-bottom:15px">
<h3>
                The question has been closed for the following reason "This is a support system for OpenStreetMap contributors, not OpenLayers. See http://openlayers.org for more information on OpenLayers." by
                <a href="/users/3/andy-allan">Andy Allan</a>
                 11 Jan '12, 08:45
            </h3>
</div>
<form action="/questions/9890/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="BU07EhYeX8JYk0jb2897h9Q75Qy6pXE1"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>