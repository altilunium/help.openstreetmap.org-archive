<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/33325/bus-stops-by-line-bus">Bus stops by line bus</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/33325/up/" id="post-33325-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-33325-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/33325/down/" id="post-33325-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/33325/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>How I can to take a bus stops with coordinates using line of bus? 
Like this link <a href="http://www.overpass-api.de/api/sketch-line?ref=409&amp;network=ATAC&amp;style=wuppertal">http://www.overpass-api.de/api/sketch-line?ref=409&amp;network=ATAC&amp;style=wuppertal</a></p>
<p>I tried using this query but the ref (number of bus) is different by number of bus of company
<a href="http://overpass-api.de/api/xapi?*[highway=bus_stop][operator=ATAC]">http://overpass-api.de/api/xapi?*[highway=bus_stop][operator=ATAC]</a></p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-bus" href="/tags/bus/" rel="tag" title="see questions tagged 'bus'">bus</a>
<a class="post-tag tag-link-ref" href="/tags/ref/" rel="tag" title="see questions tagged 'ref'">ref</a>
<a class="post-tag tag-link-busstops" href="/tags/busstops/" rel="tag" title="see questions tagged 'busstops'">busstops</a>
<a class="post-tag tag-link-network" href="/tags/network/" rel="tag" title="see questions tagged 'network'">network</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>20 May '14, 14:28</strong>
</p>
<img alt="Alessandro%20Borelli's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/14a5ca3b780dbd33a047f3d3eb426963?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8873/alessandro-borelli">Alessandro B...</a><br/>
<span class="score" title="16 reputation points">16</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Alessandro Borelli has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-33325">
</div>
<div class="comment-tools" id="comment-tools-33325">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-33325-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/33325/bus-stops-by-line-bus?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/33325/bus-stops-by-line-bus?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/33325/bus-stops-by-line-bus?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/33325/bus-stops-by-line-bus?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="33345"></a>
<div class="answer" id="answer-container-33345">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/33345/up/" id="post-33345-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-33345-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/33345/down/" id="post-33345-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This depends on how your bus route has been mapped into OSM. Some contributors use the old tagging "highway=bus_stop" for the bus stops but others use the new "<a href="http://wiki.openstreetmap.org/wiki/Proposed_features/Public_Transport">public transport</a>" scheme with "<a href="http://wiki.openstreetmap.org/wiki/Tag:public_transport%3Dplatform">public_transport=platform</a>" (where transit users are waiting) and/or "<a href="http://wiki.openstreetmap.org/wiki/Tag:public_transport%3Dstop_position">public_transport=stop_position</a>" (where the bus itselfs stops on the highway). But in both cases, the "ref" is not always provided on hte stop position or is concatenated (like "1;2;5") which is not very useful. The best is to take the "ref" from the <a href="http://wiki.openstreetmap.org/wiki/Relation:route#Bus_routes_.28also_trolley_bus.29">bus route (relation) itself</a>. And of course, a bus stop may belong to several bus routes/relations.</p>
<p>So you should retrieve the expected bus relation first with the "operator" and "ref" and then walk through the relation members to find the elements representing the bus stops (either with "highway=bus_stop" or "public_transport=*"), then get the coordinates (be careful, some of theses elements are nodes which is easy but some others can be theoritically polygons (closed ways) then the coordinates should be calculated (centroid)).<br/>
If the relation doesn't exist for your bus route, then create it (it's fast when all bus stops are already mapped).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/33345/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>21 May '14, 09:49</strong>
</p>
<img alt="Pieren's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0e92f2d89853fd4e04c4b40a921e519b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/87/pieren">Pieren</a><br>
<span class="score" title="9847 reputation points"><span class="">9.8k</span></span><span title="20 badges"><span class="badge1">●</span><span class="badgecount">20</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="157 badges"><span class="bronze">●</span><span class="badgecount">157</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Pieren has 34 accepted answers">15%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-33345">
<a name="33346"></a>
<div class="comment" id="comment-33346">
<div class="comment-score" id="post-33346-score">1</div>
<div class="comment-text"><p>Hi, thank you for your answer. 
I took the node of bus with this call <a href="http://overpass-api.de/api/interpreter?data=[out:json];rel[ref=409][network=ATAC];out;">http://overpass-api.de/api/interpreter?data=[out:json];rel[ref=409][network=ATAC];out;</a> </p>
<p>Now I have a node of any bus stops with coordinates. :)</p></div>
<div class="comment-info" id="comment-33346-info">
<span class="comment-age">(21 May '14, 11:07)</span>
<a class="comment-user userinfo" href="/users/8873/alessandro-borelli">Alessandro B...</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-33345">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-33345-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="39733"></a>
<div class="answer" id="answer-container-39733">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/39733/up/" id="post-39733-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-39733-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/39733/down/" id="post-39733-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>ref should be used for the identifier of the stop.
route_ref can contain a semicolon separated list of lines which serve this bus stop.</p>
<p>Since public_transport=platform/bus=yes is still not rendered after 3 years, it's safe to assume all bus stops are still marked highway=bus_stop.</p>
<p>Apparently it's indeed allowed nowadays to use ways, or multipolygon relations nowadays for the platforms. Where I map in Belgium, you will only find nodes for public_transport=platform/bus=yes/highway=bus_stop. If there is an actual platform, then there will be a way or an area with public_transport=platform/highway=platform (to get it rendered) in addition to that node. It's the public_transport=platform/bus=yes/highway=bus_stop node which contains all the juicy details. No need to duplicate those to all bus stop related objects.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/39733/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>19 Dec '14, 23:09</strong>
</p>
<img alt="Polyglot's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a7dfce5853b949d2c4d04076890b4899?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6242/polyglot">Polyglot</a><br/>
<span class="score" title="38 reputation points">38</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Polyglot has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-39733">
</div>
<div class="comment-tools" id="comment-tools-39733">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-39733-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/33325/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="8G0uT5zf857UL4uZ6kqnDKbd46G7PZQp"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>