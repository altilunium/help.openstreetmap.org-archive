<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/44164/not-a-graphhopper-file-expected-gh-as-file-marker-but-was">Not a GraphHopper file! Expected 'GH' as file marker but was</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44164/up/" id="post-44164-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44164-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/44164/down/" id="post-44164-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/44164/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi everyone.</p>
<p>Last night i`ve got latest "<strong>planet-latest.osm.pbf</strong>" and tried to compile files for railroads but got next error:</p>
<pre><code>java -d64 -Xmx16g -XX:+UseG1GC -server -jar graphhopper-web-0.3-with-rail.jar jetty.port=9999 jetty.resourcebase=webapp config=rail.properties osmreader.osm=planet-latest.osm.pbf
</code></pre>
<p>I<code>ve tried to do the same at friday and it works well, but now i got the message. Also i</code>ve tried to restart "<strong>osmupdate</strong>" but this doesn`t help. 
Any ideas why i got this message? 
Thanks in advance guys.</p>
<pre><code>Jul 13, 2015 4:33:27 PM com.google.inject.internal.MessageProcessor visit

**INFO: An exception was caught and reported. Message: java.lang.IllegalArgumentException: Not a GraphHopper file! Expected 'GH' as file marker but was**

java.lang.IllegalStateException: Couldn't load graph
        at com.graphhopper.http.DefaultModule.configure(DefaultModule.java:60)
        at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
        at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
        at com.google.inject.AbstractModule.install(AbstractModule.java:118)
        at com.graphhopper.http.GHServer$1.configure(GHServer.java:111)
        at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
        at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
        at com.google.inject.spi.Elements.getElements(Elements.java:101)
        at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:133)
        at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
        at com.google.inject.Guice.createInjector(Guice.java:95)
        at com.google.inject.Guice.createInjector(Guice.java:72)
        at com.google.inject.Guice.createInjector(Guice.java:62)
        at com.graphhopper.http.GHServer.start(GHServer.java:61)
        at com.graphhopper.http.GHServer.main(GHServer.java:47)

Caused by: java.lang.IllegalArgumentException: Not a GraphHopper file! Expected 'GH' as file marker but was 
        at com.graphhopper.storage.AbstractDataAccess.readHeader(AbstractDataAccess.java:118)
        at com.graphhopper.storage.MMapDataAccess.loadExisting(MMapDataAccess.java:236)
        at com.graphhopper.storage.SynchedDAWrapper.loadExisting(SynchedDAWrapper.java:141)
        at com.graphhopper.storage.GraphHopperStorage.loadExisting(GraphHopperStorage.java:1355)
        at com.graphhopper.GraphHopper.load(GraphHopper.java:679)
        at com.graphhopper.GraphHopper.importOrLoad(GraphHopper.java:557)
        at com.graphhopper.http.DefaultModule.configure(DefaultModule.java:47)
        ... 14 more

**Exception in thread "main" com.google.inject.CreationException: Guice creation errors:**

1) An exception was caught and reported. Message: Couldn't load graph
  at com.graphhopper.http.GHServer$1.configure(GHServer.java:111)

2) Explicit bindings are required and com.graphhopper.GraphHopper is not explicitly bound.
  while locating com.graphhopper.GraphHopper
    for field at com.graphhopper.http.GraphHopperServlet.hopper(GraphHopperServlet.java:45)
  at com.graphhopper.http.GHServletModule.configureServlets(GHServletModule.java:60)

3) Explicit bindings are required and com.graphhopper.util.TranslationMap is not explicitly bound.
  while locating com.graphhopper.util.TranslationMap
    for field at com.graphhopper.http.I18NServlet.map(I18NServlet.java:35)
  at com.graphhopper.http.GHServletModule.configureServlets(GHServletModule.java:54)

4) Explicit bindings are required and com.graphhopper.GraphHopper is not explicitly bound.
  while locating com.graphhopper.GraphHopper
    for field at com.graphhopper.http.InfoServlet.hopper(InfoServlet.java:39)
  at com.graphhopper.http.GHServletModule.configureServlets(GHServletModule.java:57)

**4 errors**
        at com.google.inject.internal.Errors.throwCreationExceptionIfErrorsExist(Errors.java:435)
        at com.google.inject.internal.InternalInjectorCreator.initializeStatically(InternalInjectorCreator.java:154)
        at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:106)
        at com.google.inject.Guice.createInjector(Guice.java:95)
        at com.google.inject.Guice.createInjector(Guice.java:72)
        at com.google.inject.Guice.createInjector(Guice.java:62)
        at com.graphhopper.http.GHServer.start(GHServer.java:61)
        at com.graphhopper.http.GHServer.main(GHServer.java:47)
Caused by: java.lang.IllegalStateException: Couldn't load graph
        at com.graphhopper.http.DefaultModule.configure(DefaultModule.java:60)
        at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
        at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
        at com.google.inject.AbstractModule.install(AbstractModule.java:118)
        at com.graphhopper.http.GHServer$1.configure(GHServer.java:111)
        at com.google.inject.AbstractModule.configure(AbstractModule.java:59)
        at com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:223)
        at com.google.inject.spi.Elements.getElements(Elements.java:101)
        at com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:133)
        at com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:103)
        ... 5 more
Caused by: java.lang.IllegalArgumentException: Not a GraphHopper file! Expected 'GH' as file marker but was 
        at com.graphhopper.storage.AbstractDataAccess.readHeader(AbstractDataAccess.java:118)
        at com.graphhopper.storage.MMapDataAccess.loadExisting(MMapDataAccess.java:236)
        at com.graphhopper.storage.SynchedDAWrapper.loadExisting(SynchedDAWrapper.java:141)
        at com.graphhopper.storage.GraphHopperStorage.loadExisting(GraphHopperStorage.java:1355)
        at com.graphhopper.GraphHopper.load(GraphHopper.java:679)
        at com.graphhopper.GraphHopper.importOrLoad(GraphHopper.java:557)
        at com.graphhopper.http.DefaultModule.configure(DefaultModule.java:47)
        **... 14 more**


**ubuntu@ip-172:/gh/generator$ java -version**
java version "1.7.0_65"
OpenJDK Runtime Environment (IcedTea 2.5.3) (7u71-2.5.3-0ubuntu0.14.04.1)
OpenJDK 64-Bit Server VM (build 24.65-b04, mixed mode)
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-not" href="/tags/not/" rel="tag" title="see questions tagged 'not'">not</a>
<a class="post-tag tag-link-a" href="/tags/a/" rel="tag" title="see questions tagged 'a'">a</a>
<a class="post-tag tag-link-graphhopper" href="/tags/graphhopper/" rel="tag" title="see questions tagged 'graphhopper'">graphhopper</a>
<a class="post-tag tag-link-file" href="/tags/file/" rel="tag" title="see questions tagged 'file'">file</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Jul '15, 17:49</strong>
</p>
<img alt="Andrey%20Logicov's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9ab74ed3a5230aa97fd7e06510caba64?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11228/andrey-logicov">Andrey Logicov</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Andrey Logicov has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/44164/">
                edited
                <strong>15 Jul '15, 16:35</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-44164">
<a name="44167"></a>
<div class="comment" id="comment-44167">
<div class="comment-score" id="post-44167-score">1</div>
<div class="comment-text"><p>In case you do not get an answer here, you could try the <a href="https://lists.openstreetmap.org/listinfo/graphhopper">graphhopper mailing list</a></p></div>
<div class="comment-info" id="comment-44167-info">
<span class="comment-age">(13 Jul '15, 19:48)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-44164">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44164-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/44164/not-a-graphhopper-file-expected-gh-as-file-marker-but-was?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/44164/not-a-graphhopper-file-expected-gh-as-file-marker-but-was?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/44164/not-a-graphhopper-file-expected-gh-as-file-marker-but-was?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/44164/not-a-graphhopper-file-expected-gh-as-file-marker-but-was?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="44181"></a>
<div class="answer" id="answer-container-44181">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44181/up/" id="post-44181-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44181-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/44181/down/" id="post-44181-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>First, I cannot comment here so I have to answer although I have no answer ... just some hints:</p>
<ul>
<li>If you want to do a reimport e.g. when your pbf updated you have to completely remove the graphhopper folder</li>
<li>Did you try with a smaller area and does this work?</li>
<li>Are you using normal HDD or SSD or some virtual filesystem?</li>
<li>Did the last import properly run through?</li>
<li>How much RAM do you have on your machine? If you are using some MMAP config make sure you leave enough RAM for the OS and do not assign all to the JVM</li>
<li>It is recommended to use the latest version 0.4 instead of 0.3, there were many bug fixes already</li>
</ul>
<p>PS: You should proper format the stacktrace, this is a bit irritating :)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/44181/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Jul '15, 16:51</strong>
</p>
<img alt="peatar's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fec61c70a4cc98b1e84a5dfbde1e9a6e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10729/peatar">peatar</a><br/>
<span class="score" title="351 reputation points">351</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="12 badges"><span class="bronze">●</span><span class="badgecount">12</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="peatar has one accepted answer">8%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-44181">
</div>
<div class="comment-tools" id="comment-tools-44181">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44181-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/44164/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="x3vySOwS8enAPx0ZeimiRdRnugINV9BD"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>