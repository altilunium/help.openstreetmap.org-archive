<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/14206/incorrect-data-check">incorrect data check</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/14206/up/" id="post-14206-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-14206-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/14206/down/" id="post-14206-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/14206/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Yesterday I downloaded planet-latest.osm.pbf.</p>
<p>Today I tried to run:</p>
<pre><code>osmosis --rb file="c:\osm_data\planet-latest.osm.pbf"  
--bp file="c:\osm_data\united_states.poly"  --bp file="c:\osm_data\canada.poly" 
--tf accept-ways highway=* 
--wb omitmetadata=true file="d:\spatialite_data\usa_can.osm.pbf
</code></pre>
<p>After running for about 15 minutes I get:</p>
<pre><code>C:\Program Files (x86)\osmosis\bin&gt;osmosis --rb file="c:\osm_data\planet-latest.osm.pbf"  --bp file="c:\osm_data\united_states.poly"
c:\osm_data\canada.poly" --tf accept-ways highway=* --wb omitmetadata=true file="d:\spatialite_data\usa_can.osm.pbf"
Jul 11, 2012 6:47:50 PM org.openstreetmap.osmosis.core.Osmosis run
INFO: Osmosis Version 0.40.1
Jul 11, 2012 6:47:50 PM org.openstreetmap.osmosis.core.Osmosis run
INFO: Preparing pipeline.
Jul 11, 2012 6:47:50 PM org.openstreetmap.osmosis.core.Osmosis run
INFO: Launching pipeline execution.
Jul 11, 2012 6:47:50 PM org.openstreetmap.osmosis.core.Osmosis run
INFO: Pipeline executing, waiting for completion.
java.util.zip.DataFormatException: incorrect data check   &lt;&lt;===================     
        at java.util.zip.Inflater.inflateBytes(Native Method)
        at java.util.zip.Inflater.inflate(Unknown Source)
        at java.util.zip.Inflater.inflate(Unknown Source)
        at crosby.binary.file.FileBlockPosition.parseData(FileBlockPosition.java:57)
        at crosby.binary.file.FileBlockHead.readContents(FileBlockHead.java:95)
        at crosby.binary.file.FileBlock.process(FileBlock.java:135)
        at crosby.binary.file.BlockInputStream.process(BlockInputStream.java:34)
        at crosby.binary.osmosis.OsmosisReader.run(OsmosisReader.java:37)
        at java.lang.Thread.run(Unknown Source)
Jul 11, 2012 7:02:57 PM org.openstreetmap.osmosis.core.pipeline.common.ActiveTaskManager waitForCompletion
SEVERE: Thread for task 1-rb failed
java.lang.Error: java.util.zip.DataFormatException: incorrect data check
        at crosby.binary.file.FileBlockPosition.parseData(FileBlockPosition.java:60)
        at crosby.binary.file.FileBlockHead.readContents(FileBlockHead.java:95)
        at crosby.binary.file.FileBlock.process(FileBlock.java:135)
        at crosby.binary.file.BlockInputStream.process(BlockInputStream.java:34)
        at crosby.binary.osmosis.OsmosisReader.run(OsmosisReader.java:37)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.util.zip.DataFormatException: incorrect data check
        at java.util.zip.Inflater.inflateBytes(Native Method)
        at java.util.zip.Inflater.inflate(Unknown Source)
        at java.util.zip.Inflater.inflate(Unknown Source)
        at crosby.binary.file.FileBlockPosition.parseData(FileBlockPosition.java:57)
        ... 5 more

Jul 11, 2012 7:02:57 PM org.openstreetmap.osmosis.core.Osmosis main
SEVERE: Execution aborted.
org.openstreetmap.osmosis.core.OsmosisRuntimeException: One or more tasks failed.
        at org.openstreetmap.osmosis.core.pipeline.common.Pipeline.waitForCompletion(Pipeline.java:146)
        at org.openstreetmap.osmosis.core.Osmosis.run(Osmosis.java:92)
        at org.openstreetmap.osmosis.core.Osmosis.main(Osmosis.java:37)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
        at org.codehaus.classworlds.Launcher.main(Launcher.java:47)

C:\Program Files (x86)\osmosis\bin&gt;
</code></pre>
<p>What is causing this?  Is there a work-around?</p>
<p>Regards,
Jim</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-windows" href="/tags/windows/" rel="tag" title="see questions tagged 'windows'">windows</a>
<a class="post-tag tag-link-data" href="/tags/data/" rel="tag" title="see questions tagged 'data'">data</a>
<a class="post-tag tag-link-check" href="/tags/check/" rel="tag" title="see questions tagged 'check'">check</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>12 Jul '12, 02:22</strong>
</p>
<img alt="obrienj's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a91c10377b432d3352bd072df1aa4633?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4021/obrienj">obrienj</a><br/>
<span class="score" title="16 reputation points">16</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="obrienj has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/14206/">
                edited
                <strong>12 Jul '12, 02:33</strong>
</a>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-14206">
</div>
<div class="comment-tools" id="comment-tools-14206">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-14206-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/14206/incorrect-data-check?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/14206/incorrect-data-check?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/14206/incorrect-data-check?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/14206/incorrect-data-check?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="14207"></a>
<div class="answer" id="answer-container-14207">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/14207/up/" id="post-14207-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-14207-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/14207/down/" id="post-14207-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It looks like it's inside the crosby code (the pbf reader) at the point where it falls over.  Perhaps it's incorrect data in planet-latest.osm.pbf (i.e. a download error)?  You couldn't double-check the MD5, could you?  There's an MD5 of a few-days-old planet <a href="http://planet.openstreetmap.org/">here</a>, but of course that may not be the one that you're downloading.</p>
<p>Another possibility, perhaps, may be Java running out of temporary storage, like in <a href="http://help.openstreetmap.org/questions/14085/osmosis-planetosm-to-postgresql-disk-space-caching">this question</a>.<br/>
</p>
<p>Finally, it's not trying to write any files locally (to "Program Files (x86)") is it?  Because if so, and you're on Windows Vista or 7, UAC may try and stop you.  I seem to remember that osmosis ships with a batch file on Windows these days - you may want to have a look at that to see if you want any of the settings from it.  Also see the "Win 7 64 bit" note at the bottom of <a href="http://wiki.openstreetmap.org/wiki/Osmosis#Windows_notes">this page</a>.</p>
<p>(all of this is, unfortunately, guesswork; I haven't run osmosis for ages and on Windows for even longer).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/14207/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Jul '12, 02:50</strong>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SomeoneElse has 228 accepted answers">16%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-14207">
<a name="14208"></a>
<div class="comment" id="comment-14208">
<div class="comment-score" id="post-14208-score"></div>
<div class="comment-text"><p>You were correct, I checked the md5 sum of the downloaded file and it didn't match that on the website you referenced.</p>
<p>So, I know the "rest of the story".</p>
<p>Thanks for reminding me about the md5 check.</p>
<p>Regards,
Jim</p>
<p>P.S. I won't be downloading the planet file again, it took 12 hours!!</p></div>
<div class="comment-info" id="comment-14208-info">
<span class="comment-age">(12 Jul '12, 03:13)</span>
<a class="comment-user userinfo" href="/users/4021/obrienj">obrienj</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-14207">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-14207-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/14206/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="zsZbnKRDlm2TFdtyXeRaKALQdVU60dH0"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>