<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/22525/how-can-i-put-a-national-cycletrail-from-osm-as-a-transparent-layer-on-my-garmin">How can I put a national cycletrail from OSM as a transparent layer on my Garmin</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22525/up/" id="post-22525-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22525-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/22525/down/" id="post-22525-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/22525/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Question asked on IRC.</p>
<p>How can I get a national cycle trail (such as this <a href="http://www.openstreetmap.org/browse/relation/2195143">one</a> in Sweden) converted to a transparent overlay for my Garmin?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-mkgmap" href="/tags/mkgmap/" rel="tag" title="see questions tagged 'mkgmap'">mkgmap</a>
<a class="post-tag tag-link-garmin" href="/tags/garmin/" rel="tag" title="see questions tagged 'garmin'">garmin</a>
<a class="post-tag tag-link-ncn" href="/tags/ncn/" rel="tag" title="see questions tagged 'ncn'">ncn</a>
<a class="post-tag tag-link-trail" href="/tags/trail/" rel="tag" title="see questions tagged 'trail'">trail</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>17 May '13, 16:37</strong>
</p>
<img alt="SK53's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/06cd84075f1adc2870ad102c7233e661?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/647/sk53">SK53 ♦</a><br/>
<span class="score" title="28084 reputation points"><span class="">28.1k</span></span><span title="48 badges"><span class="badge1">●</span><span class="badgecount">48</span></span><span title="268 badges"><span class="silver">●</span><span class="badgecount">268</span></span><span title="433 badges"><span class="bronze">●</span><span class="badgecount">433</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SK53 has 121 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22525">
</div>
<div class="comment-tools" id="comment-tools-22525">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22525-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/22525/how-can-i-put-a-national-cycletrail-from-osm-as-a-transparent-layer-on-my-garmin?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/22525/how-can-i-put-a-national-cycletrail-from-osm-as-a-transparent-layer-on-my-garmin?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/22525/how-can-i-put-a-national-cycletrail-from-osm-as-a-transparent-layer-on-my-garmin?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/22525/how-can-i-put-a-national-cycletrail-from-osm-as-a-transparent-layer-on-my-garmin?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="22532"></a>
<div class="answer answered-by-owner" id="answer-container-22532">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22532/up/" id="post-22532-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22532-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/22532/down/" id="post-22532-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Working on the assumption that the trail covers most of the country, you need to do the following things (a lot of this follows <a href="http://wiki.openstreetmap.org/wiki/OSM_Map_On_Garmin/Cycle_map">OSM on Garmin Cycle Map</a>):</p>
<ul>
<li>Download an OSM XML file containing the area of interest. Usually Geofabrik's download site is the best place to start (some alternatives are listed at the end).</li>
<li>Download the java program <a href="http://www.mkgmap.org.uk/download/mkgmap.html">Mkgmap</a> from here.</li>
<li>Place the OSM XML file &amp; mkgmap in the same directory. (I usually have a specific directory for garmin work).</li>
<li>Create a subdirectory of that directory called, say, <code>ncnstyle</code>. This will be used to store the rules for processing the xml to a garmin img file</li>
<li>Download a cycle specific mkgmap style from <a href="http://svn.openstreetmap.org/applications/utils/export/garmincyclemap/network/cyclemap/">http://svn.openstreetmap.org/applications/utils/export/garmincyclemap/network/cyclemap/</a> and place them in the subdirectory. You need all the files from this site (info, lines, options, points, polygons, relations, version). Either save by right clicking in your browser or use svn to get all at once. In windows you may need to open each file with the command line editor and save them to change newlines to windows end of lines.</li>
</ul>
<p>At this point you have everything you need to create a garmin IMG file, but first we want to change things a little so that only the National Cycle Trail data are processed. There are several options for doing this (by filtering out unneeded data from the OSM file), but here I follow a route where we only process NCN data in the mkgmap style.</p>
<p>Once the style has been changed we now need to use it. The way I do this is as follows</p>
<ul>
<li>Create a batch file (.bat on windows, a shell script under unix). I only do this because I forget all the parameters and it's easier to change than remember the parameters. Enter on one line the following text (replace things IN UPPER CASE with your particular file names) and save it.</li>
</ul>
<blockquote>
<p><code>java -jar .\mkgmap.jar -c NCNCYCLE.txt OSMDOWNLOADFILE</code></p>
</blockquote>
<ul>
<li>Now create the file NCNCYCLE.txt (again use whatever name you want instead of NCNCYCLE). Here all the mkgmap parameters can be set. The ones I standardly use are as follows:</li>
</ul>
<blockquote>
<p><code>style-file: ncncycle
family-id: 9201
family-name: YOURNAME
series-name: YOURNAME
tdbfile
route
lower-case
transparent
overview-mapname: ncn-test
overview-mapnumber: 92010000
mapname: mapname:  92010001
keep-going</code></p>
</blockquote>
<p>The 9201 is used because this is unlikely to clash with any other Garmin maps you have, but it is as well to check beforehand. Further details on these options at mkgmap on the wiki.</p>
<p>Now we edit the style files copied earlier. Because we only want the NCN route and we do not want buildings, POIs, forests etc., replace the two following files with an empty file: points, polygons.</p>
<p>Add the following line to the lines file near the top, </p>
<pre><code>&gt; # ----- Downgrade tracks where bicycles are banned
&gt; #     (ignore motorway/trunk as this'll look stupid)
&gt; 
&gt; bicycle=no &amp; ( highway!=motorway &amp;
&gt; highway!=trunk ) { set
&gt; highway=footway; } access=private {
&gt; set highway=private; }
&gt; ###==== these are the extra three lines, the aim is to suppress all
&gt; output except ncn ==== ### ncn_ref=*
&gt; {add ncn=yes; } (ncn!=yes &amp; highway=*)
&gt; { set ncn=no; } (ncn=no &amp; highway =*)
&gt; {delete highway; delete lcn; delete
&gt; rcn; delete lcn_ref; delete rcn_ref;}
</code></pre>
<p>Now run the batch file. It should create 3 files a .tdb and 2 *.img files. </p>
<p>... this answer is incomplete because I'm going to the pub. It should say something about MapSetToolkit. It could do with being edited too.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/22532/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>17 May '13, 20:45</strong>
</p>
<img alt="SK53's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/06cd84075f1adc2870ad102c7233e661?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/647/sk53">SK53 ♦</a><br/>
<span class="score" title="28084 reputation points"><span class="">28.1k</span></span><span title="48 badges"><span class="badge1">●</span><span class="badgecount">48</span></span><span title="268 badges"><span class="silver">●</span><span class="badgecount">268</span></span><span title="433 badges"><span class="bronze">●</span><span class="badgecount">433</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SK53 has 121 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22532">
</div>
<div class="comment-tools" id="comment-tools-22532">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22532-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="22536"></a>
<div class="answer" id="answer-container-22536">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22536/up/" id="post-22536-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22536-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/22536/down/" id="post-22536-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you can live with an intransparent overlay, go to <a href="http://cycling.waymarkedtrails.org/">waymarked trails</a>, search for the name of the desired trail, download the GPX file to your Garmin device and set it to show the parts of the track on the map.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/22536/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 May '13, 04:26</strong>
</p>
<img alt="malenki's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a18e2b8eb41515c09bb66159941584bf?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/583/malenki">malenki</a><br/>
<span class="score" title="4713 reputation points"><span class="">4.7k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="46 badges"><span class="silver">●</span><span class="badgecount">46</span></span><span title="83 badges"><span class="bronze">●</span><span class="badgecount">83</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="malenki has 10 accepted answers">6%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22536">
</div>
<div class="comment-tools" id="comment-tools-22536">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22536-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/22525/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="wtmKrDKmMRWSBuUVgBsk0XFAfLkmm7lW"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>