<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/28075/how-to-correctly-map-a-pois-address">How to correctly map a POI's address ?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28075/up/" id="post-28075-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28075-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/28075/down/" id="post-28075-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/28075/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Can someone please tell me how I can properly tag this POI <a href="http://www.openstreetmap.org/browse/way/237662466">http://www.openstreetmap.org/browse/way/237662466</a> ?</p>
<p>It's a shop located in the Pierstraat in Reet. The building has an addr:street tag and is part of an associatedStreet relation. However Nominatim (and openlinkmap) places it in the Pierstraat - Matenstraat. Do a look-up for "Vero Golf" on osm.org</p>
<p>I know this is a complex street that starts as Pierstraat in Reet/Rumst in the east, becomes Pierstraat (Reet side)-  Reetsesteenweg (Aartselaar side), Pierstraat (both Reet &amp; Aartselaar), Pierstraat (Aartselaar side) - Matenstraat (Niel side) while traveling to the west.</p>
<p>Nevertheless the building is nearer a Pierstraat-Pierstraat part and has all those additional tags.</p>
<p>So I'm confused, it is correctly tagged and is there a problem in Nominatim, or is my way of tagging incorrect ?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-address" href="/tags/address/" rel="tag" title="see questions tagged 'address'">address</a>
<a class="post-tag tag-link-poi" href="/tags/poi/" rel="tag" title="see questions tagged 'poi'">poi</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>14 Nov '13, 06:24</strong>
</p>
<img alt="escada's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/813a136afe7d4c95fd5bccdd78705e0e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5390/escada">escada</a><br/>
<span class="score" title="19043 reputation points"><span class="">19.0k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="166 badges"><span class="silver">●</span><span class="badgecount">166</span></span><span title="302 badges"><span class="bronze">●</span><span class="badgecount">302</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="escada has 97 accepted answers">21%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28075">
</div>
<div class="comment-tools" id="comment-tools-28075">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28075-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/28075/how-to-correctly-map-a-pois-address?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/28075/how-to-correctly-map-a-pois-address?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/28075/how-to-correctly-map-a-pois-address?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/28075/how-to-correctly-map-a-pois-address?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="28122"></a>
<div class="answer accepted-answer" id="answer-container-28122">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28122/up/" id="post-28122-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28122-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/28122/down/" id="post-28122-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/28122/" rel="nofollow" title="escada has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You've mapped it correctly, Nominatim is just not very good at updating associatedStreet relations. It's a <a href="https://trac.openstreetmap.org/ticket/4619">known bug</a>.</p>
<p>Here is what happened: you've originally put the house into <a href="http://www.openstreetmap.org/browse/relation/2594673">this associatedStreet relation</a> which does contain the 'Pierstraat - Matenstraat' street. Nominatim simply uses the first street it finds in such a relation for the name an ignores all tags on the relation itself, so that is where the name comes from. Later you have moved the house to the new relation and that move was not caught by Nominatim's update process. The houses will only be updated when they are changed themselves again.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/28122/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Nov '13, 08:23</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28122">
</div>
<div class="comment-tools" id="comment-tools-28122">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28122-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="28079"></a>
<div class="answer" id="answer-container-28079">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28079/up/" id="post-28079-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28079-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/28079/down/" id="post-28079-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p><a href="http://nominatim.openstreetmap.org">nominatim.openstreetmap.org</a> can help to clarify such issues. After <a href="http://nominatim.openstreetmap.org/search.php?q=Vero+Golf">searching for Vero Golf</a> and clicking on <a href="http://nominatim.openstreetmap.org/details.php?place_id=9140432282">(details)</a> you can see Nominatim's internal view for this place including the address hierarchy. According to this, <em>Pierstraat - Matenstraat</em> comes from <a href="http://www.openstreetmap.org/browse/way/22949350">this street</a>. Additionally there is no associatedStreet-relation in the hierarchy. So I guess there is an internal error because Nominatim is supposed to support associatedStreet-relations.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/28079/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Nov '13, 07:38</strong>
</p>
<img alt="scai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/158/scai">scai ♦</a><br/>
<span class="score" title="33317 reputation points"><span class="">33.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="309 badges"><span class="silver">●</span><span class="badgecount">309</span></span><span title="459 badges"><span class="bronze">●</span><span class="badgecount">459</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="scai has 168 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28079">
<a name="28080"></a>
<div class="comment" id="comment-28080">
<div class="comment-score" id="post-28080-score">1</div>
<div class="comment-text"><p>Thanks scai for pointing me to the nominatim website. I forgot to check there.</p>
<p>Just as you, I also assumed that it supports  associatedStreet-relations. I also thought that it would take the nearest road, or use the information from the building itself. None of this seems to be the case.</p></div>
<div class="comment-info" id="comment-28080-info">
<span class="comment-age">(14 Nov '13, 08:36)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
<a name="28085"></a>
<div class="comment" id="comment-28085">
<div class="comment-score" id="post-28085-score">1</div>
<div class="comment-text"><p><a href="http://nominatim.openstreetmap.org/details.php?place_id=9140432282">http://nominatim.openstreetmap.org/details.php?place_id=9140432282</a> suggests last updated on 13th September 2013 and it wasn't added to the associatedStreet relation until 26th September (as such I'd have expected the addr:street on the POI way itself to take priority, but what do I know). Note though that the associatedStreet relation <a href="http://www.openstreetmap.org/browse/relation/2789005">http://www.openstreetmap.org/browse/relation/2789005</a> does contain some ways with role street but the name Pierstraat - Matenstraat so perhaps that is causing the confusion.</p></div>
<div class="comment-info" id="comment-28085-info">
<span class="comment-age">(14 Nov '13, 09:22)</span>
<a class="comment-user userinfo" href="/users/339/edloach">EdLoach ♦</a>
</div>
</div>
<a name="28091"></a>
<div class="comment" id="comment-28091">
<div class="comment-score" id="post-28091-score"></div>
<div class="comment-text"><p>Great, I overlooked that. So it seems like Nominatim missed the update.<br/>
</p>
<p>Regarding your comment on the relation members. The relation itself contains a <em>name</em> tag which is supposed to set the name of the associated street according to the <a href="https://wiki.openstreetmap.org/wiki/Relation:associatedStreet">associatedStreet wiki page</a>. Therefore I guess the names of the actual street members should get ignored. However I don't know how Nominatim's implementation handles such issues.</p></div>
<div class="comment-info" id="comment-28091-info">
<span class="comment-age">(14 Nov '13, 10:02)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="28093"></a>
<div class="comment" id="comment-28093">
<div class="comment-score" id="post-28093-score"></div>
<div class="comment-text"><p>I've just read <a href="http://wiki.openstreetmap.org/wiki/Nominatim/Development_overview">http://wiki.openstreetmap.org/wiki/Nominatim/Development_overview</a> . it has a section on Building indexing. My interpretation now is that it takes the data from one of the street members in the associatedStreet, not from the tags on the relation. Is this correct ?</p>
<p>Thanks EdLoach for pointing me to the "missing" update. I wonder what I did on the 13th. I normally put everything immediately in the associatedStreet relation. Maybe I created a second one by accident and merged the two together on the 26th ?</p>
<p>Is there a way to trigger the update in Nominatim ?</p></div>
<div class="comment-info" id="comment-28093-info">
<span class="comment-age">(14 Nov '13, 11:28)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
<a name="28123"></a>
<div class="comment" id="comment-28123">
<div class="comment-score" id="post-28123-score">2</div>
<div class="comment-text"><p>There is no public interface to trigger updates manually. I've done it now for the area. Looks ok now.</p></div>
<div class="comment-info" id="comment-28123-info">
<span class="comment-age">(15 Nov '13, 08:27)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-28079">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28079-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/28075/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="lnB3VRwRxpGpW2yppVh97oBRVY6UjpPU"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>