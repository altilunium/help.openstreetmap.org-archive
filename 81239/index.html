<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/81239/install-both-nominatim-and-postgres-in-docker-container-microservice">Install both nominatim and postgres in Docker container (microservice)</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/81239/up/" id="post-81239-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-81239-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/81239/down/" id="post-81239-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/81239/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi everyone.
I have used Nominatim on my machine already through a docker installation: installed docker image and installed PostgreSQL +  postgis on my machine.
My next goal is to make Nominatim independent of my machine and install both the database it is using and the nominatim instance itself in a docker container / or two separate containers.</p>
<p>So I'm thinking either of having two docker containers: one having nominatim and one having the database. Then tell nominatim that it can find the database in the docker container. Both containers have to be started and run at the same time.</p>
<p>So when I installed Nominatim on my machine, I used this guide: <a href="https://hub.docker.com/r/stefanreuter/nominatim">https://hub.docker.com/r/stefanreuter/nominatim</a></p>
<p>Now the main question would be how to change this part: docker run -t -v <em>/home/me/nominatimdata:/data nominatim</em>  sh /app/init.sh /data/merged.osm.pbf postgresdata 4. The italic part is where I specify where to save the data that will be created for nominatim. I want this to be in the docker image of the database.</p>
<p>Has anyone tried combining the db and Nominatim using docker compose?</p>
<p>Has anyone ever tried this and can share information on how to do this or is this not possible because of some reasons?</p>
<p>I would love to hear your thoughts!
Arusha</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-microservice" href="/tags/microservice/" rel="tag" title="see questions tagged 'microservice'">microservice</a>
<a class="post-tag tag-link-docker" href="/tags/docker/" rel="tag" title="see questions tagged 'docker'">docker</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-combine" href="/tags/combine/" rel="tag" title="see questions tagged 'combine'">combine</a>
<a class="post-tag tag-link-postgres" href="/tags/postgres/" rel="tag" title="see questions tagged 'postgres'">postgres</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>09 Aug '21, 09:07</strong>
</p>
<img alt="Arusha29's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/7128510c49d32bd84794a8ddc39a5de9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20605/arusha29">Arusha29</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Arusha29 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/81239/">
                edited
                <strong>09 Aug '21, 11:35</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-81239">
</div>
<div class="comment-tools" id="comment-tools-81239">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-81239-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/81239/install-both-nominatim-and-postgres-in-docker-container-microservice?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/81239/install-both-nominatim-and-postgres-in-docker-container-microservice?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/81239/install-both-nominatim-and-postgres-in-docker-container-microservice?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/81239/install-both-nominatim-and-postgres-in-docker-container-microservice?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="81244"></a>
<div class="answer" id="answer-container-81244">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/81244/up/" id="post-81244-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-81244-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/81244/down/" id="post-81244-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p><a href="https://github.com/mediagis/nominatim-docker">https://github.com/mediagis/nominatim-docker</a> is well maintained and you can ask questions in their issue tracker. <a href="https://github.com/mediagis/nominatim-docker/issues?q=docker-compose">https://github.com/mediagis/nominatim-docker/issues?q=docker-compose</a> It's much easier to have a separate database container.</p>
<p>In your docker compose configuration file you'd do something like</p>
<p><code>services:
  nominatim:
    image: ...
    ...
    depends_on:
      - db
  db:
    image: ...
    ...</code></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/81244/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Aug '21, 13:30</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-81244">
</div>
<div class="comment-tools" id="comment-tools-81244">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-81244-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="81282"></a>
<div class="answer answered-by-owner" id="answer-container-81282">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/81282/up/" id="post-81282-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-81282-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/81282/down/" id="post-81282-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks for your reply, I hadn't seen there were issues already open for docker-compose on GitHub (Google didn't direct me there..)
I will try this!</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/81282/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Aug '21, 09:05</strong>
</p>
<img alt="Arusha29's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/7128510c49d32bd84794a8ddc39a5de9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20605/arusha29">Arusha29</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Arusha29 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-81282">
</div>
<div class="comment-tools" id="comment-tools-81282">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-81282-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/81239/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="XQlVgsQ3rEoE6lMedskw2UelIvyRMyJb"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>