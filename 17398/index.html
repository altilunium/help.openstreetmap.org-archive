<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/17398/why-does-our-own-tile-server-sometimes-abort-rendering-tiles">Why does our own tile server sometimes abort rendering tiles?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17398/up/" id="post-17398-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17398-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/17398/down/" id="post-17398-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/17398/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am set up a tile server to render tiles for a Slippy Map which is used in one of our web applications. I used the tutorial <a href="http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/">Manually building a tile server (12 04)</a> to build up the server. For testing, I installed the server on a vm (VMware) on my own PC first. Everything works fine by using "hamburg.osm.bz2". After testing it locally, I set it up on a server vm (Citrix Xenserver, Ubuntu 12.04.1 LTS, Postgres 9.1, 4 CPUs, 4GB RAM) and I used the file "germany.osm.bz2" for the map data.</p>
<p>If I move over the map or zoom in and out I have more often a map like this: <img alt="alt text" src="http://help.openstreetmap.org/upfiles/osm_map.PNG"/></p>
<p>Firebug show's for this tiles a "404 Not Found", but if I type the URL in the address line I can see the Image. If I scroll into the map and out of the map I also the see tile.</p>
<p>I don't have any idea how can I fix it.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-openlayers" href="/tags/openlayers/" rel="tag" title="see questions tagged 'openlayers'">openlayers</a>
<a class="post-tag tag-link-osm_tile" href="/tags/osm_tile/" rel="tag" title="see questions tagged 'osm_tile'">osm_tile</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-slippymap" href="/tags/slippymap/" rel="tag" title="see questions tagged 'slippymap'">slippymap</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>02 Nov '12, 09:43</strong>
</p>
<img alt="marco-2012's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ebe0e0280c4ca913274eed32dd387807?s=32&amp;d=identicon&amp;r=g" width="32">
<p><a href="/users/4716/marco-2012">marco-2012</a><br/>
<span class="score" title="36 reputation points">36</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="marco-2012 has no accepted answers">0%</span>
</p>
</img></div>
</div>
<div class="comments-container" id="comments-container-17398">
</div>
<div class="comment-tools" id="comment-tools-17398">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17398-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/17398/why-does-our-own-tile-server-sometimes-abort-rendering-tiles?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/17398/why-does-our-own-tile-server-sometimes-abort-rendering-tiles?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/17398/why-does-our-own-tile-server-sometimes-abort-rendering-tiles?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/17398/why-does-our-own-tile-server-sometimes-abort-rendering-tiles?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="17399"></a>
<div class="answer accepted-answer" id="answer-container-17399">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17399/up/" id="post-17399-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17399-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/17399/down/" id="post-17399-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/17399/" rel="nofollow" title="marco-2012 has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>My guess is that the first time the tile is rendered it takes too long to be available so you get the 404. By the time you type the URL or zoom in and out the rendering has finished and the tile is available to you. To solve it I guess you get a faster tile renderer or pre-render areas you are most interested in.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/17399/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>02 Nov '12, 10:00</strong>
</p>
<img alt="EdLoach's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f25a8392e12ed696b16554b3d08e4e2b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/339/edloach">EdLoach ♦</a><br/>
<span class="score" title="19478 reputation points"><span class="">19.5k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="156 badges"><span class="silver">●</span><span class="badgecount">156</span></span><span title="280 badges"><span class="bronze">●</span><span class="badgecount">280</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="EdLoach has 93 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-17399">
<a name="17405"></a>
<div class="comment" id="comment-17405">
<div class="comment-score" id="post-17405-score"></div>
<div class="comment-text"><p>What do you mean with a faster tile renderer? To increase the server hardware (RAM etc.)? We will try to pre-render the tiles.</p></div>
<div class="comment-info" id="comment-17405-info">
<span class="comment-age">(02 Nov '12, 12:15)</span>
<a class="comment-user userinfo" href="/users/4716/marco-2012">marco-2012</a>
</div>
</div>
<a name="17409"></a>
<div class="comment" id="comment-17409">
<div class="comment-score" id="post-17409-score"></div>
<div class="comment-text"><p>This is the server yevaud, aka tile.openstreetmap.org <a href="http://wiki.openstreetmap.org/wiki/Servers/yevaud">http://wiki.openstreetmap.org/wiki/Servers/yevaud</a> - I think having the database on the SSD was found to help a lot, but even then complex tiles might still exhibit the behaviour you have seen. If you look elsewhere in these forums you'll see questions about why people can't see their changes - in this case they will often be served a cached (old data) tile if the new tile doesn't render quickly enough (I believe). If there is no tile then they'd get the 404 tile</p></div>
<div class="comment-info" id="comment-17409-info">
<span class="comment-age">(02 Nov '12, 13:10)</span>
<a class="comment-user userinfo" href="/users/339/edloach">EdLoach ♦</a>
</div>
</div>
<a name="17412"></a>
<div class="comment" id="comment-17412">
<div class="comment-score" id="post-17412-score"></div>
<div class="comment-text"><p>We currently can not use a SSD for the database. Thus we will try to pre-render the tiles. May be it will help.</p></div>
<div class="comment-info" id="comment-17412-info">
<span class="comment-age">(02 Nov '12, 13:54)</span>
<a class="comment-user userinfo" href="/users/4716/marco-2012">marco-2012</a>
</div>
</div>
<a name="17432"></a>
<div class="comment" id="comment-17432">
<div class="comment-score" id="post-17432-score">3</div>
<div class="comment-text"><p>You can also increase the timeout for which mod_tile waits for the rendering to complete until it gives up and returns a 404. This is set by the "ModTileMissingRequestTimeout" parameter in the site definition of Apache. The default is set to 10 seconds, but you can set it higher. However, pre-rendering of tiles at least for the low zoom levels (e.g. Z0 - z12) is probably preferred.</p></div>
<div class="comment-info" id="comment-17432-info">
<span class="comment-age">(03 Nov '12, 01:14)</span>
<a class="comment-user userinfo" href="/users/65/apmon">apmon</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-17399">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17399-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/17398/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="wkl0ZNMN7rgeJXDxlt8LGFDdCHzthPsR"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>