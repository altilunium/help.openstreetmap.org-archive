<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/81727/overpass-turbo-request-rejected">Overpass turbo: request rejected</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/81727/up/" id="post-81727-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-81727-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/81727/down/" id="post-81727-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/81727/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Using overpass turbp, I often - but quite irregularly - receive this <strong>error</strong> message:</p>
<p><img alt="alt text" src="https://help.openstreetmap.org/upfiles/err.jpg"/></p>
<p>It says that the request is <strong>rejected</strong> due to "e.g. server not found, request blocked by browser addon, request redirected, internal server errors, etc." I checked browser settings, the query itself, ran it on different devices, checked the status of Overpass etc. Sometimes, it affects even the smallest queries, e.g. the default one when loading overpass turbo.</p>
<p>Here, some more information, there seems to be issues with both XML and Java. The messages are from the browser's <strong>debugging</strong> tool (F12):</p>
<p><img alt="alt text" src="https://help.openstreetmap.org/upfiles/err2.jpg"/></p>
<p>Has someone experienced the same problem (No 'Access-Control-Allow-Origin' header present, Cannot read property 'getBaseLayer')? How did you solve it? It seems always to be related to <em>turbo.4decdd916893e57ee8ff.js</em>. <strong>Thanks for all hints!</strong></p>
<p>Below, all details of the debugging messages in text format:</p>
<pre><code>Access to XMLHttpRequest at 'https://overpass.openstreetmap.fr/api/interpreterinterpreter' from origin 'https://overpass-turbo.eu' has been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource.
turbo.4decdd916893e57ee8ff.js:66 Uncaught TypeError: Cannot read property 'getBaseLayer' of undefined
    at Object.j.a.handlers.onDone (turbo.4decdd916893e57ee8ff.js:66)
    at e (turbo.4decdd916893e57ee8ff.js:40)
    at Object.error (turbo.4decdd916893e57ee8ff.js:40)
    at u (turbo.4decdd916893e57ee8ff.js:24)
    at Object.fireWith [as rejectWith] (turbo.4decdd916893e57ee8ff.js:24)
    at i (turbo.4decdd916893e57ee8ff.js:24)
    at XMLHttpRequest.&lt;anonymous&gt; (turbo.4decdd916893e57ee8ff.js:24)
j.a.handlers.onDone @ turbo.4decdd916893e57ee8ff.js:66
e @ turbo.4decdd916893e57ee8ff.js:40
error @ turbo.4decdd916893e57ee8ff.js:40
u @ turbo.4decdd916893e57ee8ff.js:24
fireWith @ turbo.4decdd916893e57ee8ff.js:24
i @ turbo.4decdd916893e57ee8ff.js:24
(anonymous) @ turbo.4decdd916893e57ee8ff.js:24
error (async)
send @ turbo.4decdd916893e57ee8ff.js:24
ajax @ turbo.4decdd916893e57ee8ff.js:24
run_query @ turbo.4decdd916893e57ee8ff.js:40
(anonymous) @ turbo.4decdd916893e57ee8ff.js:66
(anonymous) @ turbo.4decdd916893e57ee8ff.js:66
e.parse @ turbo.4decdd916893e57ee8ff.js:58
(anonymous) @ turbo.4decdd916893e57ee8ff.js:58
(anonymous) @ turbo.4decdd916893e57ee8ff.js:82
(anonymous) @ turbo.4decdd916893e57ee8ff.js:66
success @ turbo.4decdd916893e57ee8ff.js:66
u @ turbo.4decdd916893e57ee8ff.js:24
fireWith @ turbo.4decdd916893e57ee8ff.js:24
i @ turbo.4decdd916893e57ee8ff.js:24
(anonymous) @ turbo.4decdd916893e57ee8ff.js:24
load (async)
send @ turbo.4decdd916893e57ee8ff.js:24
ajax @ turbo.4decdd916893e57ee8ff.js:24
t @ turbo.4decdd916893e57ee8ff.js:66
e.get @ turbo.4decdd916893e57ee8ff.js:66
e.getBest @ turbo.4decdd916893e57ee8ff.js:66
s @ turbo.4decdd916893e57ee8ff.js:82
e.parse @ turbo.4decdd916893e57ee8ff.js:58
getQuery @ turbo.4decdd916893e57ee8ff.js:66
update_map @ turbo.4decdd916893e57ee8ff.js:66
onRunClick @ turbo.4decdd916893e57ee8ff.js:66
dispatch @ turbo.4decdd916893e57ee8ff.js:24
_.handle @ turbo.4decdd916893e57ee8ff.js:24
turbo.4decdd916893e57ee8ff.js:24 POST <a href="https://overpass.openstreetmap.fr/api/interpreterinterpreter">https://overpass.openstreetmap.fr/api/interpreterinterpreter</a> net::ERR_FAILED
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Sep '21, 16:52</strong>
</p>
<img alt="G%C3%A5seborg's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ffb12f7c2548687764b2de9e4562d2d9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20300/gaseborg">Gåseborg</a><br/>
<span class="score" title="311 reputation points">311</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="16 badges"><span class="bronze">●</span><span class="badgecount">16</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Gåseborg has 4 accepted answers">50%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/81727/">
                edited
                <strong>14 Sep '21, 13:51</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-81727">
</div>
<div class="comment-tools" id="comment-tools-81727">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-81727-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/81727/overpass-turbo-request-rejected?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/81727/overpass-turbo-request-rejected?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/81727/overpass-turbo-request-rejected?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/81727/overpass-turbo-request-rejected?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="82004"></a>
<div class="answer accepted-answer answered-by-owner" id="answer-container-82004">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/82004/up/" id="post-82004-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-82004-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/82004/down/" id="post-82004-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/82004/" rel="nofollow" title="scai has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks to <em>mmd-osm</em>, it works fine now! As explained on <a href="https://github.com/osm-fr/infrastructure/issues/324">https://github.com/osm-fr/infrastructure/issues/324</a>, the main problem was that I had <strong>multiple data sources</strong> in the code including two incorrect ones and one that is running on an older release. Instead of:</p>
<pre><code>// Alternative API
//{{data:overpass,server=<a href="https://overpass.kumi.systems/api/}}">https://overpass.kumi.systems/api/}}</a>
//{{data:overpass,server=<a href="https://overpass-api.de/api/interpreter}}">https://overpass-api.de/api/interpreter}}</a>
//{{data:overpass,server=<a href="https://overpass.openstreetmap.fr/api/interpreter}}">https://overpass.openstreetmap.fr/api/interpreter}}</a>
</code></pre>
<p>it should have been:</p>
<pre><code>// Alternative API
//{{data:overpass,server=<a href="https://overpass.kumi.systems/api/}}">https://overpass.kumi.systems/api/}}</a>
//{{data:overpass,server=<a href="https://overpass-api.de/api/}}">https://overpass-api.de/api/}}</a>
</code></pre>
<p>Even though all these lines were commented out, overpass turbo still works with them and that caused problems. Might be better to use the settings menu of overpass turbo instead and not to add them in the code at all.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/82004/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>30 Sep '21, 12:27</strong>
</p>
<img alt="G%C3%A5seborg's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ffb12f7c2548687764b2de9e4562d2d9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20300/gaseborg">Gåseborg</a><br/>
<span class="score" title="311 reputation points">311</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="16 badges"><span class="bronze">●</span><span class="badgecount">16</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Gåseborg has 4 accepted answers">50%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/82004/">
                edited
                <strong>01 Oct '21, 09:45</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-82004">
<a name="82005"></a>
<div class="comment" id="comment-82005">
<div class="comment-score" id="post-82005-score"></div>
<div class="comment-text"><p>This answer describes what solved my problem. Unfortunately, I cannot mark it as "accepted answer"; could one of the admins please do so, thanks! I hope that marking this question as "answered" can help others that have the same problem and spare those that want to help solving a problem to put more time on this one. Thanks!</p></div>
<div class="comment-info" id="comment-82005-info">
<span class="comment-age">(30 Sep '21, 12:38)</span>
<a class="comment-user userinfo" href="/users/20300/gaseborg">Gåseborg</a>
</div>
</div>
<a name="82010"></a>
<div class="comment" id="comment-82010">
<div class="comment-score" id="post-82010-score"></div>
<div class="comment-text"><p>I have marked it as accepted.</p></div>
<div class="comment-info" id="comment-82010-info">
<span class="comment-age">(30 Sep '21, 13:27)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-82004">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-82004-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="81779"></a>
<div class="answer" id="answer-container-81779">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/81779/up/" id="post-81779-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-81779-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/81779/down/" id="post-81779-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The request is made on <a href="http://overpass-turbo.eu">http://overpass-turbo.eu</a> which seems to contact <a href="https://overpass.openstreetmap.fr">https://overpass.openstreetmap.fr</a> for executing the query. As both servers belong to a different domain, the CORS policy has to allow this. This means that the server on openstreetmap.fr has to allow requests from servers from another domain. Such a CORS policy is typically in place to avoid front-ends with bad intentions from using a back-end server.</p>
<p>In case this does not work, it is a server configuration error. There is nothing you can do as a user of the system. Of course, you can contact the maintainers of that server to inform them about the problem.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/81779/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 Sep '21, 14:03</strong>
</p>
<img alt="escada's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/813a136afe7d4c95fd5bccdd78705e0e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5390/escada">escada</a><br/>
<span class="score" title="19043 reputation points"><span class="">19.0k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="166 badges"><span class="silver">●</span><span class="badgecount">166</span></span><span title="302 badges"><span class="bronze">●</span><span class="badgecount">302</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="escada has 97 accepted answers">21%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-81779">
<a name="81787"></a>
<div class="comment" id="comment-81787">
<div class="comment-score" id="post-81787-score"></div>
<div class="comment-text"><p>Thanks for your answer <a href="https://help.openstreetmap.org/users/5390/escada"></a><a href="https://help.openstreetmap.org/users/5390/escada">@escada</a>! I am wondering whether and how one can specify the server which overpass turbo is contacting. I tried {{data:overpass,server=}} with each of the following: <a href="https://overpass.kumi.systems/api/,">https://overpass.kumi.systems/api/,</a> <a href="https://overpass-api.de/api/interpreter,">https://overpass-api.de/api/interpreter,</a> <a href="https://overpass.openstreetmap.fr/api/interpreter">https://overpass.openstreetmap.fr/api/interpreter</a> which I found on <a href="https://wiki.openstreetmap.org/wiki/Overpass_API#Public_Overpass_API_instances,">https://wiki.openstreetmap.org/wiki/Overpass_API#Public_Overpass_API_instances,</a> but the query always ends up with <a href="https://overpass.openstreetmap.fr/.">https://overpass.openstreetmap.fr/.</a> Funny thing is that the same query on another laptop gets processed by another server and there it works.</p></div>
<div class="comment-info" id="comment-81787-info">
<span class="comment-age">(17 Sep '21, 07:39)</span>
<a class="comment-user userinfo" href="/users/20300/gaseborg">Gåseborg</a>
</div>
</div>
<a name="81788"></a>
<div class="comment" id="comment-81788">
<div class="comment-score" id="post-81788-score">1</div>
<div class="comment-text"><p>Also added the question on the issue reporting page of the French OSM team: overpass.openstreetmap.fr <a href="https://github.com/osm-fr/infrastructure/issues/324#issue-998580758.">https://github.com/osm-fr/infrastructure/issues/324#issue-998580758.</a></p></div>
<div class="comment-info" id="comment-81788-info">
<span class="comment-age">(17 Sep '21, 07:46)</span>
<a class="comment-user userinfo" href="/users/20300/gaseborg">Gåseborg</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-81779">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-81779-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/81727/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="k6gbut4GjTNosLqx2JRgtrsGmFJoe5wW"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>