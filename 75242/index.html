<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/75242/using-nominatim-with-python-geocoder">using nominatim with python geocoder</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/75242/up/" id="post-75242-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-75242-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/75242/down/" id="post-75242-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/75242/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>I've set up Nominatim on an Ubuntu server using the installation documentation. However, it is unclear to me how I actually access this server to geocode. For example, if I wanted to use the python geocoder package (<a href="https://geocoder.readthedocs.io/providers/OpenStreetMap.html),">https://geocoder.readthedocs.io/providers/OpenStreetMap.html),</a> how do I actually access my version of Nominatim? As in, what is the URL I should be directing my search towards? Any help or guideance would be appreciated.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-url" href="/tags/url/" rel="tag" title="see questions tagged 'url'">url</a>
<a class="post-tag tag-link-python" href="/tags/python/" rel="tag" title="see questions tagged 'python'">python</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>09 Jun '20, 15:32</strong>
</p>
<img alt="bsilver's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3a3e3af440ad8ed5385f87e1957d1642?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18525/bsilver">bsilver</a><br/>
<span class="score" title="21 reputation points">21</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="bsilver has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-75242">
</div>
<div class="comment-tools" id="comment-tools-75242">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-75242-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/75242/using-nominatim-with-python-geocoder?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/75242/using-nominatim-with-python-geocoder?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/75242/using-nominatim-with-python-geocoder?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/75242/using-nominatim-with-python-geocoder?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="75243"></a>
<div class="answer" id="answer-container-75243">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/75243/up/" id="post-75243-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-75243-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/75243/down/" id="post-75243-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It depends a bit how the webserver got setup. With <a href="http://nominatim.org/release-docs/latest/appendix/Install-on-Ubuntu-20/#setting-up-the-apache-webserver">http://nominatim.org/release-docs/latest/appendix/Install-on-Ubuntu-20/#setting-up-the-apache-webserver</a> it's likely</p>
<p><a href="http://server-ip-address/nominatim/search.php">http://server-ip-address/nominatim/search.php</a></p>
<p>and you should be able to open that in a browser. For the python module it should be</p>
<p><a href="http://server-ip-address/nominatim/">http://server-ip-address/nominatim/</a></p>
<p>because it adds /search.php or /reverse.php itself.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/75243/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Jun '20, 15:38</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-75243">
<a name="75244"></a>
<div class="comment" id="comment-75244">
<div class="comment-score" id="post-75244-score"></div>
<div class="comment-text"><p>Thanks for this clear answer. The browser address does load a very simple page.</p>
<p>Doing 'http://[server-ip]/nominatim' gets me the same "url does not exist" error that I'd been getting. However, when I add 'search.php' to the end of it, I get a "500 server error," but I'm not sure what could be going wrong. Any ideas of a common reason for this problem?</p></div>
<div class="comment-info" id="comment-75244-info">
<span class="comment-age">(09 Jun '20, 16:50)</span>
<a class="comment-user userinfo" href="/users/18525/bsilver">bsilver</a>
</div>
</div>
<a name="75245"></a>
<div class="comment" id="comment-75245">
<div class="comment-score" id="post-75245-score"></div>
<div class="comment-text"><p>The webserver logfile should show the full error. On Ubuntu look into /var/log/apache2/error.log There is also http://[server-ip]/nominatim/status.php which might have pointers and the <code>cd build; ./utils/check_nominatim_finished.php</code> script.</p></div>
<div class="comment-info" id="comment-75245-info">
<span class="comment-age">(09 Jun '20, 16:52)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="75246"></a>
<div class="comment" id="comment-75246">
<div class="comment-score" id="post-75246-score"></div>
<div class="comment-text"><p>Okay, so the error.log file says "Symbolic link not allowed or link target not accessible" and the status.php page says Database query failed. I also don't see a check_nominatim_finished script in utils... But I'm pretty sure Nominatim installed correctly and the map extract I used (just north america) finished importing</p></div>
<div class="comment-info" id="comment-75246-info">
<span class="comment-age">(09 Jun '20, 19:01)</span>
<a class="comment-user userinfo" href="/users/18525/bsilver">bsilver</a>
</div>
</div>
<a name="75248"></a>
<div class="comment" id="comment-75248">
<div class="comment-score" id="post-75248-score"></div>
<div class="comment-text"><p>I mixed up the name, it's <code>check_import_finished.php</code>. It's only a couple of months old, maybe you installed an older version. In your Apache configuration <code>/etc/apache2/conf-available/nominatim.conf</code> look for the <code>&lt;Directory</code> and <code>alias</code> lines and check if those paths exist. Maybe a simple typo.</p></div>
<div class="comment-info" id="comment-75248-info">
<span class="comment-age">(09 Jun '20, 19:05)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="75249"></a>
<div class="comment" id="comment-75249">
<div class="comment-score" id="post-75249-score"></div>
<div class="comment-text"><p>Oh strange, that file isn't there either, so I must have installed an older version (although I started this process last week). I'd been playing around with the nominatim.conf file earlier - the director line is "/srv/nominatim/build/website" and the alias line is the same with the alias as /nominatim. Seems correct? (/srv/nominatim is where my build directory is)</p>
<p>Thanks for your help with this - I feel like I'm really close!</p></div>
<div class="comment-info" id="comment-75249-info">
<span class="comment-age">(09 Jun '20, 19:18)</span>
<a class="comment-user userinfo" href="/users/18525/bsilver">bsilver</a>
</div>
</div>
<a name="75250"></a>
<div class="comment not_top_scorer" id="comment-75250">
<div class="comment-score" id="post-75250-score"></div>
<div class="comment-text"><p>Looks alright. I have mine in <code>/srv/nominatim/Nominatim/build/website</code> but that depends on which installation instructions you used.</p></div>
<div class="comment-info" id="comment-75250-info">
<span class="comment-age">(09 Jun '20, 19:20)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="75253"></a>
<div class="comment not_top_scorer" id="comment-75253">
<div class="comment-score" id="post-75253-score"></div>
<div class="comment-text"><p>I also tried changing my baseURl in local.php from /nominatim to http://[my-ip]/nominatim/ but that didn't help either. Any other ideas?</p></div>
<div class="comment-info" id="comment-75253-info">
<span class="comment-age">(09 Jun '20, 19:29)</span>
<a class="comment-user userinfo" href="/users/18525/bsilver">bsilver</a>
</div>
</div>
<a name="75260"></a>
<div class="comment not_top_scorer" id="comment-75260">
<div class="comment-score" id="post-75260-score"></div>
<div class="comment-text"><p>You can use <code>cd build; ./utils/query.php</code> to run test queries, which would show if the database imported fine (I'm sure it did). The <code>CONST_Website_BaseURL</code> in <code>local.php</code> is used to create links on the website, that's only relevant once the page is displayed. Check if system users (e.g. the user that starts the Apache webserver) can access the directory: <code>chmod a+x /srv/nominatim/</code> (<a href="http://nominatim.org/release-docs/latest/appendix/Install-on-Ubuntu-20/#creating-dedicated-user-accounts)">http://nominatim.org/release-docs/latest/appendix/Install-on-Ubuntu-20/#creating-dedicated-user-accounts)</a> Maybe you need to add <code>--recursive</code>.</p></div>
<div class="comment-info" id="comment-75260-info">
<span class="comment-age">(10 Jun '20, 01:56)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-75243">
<span class="comments-showing">
            showing 5 of 8
        </span>
<a class="show-all-comments-link" href="#">show 3 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-75243-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="75305"></a>
<div class="answer answered-by-owner" id="answer-container-75305">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/75305/up/" id="post-75305-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-75305-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/75305/down/" id="post-75305-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi <a href="https://help.openstreetmap.org/users/150/mtmail">@mtmail</a>, due to a bug in the website I am unable to view your most recent comment with new troubleshooting suggestions. Are you able to view it and repost it as an answer?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/75305/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Jun '20, 14:25</strong>
</p>
<img alt="bsilver's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3a3e3af440ad8ed5385f87e1957d1642?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18525/bsilver">bsilver</a><br/>
<span class="score" title="21 reputation points">21</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="bsilver has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-75305">
</div>
<div class="comment-tools" id="comment-tools-75305">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-75305-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/75242/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="fXI1uNOHIh9QWF5aEdgU46FtRXNlvArT"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>