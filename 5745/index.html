<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/5745/town-nodes-and-polygons-that-fail-to-confine-the-name-within-an-area">Town nodes and Polygons that fail to confine the Name within an area</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/5745/up/" id="post-5745-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-5745-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/5745/down/" id="post-5745-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/5745/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>If I type a street and town into the search box on the map page the nominatim finds the place on the map correctly but says that the street is in a nearby suburb which is incorrect.</p>
<p>To fix this I have drawn a polygon and named it. This should contain it to its own area but it does not always work. Some mappers think the single node suburbs are the problem. Please try some address in your area for examples. There is also a delay as the nominatim is not being updated at the present time. What are your solutions or ideas on this problem. Note examples are now fixed </p>
<p><em>Edit (extracted from comments):</em></p>
<p>One example:
<a href="http://www.openstreetmap.org/?minlon=-0.171881511807442&amp;minlat=52.3324775695801&amp;maxlon=-0.164698585867882&amp;maxlat=52.335319519043">http://www.openstreetmap.org/?minlon=-0.171881511807442&amp;minlat=52.3324775695801&amp;maxlon=-0.164698585867882&amp;maxlat=52.335319519043</a></p>
<p>This is Hartford Road, Huntingdon, which appears as part of Stukeley Meadows(which is a polygon), whereas Stukeley Meadows is a suburb of Huntingdon. The name also appears in Godmanchester as well.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-boundaries" href="/tags/boundaries/" rel="tag" title="see questions tagged 'boundaries'">boundaries</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-polygons" href="/tags/polygons/" rel="tag" title="see questions tagged 'polygons'">polygons</a>
</div>
<div class="post-controls" id="question-controls">
<div class="community-wiki">
        This question is marked "community wiki".
        
    </div>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Jun '11, 22:42</strong>
</p>
<img alt="andy%20mackey's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/efa7ca36d4499200879223dc5ad5ecac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/644/andy-mackey">andy mackey</a><br/>
<span class="score" title="13238 reputation points"><span class="">13.2k</span></span><span title="87 badges"><span class="badge1">●</span><span class="badgecount">87</span></span><span title="143 badges"><span class="silver">●</span><span class="badgecount">143</span></span><span title="285 badges"><span class="bronze">●</span><span class="badgecount">285</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="andy mackey has 37 accepted answers">4%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/5745/">
                edited
                <strong>18 Jul '12, 11:56</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-5745">
</div>
<div class="comment-tools" id="comment-tools-5745">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-5745-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/5745/town-nodes-and-polygons-that-fail-to-confine-the-name-within-an-area?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/5745/town-nodes-and-polygons-that-fail-to-confine-the-name-within-an-area?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/5745/town-nodes-and-polygons-that-fail-to-confine-the-name-within-an-area?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/5745/town-nodes-and-polygons-that-fail-to-confine-the-name-within-an-area?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="5909"></a>
<div class="answer accepted-answer" id="answer-container-5909">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/5909/up/" id="post-5909-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-5909-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/5909/down/" id="post-5909-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/5909/" rel="nofollow" title="andy mackey has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<blockquote>
<p>To fix this I had to drawn a polygon and name it. This should contain it to its own area but it does not always work.</p>
</blockquote>
<p>This is the key to the problem. Drawing a polygon around a node does not "contain" the node area. Nominatim treats this as two boundaries, one bound by the polygon, and one by the node.</p>
<p>The node area is then estimated, since Nominatim does not have a bounding polygon for it. It makes estimates, and it's often wrong.</p>
<p>If you have a bounding polygon, then you can remove the node. Removing the node should fix your problem once Nominatim comes back online (it's not updating at the moment due to scaling issues discussed in other questions).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/5909/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Jun '11, 19:18</strong>
</p>
<img alt="emacsen's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/5f2082b86cc50d63c05f33f55166df2d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/540/emacsen">emacsen</a><br/>
<span class="score" title="1191 reputation points"><span class="">1.2k</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="23 badges"><span class="bronze">●</span><span class="badgecount">23</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="emacsen has 4 accepted answers">13%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/5909/">
                edited
                <strong>09 Sep '14, 19:21</strong>
</a>
</p>
<img alt="andy%20mackey's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/efa7ca36d4499200879223dc5ad5ecac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/644/andy-mackey">andy mackey</a><br/>
<span class="score" title="13238 reputation points"><span class="">13.2k</span></span><span title="87 badges"><span class="badge1">●</span><span class="badgecount">87</span></span><span title="143 badges"><span class="silver">●</span><span class="badgecount">143</span></span><span title="285 badges"><span class="bronze">●</span><span class="badgecount">285</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-5909">
</div>
<div class="comment-tools" id="comment-tools-5909">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-5909-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="5906"></a>
<div class="answer" id="answer-container-5906">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/5906/up/" id="post-5906-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-5906-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/5906/down/" id="post-5906-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you have questions about Nominatim search results, Nominatim lets you see how it reached its conclusions.</p>
<p>To see it, do your search on <a href="http://nominatim.openstreetmap.org/">http://nominatim.openstreetmap.org/</a> . In the result list, click on "details"; then you'll see exactly how Nominatim reached its conclusions.</p>
<p>In your example, searching for "hartford road, huntingdon" on Nominatim will show you that the OSM DB contains a node called "Stukeley Meadows" ( <a href="http://www.openstreetmap.org/browse/node/280778644">http://www.openstreetmap.org/browse/node/280778644</a>  ).</p>
<p>This node is tagged as <code>place = suburb</code>, and Nominatim apparently automatically considers all objects in the vicinity of a <code>place</code> node to be part of that place. This is probably a heuristic for cases where there is no poylgon for a place.</p>
<p>In this case, as a Nominatim search for "stukeley meadows" shows, there are two objects named "Stukeley meadows": A node tagged <code>place=suburb</code> (see above), and a polygon ( <a href="http://www.openstreetmap.org/browse/way/112836767">http://www.openstreetmap.org/browse/way/112836767</a> ). The latter is probably the polygon you made.</p>
<p>In this case, I believe the best solution is to delete the place node (as the polygon you made is more precise). Then Nominatim should no longer consider Hartford Road to be in Stukeley Meadows.</p>
<p>And BTW, please fix the capitalization of the name in the tags of your polygon :-).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/5906/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Jun '11, 16:43</strong>
</p>
<img alt="sleske's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/6c2dd6a39d3f38f1bb47a8c1fe8325e2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/666/sleske">sleske</a><br/>
<span class="score" title="4090 reputation points"><span class="">4.1k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="56 badges"><span class="silver">●</span><span class="badgecount">56</span></span><span title="78 badges"><span class="bronze">●</span><span class="badgecount">78</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="sleske has 19 accepted answers">24%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-5906">
<a name="5910"></a>
<div class="comment" id="comment-5910">
<div class="comment-score" id="post-5910-score"></div>
<div class="comment-text"><p>thanks sleske for nominatim link I've not used that before.I've heard nodes are required to get place names rendered. ponzu as raised this problem <a href="http://trac.openstreetmap.org/ticket/3679">http://trac.openstreetmap.org/ticket/3679</a> . ideally the nominatim would not give a radius for a place of some unknown size (to me) maybe adjacient polygons will shut out other suburbs I try that out</p></div>
<div class="comment-info" id="comment-5910-info">
<span class="comment-age">(20 Jun '11, 19:22)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-5906">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-5906-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/5745/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="R157iadT37XOXPkm3trZGvbLuXqgCao3"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>