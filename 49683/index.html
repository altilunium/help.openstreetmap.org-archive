<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/49683/overpass-turbo-cycle-route-with-barriers">Overpass Turbo - Cycle route with barriers?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/49683/up/" id="post-49683-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-49683-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/49683/down/" id="post-49683-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/49683/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi - </p>
<p>I'm looking for help on crafting a query on Overpass Turbo. I'm asking for help because I think the query is one which if I get it right will be of real use to people. I want to look at cycle routes, and access barriers (for wheelchair use). I'm interested in barriers to entry/exit to the route, not just barriers actually on the route. </p>
<p>I've made an attempt at this already: <a href="http://overpass-turbo.eu/s/gaR">http://overpass-turbo.eu/s/gaR</a> </p>
<p>There was some substantial guesswork involved, and any Overpass expert will quickly see what's wrong with this I'm sure. It works, but not particularly well. I see the issues as problems in styling - but I'm assuming that the problems are actually because of my very limited understanding when it comes to recursion and combining queries. </p>
<p>Tips would be appreciated - and if anyone feels like crafting the query properly I'll not complain either. Many thanks in advance.</p>
<p>Thanks
Rostranimin</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpassapi" href="/tags/overpassapi/" rel="tag" title="see questions tagged 'overpassapi'">overpassapi</a>
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-wheelchair" href="/tags/wheelchair/" rel="tag" title="see questions tagged 'wheelchair'">wheelchair</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
<a class="post-tag tag-link-accessibility" href="/tags/accessibility/" rel="tag" title="see questions tagged 'accessibility'">accessibility</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>12 May '16, 13:09</strong>
</p>
<img alt="Rostranimin's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d1814013676af3d0c7f9706c209d09d3?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8564/rostranimin">Rostranimin</a><br/>
<span class="score" title="245 reputation points">245</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="12 badges"><span class="bronze">●</span><span class="badgecount">12</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Rostranimin has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-49683">
<a name="49686"></a>
<div class="comment" id="comment-49686">
<div class="comment-score" id="post-49686-score">1</div>
<div class="comment-text"><p>I read your question a couple of times now. Unfortunately I still couldn't figure out, what you're trying to achieve.</p>
<p>Could you explain in simple words, what problem you want to solve? Please don't think about any solutions yet, let alone any Overpass queries, only tell us about the real world problem you had in mind.</p>
<p>In particular, I didn't get what you mean by "barriers to entry/exit to the route" and in what way they are relevant to your problem. Can you provide some illustrative example, maybe even a picture or something?</p></div>
<div class="comment-info" id="comment-49686-info">
<span class="comment-age">(12 May '16, 16:40)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
<a name="49701"></a>
<div class="comment" id="comment-49701">
<div class="comment-score" id="post-49701-score">2</div>
<div class="comment-text"><p>Hi mmd. Sorry if I wasn't clear. The existing Overpass query is probably the quickest way to explain as it's close to what I want, but not very good (styling doesn't work properly for a start).</p>
<p>I want to use Openstreetmap to look for access barriers (related to disability) around cycle routes (i.e. routes mapped by relation). I want to find steps, bollards, gates, and cycle barriers (cycle_barrier) on the actual route, but preferably also beside it. </p>
<p>I'd like to display this on a map to the public. </p>
<p>I want to do this to answer a question I've been asked about a particular cycle route - so I'm proposing to provide a link to a pre-written Overpass-turbo query rather than trying to set up anything more long-term.... although longer term solutions would be interesting too. </p>
<p>I'm keen to use mapcss to give a basic style to the output from Overpass-turbo. </p>
<p>I'd like to set up the query so that the results are as easy to interpret as possible for a new user (so clicking on a displayed point shows the background data).</p>
<p>Thanks for any ideas on this.</p></div>
<div class="comment-info" id="comment-49701-info">
<span class="comment-age">(15 May '16, 12:58)</span>
<a class="comment-user userinfo" href="/users/8564/rostranimin">Rostranimin</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-49683">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-49683-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/49683/overpass-turbo-cycle-route-with-barriers?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/49683/overpass-turbo-cycle-route-with-barriers?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/49683/overpass-turbo-cycle-route-with-barriers?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/49683/overpass-turbo-cycle-route-with-barriers?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="49705"></a>
<div class="answer accepted-answer" id="answer-container-49705">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/49705/up/" id="post-49705-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-49705-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/49705/down/" id="post-49705-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/49705/" rel="nofollow" title="Rostranimin has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks for your detailed explanations! We'll start with fixing the query, once that is done, we can continue styling the results.</p>
<p>I've changed your query in the following ways:</p>
<ul>
<li>Cycling network is only returned for the bbox selected, instead of the whole cycling network, which happens to have a small portion within your bbox. This should highly reduce the amount of data returned.</li>
<li>Fixed the query part for barriers to properly take regular expressions into account ("~" operator instead of "=")</li>
<li>Instead of returning all barriers in your current bbox, I changed to query to only return barriers and steps within close proximity of the cycling network ways (up to 5 meters). This should reduce the number of non-relevant barriers.</li>
<li>To restrict the output to a certain cycling route, simply add an additional <code>[ref=...]</code> to the relation part of the query, like in the following example: <code>relation["route"="bicycle"]["network"="ncn"][ref="62"]</code></li>
</ul>
<p>[see query in overpass turbo, can't copy it here, as it gets completely mangled by the help site]</p>
<p>overpass turbo link: <a href="http://overpass-turbo.eu/s/gfb">http://overpass-turbo.eu/s/gfb</a></p>
<p><em>Note:</em> it is important to not show small features as POI in overpass turbo, otherwise the map will be cluttered with lots of irrelevant details. That's in the Menu underneath Settings -&gt; Map -&gt; Don't display small features as POIs. Enable this setting by clicking on it.</p>
<p>Regarding the styling:</p>
<ul>
<li>highway=crossing etc. is currently shown on the map. Not sure what you want to do with those node on the cycling way, which already have some (unrelated) tags. Assuming you don't want to show those on the map, you could use the following query as a starting point: <a href="http://overpass-turbo.eu/s/gfe">http://overpass-turbo.eu/s/gfe</a></li>
</ul>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/49705/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 May '16, 10:37</strong>
</p>
<img alt="mmd's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/264d84ab05b942224b05960903eba7a7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8708/mmd">mmd</a><br/>
<span class="score" title="5682 reputation points"><span class="">5.7k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="53 badges"><span class="silver">●</span><span class="badgecount">53</span></span><span title="88 badges"><span class="bronze">●</span><span class="badgecount">88</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mmd has 44 accepted answers">37%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/49705/">
                edited
                <strong>16 May '16, 11:08</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-49705">
<a name="49707"></a>
<div class="comment" id="comment-49707">
<div class="comment-score" id="post-49707-score">1</div>
<div class="comment-text"><p>Thank you. I'll need to take a little while to read through these to understand them, but they certainly seem to do the job. These could be really useful to a number of people for real, and it'll be relatively easy for me to work forward with these as a basis (for instance selecting a particular cycle route just as you suggest). I couldn't have done this without help... too many separate ideas to juggle.</p></div>
<div class="comment-info" id="comment-49707-info">
<span class="comment-age">(16 May '16, 22:07)</span>
<a class="comment-user userinfo" href="/users/8564/rostranimin">Rostranimin</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-49705">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-49705-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/49683/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="nzRSUCgzb7POfVQtOXKkWLZL48KNQiO2"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>