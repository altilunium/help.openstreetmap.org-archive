<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/24513/should-i-use-revert-or-undelete-to-restore-deleted-data">Should i use revert or undelete to restore deleted data?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/24513/up/" id="post-24513-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-24513-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/24513/down/" id="post-24513-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/24513/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have to revert a changeset, 16464958, where a user deleted some of the objects. we have agreed on reverting the change. </p>
<p>I see i have two options of reverting or undeleting using JOSM plugins. I want to understand what is the difference in these two. As i understand, reverter will create a new change which is opposite of the change. So i get the old object id and new version. Since it is like normal editing i also get to handle conflicts and review changes before updating.</p>
<p>On trying to revert in JOSM, i am using the Modified object renderer to track the objects to be changed. i see that in buildings the nodes are marked to be reverted by the way is not, whereas the roads are marked to be reverted. Will be buildings be reverted or is it a bug? i have not uploaded yet.</p>
<p>I don't know much about undelete, will it use new version or restore older version? and since it works directly with objects, do i need to restore deleted nodes of a way to restore the way?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-undelete" href="/tags/undelete/" rel="tag" title="see questions tagged 'undelete'">undelete</a>
<a class="post-tag tag-link-version" href="/tags/version/" rel="tag" title="see questions tagged 'version'">version</a>
<a class="post-tag tag-link-revert" href="/tags/revert/" rel="tag" title="see questions tagged 'revert'">revert</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>24 Jul '13, 08:57</strong>
</p>
<img alt="amritkarma's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/651103e616e49724bb139f1a3e0a1a39?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4902/amritkarma">amritkarma</a><br/>
<span class="score" title="684 reputation points">684</span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="29 badges"><span class="silver">●</span><span class="badgecount">29</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="amritkarma has one accepted answer">11%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/24513/">
                edited
                <strong>24 Jul '13, 10:59</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-24513">
<a name="24514"></a>
<div class="comment" id="comment-24514">
<div class="comment-score" id="post-24514-score">1</div>
<div class="comment-text"><p>Please explain which tool you are talking about that offers "reverting" and "undeleting". These actions are not directly implemented in the API, so what exactly the difference is depends on which tool you are using.</p></div>
<div class="comment-info" id="comment-24514-info">
<span class="comment-age">(24 Jul '13, 09:27)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
<a name="24515"></a>
<div class="comment" id="comment-24515">
<div class="comment-score" id="post-24515-score"></div>
<div class="comment-text"><p>(just in case future readers of this question aren't aware of it) there's an API that can be used for testing and development purposes at <a href="http://api06.dev.openstreetmap.org/">http://api06.dev.openstreetmap.org/</a> which you can use for testing the impact of whatever method it is that you're considering using.</p></div>
<div class="comment-info" id="comment-24515-info">
<span class="comment-age">(24 Jul '13, 10:43)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="24516"></a>
<div class="comment" id="comment-24516">
<div class="comment-score" id="post-24516-score">1</div>
<div class="comment-text"><p><a href="/users/104/frederik-ramm"></a><a href="/users/104/frederik-ramm">@Frederik Ramm</a>: Both are JOSM plugins.</p>
<p><a href="/users/387/someoneelse"></a><a href="/users/387/someoneelse">@SomeoneElse</a>: I have tried that, but it failed. maybe because there are no objects with the given ids. Deleted objects should be created, and in history browser in josm i can see negative id on them. But they fail on upload. I'll try uploading individual objects (partial revert), see if it works .</p></div>
<div class="comment-info" id="comment-24516-info">
<span class="comment-age">(24 Jul '13, 11:04)</span>
<a class="comment-user userinfo" href="/users/4902/amritkarma">amritkarma</a>
</div>
</div>
<a name="24523"></a>
<div class="comment" id="comment-24523">
<div class="comment-score" id="post-24523-score"></div>
<div class="comment-text"><p>Yes - with the dev api you'll need to create test data there before you can test deleting it :)</p></div>
<div class="comment-info" id="comment-24523-info">
<span class="comment-age">(24 Jul '13, 12:32)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="24527"></a>
<div class="comment" id="comment-24527">
<div class="comment-score" id="post-24527-score"></div>
<div class="comment-text"><p>i tried uploading individual objects in the dev server and found that JOSM is trying to modify them, instead of create. I saved the changed file before uploading and opened it in a text editor. There are objects for which actions for modify and delete are recorded but not for create.</p></div>
<div class="comment-info" id="comment-24527-info">
<span class="comment-age">(24 Jul '13, 13:08)</span>
<a class="comment-user userinfo" href="/users/4902/amritkarma">amritkarma</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-24513">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-24513-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/24513/should-i-use-revert-or-undelete-to-restore-deleted-data?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/24513/should-i-use-revert-or-undelete-to-restore-deleted-data?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/24513/should-i-use-revert-or-undelete-to-restore-deleted-data?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/24513/should-i-use-revert-or-undelete-to-restore-deleted-data?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="24528"></a>
<div class="answer" id="answer-container-24528">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/24528/up/" id="post-24528-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-24528-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/24528/down/" id="post-24528-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>What I tend to do, if a new mapper has made a complete horlicks of something but has added some genuine new stuff that should be kept, is (after appropriate discussion with the the new mapper) to revert the original changeset but then look at the deletions in that reversion changeset and then undelete those (and fix and join as appropriate - with a new mapper a bit of tidying is to be expected).  I'd tend to use Potlatch 1 or rawedit for undeletes, but "other editors are available".</p>
<p>Re the create vs modify point, you'd expect the reversion plugin to be only doing deletes and modifies because the data either already was there and shouldn't be or already was there but was deleted.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/24528/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Jul '13, 13:13</strong>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SomeoneElse has 228 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-24528">
<a name="24552"></a>
<div class="comment" id="comment-24552">
<div class="comment-score" id="post-24552-score"></div>
<div class="comment-text"><p>the data was there( my edits) then it was deleted (other's edit). Now i need it to be in state i left. Since it is not there now, shouldn't it be created again (maybe with new id)?</p></div>
<div class="comment-info" id="comment-24552-info">
<span class="comment-age">(25 Jul '13, 06:15)</span>
<a class="comment-user userinfo" href="/users/4902/amritkarma">amritkarma</a>
</div>
</div>
<a name="24560"></a>
<div class="comment" id="comment-24560">
<div class="comment-score" id="post-24560-score"></div>
<div class="comment-text"><p>i read the josm_file_format <a href="http://wiki.openstreetmap.org/wiki/JOSM_file_format">http://wiki.openstreetmap.org/wiki/JOSM_file_format</a> which states that create is done by giving negaive id and does not use the action attribute.</p></div>
<div class="comment-info" id="comment-24560-info">
<span class="comment-age">(25 Jul '13, 10:20)</span>
<a class="comment-user userinfo" href="/users/4902/amritkarma">amritkarma</a>
</div>
</div>
<a name="24561"></a>
<div class="comment" id="comment-24561">
<div class="comment-score" id="post-24561-score">1</div>
<div class="comment-text"><p>Well, "deleted" doesn't mean "gone away for ever"; it just means "marked as deleted and not currently appearing in the data".  To take an example from one of my recent changesets, <a href="http://www.openstreetmap.org/browse/way/231022984/history">way 231022984</a> was deleted in <a href="http://www.openstreetmap.org/browse/changeset/17065699">changeset 17065699</a>.  If I was to revert that changeset, the way would be "undeleted" and appear in the data again.  Using the same ID (rather than creating a new one) is much more traceable.</p></div>
<div class="comment-info" id="comment-24561-info">
<span class="comment-age">(25 Jul '13, 10:26)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-24528">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-24528-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="24556"></a>
<div class="answer answered-by-owner" id="answer-container-24556">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/24556/up/" id="post-24556-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-24556-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/24556/down/" id="post-24556-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I have had trials, and i found the undelete plugin more useful. It is lengthy as we have to list out the id and type of object.</p>
<p>I have not thoroughly tested reverter on modified object, but i suppose it works well looking at some of the instances where it was applied during this trial. As for the deleted objects, it restores the nodes, but closed ways are converted to linear feature (maybe the end node is not added).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/24556/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>25 Jul '13, 09:13</strong>
</p>
<img alt="amritkarma's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/651103e616e49724bb139f1a3e0a1a39?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4902/amritkarma">amritkarma</a><br/>
<span class="score" title="684 reputation points">684</span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="29 badges"><span class="silver">●</span><span class="badgecount">29</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="amritkarma has one accepted answer">11%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-24556">
</div>
<div class="comment-tools" id="comment-tools-24556">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-24556-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/24513/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="TN6vc9iRZHzgVEIHzNE4HCSrAxN933nV"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>