<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/80520/what-is-the-best-way-to-download-shapefiles-for-large-amount-of-nominatim-place-ids">What is the best way to download shapefiles for large amount of Nominatim Place Ids?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80520/up/" id="post-80520-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80520-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/80520/down/" id="post-80520-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/80520/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>for a project, I have been collecting a large amount of (about 110k) nominatim bounding boxes and corresponding Place IDs over the span of about a year. </p>
<p>I now need to get the actual geometry from OSM for as many of these as I can. I have thought about using the OSM bulk downloads from data providers such as geofabrik. However, these of course do not have the nominatim identifier but rather the more general OSM identifier (which I am aware is also not stable).</p>
<p>I could also just query the IDs with nominatim again but, if possible, I would want to query such a large amount of data from OSM as do not want to overburden the servers with too many requests.</p>
<p>I would appreciate any suggestion on how to best approach this to keep the server load as minimal as possible.</p>
<p>Thank you so much in advance</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-bulk" href="/tags/bulk/" rel="tag" title="see questions tagged 'bulk'">bulk</a>
<a class="post-tag tag-link-shapefile" href="/tags/shapefile/" rel="tag" title="see questions tagged 'shapefile'">shapefile</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-ids" href="/tags/ids/" rel="tag" title="see questions tagged 'ids'">ids</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>10 Jun '21, 14:48</strong>
</p>
<img alt="FDenker's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/608289a49f79fc0b01c186d197b8005c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20342/fdenker">FDenker</a><br/>
<span class="score" title="16 reputation points">16</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="FDenker has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80520">
<a name="80528"></a>
<div class="comment" id="comment-80528">
<div class="comment-score" id="post-80528-score"></div>
<div class="comment-text"><p>For large scale queries either <a href="https://nominatim.org/release-docs/latest/admin/Installation/">install Nominatim on a local server</a> or use a <a href="https://wiki.openstreetmap.org/wiki/Nominatim#Alternatives_.2F_Third-party_providers">third-party provider</a> or a <a href="https://switch2osm.org/providers/">paid-for provider</a>.</p></div>
<div class="comment-info" id="comment-80528-info">
<span class="comment-age">(11 Jun '21, 09:34)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80520">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80520-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/80520/what-is-the-best-way-to-download-shapefiles-for-large-amount-of-nominatim-place-ids?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/80520/what-is-the-best-way-to-download-shapefiles-for-large-amount-of-nominatim-place-ids?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/80520/what-is-the-best-way-to-download-shapefiles-for-large-amount-of-nominatim-place-ids?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/80520/what-is-the-best-way-to-download-shapefiles-for-large-amount-of-nominatim-place-ids?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="80521"></a>
<div class="answer accepted-answer" id="answer-container-80521">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80521/up/" id="post-80521-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80521-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/80521/down/" id="post-80521-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/80521/" rel="nofollow" title="FDenker has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Place id is not a permanent id, it's not even the same between multiple servers. They also change after a reimport and there was one in the last 12 months. <a href="https://nominatim.org/release-docs/develop/api/Output/#place_id-is-not-a-persistent-id">https://nominatim.org/release-docs/develop/api/Output/#place_id-is-not-a-persistent-id</a></p>
<p>The /lookup API endpoint <a href="https://nominatim.org/release-docs/latest/api/Lookup/">https://nominatim.org/release-docs/latest/api/Lookup/</a> doesn't support place id search, only the /details API endpoint <a href="https://nominatim.org/release-docs/latest/api/Details/">https://nominatim.org/release-docs/latest/api/Details/</a> does. Note the disclaimer " You may not use it in scripts or to automatically query details about a result. "</p>
<p>Using osm_type+osm_id as identifier is better. Those ids might still change but with old data dumps and tools one can usually find out what an old id was referring to.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80521/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Jun '21, 15:51</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80521/">
                edited
                <strong>10 Jun '21, 17:29</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80521">
<a name="80522"></a>
<div class="comment" id="comment-80522">
<div class="comment-score" id="post-80522-score">1</div>
<div class="comment-text"><p>As per usage policy, the details API is definitely off limits for this: <a href="https://operations.osmfoundation.org/policies/nominatim/">https://operations.osmfoundation.org/policies/nominatim/</a> (see section 'Uacceptable Use')</p></div>
<div class="comment-info" id="comment-80522-info">
<span class="comment-age">(10 Jun '21, 16:46)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
<a name="80530"></a>
<div class="comment" id="comment-80530">
<div class="comment-score" id="post-80530-score"></div>
<div class="comment-text"><p>Thank you for your answers. I checked our data again and found that I was mistaken in my belief that we have the Place IDs. We actually do have the OSM ids. I will create another thread because I am still confused as to what these OSM ids actually mean.</p></div>
<div class="comment-info" id="comment-80530-info">
<span class="comment-age">(11 Jun '21, 12:34)</span>
<a class="comment-user userinfo" href="/users/20342/fdenker">FDenker</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80521">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80521-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/80520/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="YylpOaj2jn0LdkGamUv526peT40uIDCc"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>