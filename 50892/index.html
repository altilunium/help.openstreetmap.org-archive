<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/50892/in-josm-how-do-i-create-a-multipolygon-with-multiple-adjacent-inners">In JOSM how do I create a multipolygon with multiple adjacent "inners"</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50892/up/" id="post-50892-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50892-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/50892/down/" id="post-50892-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/50892/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have the following 3 polygons: ABCD, DEFI, IFGH. These are arranged as shown here:</p>
<pre><code>A-------------B
|             |
|   D-----E   |
|   |     |   |
|   I-----F   |
|   |     |   |
|   H-----G   |
|             |
C-------------D
</code></pre>
<p>I want to create a multi polygon with ABCD as the outer and DEFGHI as the inner. If I select all three polygons and use the "Create Multipolygon" tool (Ctrl+B) I then get a validation warning saying "Intersection between multipolygon ways". I understand why this occurs, the two inner polygons share the edge FI.</p>
<p><strong>How do I correctly create the desire multipolygon?</strong></p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-josm" href="/tags/josm/" rel="tag" title="see questions tagged 'josm'">josm</a>
<a class="post-tag tag-link-intersection" href="/tags/intersection/" rel="tag" title="see questions tagged 'intersection'">intersection</a>
<a class="post-tag tag-link-polygon" href="/tags/polygon/" rel="tag" title="see questions tagged 'polygon'">polygon</a>
<a class="post-tag tag-link-multipolygon" href="/tags/multipolygon/" rel="tag" title="see questions tagged 'multipolygon'">multipolygon</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Jul '16, 14:19</strong>
</p>
<img alt="BarnsleyOli's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b372136094bdbf5901a66c8fe1b3a548?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/12402/barnsleyoli">BarnsleyOli</a><br/>
<span class="score" title="91 reputation points">91</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="BarnsleyOli has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50892">
</div>
<div class="comment-tools" id="comment-tools-50892">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50892-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/50892/in-josm-how-do-i-create-a-multipolygon-with-multiple-adjacent-inners?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/50892/in-josm-how-do-i-create-a-multipolygon-with-multiple-adjacent-inners?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/50892/in-josm-how-do-i-create-a-multipolygon-with-multiple-adjacent-inners?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/50892/in-josm-how-do-i-create-a-multipolygon-with-multiple-adjacent-inners?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="50898"></a>
<div class="answer" id="answer-container-50898">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50898/up/" id="post-50898-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50898-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/50898/down/" id="post-50898-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It works perfectly in JOSM.
Draw a polygon ABDCA tag it as natural=wood. Inside that polygon draw polygon DEFID tag it as natural=beach, also draw polygon IFGHI tag it as natural=water, water=lake. Select all three polygons click 'create multipolygon. Check the relation editor to make sure the inners and outer are correct (adjust if neccessary). Job done!</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/50898/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jul '16, 16:31</strong>
</p>
<img alt="BCNorwich's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e3283a6b5f83e16214ec39a1478f64f0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2925/bcnorwich">BCNorwich</a><br/>
<span class="score" title="6299 reputation points"><span class="">6.3k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="BCNorwich has 44 accepted answers">20%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/50898/">
                edited
                <strong>13 Jul '16, 16:33</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50898">
<a name="50904"></a>
<div class="comment" id="comment-50904">
<div class="comment-score" id="post-50904-score"></div>
<div class="comment-text"><p>"adjust if neccessary, Job done!" is a nice solution for various kinds of problems ;)</p></div>
<div class="comment-info" id="comment-50904-info">
<span class="comment-age">(14 Jul '16, 08:19)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-50898">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50898-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="50895"></a>
<div class="answer" id="answer-container-50895">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50895/up/" id="post-50895-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50895-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/50895/down/" id="post-50895-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>There is an example of this in <a href="http://wiki.openstreetmap.org/wiki/Relation:multipolygon">http://wiki.openstreetmap.org/wiki/Relation:multipolygon</a> . <br/>
See 'touching inner rings' and can be a valid osm polygon. <br/>
I haven't mapped one yet, so unsure what problem needs to be overcome to be accepted by the validator. Possibly you need to complete each polygon by reusing the nodes on the shared boundary.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/50895/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jul '16, 14:52</strong>
</p>
<img alt="nevw's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e5674dd96938593e0af5130dfffe0f90?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7380/nevw">nevw</a><br>
<span class="score" title="9843 reputation points"><span class="">9.8k</span></span><span title="26 badges"><span class="badge1">●</span><span class="badgecount">26</span></span><span title="90 badges"><span class="silver">●</span><span class="badgecount">90</span></span><span title="178 badges"><span class="bronze">●</span><span class="badgecount">178</span></span><br>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="nevw has 32 accepted answers">9%</span>
</br></br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/50895/">
                edited
                <strong>13 Jul '16, 15:02</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50895">
<a name="50897"></a>
<div class="comment" id="comment-50897">
<div class="comment-score" id="post-50897-score">1</div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/7380/nevw">@nevw</a> Thanks, I had already read this and the talk page (which gives the example of a lake with a beach both inside a wood). However I couldn't find any advice on what to do where the phrase "The boundary between farmland and lake does not belong to the forest" applies.</p></div>
<div class="comment-info" id="comment-50897-info">
<span class="comment-age">(13 Jul '16, 15:20)</span>
<a class="comment-user userinfo" href="/users/12402/barnsleyoli">BarnsleyOli</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-50895">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50895-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="50896"></a>
<div class="answer" id="answer-container-50896">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50896/up/" id="post-50896-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50896-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/50896/down/" id="post-50896-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi BarnsleyOli, try to make 2 complete inners DEFI &amp; FGHI or try the trick and draw them at a large scale or zoom in and align FI and IF next to each other closely. I presume that you read the Multi pages instructions ?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/50896/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jul '16, 14:59</strong>
</p>
<img alt="Hendrikklaas's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/742e93034cd38ad243f7ab26f350b659?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3443/hendrikklaas">Hendrikklaas</a><br/>
<span class="score" title="9286 reputation points"><span class="">9.3k</span></span><span title="207 badges"><span class="badge1">●</span><span class="badgecount">207</span></span><span title="238 badges"><span class="silver">●</span><span class="badgecount">238</span></span><span title="387 badges"><span class="bronze">●</span><span class="badgecount">387</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Hendrikklaas has 39 accepted answers">5%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50896">
</div>
<div class="comment-tools" id="comment-tools-50896">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50896-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="50902"></a>
<div class="answer" id="answer-container-50902">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50902/up/" id="post-50902-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50902-score" title="current number of votes">
    -1
</div>
<a class="ajax-command post-vote down" href="/vote/50902/down/" id="post-50902-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>A possible solution to avoid touching inner ways is to split inner polygons into three segments, creating three multipolygons as follows:</p>
<p>1)
ABCDA - outer
IDEF - inner
FGHI - inner</p>
<p>2)
IDEF - outer
FI - outer</p>
<p>3)
FGHI - outer
FI - outer</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/50902/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jul '16, 20:19</strong>
</p>
<img alt="Alecs01's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b75c397321b010a8a70f44ab78e7bb44?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7863/alecs01">Alecs01</a><br/>
<span class="score" title="1371 reputation points"><span class="">1.4k</span></span><span title="13 badges"><span class="silver">●</span><span class="badgecount">13</span></span><span title="23 badges"><span class="bronze">●</span><span class="badgecount">23</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Alecs01 has 6 accepted answers">25%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50902">
<a name="50907"></a>
<div class="comment" id="comment-50907">
<div class="comment-score" id="post-50907-score"></div>
<div class="comment-text"><p>While this uses 3 relations, it would work fine, so I don't understand the down-vote.</p></div>
<div class="comment-info" id="comment-50907-info">
<span class="comment-age">(14 Jul '16, 18:29)</span>
<a class="comment-user userinfo" href="/users/8189/alester">alester</a>
</div>
</div>
<a name="50908"></a>
<div class="comment" id="comment-50908">
<div class="comment-score" id="post-50908-score"></div>
<div class="comment-text"><p>I didn't vote it down, but I have found that relations mapped that way are pretty unmanageable.</p>
<p>The problem is the abstraction - "IDEF" and "IF" are just line segments, and don't actually match anything in the real world, whereas DEFID, FGHIF and even DEFGHID all do represent physical features.</p></div>
<div class="comment-info" id="comment-50908-info">
<span class="comment-age">(14 Jul '16, 19:51)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="50909"></a>
<div class="comment" id="comment-50909">
<div class="comment-score" id="post-50909-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/387/someoneelse">@SomeoneElse</a> it adds complexity for sure, it's an edge case to me, slightly better than two touching inner rings. I wasn't aware before there was some discussion on the topic here, and not much consensus: <a href="http://wiki.openstreetmap.org/wiki/Talk:Relation:multipolygon#Touching_inner_rings">http://wiki.openstreetmap.org/wiki/Talk:Relation:multipolygon#Touching_inner_rings</a></p></div>
<div class="comment-info" id="comment-50909-info">
<span class="comment-age">(14 Jul '16, 20:39)</span>
<a class="comment-user userinfo" href="/users/7863/alecs01">Alecs01</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-50902">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50902-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/50892/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="xbPE6umeN0wuv8y2MzN3ZnMGKzyKbLs1"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>