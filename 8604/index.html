<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/8604/mapnik-error-new-in-openstreetmap">mapnik error. New in OpenStreetMap</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8604/up/" id="post-8604-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8604-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/8604/down/" id="post-8604-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/8604/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi, </p>
<p>I'm new using OpenStreetMap and I can't obtein a render map :(</p>
<p>I downloaded only my country: spain.osm
   I'm working on Windows System and mi configuration es:</p>
<pre><code>PostgresSQL + PosGIS + osmosis

Using osmosis I have be able to import de spain.osm into the data base.

Looking in the wiki for how to configure the Mapnik for render I am using the python solution using xml file.
</code></pre>
<p>;** part of the xml file</p>
<pre><code>&lt;Datasource&gt;
  &lt;Parameter name="type"&gt;postgis&lt;/Parameter&gt;
  &lt;Parameter name="host"&gt;localhost&lt;/Parameter&gt;
  &lt;Parameter name="dbname"&gt;osm&lt;/Parameter&gt;
  &lt;Parameter name="user"&gt;postgres&lt;/Parameter&gt;
  &lt;Parameter name="password"&gt;admin&lt;/Parameter&gt;
  &lt;Parameter name="table"&gt;(select ST_Buffer(ST_Centroid(geometry),2) as geometry, name  from world_worldborders) as world&lt;/Parameter&gt;
  &lt;Parameter name="extimate_extent"&gt;false&lt;/Parameter&gt;
  &lt;Parameter name="extent"&gt;-180,-90,180,89.99&lt;/Parameter&gt;
&lt;/Datasource&gt;
</code></pre>
<p>;***</p>
<p>test python file
;<strong>*</strong></p>
<pre><code>from mapnik import *

mapfile = 'test2.xml'
map_output = 'mymap.png'
m = Map(4*1024,4*1024)
load_map(m, mapfile)

bbox=(Envelope( 36.4817,-6.245,36.4518,-6.1443 ))

m.zoom_to_box(bbox)
print "Scale = " , m.scale()
render_to_file(m, map_output)
</code></pre>
<p>;<strong>*</strong>*</p>
<p>When I launch the script I have the issue that world_worldborders table are not in the data base</p>
<p>Searching for the wiki I found that we need to incorporated in the tables the shp files: 
 - 10m-populated-place
 - 110m-admin-0-boundary-lines
 - processed_p
 - shoreline_300
 - world_boundaries-spherical</p>
<p>After insert then using the "PostGIS shapefile and DBF loader", I launch again the python script and I have the following error on the screen:</p>
<p>"not relationship for world_worldborders"</p>
<p>What do I need to do for making work this? </p>
<p>Thanks in advance, 
Manolo </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>23 Oct '11, 20:16</strong>
</p>
<img alt="manolo%20quijano's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e3f3c6eaf7ba6b7517081b485c274d52?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2254/manolo-quijano">manolo quijano</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="manolo quijano has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8604">
</div>
<div class="comment-tools" id="comment-tools-8604">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8604-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/8604/mapnik-error-new-in-openstreetmap?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/8604/mapnik-error-new-in-openstreetmap?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/8604/mapnik-error-new-in-openstreetmap?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/8604/mapnik-error-new-in-openstreetmap?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="8605"></a>
<div class="answer" id="answer-container-8605">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8605/up/" id="post-8605-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8605-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/8605/down/" id="post-8605-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you want to render with mapnik, you have to use osm2pgsql to import osm data. This program does some preprocessing on multipolygons and route relations, and it creates the database fields in the way mapnik expects then.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/8605/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Oct '11, 07:15</strong>
</p>
<img alt="ajoessen's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/baddeab22266e1533be4ba4c9f3deb49?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2221/ajoessen">ajoessen</a><br/>
<span class="score" title="168 reputation points">168</span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="6 badges"><span class="bronze">●</span><span class="badgecount">6</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="ajoessen has one accepted answer">9%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8605">
</div>
<div class="comment-tools" id="comment-tools-8605">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8605-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/8604/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="qvTD8yxdBo7ge17CJB00UI7iEWlFUUs7"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>