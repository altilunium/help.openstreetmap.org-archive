<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/60158/why-does-surrounding-object-not-show-up-as-such">why does surrounding object not show up as such?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60158/up/" id="post-60158-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60158-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/60158/down/" id="post-60158-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/60158/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>referring to the site at 
<a href="https://www.openstreetmap.org/#map=16/46.6548/11.1634">https://www.openstreetmap.org/#map=16/46.6548/11.1634</a></p>
<p>In the center is an industrial zone, which imho is a well defined multipolygon. Also the area is colored to be an industrial zone - so I would think there is no mistake with the area as such. However, when using the object query tool on the buildings standing on the industrial zone, the latter will not show in the surrounding objects. When querying close the border of the industrial zone, the multipolygon surrounding it will show in the nearby objects. I did not find differences to other industrial zones nearby, where query works fine.
 - the ways making up the multipolygon exist and their endpoints are connected and form a ring (one of the ways is defined counterclockwise, the other 3 clockwise, though.
 - The industrial zone does not have a name (most others in the region do, so this might be an issue)
 - some other areas defined by the same user also have the same problem (e.g. the orchard right next to the industrial zone. I really think there is nothing wrong with the definitions - so maybe somehow a failed changeset?
 - The relation does have the &lt;tag k="landuse" v="industrial"/&gt; ande  &lt;tag k="type" v="multipolygon"/&gt;</p>
<p>Note that the issue propagates when exporting the data via osm2pgsql; the buildings will not show to be part of the industrial zone.</p>
<p>So do these multipolygon require a name to show in the surrounding objects or can someone find another issue?</p>
<p>Thank you,</p>
<p>Andi</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-surrounding" href="/tags/surrounding/" rel="tag" title="see questions tagged 'surrounding'">surrounding</a>
<a class="post-tag tag-link-multipolygon" href="/tags/multipolygon/" rel="tag" title="see questions tagged 'multipolygon'">multipolygon</a>
<a class="post-tag tag-link-relation" href="/tags/relation/" rel="tag" title="see questions tagged 'relation'">relation</a>
<a class="post-tag tag-link-query" href="/tags/query/" rel="tag" title="see questions tagged 'query'">query</a>
<a class="post-tag tag-link-area" href="/tags/area/" rel="tag" title="see questions tagged 'area'">area</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>17 Oct '17, 20:59</strong>
</p>
<img alt="achrist1's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad88a06505395064766e7ef833f6bdc2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14327/achrist1">achrist1</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="achrist1 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60158">
<a name="60163"></a>
<div class="comment" id="comment-60163">
<div class="comment-score" id="post-60163-score"></div>
<div class="comment-text"><p>Could the problem be that (as you observed) one of the ways is counterclockwise and the other three are clockwise?  I realise that <a href="https://wiki.openstreetmap.org/wiki/Relation:multipolygon#Usage">the wiki</a> states direction of ways shouldn't matter, but perhaps the renderer's implementation does assume that the endpoint of way N is the startpoint of way N+1.</p></div>
<div class="comment-info" id="comment-60163-info">
<span class="comment-age">(17 Oct '17, 23:51)</span>
<a class="comment-user userinfo" href="/users/13665/dsh4">dsh4</a>
</div>
</div>
<a name="60174"></a>
<div class="comment" id="comment-60174">
<div class="comment-score" id="post-60174-score"></div>
<div class="comment-text"><p>Hi, I think dkiselev's answer is actually spot on. Thanks for your suggestion, though</p></div>
<div class="comment-info" id="comment-60174-info">
<span class="comment-age">(18 Oct '17, 20:34)</span>
<a class="comment-user userinfo" href="/users/14327/achrist1">achrist1</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-60158">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60158-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/60158/why-does-surrounding-object-not-show-up-as-such?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/60158/why-does-surrounding-object-not-show-up-as-such?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/60158/why-does-surrounding-object-not-show-up-as-such?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/60158/why-does-surrounding-object-not-show-up-as-such?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="60164"></a>
<div class="answer" id="answer-container-60164">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60164/up/" id="post-60164-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60164-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/60164/down/" id="post-60164-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You can open dev console and check the networking tab, there are three querries:</p>
<p><a href="https://www.openstreetmap.org/query?lat=46.65684&amp;lon=11.16265&amp;xhr=1">https://www.openstreetmap.org/query?lat=46.65684&amp;lon=11.16265&amp;xhr=1</a> this one seems to generate the template foe the answer translated onto the right language.</p>
<p>Next two are actual data requests made to Overpass API</p>
<p>The closest objects</p>
<pre><code>[timeout:10][out:json];
(
  node(around:22.5,46.65684,11.16265);
  way(around:22.5,46.65684,11.16265)
);
out tags geom(46.65114479792893,11.154974699020386,46.65802297900334,11.171818971633911);
relation(around:22.5,46.65684,11.16265);
out geom(46.65114479792893,11.154974699020386,46.65802297900334,11.171818971633911);
</code></pre>
<p>and surrounding objects:</p>
<pre><code>[timeout:10][out:json];
is_in(46.65684,11.16265)-&gt;.a;
way(pivot.a);
out tags bb;
out ids geom(46.65114479792893,11.154974699020386,46.65802297900334,11.171818971633911);
relation(pivot.a);
out tags bb;
</code></pre>
<p>Here is the description for Overpass QL is_in statement <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#Query_for_areas_.28is_in.29">http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#Query_for_areas_.28is_in.29</a></p>
<p>The important part: </p>
<p><strong>Area creation depends on some specific extraction rules, there's no area counterpart for each and very OSM way or relation!</strong></p>
<p>And here are some details of how the areas for Overpass API are produced <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Areas">http://wiki.openstreetmap.org/wiki/Overpass_API/Areas</a></p>
<p>In the nut shell, 
<strong>it should be named multypoligon/administartive boundary or postal_code area</strong>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/60164/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 Oct '17, 03:31</strong>
</p>
<img alt="dkiselev's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ba776c365d041c46b17224fcb4bc196d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10507/dkiselev">dkiselev</a><br/>
<span class="score" title="16 reputation points">16</span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="dkiselev has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60164">
<a name="60173"></a>
<div class="comment" id="comment-60173">
<div class="comment-score" id="post-60173-score"></div>
<div class="comment-text"><p>Thanks,
but oh boy, this does nowhere show up in the wiki, e.g.
<a href="https://wiki.openstreetmap.org/wiki/Talk:Relation:multipolygon">https://wiki.openstreetmap.org/wiki/Talk:Relation:multipolygon</a>
has even wrong examples, which suggest that the multipolygon tag alone is sufficient to create an area...(or, as always possible, I again prove that I cannot read properly)
Have you got any idea why the name would be so important to define an area?
I mean, I would not be so sure that all industrial zone (all being areas) even have a name. On the other hand I would not think that it is out of the question that a multipolygon road could have a name. So for distinction purposes the name is not so strong. Do you know where I could suggest this to be thought over?
Thanks,</p>
<p>Andreas</p></div>
<div class="comment-info" id="comment-60173-info">
<span class="comment-age">(18 Oct '17, 20:32)</span>
<a class="comment-user userinfo" href="/users/14327/achrist1">achrist1</a>
</div>
</div>
<a name="60176"></a>
<div class="comment" id="comment-60176">
<div class="comment-score" id="post-60176-score"></div>
<div class="comment-text"><p>It's enough to create multypoligon to create an area in OSM terms, but Overpass is actually is separate project it's closely related to OSM but Overpass treats areas little bit different. So it's enough to create multypoligon from OSM perspective but it wouldn't be imported to Overpass database. I know that it's sounds confusing but OSM is more like a collaboration of different projects instead of one solid project.</p></div>
<div class="comment-info" id="comment-60176-info">
<span class="comment-age">(18 Oct '17, 20:52)</span>
<a class="comment-user userinfo" href="/users/10507/dkiselev">dkiselev</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-60164">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60164-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/60158/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="Qc2v13uNFIQfyksgI8fIYFdxlxZHp5nv"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>