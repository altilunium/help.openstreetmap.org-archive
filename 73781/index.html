<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/73781/changing-style-of-the-map">Changing style of the map</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/73781/up/" id="post-73781-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-73781-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/73781/down/" id="post-73781-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/73781/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hey everyone,</p>
<p>I have set up a tile server following this guide <a href="https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/.">https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/.</a> What is the best way to change the style of the map?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-style" href="/tags/style/" rel="tag" title="see questions tagged 'style'">style</a>
<a class="post-tag tag-link-switch2osm" href="/tags/switch2osm/" rel="tag" title="see questions tagged 'switch2osm'">switch2osm</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>26 Mar '20, 20:17</strong>
</p>
<img alt="JonasPonas's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/8861beaab9476d8232a2db4ff00e0bbe?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18040/jonasponas">JonasPonas</a><br/>
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="JonasPonas has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-73781">
<a name="73800"></a>
<div class="comment" id="comment-73800">
<div class="comment-score" id="post-73800-score">1</div>
<div class="comment-text"><p>Hi. Do you want to switch to another style ? In this case I guess you should check that style's doc. Or customize the default one ? In this case you could start with this page : <a href="https://github.com/gravitystorm/openstreetmap-carto/blob/master/CONTRIBUTING.md">https://github.com/gravitystorm/openstreetmap-carto/blob/master/CONTRIBUTING.md</a></p></div>
<div class="comment-info" id="comment-73800-info">
<span class="comment-age">(27 Mar '20, 19:10)</span>
<a class="comment-user userinfo" href="/users/13231/h_mlet">H_mlet</a>
</div>
</div>
<a name="73814"></a>
<div class="comment" id="comment-73814">
<div class="comment-score" id="post-73814-score"></div>
<div class="comment-text"><p>Hey, thanks for the reply. Yes i would like to change the default style and also create my own styles. As I understand I can use Kosmtik to create  Mapnik ready map styles? I tried TileMill, but i could not figure out how to apply Mapnik xml format file, i imported said file and when running renderd it had a lot of errors. If I would fix those errors it should work? Nonetheless, i will try Kosmtik.</p></div>
<div class="comment-info" id="comment-73814-info">
<span class="comment-age">(28 Mar '20, 15:58)</span>
<a class="comment-user userinfo" href="/users/18040/jonasponas">JonasPonas</a>
</div>
</div>
<a name="73831"></a>
<div class="comment" id="comment-73831">
<div class="comment-score" id="post-73831-score">1</div>
<div class="comment-text"><p>Editing pure Mapnik .xml is not to be recommended. Most people use CartoCSS and compile it with carto (the command-line utility).</p></div>
<div class="comment-info" id="comment-73831-info">
<span class="comment-age">(29 Mar '20, 12:01)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
<a name="73839"></a>
<div class="comment" id="comment-73839">
<div class="comment-score" id="post-73839-score">1</div>
<div class="comment-text"><p>A quick note about Tilemill - as I understand it, it was designed originally to handle the editing of CartoCSS map styles.  Unfortunately, OSM's "standard" tile layer has a lot of layers and it was always a bit cumbersome to edit so many layers with Tilemill (they literally didn't all fit on screen).  Tilemill's had some recent redevelopment, so things may have got better, but I'd still suggest working from the command line so that you can see all the moving parts and carefully do one thing at once.</p></div>
<div class="comment-info" id="comment-73839-info">
<span class="comment-age">(29 Mar '20, 13:16)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-73781">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-73781-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/73781/changing-style-of-the-map?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/73781/changing-style-of-the-map?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/73781/changing-style-of-the-map?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/73781/changing-style-of-the-map?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="73838"></a>
<div class="answer accepted-answer" id="answer-container-73838">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/73838/up/" id="post-73838-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-73838-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/73838/down/" id="post-73838-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/73838/" rel="nofollow" title="JonasPonas has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It depends a bit on what sort of style change you're planning - if you want to perform minor changes to an existing style (and I'll assume that we're talking about <a href="https://github.com/gravitystorm/openstreetmap-carto">this one</a> for now), then start with that style, make minor changes to the source files (for example, try changing the colours at the top of <a href="https://github.com/gravitystorm/openstreetmap-carto/blob/master/style/landcover.mss">this file</a>), then:</p>
<ul>
<li>rerun "carto project.mml &gt; mapnik.xml" in the <a href="https://switch2osm.org/serving-tiles/manually-building-a-tile-server-18-04-lts/">switch2osm guide</a>, </li>
<li>restart renderd, </li>
<li>restart apache, </li>
<li>and (probably) remove previously rendered metatiles.  </li>
</ul>
<p>See the last few lines of <a href="https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_carto.sh">this script</a> for what I do when testing style changes.</p>
<p>Important - "carto" won't often flag up errors in the style file when run, so you'll need to keep an eye on your system's logfile to see errors like "... which failed to load" (against a map layer).</p>
<p>If you're changing something in the "lua" script that gets run at data load then you'll need to reload data as well.  I use <a href="https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh">this script</a> for that - you won't want the stuff in there that's specific to the map style I use but the "get a small test area from Geofabrik only when I need a new one" part might be useful.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/73838/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Mar '20, 13:11</strong>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SomeoneElse has 228 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-73838">
<a name="73840"></a>
<div class="comment not_top_scorer" id="comment-73840">
<div class="comment-score" id="post-73840-score"></div>
<div class="comment-text"><p>Hey, thanks for the reply. Could you explain if Kosmtik would make changing styles easier or I dont fully understand <a href="https://github.com/kosmtik/kosmtik?">https://github.com/kosmtik/kosmtik?</a></p></div>
<div class="comment-info" id="comment-73840-info">
<span class="comment-age">(29 Mar '20, 15:10)</span>
<a class="comment-user userinfo" href="/users/18040/jonasponas">JonasPonas</a>
</div>
</div>
<a name="73843"></a>
<div class="comment" id="comment-73843">
<div class="comment-score" id="post-73843-score">1</div>
<div class="comment-text"><p>If I understand correctly the Kosmtik doc, it would replace renderd in your setup. The good point seems to be that changes in the style are rendered quickly. Bad point is that it doesn't support MapCSS, on which the main "openstreetmap-carto" style is based.</p>
<p>Hope this helps, I'm no specialist of these things.</p></div>
<div class="comment-info" id="comment-73843-info">
<span class="comment-age">(29 Mar '20, 16:14)</span>
<a class="comment-user userinfo" href="/users/13231/h_mlet">H_mlet</a>
</div>
</div>
<a name="73849"></a>
<div class="comment not_top_scorer" id="comment-73849">
<div class="comment-score" id="post-73849-score"></div>
<div class="comment-text"><p>Hey, thanks for replying, correct if I am wrong but here it is written that: 
<a href="https://github.com/gravitystorm/openstreetmap-carto">https://github.com/gravitystorm/openstreetmap-carto</a> </p>
<p>These stylesheets can be used in your own cartography projects, and are designed to be easily customised. They work with Kosmtik and also with the command-line CartoCSS processor.</p></div>
<div class="comment-info" id="comment-73849-info">
<span class="comment-age">(30 Mar '20, 08:13)</span>
<a class="comment-user userinfo" href="/users/18040/jonasponas">JonasPonas</a>
</div>
</div>
<a name="73862"></a>
<div class="comment" id="comment-73862">
<div class="comment-score" id="post-73862-score">2</div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/13231/h_mlet">@H_mlet</a> No, osm-carto is based on CartoCSS, not MapCSS.</p></div>
<div class="comment-info" id="comment-73862-info">
<span class="comment-age">(30 Mar '20, 14:30)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
<a name="73864"></a>
<div class="comment" id="comment-73864">
<div class="comment-score" id="post-73864-score">1</div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/18040/jonasponas">@JonasPonas</a> I've never used Kosmtik, but would actually suggest editing everything manually to start with, because if something goes wrong you need people with two sets of knowledge (Kosmtik and CartoCSS) not just one.</p></div>
<div class="comment-info" id="comment-73864-info">
<span class="comment-age">(30 Mar '20, 15:26)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="73868"></a>
<div class="comment" id="comment-73868">
<div class="comment-score" id="post-73868-score">1</div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/5/richard">@Richard</a> Oups, sorry for the confusion. I guess I'm out of my league here.</p>
<p>Is the rest of my remark valid ? That kosmtik is a renderer, like renderd, but more for desktop use ?</p></div>
<div class="comment-info" id="comment-73868-info">
<span class="comment-age">(30 Mar '20, 16:57)</span>
<a class="comment-user userinfo" href="/users/13231/h_mlet">H_mlet</a>
</div>
</div>
<a name="73887"></a>
<div class="comment" id="comment-73887">
<div class="comment-score" id="post-73887-score">2</div>
<div class="comment-text"><p>You're half right! Neither renderd nor Kosmtik are renderers: Mapnik is the renderer. Both Kosmtik and renderd are effectively glue code for Mapnik; they receive requests, fire them off to Mapnik, and then return the result. As you say, Kosmtik is intended for desktop use (and therefore includes a full UI), renderd for server use (no UI, but more performant).</p></div>
<div class="comment-info" id="comment-73887-info">
<span class="comment-age">(31 Mar '20, 12:49)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-73838">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-73838-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/73781/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="497ic7g63zBGRRjTS94ocQ7Mylf8CfnM"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>