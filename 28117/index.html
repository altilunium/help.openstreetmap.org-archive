<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/28117/filter-out-data-that-have-been-edited-after-some-timestamp">Filter out data that have been edited after some timestamp</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28117/up/" id="post-28117-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28117-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/28117/down/" id="post-28117-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/28117/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I want to get data after some <code>timestamp</code>. I have downloaded the osm file of the area. I went through the osmosis documentation but could not find a way to filter it by time.</p>
<p>The result should be same as when we use the <code>timestamp:sometime</code> in JOSM. </p>
<ol>
<li>I could use JOSM but copy pasting in new layer removes old id ad gives new id, also </li>
<li>i could use the overpass but the area is large and overpass timed out many times</li>
</ol>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-filter" href="/tags/filter/" rel="tag" title="see questions tagged 'filter'">filter</a>
<a class="post-tag tag-link-timestamps" href="/tags/timestamps/" rel="tag" title="see questions tagged 'timestamps'">timestamps</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>15 Nov '13, 04:54</strong>
</p>
<img alt="amritkarma's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/651103e616e49724bb139f1a3e0a1a39?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4902/amritkarma">amritkarma</a><br/>
<span class="score" title="684 reputation points">684</span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="29 badges"><span class="silver">●</span><span class="badgecount">29</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="amritkarma has one accepted answer">11%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/28117/">
                edited
                <strong>18 Nov '13, 04:41</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28117">
</div>
<div class="comment-tools" id="comment-tools-28117">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28117-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/28117/filter-out-data-that-have-been-edited-after-some-timestamp?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/28117/filter-out-data-that-have-been-edited-after-some-timestamp?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/28117/filter-out-data-that-have-been-edited-after-some-timestamp?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/28117/filter-out-data-that-have-been-edited-after-some-timestamp?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="28185"></a>
<div class="answer" id="answer-container-28185">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28185/up/" id="post-28185-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28185-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/28185/down/" id="post-28185-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In JOSM, instead of selecting new objects with "timestamp:sometime" and copy them to a new layer loosing their Id's, you could try the opposite: select old objects with "-timestamp:sometime" (the "-" is the reverse option) and delete all of them. Thus, only the most recent elements are staying and you preserve the Id's. But I'm not able to test this method right now, I'm not sure if it works.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/28185/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 Nov '13, 14:47</strong>
</p>
<img alt="Pieren's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0e92f2d89853fd4e04c4b40a921e519b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/87/pieren">Pieren</a><br/>
<span class="score" title="9847 reputation points"><span class="">9.8k</span></span><span title="20 badges"><span class="badge1">●</span><span class="badgecount">20</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="157 badges"><span class="bronze">●</span><span class="badgecount">157</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Pieren has 34 accepted answers">15%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28185">
<a name="28188"></a>
<div class="comment" id="comment-28188">
<div class="comment-score" id="post-28188-score"></div>
<div class="comment-text"><p>They would not be deleted immidiately. They would be marked for deletion and don't show up in josm but they will still exist in the osm file.</p></div>
<div class="comment-info" id="comment-28188-info">
<span class="comment-age">(18 Nov '13, 15:04)</span>
<a class="comment-user userinfo" href="/users/4902/amritkarma">amritkarma</a>
</div>
</div>
<a name="28193"></a>
<div class="comment" id="comment-28193">
<div class="comment-score" id="post-28193-score"></div>
<div class="comment-text"><p>Is this a problem? You could just ignore any element with <code>action='delete'</code> when parsing the XML file.</p></div>
<div class="comment-info" id="comment-28193-info">
<span class="comment-age">(18 Nov '13, 16:33)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="28221"></a>
<div class="comment" id="comment-28221">
<div class="comment-score" id="post-28221-score"></div>
<div class="comment-text"><p>JOSM can also discard data altogehter ("purge") instead of flagging it as deleted.</p></div>
<div class="comment-info" id="comment-28221-info">
<span class="comment-age">(19 Nov '13, 13:33)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-28185">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28185-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="44681"></a>
<div class="answer" id="answer-container-44681">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44681/up/" id="post-44681-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44681-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/44681/down/" id="post-44681-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>For anyone looking to do this on a larger dataset, my approach would be to load the data into PostgreSQL</p>
<pre><code>osmosis --rbf large.osm.pbf --wp database=osm
</code></pre>
<p>Then drop everything that was last touched before / after your desired horizon:</p>
<pre><code>DELETE FROM nodes WHERE tstamp &lt; date '2015-07-01;
DELETE FROM ways WHERE tstamp &lt; date '2015-07-01;
DELETE FROM relations WHERE tstamp &lt; date '2015-07-01;
</code></pre>
<p>Then dump the data to PBF again:</p>
<pre><code>osmosis --rp database=osm --dd --wb after-20150701.osm.pbf
</code></pre>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/44681/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '15, 00:46</strong>
</p>
<img alt="mvexel's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/acea3c9fd5908d7ff09596d16b8724d8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17/mvexel">mvexel</a><br/>
<span class="score" title="762 reputation points">762</span><span title="8 badges"><span class="badge1">●</span><span class="badgecount">8</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="23 badges"><span class="bronze">●</span><span class="badgecount">23</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mvexel has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-44681">
</div>
<div class="comment-tools" id="comment-tools-44681">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44681-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/28117/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="u9NWRzajyU4cDiYUHZyUSi5UOHC0XIAW"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>