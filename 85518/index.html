<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/85518/how-does-nominatim-decide-to-use-a-placesuburb-node">How does Nominatim decide to use a place:suburb node?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/85518/up/" id="post-85518-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-85518-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/85518/down/" id="post-85518-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/85518/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I've tried searching and reading the source code, sorry if I've missed something obvious. The address for <a href="https://nominatim.openstreetmap.org/ui/details.html?osmtype=W&amp;osmid=504486363">way 504486363</a> is associated with the Thamesmead place:suburb node 27485890, and that's good. But the address for <a href="https://nominatim.openstreetmap.org/ui/details.html?osmtype=W&amp;osmid=5181163">way 5181163</a> does not include the Thamesmead suburb, even though I think it is closer to the Thamesmead node (952m as opposed to 1096m for the park). Can someone explain why it is using it one case and not the other? Thanks.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-node" href="/tags/node/" rel="tag" title="see questions tagged 'node'">node</a>
<a class="post-tag tag-link-suburb" href="/tags/suburb/" rel="tag" title="see questions tagged 'suburb'">suburb</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-address" href="/tags/address/" rel="tag" title="see questions tagged 'address'">address</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>01 Sep '22, 14:00</strong>
</p>
<img alt="dracos's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3f8fb91bbecab88b2179670e1baa54b1?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/22182/dracos">dracos</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="dracos has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-85518">
</div>
<div class="comment-tools" id="comment-tools-85518">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-85518-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/85518/how-does-nominatim-decide-to-use-a-placesuburb-node?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/85518/how-does-nominatim-decide-to-use-a-placesuburb-node?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/85518/how-does-nominatim-decide-to-use-a-placesuburb-node?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/85518/how-does-nominatim-decide-to-use-a-placesuburb-node?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="85521"></a>
<div class="answer" id="answer-container-85521">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/85521/up/" id="post-85521-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-85521-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/85521/down/" id="post-85521-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thamesmead only exists as node (<a href="https://www.openstreetmap.org/node/27485890)">https://www.openstreetmap.org/node/27485890)</a> so Nominatim can only guess the boundaries. If you click 'display child places' on <a href="https://nominatim.openstreetmap.org/ui/details.html?osmtype=N&amp;osmid=27485890&amp;class=place">https://nominatim.openstreetmap.org/ui/details.html?osmtype=N&amp;osmid=27485890&amp;class=place</a> you will see all streets associated with the suburb. The column 'distance' indicates that the cut-off is 1 kilometer. Nominatim takes one node of the street to look up the parents, that can fail when streets cross e.g. city or state boundaries, long streets or I'd say here it's off by a couple of 10 meters.</p>
<p>I could point you to lib-sql/functions/ranking.sql for the diameter related logic but it's complex to debug.</p>
<p>Best option forward is to create a suburb relation. The wikipedia article of the place seems quite descriptive about the extend of the surburb.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/85521/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 Sep '22, 15:20</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-85521">
</div>
<div class="comment-tools" id="comment-tools-85521">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-85521-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/85518/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="sy67Erb7jBLB8q8eILh0DSzQn7vA5Qf7"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>