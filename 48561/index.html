<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/48561/setuplog-seems-stuck-on-rank-30">setup.log seems stuck on rank 30..</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/48561/up/" id="post-48561-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-48561-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/48561/down/" id="post-48561-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/48561/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi guys and thanks in advance. I have a 8 gb RAM centos 6.6 machine. I'm trying to install nominatim and indexing european map.. I follow the simple instructions oon wiki guide and, until yesterday, everything seems going fine..</p>
<p>But yesterday when I do <code>tail -f</code> on log file I saw:</p>
<pre><code>Done 54357951 in 1416077 @ 38.386295 per second - Rank 30 ETA (seconds): 136114.046875
Done 54358077 in 1416078 @ 38.386356 per second - Rank 30 ETA (seconds): 136110.546875
Done 54358206 in 1416078 @ 38.386448 per second - Rank 30 ETA (seconds): 136106.859375
</code></pre>
<p>After some hours (and after a day) I repeat the <code>tail -f</code> and same output appear, last row is the same:</p>
<pre><code>Done 54358206 in 1416078 @ 38.386448 per second - Rank 30 ETA (seconds): 136106.859375
</code></pre>
<p>and no progress is been done..</p>
<p>In the other log file (I redirected the output to two file) I can see:</p>
<pre><code>.....................................................................................
Reanalysing database...
ANALYZE
Please download osmosis.
If it is already installed, check the path in your local settings (settings/local.php) file.
ANALYZE
ANALYZE
</code></pre>
<p>What does it mean?? Please say me thats everything goes fine... I started this indexing process approx a month ago..</p>
<hr/>
<p>Are you sure?? because the log show the line below:</p>
<pre><code>Done 54358206 in 1416078 @ 38.386448 per second - Rank 30 ETA (seconds): 136106.859375
</code></pre>
<p>as last line from 3 days...</p>
<p>If I launch the <code>ps auxw|grep postgres</code> I can see some postgres process (for example vacuum, write ecc..) but if I launch <code>ps -aux | more</code> I can't see no process about nominatim or about the original map import command <code>nohup ./utils/setup.php --osm-file &lt;planet file&gt; --all --osm2pgsql-cache 18000 2&gt;&gt;err.log 1&gt;&gt;setup.log &amp;</code></p>
<p>The output of <code>select * from pg_stat_activity</code> is:</p>
<pre><code>postgres=# select * from pg_stat_activity;
datid | datname  |  pid  | usesysid | usename  | application_name | client_addr
| client_hostname | client_port |         backend_start         |          xact
_start           |          query_start          |         state_change
| waiting | state  | backend_xid | backend_xmin |              query

-------+----------+-------+----------+----------+------------------+------------
-+-----------------+-------------+-------------------------------+--------------
-----------------+-------------------------------+------------------------------
-+---------+--------+-------------+--------------+------------------------------
---
13003 | postgres | 14967 |       10 | postgres | psql             |
|                 |          -1 | 2016-03-09 12:25:49.719568+01 | 2016-03-09 12
:26:01.184549+01 | 2016-03-09 12:26:01.184549+01 | 2016-03-09 12:26:01.184556+01
| f       | active |             |     80287794 | select * from pg_stat_activit
y;
(1 row)
</code></pre>
<p>Do you really think is everything ok??</p>
<p>Thanks a lot
Mark</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-europe" href="/tags/europe/" rel="tag" title="see questions tagged 'europe'">europe</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>08 Mar '16, 10:13</strong>
</p>
<img alt="newbies's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/8b8afc2fa4a72009fdf51409cd072c87?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11949/newbies">newbies</a><br/>
<span class="score" title="11 reputation points">11</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="newbies has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/48561/">
                edited
                <strong>09 Mar '16, 11:29</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-48561">
</div>
<div class="comment-tools" id="comment-tools-48561">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-48561-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/48561/setuplog-seems-stuck-on-rank-30?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/48561/setuplog-seems-stuck-on-rank-30?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/48561/setuplog-seems-stuck-on-rank-30?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/48561/setuplog-seems-stuck-on-rank-30?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="48571"></a>
<div class="answer" id="answer-container-48571">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/48571/up/" id="post-48571-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-48571-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/48571/down/" id="post-48571-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Everything is fine. The database still needs to create some indexes most likely (ps auxw|grep postgres will show a couple busy PostgreSQL processes).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/48571/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Mar '16, 14:01</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-48571">
<a name="48573"></a>
<div class="comment" id="comment-48573">
<div class="comment-score" id="post-48573-score">1</div>
<div class="comment-text"><p>Still having the same last line with the same ETA after a day seems strange, doesn't it?</p></div>
<div class="comment-info" id="comment-48573-info">
<span class="comment-age">(08 Mar '16, 14:20)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-48571">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-48571-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/48561/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="11cTrDYSdvhnoHzOambov77v3sw5Kj5C"/>
<div style="clear:both">
</div>
</form>
</hr></div>
</div>
</div>