<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/17995/zip-code-may-be-prevent-locating-address">ZIP code may be prevent locating address</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17995/up/" id="post-17995-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17995-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/17995/down/" id="post-17995-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/17995/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have a problem locating an address (10000 S 400 E, Markleville, IN, 46056).  When I search for 46056 alone it brings up two towns, Emporia and Markleville.  People in Emporia have a 46056 zip code, but they have Markleville addresses.  I suspect that when I search for 46056 that Emporia should not be listed.  If I (incorrectly) change the city in the address above to Emporia the address is correctly plotted on the map.</p>
<p>I think there is some kind of incorrect zip code entry that makes nominatim think that people have Emporia addresses when they should all be Markleville addresses.  What would be the way to correct the problem? </p>
<p>Thanks.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-search" href="/tags/search/" rel="tag" title="see questions tagged 'search'">search</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-address" href="/tags/address/" rel="tag" title="see questions tagged 'address'">address</a>
<a class="post-tag tag-link-zip-code" href="/tags/zip-code/" rel="tag" title="see questions tagged 'zip-code'">zip-code</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>26 Nov '12, 22:37</strong>
</p>
<img alt="Dennis%20Wallen's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/69c21e426e2f19730f0d983a2f1e8847?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5075/dennis-wallen">Dennis Wallen</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Dennis Wallen has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/17995/">
                retagged
                <strong>27 Nov '12, 05:41</strong>
</a>
</p>
<img alt="Circeus's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/01d01832dff61a6bcf68913f1dc001bb?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2838/circeus">Circeus</a><br/>
<span class="score" title="583 reputation points">583</span><span title="9 badges"><span class="badge1">●</span><span class="badgecount">9</span></span><span title="14 badges"><span class="silver">●</span><span class="badgecount">14</span></span><span title="26 badges"><span class="bronze">●</span><span class="badgecount">26</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-17995">
<a name="17999"></a>
<div class="comment" id="comment-17999">
<div class="comment-score" id="post-17999-score"></div>
<div class="comment-text"><p>Why, if you are searching (presumably) for the <em>zipcode alone</em> would it <em>not</em> make sense that the database returns all inhabited places it locates within that zipcode?</p></div>
<div class="comment-info" id="comment-17999-info">
<span class="comment-age">(27 Nov '12, 05:40)</span>
<a class="comment-user userinfo" href="/users/2838/circeus">Circeus</a>
</div>
</div>
<a name="18005"></a>
<div class="comment" id="comment-18005">
<div class="comment-score" id="post-18005-score"></div>
<div class="comment-text"><p>Germany has an interesting concept to solve this problem (and to avoid heuristics that may fail) : it maps boundaries for postal_code areas that frequently do not follow the administrative areas and their hierarchy of admin_level's.</p>
<p>This case is not unique, it exists in many countries, and postcode areas generaly do not evolve at the same time as administrative areas.</p>
<p>The same could be said to regional phone areas (the 3 digits in US and Canada before the local 7-digit phone number).</p></div>
<div class="comment-info" id="comment-18005-info">
<span class="comment-age">(27 Nov '12, 08:35)</span>
<a class="comment-user userinfo" href="/users/1555/verdy_p">Verdy_p</a>
</div>
</div>
<a name="18046"></a>
<div class="comment" id="comment-18046">
<div class="comment-score" id="post-18046-score"></div>
<div class="comment-text"><p>Circeus, there is nothing inherently wrong with returning all cities/towns that share the same zip code.  That could certainly be useful as a feature.</p>
<p>My road has tags that point it to the 46056 zip code so it should be able to figure out that I have a Markleville address.  They are TIGER tags so maybe there needs to be a "postalCode" tag?  When nominatim tries to find me it seems to be insisting that I have an Emporia address.  I think that because it returns Emporia first and then Markleville when searching only by ZIP code.</p>
<p>I'm just trying to figure out how to corretly locate my address.</p></div>
<div class="comment-info" id="comment-18046-info">
<span class="comment-age">(28 Nov '12, 01:10)</span>
<a class="comment-user userinfo" href="/users/5075/dennis-wallen">Dennis Wallen</a>
</div>
</div>
<a name="18068"></a>
<div class="comment" id="comment-18068">
<div class="comment-score" id="post-18068-score">2</div>
<div class="comment-text"><p>You might go to the Nominatim page (<a href="http://nominatim.openstreetmap.org/search)">http://nominatim.openstreetmap.org/search)</a> and enter different terms and see what results you get.  Note that you can click on Details for each result and get more info about it.  So, for example, the zip codes appear to be nodes that aren't in OSM.  There are two nodes for 46056, so there's no reason why Nominatim would know you're in one or the other.  Your address doesn't have a road name (it's x,y style), which is something that might help it determine the correct city (municipal boundaries are parents for roads within them).</p></div>
<div class="comment-info" id="comment-18068-info">
<span class="comment-age">(28 Nov '12, 15:20)</span>
<a class="comment-user userinfo" href="/users/595/neuhausr">neuhausr</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-17995">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17995-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/17995/zip-code-may-be-prevent-locating-address?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/17995/zip-code-may-be-prevent-locating-address?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/17995/zip-code-may-be-prevent-locating-address?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/17995/zip-code-may-be-prevent-locating-address?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="18086"></a>
<div class="answer" id="answer-container-18086">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18086/up/" id="post-18086-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18086-score" title="current number of votes">
    5
</div>
<a class="ajax-command post-vote down" href="/vote/18086/down/" id="post-18086-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The problem with your address is not the postcode but the <a href="http://www.openstreetmap.org/browse/relation/127615">administrative boundary for Markleville</a>. It only encloses the village itself. Road S 400 E is outside the village according to that. Nominatim then messes up a little bit as you can see on the <a href="http://nominatim.openstreetmap.org/details.php?place_id=31403768">details page for the road</a>. It actually places your road into Emporia because it is the closest village that does not have a boundary defined.</p>
<p>To correct the situation, I'd recommend to do two things: add a addr:city=Markleville tag to your street, so that Nominatim knows to which village the road belongs, and then define a proper boundary relation for Emporia, so it knows to which village the road does not belong. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/18086/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>28 Nov '12, 21:00</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18086">
<a name="18117"></a>
<div class="comment" id="comment-18117">
<div class="comment-score" id="post-18117-score"></div>
<div class="comment-text"><p>But DOES this road belong to Markleville adminsitratively? I bet no, otherwise the boundary of Markleville would include the road and its surrounding households. So These households belong to another administrative town/city, Emporia, and Emporia has several ZIPs.</p>
<p>To correct this the Germany solution (which is to map the postal code areas independantly of administrative boundaries) is a good solution. It allows a town to have several postal code areas, or the same postal area covering multiple towns or parts of them. And it's much easier than tagging each address node or street in that area.</p></div>
<div class="comment-info" id="comment-18117-info">
<span class="comment-age">(30 Nov '12, 11:34)</span>
<a class="comment-user userinfo" href="/users/1555/verdy_p">Verdy_p</a>
</div>
</div>
<a name="18118"></a>
<div class="comment" id="comment-18118">
<div class="comment-score" id="post-18118-score"></div>
<div class="comment-text"><p>And effectively, Emporia needs its own administrative boundary (covering that street, even if its postal addresses are handled in Markleville) : here again the postal area of Emporia does not cover the whole administrative town but only a part of it, excluding this street which is in another postal area.</p>
<p>So: add the administrative boundary for Emporia, and add the two distinct boundaries for the postal areas of Emporia and Markleville.
You then don't need to tag the streets to their postal areas, this is implicit. But you still need to associate the households to their street relation.</p></div>
<div class="comment-info" id="comment-18118-info">
<span class="comment-age">(30 Nov '12, 11:41)</span>
<a class="comment-user userinfo" href="/users/1555/verdy_p">Verdy_p</a>
</div>
</div>
<a name="18119"></a>
<div class="comment" id="comment-18119">
<div class="comment-score" id="post-18119-score"></div>
<div class="comment-text"><p>Note also that the admininstrative boundary of the city of Markleville has two small enclaves that are excluded administratively. To which city they belong then administratively? It's unknown (OSM does not specify it for these enclaves), even if they are in the postal area of Markleville (also not specified: Nominatim "guesses" it should be Markleville).</p>
<p>Once again the postal area does not match the admininstrative boundary of the city, and the German solution (mapping separate postal boundary relations) is excellent to cover these cases without complex tagging for each household or street.</p></div>
<div class="comment-info" id="comment-18119-info">
<span class="comment-age">(30 Nov '12, 11:54)</span>
<a class="comment-user userinfo" href="/users/1555/verdy_p">Verdy_p</a>
</div>
</div>
<a name="18120"></a>
<div class="comment" id="comment-18120">
<div class="comment-score" id="post-18120-score">4</div>
<div class="comment-text"><p>As Dennis was looking for the address '10000 S 400 E, Markleville, IN, 46056', I dared to assume that Markleville is part of the postal address for this street even though it may not be within the administrative boundaries of the village. The answer relates to exactly this special case.</p>
<p>The area of the postal code is completely irrelevant here, it is the town name that prevents Nominatim from finding the address. (Nominatim does get the postcode completely right, searching for 'S 400 E, 46056' returns the correct street.)</p></div>
<div class="comment-info" id="comment-18120-info">
<span class="comment-age">(30 Nov '12, 12:43)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-18086">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18086-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/17995/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="jrkWcadAe692dHN4aFENSSVGiLBrlslY"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>