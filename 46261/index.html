<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/46261/is-there-a-way-to-fix-a-mis-ordered-polyline">Is there a way to fix a mis-ordered polyline?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46261/up/" id="post-46261-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46261-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/46261/down/" id="post-46261-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/46261/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I've extracted a number of streets out of OpenStreetMap. I've found that some streets are great to work with, and others cannot be displayed in a polyline format because their coordinates are out of order.</p>
<p>Here's an example of a good street:
<img alt="good street" src="http://i.imgur.com/bGnWG6S.jpg"/></p>
<p>The line (on the left, obviously) matches the coordinates (on the right), and looks the way you'd expect it to.</p>
<p>Here's an example of a bad street:
<img alt="bad street" src="http://i.imgur.com/OGwqOlG.jpg"/></p>
<p>The coordinates (on the bottom left) seem just fine, but once I try to make a polyline out of them (top right) things go crazy.</p>
<p>I think it's because the coordinates (the node entries, from OpenStreetMap) are out of order.</p>
<p>Is this a common issue? Is there a way to correct it?</p>
<p>(The imgur link for the image set is <a href="http://imgur.com/a/dvD3M">http://imgur.com/a/dvD3M</a> - I'm not sure if the individual image links used above will ever change.)</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-nodes" href="/tags/nodes/" rel="tag" title="see questions tagged 'nodes'">nodes</a>
<a class="post-tag tag-link-polyline" href="/tags/polyline/" rel="tag" title="see questions tagged 'polyline'">polyline</a>
<a class="post-tag tag-link-order" href="/tags/order/" rel="tag" title="see questions tagged 'order'">order</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>31 Oct '15, 00:25</strong>
</p>
<img alt="JamesChevalier's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0ada7b97d85873855231744286452af4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7201/jameschevalier">JamesChevalier</a><br/>
<span class="score" title="151 reputation points">151</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="JamesChevalier has one accepted answer">25%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/46261/">
                edited
                <strong>31 Oct '15, 00:34</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-46261">
</div>
<div class="comment-tools" id="comment-tools-46261">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46261-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/46261/is-there-a-way-to-fix-a-mis-ordered-polyline?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/46261/is-there-a-way-to-fix-a-mis-ordered-polyline?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/46261/is-there-a-way-to-fix-a-mis-ordered-polyline?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/46261/is-there-a-way-to-fix-a-mis-ordered-polyline?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="46264"></a>
<div class="answer accepted-answer" id="answer-container-46264">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46264/up/" id="post-46264-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46264-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/46264/down/" id="post-46264-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/46264/" rel="nofollow" title="JamesChevalier has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>As user_5359 suggests, nodes are only ordered within each Openstreetmap way. Your lower image contains multiple ways starting with</p>
<p><a href="http://www.openstreetmap.org/way/8766694">http://www.openstreetmap.org/way/8766694</a> in the north, then</p>
<p><a href="http://www.openstreetmap.org/way/8767452">http://www.openstreetmap.org/way/8767452</a></p>
<p><a href="http://www.openstreetmap.org/way/101458166">http://www.openstreetmap.org/way/101458166</a></p>
<p><a href="http://www.openstreetmap.org/way/101458163">http://www.openstreetmap.org/way/101458163</a></p>
<p><a href="http://www.openstreetmap.org/way/8768186">http://www.openstreetmap.org/way/8768186</a></p>
<p>after which it gets a bit more complicated as there are dual carriageway sections with one way in each direction  (both of which join to that last way I mentioned).</p>
<p><a href="http://www.openstreetmap.org/way/8767828">http://www.openstreetmap.org/way/8767828</a></p>
<p><a href="http://www.openstreetmap.org/way/33824767">http://www.openstreetmap.org/way/33824767</a></p>
<p>If you are trying to draw a route you will need to select the ways that are needed depending on direction of travel, in the correct order, and depending which way the way nodes are ordered you may need to reverse the list for individual ways. In the above example if you were heading north from the one way section you might also want to exclude the section of way 8768186 that you wouldn't travel on when you turn left onto it (most routers pre-process the data I believe).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/46264/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>31 Oct '15, 07:50</strong>
</p>
<img alt="EdLoach's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f25a8392e12ed696b16554b3d08e4e2b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/339/edloach">EdLoach ♦</a><br/>
<span class="score" title="19478 reputation points"><span class="">19.5k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="156 badges"><span class="silver">●</span><span class="badgecount">156</span></span><span title="280 badges"><span class="bronze">●</span><span class="badgecount">280</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="EdLoach has 93 accepted answers">22%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/46264/">
                edited
                <strong>31 Oct '15, 07:50</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-46264">
<a name="46275"></a>
<div class="comment" id="comment-46275">
<div class="comment-score" id="post-46275-score">1</div>
<div class="comment-text"><p>That's the problem! I imported all the individual ways into my database as one one single street object. That works perfectly for my underlying use case, but really jams things up when I try to display them on a map. I kept the OSM ID for each node ... I wonder if there's a way for me to piece together the separate sections with that data ...</p></div>
<div class="comment-info" id="comment-46275-info">
<span class="comment-age">(31 Oct '15, 20:10)</span>
<a class="comment-user userinfo" href="/users/7201/jameschevalier">JamesChevalier</a>
</div>
</div>
<a name="46276"></a>
<div class="comment" id="comment-46276">
<div class="comment-score" id="post-46276-score">2</div>
<div class="comment-text"><p>You really have to reassemble street objects from OSM ways: you cant just treat them as a multilinestring. They need to be manipulated as a graph (which is what most routing software does).</p></div>
<div class="comment-info" id="comment-46276-info">
<span class="comment-age">(31 Oct '15, 20:28)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-46264">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46264-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="46263"></a>
<div class="answer" id="answer-container-46263">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46263/up/" id="post-46263-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46263-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/46263/down/" id="post-46263-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Is that really just one OSM way? The nodes are sorted only within an OSM way. Can you tell us the OSM Way ID, please?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/46263/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>31 Oct '15, 04:16</strong>
</p>
<img alt="user_5359's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/2608aa8e00ed6db4f5d8090f8983fbb8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11635/user_5359">user_5359</a><br/>
<span class="score" title="91 reputation points">91</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="user_5359 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-46263">
</div>
<div class="comment-tools" id="comment-tools-46263">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46263-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/46261/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="Sw4OA3FxgNARkpB9Ob9mKKzOozbjBSsR"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>