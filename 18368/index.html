<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/18368/export-all-boundaries-in-an-area-via-overpass">Export all boundaries in an area via overpass</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18368/up/" id="post-18368-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18368-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/18368/down/" id="post-18368-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/18368/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I want to export all relations with tags such as boundary=administrative and all childs of those relations in a certain area.</p>
<p>I'm using Overpass API, but I get stuck with the variables. My current code looks as following (with Staden as an example, bigger areas will be used once it works):</p>
<pre><code>area[name="Staden"];
(
  node(area);
  &lt;;
) -&gt; .a;
(
  .a rel["boundary"="administrative"];
);
out meta qt;
</code></pre>
<p>But it doesn't work. 'a' is supposed to be a variable holding all features in Staden. And then, according to the documentation I've read, I should be able to use 'a' to get all relations with specific tags in it. </p>
<p>Once I have the relations, they should be completed again so I have an OSM file that can be displayed.</p>
<p>And I hope, once the syntax error is resolved, that the query doesn't include boundaries of neighbour villages. If anyone has an idea on how to get those out, you would be very welcome.</p>
<p>It might also be a good example to put on the wiki.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-export" href="/tags/export/" rel="tag" title="see questions tagged 'export'">export</a>
<a class="post-tag tag-link-area" href="/tags/area/" rel="tag" title="see questions tagged 'area'">area</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>11 Dec '12, 14:52</strong>
</p>
<img alt="Sanderd17's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1fe9a0c696a5000fb304ababea9f83af?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/280/sanderd17">Sanderd17</a><br/>
<span class="score" title="1111 reputation points"><span class="">1.1k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="37 badges"><span class="bronze">●</span><span class="badgecount">37</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Sanderd17 has 15 accepted answers">31%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/18368/">
                edited
                <strong>11 Dec '12, 14:52</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18368">
<a name="18411"></a>
<div class="comment" id="comment-18411">
<div class="comment-score" id="post-18411-score"></div>
<div class="comment-text"><p>Ping, are there no OpenLayers specialists here?</p></div>
<div class="comment-info" id="comment-18411-info">
<span class="comment-age">(13 Dec '12, 13:09)</span>
<a class="comment-user userinfo" href="/users/280/sanderd17">Sanderd17</a>
</div>
</div>
<a name="18414"></a>
<div class="comment" id="comment-18414">
<div class="comment-score" id="post-18414-score">1</div>
<div class="comment-text"><p>OverpassAPI, not OpenLayers. Be a bit more patient, Roland Olbricht is stopping by from time to time. He should be able to help you.</p></div>
<div class="comment-info" id="comment-18414-info">
<span class="comment-age">(13 Dec '12, 13:55)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-18368">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18368-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/18368/export-all-boundaries-in-an-area-via-overpass?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/18368/export-all-boundaries-in-an-area-via-overpass?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/18368/export-all-boundaries-in-an-area-via-overpass?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/18368/export-all-boundaries-in-an-area-via-overpass?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="18510"></a>
<div class="answer accepted-answer" id="answer-container-18510">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18510/up/" id="post-18510-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18510-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/18510/down/" id="post-18510-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/18510/" rel="nofollow" title="Sanderd17 has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Please put the ".a" after "rel". Otherwise, you should have seen a syntax error:</p>
<pre><code>area[name="Staden"];
(
  node(area);
  &lt;;
) -&gt; .a;
(
  rel.a["boundary"="administrative"];
);
out meta qt;
</code></pre>
<p>The syntax is here different from the syntax of "out", because it does something different: It reads "take all relations that are contained in .a and have a tag with the given values". In particular, you could intersect in a query multiple sets like "rel.a.b" which is not possible in the context of "out".</p>
<p>Thank you for asking this question. I'll copy this explanation to the documentation. Please add a link fomr the wiki to this question meanwhile to remind me on this.</p>
<p>I'm sorry for the late answer. I try in general a 24h hour check about relevant questions, but for no apparent reason I missed this one. In such a case, please feel free to write me an email to roland.olbricht at gmx.de.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/18510/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>17 Dec '12, 07:15</strong>
</p>
<img alt="Roland%20Olbricht's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fcfdb0825826fd13d2ff0d83d58819c6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3480/roland-olbricht">Roland Olbricht</a><br/>
<span class="score" title="6666 reputation points"><span class="">6.7k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Roland Olbricht has 40 accepted answers">36%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/18510/">
                edited
                <strong>17 Dec '12, 07:17</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18510">
<a name="18518"></a>
<div class="comment" id="comment-18518">
<div class="comment-score" id="post-18518-score"></div>
<div class="comment-text"><p>No problem, I wasn't in a hurry, it's just that I didn't want the question to fall of the first page.</p>
<p>It works great now.</p></div>
<div class="comment-info" id="comment-18518-info">
<span class="comment-age">(17 Dec '12, 12:13)</span>
<a class="comment-user userinfo" href="/users/280/sanderd17">Sanderd17</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-18510">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18510-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/18368/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="ubtiy43BWVoiEFTSBlgp2bnOvdUTer9q"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>