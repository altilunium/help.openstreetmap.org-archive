<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/11179/wie-haufig-wird-die-standard-karte-auf-osmorg-aktualisiert">Wie häufig wird die Standard-Karte auf OSM.org aktualisiert?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/11179/up/" id="post-11179-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-11179-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/11179/down/" id="post-11179-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/11179/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Wenn ich Änderungen in OSM vornehme, wie lange dauert es, bis diese in der Kartenansicht zu sehen sind? Manchen Änderungen sind sehr schnell zu sehen, andere Male dauert es recht lange, bis diese zu sehen sind. Das kann etwas verwirrend sein, da man nicht weiß, ob man alles richtig gemacht hat.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-map" href="/tags/map/" rel="tag" title="see questions tagged 'map'">map</a>
<a class="post-tag tag-link-rendering" href="/tags/rendering/" rel="tag" title="see questions tagged 'rendering'">rendering</a>
<a class="post-tag tag-link-update" href="/tags/update/" rel="tag" title="see questions tagged 'update'">update</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
<a class="post-tag tag-link-lang-de" href="/tags/lang-de/" rel="tag" title="see questions tagged 'lang-de'">lang-de</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>14 Mar '12, 05:48</strong>
</p>
<img alt="apmon's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/65/apmon">apmon</a><br/>
<span class="score" title="6527 reputation points"><span class="">6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="apmon has 9 accepted answers">20%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/11179/">
                edited
                <strong>30 May '13, 00:31</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-11179">
<a name="11181"></a>
<div class="comment" id="comment-11181">
<div class="comment-score" id="post-11181-score"></div>
<div class="comment-text"><p>This is the German version of the question <a href="http://help.openstreetmap.org/questions/178/how-often-does-the-main-mapnik-map-get-updated">http://help.openstreetmap.org/questions/178/how-often-does-the-main-mapnik-map-get-updated</a></p></div>
<div class="comment-info" id="comment-11181-info">
<span class="comment-age">(14 Mar '12, 07:56)</span>
<a class="comment-user userinfo" href="/users/65/apmon">apmon</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-11179">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-11179-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/11179/wie-haufig-wird-die-standard-karte-auf-osmorg-aktualisiert?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/11179/wie-haufig-wird-die-standard-karte-auf-osmorg-aktualisiert?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/11179/wie-haufig-wird-die-standard-karte-auf-osmorg-aktualisiert?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/11179/wie-haufig-wird-die-standard-karte-auf-osmorg-aktualisiert?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="11180"></a>
<div class="answer answered-by-owner" id="answer-container-11180">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/11180/up/" id="post-11180-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-11180-score" title="current number of votes">
    10
</div>
<a class="ajax-command post-vote down" href="/vote/11180/down/" id="post-11180-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Die Frage bezueglich der Updatefrequenz in OSM ist leider etwas kompliziert und dadurch wohl eine der meist gestellten Fragen ueberhaupt.</p>
<p>Zunaechst einmal ist festzustellen, das Aenderungen sofort in die OSM Datenbank aufgenommen werden und unmittelbar oeffentlich fuer jeden ueber die Daten-API zur Verfuegung stehen. Es gibt kein Review-Prozess der die Daten erst prueft bevor sie akzeptiert werden. Allerdings kann es eine Weile dauern bis die neuen Daten aus der Hauptdatenbank in die diversen auf OSM Daten basierenden Anwendungen uebernommen werden. Dies kann von wenigen Minuten bis mehreren Monaten dauern und ist von Karte zu Karte und Anwendung zu Anwendung sehr verschieden.</p>
<p>Die folgende Antwort bezieht sich insofern nur auf die Standard-Kartenansicht auf OSM.org. (Die Update-Zyklen der Radfahrer-, Transport- und Mapquest Karten, die ebenfalls auf osm.org angezeigt werden, sind bereits verschieden).</p>
<p>Die kurze Antwort auf die Frage ist das in hohen Zoomstufen (Z13 - Z18) die Karte normalerweise innerhalb weniger Minuten bis Stunden neu gerendert wird. Bei niedrigen Zoomstufen (Z4 - Z12) hingegen werden die Updates nur alle paar Wochen neu berechnet, da in diesen Uebersichtskarten die meisten Aenderungen garnicht oder nur kaum sichtbar sind, und die Generierung recht ressourcenintensiv ist. Aenderungen an Kuestenlinien werden ebenfalls nur alle paar Wochen in der Standard Ansicht uebernommen.</p>
<p>Fuer die lange Antwort muss der Prozess etwas genauer erlaeutert werden da dieser etwas kompliziert ist, um zu verstehen wann welche Teile der Karte wieso neu berechnet werden, und somit Aenderungen in der Standard Ansicht erscheinen:</p>
<p>Die Generierung der Karte geschieht von einer Sekundaer- (oder Rendering-) Datenbank. Diese Datenbank muss mit der Hauptdatenbank (in der alle Aenderungen sofort zu sehen sind) synchronisiert werden. Dies geschieht im minuetlichen Rythmus durch so genannte Diff-files mit einer Verzoegerung von ueblicherweise 2 - 3 Minuten nach dem die Aenderungen hoch geladen wurden. In seltenen Faellen kann es durch Stoerung oder Ueberlastung auch in diesem Schritt zu weiteren Verzoegerungen kommen. Die aktuelle Situation kann man im <a href="http://munin.openstreetmap.org/openstreetmap/yevaud.openstreetmap/replication_delay.html">folgenden Graphen</a> betrachten.</p>
<p>Nachdem die Aenderungen in die Renderingdatenbank uebernommen worden sind, muss ermittelt werden welche Teile der Karte (Kartenkachel oder Englisch tiles) sich geaendert haben und somit potenziell neu gerendert werden muessen. Der hierfuer verwendete Algorithmus schaut sich saemtliche Knoten (Nodes) der geaenderten POIs, Wege und Relationen an und ermittelt in welchen Kacheln sich diese Knoten befinden. Diese werden dann zum neu rendern markiert. Obwohl dies in den aller meisten Faellen die korrekten Kacheln ermittelt, kann es in seltenen Faellen (z.B. die Innenflaechen von sehr grossen Polygonen, oder bei Wegen mit sehr weit aus einander liegenden Knoten) dazu kommen das nicht alle betroffenen Kacheln erfasst werden. In diesen Faellen muss manuell interveniert werden (s. Unten) oder gewartet werden bis in der Region weitere Aenderungen die Kacheln zum neu rendern markieren.</p>
<p>Da die Ressourcen des Renderingservers nicht ausreichen um alle geaenderten Kacheln sofort neu zu rendern, werden diese zunaechst nur als veraltet ("dirty") markiert. Nun kommt der Prozess der entscheidet welche Kartenkacheln neu gerendert werden sollen. Dies geschieht auf der Basis von welche Kacheln betrachtet werden. Wenn z.B. jemand die Karte auf osm.org betrachtet und der Browser eine bestimmte Kachel vom Server anfragt, schaut sich der Server an, ob diese Kachel zum neu rendern markiert wurde. Wenn nicht, wird die vorhandene Kachel sofort an den Benutzer ausgeliefert. Wenn doch, sendet der Server eine Anfrage fuer die Kachel an den renderer. Sollte der Renderer diese innerhalb von 3 Sekunden neuberechnet bekommen, wird die aktualisierte Kachel ausgeliefert, ansonsten wird die alte Kachel ausgeliefert und die Kachel wird im Hintergrund weiter gerendert, so das sie beim naechsten Betrachten dann bereits neu gerendert ist.</p>
<p>Allerdings, um den Renderer nicht zu ueberlasten, werden jeweils nur maximal 8 Kacheln gleichzeitig neu gerendert. Sollten mehr Anfragen gleichzeitig herein kommen, werden diese in eine Warteschlange gestellt und dann der Reihe nach im Hintergrund abgearbeitet (wobei Kacheln die noch nie gerendert wurden Prioritaet haben). In diesen Faellen kann es dann zu etwas laengeren Verzoegerungen kommen. Ob es eine Warteschlange gibt, bzw. wie lange diese ist, kann man unter <a href="http://munin.openstreetmap.org/openstreetmap/yevaud.openstreetmap/renderd_queue.html">dem folgenden Graphen sehen</a>. In seltenen Faellen kann der Server so ueberlastet sein, das auch die Warteschlange voll ist (maximal 1000 Kacheln). In diesen Faellen werden die ueberschuessigen Renderanfragen verworfen und die Kachel muss erst neu von einem Benutzer betrachtet werden um eine erneute Renderinganfrage in die Warteschlange zu schicken.</p>
<p>Obwohl dieser Prozess normalerweise alle betrachtete Kacheln innerhalb weniger Stunden nach einer Aenderung neuberechnet hat, kann es unter Umstaenden in selten betrachteten Gegenden deutlich laengere updatezyklen geben, da eine Aktuellisierung der Kacheln erst mit dem ersten Betrachten iniziert wird.</p>
<p>Normalerweise funktioniert dieser Prozess relativ gut und die Kacheln erscheinen relativ aktuell. Allerdings kann es gelegentlich zu Problemen kommen. In diesen Faellen gibt es ein paar Moeglichkeiten in den Prozess manuell einzugreifen. Zunaechst einmal kann man schauen wann eine Kachel zu letzt neu berechnet wurde. Wenn man in der betrachteten Karte rechts klickt und "Copy Image URL" anklickt, erhaelt man einen Link in der folgenden Form: <a href="http://c.tile.openstreetmap.org/17/68747/43834.png">http://c.tile.openstreetmap.org/17/68747/43834.png</a> Um das rendering Datum der Kachel zu betrachten kann man ein "/status" anhaengen, also in diesem Beispiel "http://c.tile.openstreetmap.org/17/68747/43834.png/status". Weiterhin kann man manuell ein neu renderd einer Kachel inizieren in dem man ein "/dirty" anhaengt. Also "http://c.tile.openstreetmap.org/17/68747/43834.png/dirty". Allerdings hat diese manuell angeforderte Aktualisierung die gleiche oder geringere Priorität wie das automatische Rendering durch Betrachtung der Kachel. Insofern ist das Vorgehen nur in seltenen Fällen sinnvoll.</p>
<p>Der hier beschriebene Prozess bezieht sich auf die Zoom stufen Z13 - Z18, also die höheren Zoomstufen. Die Übersichts-Zoomstufen (Z4 - Z12) werden nicht automatisch zum neu rendern markiert. Anstelle dessen werden diese ca. einmal im Monat im Hintergrund neu gerendert, unabhaengig ob sie sich geaendert haben oder betrachtet wurden. Ein manuelles neu rendering durch die oben beschriebenen "/dirty" Methode ist jedoch möglich.</p>
<p>Weiterhin werden Küstenlinien getrennt behandelt. Diese werden nicht direkt aus der Datenbank genommen, sondern müssen in einem separaten Schritt vorverarbeitet werden. Diese Vorverarbeitung geschieht nur ca. einmal am Tag, so dass Änderungen an den Küstenlinien in allen Zoomstufen nur mit recht grosser Verzögerung erscheinen. Da die Änderungen nicht in der Renderingdatenbank enthalten sind, hilft hierbei auch das manuelle Neurendern nichts.</p>
<p>Seit Kurzem kommt noch ein weiterer verkomplizierender Schritt hinzu. Da die <a href="http://munin.openstreetmap.org/openstreetmap/tile.openstreetmap/index.html">Nutzung der OSM Karten</a> stark angestiegen ist, kann der Karten-Server alleine nicht mehr die Auslieferung bewaeltigen. Desshalb sind sogenannte Proxyserver vorgeschaltet die die Kacheln fuer eine Zeit zwischen speichern. Diese Zwischenspeicherung kann zwischen ein paar Stunden und bis zu 6 Tagen liegen und haengt davon ab wann eine Kachel sich zu letzt geaendert hat. Wenn eine Kachel im Proxyserver zwischen gespeichert wurde (z.B. durch Betrachtung bevor man eine Aenderung an den Daten vorgenommen hat), erreicht die Anfrage nicht den Haupt-Kachelserver. Somit kann dieser dann nicht das neurendern inizieren wodurch es leider zu deutlich laengeren Verzoegerungen (in seltenen Faellen eben bis zu 6 Tagen) kommen kann.</p>
<p>Sollten also Änderungen nicht sofort in der Karte erscheinen, ist dieses durchaus normal und kein Grund zur Sorge. Sollten sie nach ein paar Tagen immer noch nicht erschienen sein, sollte man zunaechst einmal den lokalen Browser-cache, sowie die Proxyserver umgehen und wenn das immer noch nicht hilft ein manuelles Rendering inizieren.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/11180/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Mar '12, 07:55</strong>
</p>
<img alt="apmon's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/65/apmon">apmon</a><br/>
<span class="score" title="6527 reputation points"><span class="">6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="apmon has 9 accepted answers">20%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/11180/">
                edited
                <strong>02 Feb '14, 21:24</strong>
</a>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-11180">
</div>
<div class="comment-tools" id="comment-tools-11180">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-11180-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="30401"></a>
<div class="answer" id="answer-container-30401">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/30401/up/" id="post-30401-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-30401-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/30401/down/" id="post-30401-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Aus meiner Erfahrung (zumindest mit meinem Browser Firefox) kann ich sagen, dass eine Verzögerung deiner Karten<em>ansicht</em> heutzutage in den hohen Zoomstufen (nah ran, circa Level 16+) meist daran liegt, dass dein Browser eine alte Version der jeweiligen Kartenkacheln in seinem <em>Cache</em> gespeichert hat (<em>falls</em> du diese Stelle zuvor schon einmal betrachtetest). Drücke, üblicherweise, <kbd>Strg</kbd>+<kbd>F5</kbd> gleichzeitig, um eine neue Version (unter Umgehung des Caches) vom Kartenserver zu laden.</p>
<p>Ein paar Minuten (meist aber unter 10 min) muss man aber damit warten, sonst ist auch auf dem Server noch keine neue Kartenversion erstellt (und man bekommt wieder eine alte Version geliefert). Das ist das, was apmon in seiner Antwort ausführlich beschrieben hat. Besonders die Sache mit "/dirty" habe ich aber noch nie (in nun circa 1,5 Jahren) gebraucht.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/30401/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>02 Feb '14, 22:52</strong>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="aseerel4c26 has 169 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/30401/">
                edited
                <strong>03 Feb '14, 01:13</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-30401">
</div>
<div class="comment-tools" id="comment-tools-30401">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-30401-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/11179/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="pDMP5msTnQ49HRa2Pfp3bmbpIsnxQR2Y"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>