<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/8236/transforming-xml-output-from-xapi-search">Transforming XML output from XAPI search</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8236/up/" id="post-8236-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8236-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/8236/down/" id="post-8236-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/8236/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I want to create a relation for a river. I do a XAPI name tag search and save the XML file in my computer. How do I transform the XML - I need to filter way ids and transform them into XML relation members for input with <a href="http://wiki.openstreetmap.org/wiki/RawEditor">RawEditor</a>. I have an XSLT stylesheet ready but I have trouble displaying the result in Firefox (shows blank page).</p>
<p>The stylesheet is here:</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;
&lt;xsl:output method="xml" indent="yes"/&gt;

&lt;xsl:template match="/osm"&gt;
  &lt;relation&gt;
    &lt;xsl:apply-templates select="way"/&gt;
  &lt;/relation&gt;
&lt;/xsl:template&gt;

&lt;xsl:template match="way"&gt;
  &lt;member type="way" ref="{<a href="/users/260/idoneus">@id</a>}"/&gt;
&lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-xml" href="/tags/xml/" rel="tag" title="see questions tagged 'xml'">xml</a>
<a class="post-tag tag-link-stylesheet" href="/tags/stylesheet/" rel="tag" title="see questions tagged 'stylesheet'">stylesheet</a>
<a class="post-tag tag-link-xapi" href="/tags/xapi/" rel="tag" title="see questions tagged 'xapi'">xapi</a>
<a class="post-tag tag-link-relations" href="/tags/relations/" rel="tag" title="see questions tagged 'relations'">relations</a>
<a class="post-tag tag-link-xslt" href="/tags/xslt/" rel="tag" title="see questions tagged 'xslt'">xslt</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>02 Oct '11, 18:49</strong>
</p>
<img alt="Kozuch's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/7d327873d48d28e563c9ad7259853c35?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/237/kozuch">Kozuch</a><br/>
<span class="score" title="1720 reputation points"><span class="">1.7k</span></span><span title="58 badges"><span class="badge1">●</span><span class="badgecount">58</span></span><span title="72 badges"><span class="silver">●</span><span class="badgecount">72</span></span><span title="85 badges"><span class="bronze">●</span><span class="badgecount">85</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Kozuch has one accepted answer">8%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8236">
</div>
<div class="comment-tools" id="comment-tools-8236">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8236-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/8236/transforming-xml-output-from-xapi-search?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/8236/transforming-xml-output-from-xapi-search?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/8236/transforming-xml-output-from-xapi-search?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/8236/transforming-xml-output-from-xapi-search?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="8249"></a>
<div class="answer" id="answer-container-8249">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8249/up/" id="post-8249-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8249-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/8249/down/" id="post-8249-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I wouldn't worry about XML transformations, myself - you're just after filling in the list for the rawedit upload, so that's a bunch of lines like:</p>
<pre><code>&lt;member type="way" ref="1234" role=""/&gt;
</code></pre>
<p>I'd create a list of ways that you want to use from the XAPI output and then convert into the required "member" list using an editing macro in your favourite text editor.  Obviously you'll then need to check the list of omissions and things that shouldn't be in it manually (have a look at the wiki "browserelation" links).</p>
<p>Then, re-order in the order that you want by following EdLoach's answer to <a href="http://help.openstreetmap.org/questions/8197/re-ordering-ways-in-a-relation">this question</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/8249/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>03 Oct '11, 13:08</strong>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SomeoneElse has 228 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8249">
<a name="8257"></a>
<div class="comment" id="comment-8257">
<div class="comment-score" id="post-8257-score"></div>
<div class="comment-text"><p>I just found an XSL processor called <a href="http://saxon.sourceforge.net/">SAXON</a> which works great with the stylesheet. Or is there easier way how to filter the the ways out of a XAPI search result?</p></div>
<div class="comment-info" id="comment-8257-info">
<span class="comment-age">(03 Oct '11, 13:43)</span>
<a class="comment-user userinfo" href="/users/237/kozuch">Kozuch</a>
</div>
</div>
<a name="8258"></a>
<div class="comment" id="comment-8258">
<div class="comment-score" id="post-8258-score"></div>
<div class="comment-text"><p>To filter the ways out of an XAPI search result, I'd use "grep" (or "find matching lines" in editor-of-your-choice) myself, but if SAXON works for you, that's great too.</p></div>
<div class="comment-info" id="comment-8258-info">
<span class="comment-age">(03 Oct '11, 14:05)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-8249">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8249-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/8236/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="7nv7YeT1jeyLzmzzHsr03D8yJmGxf3zs"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>