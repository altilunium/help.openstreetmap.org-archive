<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/22384/highlight-untagged-and-unconnected-nodes-in-a-way">Highlight untagged and unconnected nodes in a way</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22384/up/" id="post-22384-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22384-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/22384/down/" id="post-22384-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/22384/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>While editing some cities I see a lot of unneeded/excessive nodes.
For example, here:</p>
<p><img alt="Unneeded node" src="http://i.imgur.com/wk4jMHc.png"/></p>
<p>See that the street is straight and the left middle node is unneeded.
I found <a href="https://help.openstreetmap.org/questions/8348/is-there-an-efficient-way-to-delete-excessiveredundant-nodes">question 8348</a> but I just can't select everything and simplify (it can remove valid nodes or just can't remove the node (caused by too high or too low max-error value)) nor I can select everything and straight them too.</p>
<p>While looking at the data with a lower zoom level it's also difficult to spot this small square in JOSM.</p>
<p>Another example:</p>
<p><img alt="Nodes" src="http://i.imgur.com/9IC9H6r.png"/></p>
<p>And the nodes that probably aren't needed:</p>
<p><img alt="Unneeded nodes 2" src="http://i.imgur.com/7ZRBhjk.png"/></p>
<p>So my problem is: is it possible to highlight these kind of nodes in JOSM, please? (nodes that are part of a way, have no tags nor are connected to anything else (another ways, for example)).
Something to display them with a big icon and/or color, like this:</p>
<p><img alt="Highleted" src="http://i.imgur.com/QF4jjQv.png"/></p>
<p>There is no problem that it's an ugly view but I need a quick way to view these possible spurious nodes (so I can then review them manually and remove if needed).</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-highlight" href="/tags/highlight/" rel="tag" title="see questions tagged 'highlight'">highlight</a>
<a class="post-tag tag-link-nodes" href="/tags/nodes/" rel="tag" title="see questions tagged 'nodes'">nodes</a>
<a class="post-tag tag-link-excessive" href="/tags/excessive/" rel="tag" title="see questions tagged 'excessive'">excessive</a>
<a class="post-tag tag-link-unneeded" href="/tags/unneeded/" rel="tag" title="see questions tagged 'unneeded'">unneeded</a>
<a class="post-tag tag-link-remove" href="/tags/remove/" rel="tag" title="see questions tagged 'remove'">remove</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 May '13, 15:29</strong>
</p>
<img alt="naoliv's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c605758904cf00f577053e4e130f89a2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4861/naoliv">naoliv</a><br/>
<span class="score" title="600 reputation points">600</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="19 badges"><span class="bronze">●</span><span class="badgecount">19</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="naoliv has 3 accepted answers">37%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/22384/">
                edited
                <strong>17 May '13, 02:58</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22384">
<a name="22465"></a>
<div class="comment" id="comment-22465">
<div class="comment-score" id="post-22465-score">2</div>
<div class="comment-text"><p>Not every untagged node which is not connected to more than one road is unneeded. In fact, except for the Tiger import and some bad GPX-trace-to-OSM-way conversions most of these nodes are really useful. Besides there is no way to automagically decide whether such a node is unneeded or not.</p></div>
<div class="comment-info" id="comment-22465-info">
<span class="comment-age">(16 May '13, 07:20)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="22471"></a>
<div class="comment" id="comment-22471">
<div class="comment-score" id="post-22471-score"></div>
<div class="comment-text"><p>I know. This is exactly why I need only to highlight the nodes and not an automated process to remove them.
By highlight the nodes I can review them manually.</p></div>
<div class="comment-info" id="comment-22471-info">
<span class="comment-age">(16 May '13, 11:45)</span>
<a class="comment-user userinfo" href="/users/4861/naoliv">naoliv</a>
</div>
</div>
<a name="22472"></a>
<div class="comment" id="comment-22472">
<div class="comment-score" id="post-22472-score"></div>
<div class="comment-text"><p>Although <a href="http://wiki.openstreetmap.org/wiki/JOSM/Search_function">JOSM's search function</a> is very powerful it doesn't seem to support all of your constraints.</p></div>
<div class="comment-info" id="comment-22472-info">
<span class="comment-age">(16 May '13, 12:07)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="22473"></a>
<div class="comment not_top_scorer" id="comment-22473">
<div class="comment-score" id="post-22473-score"></div>
<div class="comment-text"><p>Can some kind of custom map style/MapCSS be created for this?</p></div>
<div class="comment-info" id="comment-22473-info">
<span class="comment-age">(16 May '13, 12:10)</span>
<a class="comment-user userinfo" href="/users/4861/naoliv">naoliv</a>
</div>
</div>
<a name="22474"></a>
<div class="comment" id="comment-22474">
<div class="comment-score" id="post-22474-score">1</div>
<div class="comment-text"><p>I'm not familiar with MapCSS but I guess it is possible given the already different style of single and multiple connected nodes. Still I wouldn't worry too much about them. Removing them is probably not worth the effort. But if you create such a style then publishing it doesn't harm, too :).</p></div>
<div class="comment-info" id="comment-22474-info">
<span class="comment-age">(16 May '13, 12:36)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="22495"></a>
<div class="comment not_top_scorer" id="comment-22495">
<div class="comment-score" id="post-22495-score"></div>
<div class="comment-text"><p>OK, edited the initial question to give a better explanation.
I don't need an automated tool to simplify nor nothing. I just want to have the middle nodes somehow highlighted.</p></div>
<div class="comment-info" id="comment-22495-info">
<span class="comment-age">(17 May '13, 02:57)</span>
<a class="comment-user userinfo" href="/users/4861/naoliv">naoliv</a>
</div>
</div>
<a name="22539"></a>
<div class="comment" id="comment-22539">
<div class="comment-score" id="post-22539-score">2</div>
<div class="comment-text"><p>I think this condition is needed: highlight NodeA if it</p>
<ul>
<li>is member of exactly one way AND</li>
<li>is not a member of a relation AND </li>
<li>has no tags AND</li>
<li>has a node before (A-1) and after (A+1) in the way AND</li>
<li>the absolute difference of (angle to North of the line between NodeA-1 and NodeA the angle to North of the line between NodeA and NodeA+1) is &lt;= $threshold</li>
</ul>
<p>$threshold may be 0 or 0.001 or something (depends on personal taste).</p></div>
<div class="comment-info" id="comment-22539-info">
<span class="comment-age">(18 May '13, 12:09)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-22384">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22384-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/22384/highlight-untagged-and-unconnected-nodes-in-a-way?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/22384/highlight-untagged-and-unconnected-nodes-in-a-way?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/22384/highlight-untagged-and-unconnected-nodes-in-a-way?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/22384/highlight-untagged-and-unconnected-nodes-in-a-way?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="22650"></a>
<div class="answer accepted-answer answered-by-owner" id="answer-container-22650">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22650/up/" id="post-22650-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22650-score" title="current number of votes">
    5
</div>
<a class="ajax-command post-vote down" href="/vote/22650/down/" id="post-22650-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/22650/" rel="nofollow" title="SomeoneElse has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Answering my own question, I did create a <a href="//wiki.openstreetmap.org/wiki/MapCSS">MapCSS</a> style:</p>
<hr/>
<pre><code>way[highway] &gt; node {
  symbol-size:10;
  symbol-shape: square;
  symbol-stroke-color: #00ffff;
  symbol-fill-color: blue;
}

node:connection, node:tagged {
  symbol-size:5;
  symbol-fill-color: #808080;
  symbol-stroke-color: #808080;
}
</code></pre>
<hr/>
<p>The first block will highlight with a blue square every node that is part of a way tagged with highway=* (even nodes that are tagged or connected to other ways, but they are handled after).</p>
<p>Second block will make nodes that are connected to other ways (<em>node:connection</em>) or nodes that have any tags (<em>node:tagged</em>) have a gray color and a smaller size (to stay less noticeable in JOSM).</p>
<p>This:</p>
<p><img alt="Original" src="http://i.imgur.com/sLdZoCy.png"/></p>
<p>Is now seen as this with the style:</p>
<p><img alt="Highlighted" src="http://i.imgur.com/xUfXQsi.png"/></p>
<p>Like aseerel4c26 suggested, missing features are:</p>
<ul>
<li>Ignore initial/final nodes of the way</li>
<li>Ignore highways that are also part of a relation</li>
<li>Highlight only nodes within a certain angle threshold (so real curved ways could be ignored)</li>
</ul>
<p>It is perfectly fitting my needs but any kind of suggestion/improvements are welcome.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/22650/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 May '13, 21:12</strong>
</p>
<img alt="naoliv's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c605758904cf00f577053e4e130f89a2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4861/naoliv">naoliv</a><br/>
<span class="score" title="600 reputation points">600</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="19 badges"><span class="bronze">●</span><span class="badgecount">19</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="naoliv has 3 accepted answers">37%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/22650/">
                edited
                <strong>25 May '13, 00:25</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-22650">
<a name="22652"></a>
<div class="comment" id="comment-22652">
<div class="comment-score" id="post-22652-score">1</div>
<div class="comment-text"><p>Thanks for sharing!</p>
<p>And for those wondering what to do with the junk above... Use a text editor, paste the code, and save it as foo.css (or similar) anywhere. Then add the file path to JOSM in Edit/Preferences/Map Settings/Map Paint Styles.</p>
<p>I've used JOSM for years, but apparently there are still many things to find out. :)</p></div>
<div class="comment-info" id="comment-22652-info">
<span class="comment-age">(22 May '13, 21:39)</span>
<a class="comment-user userinfo" href="/users/652/gnurk">gnurk</a>
</div>
</div>
<a name="22659"></a>
<div class="comment" id="comment-22659">
<div class="comment-score" id="post-22659-score"></div>
<div class="comment-text"><p>Very good, naoliv! For other who don't understand the CSS syntax that good, could you mention (please add it with the "edit" function) what the rule does? It is not as restrictive in highlighting as my suggested conditions (yes, those are not useful as they are, practically) are, right?</p></div>
<div class="comment-info" id="comment-22659-info">
<span class="comment-age">(22 May '13, 23:21)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
<a name="22745"></a>
<div class="comment" id="comment-22745">
<div class="comment-score" id="post-22745-score">1</div>
<div class="comment-text"><p>aseerel4c26, I did edit it like you suggested. And as you said, it doesn't implement all the rules from your other comment (but as it is now, it's perfectly fitting my needs). Thanks!</p></div>
<div class="comment-info" id="comment-22745-info">
<span class="comment-age">(24 May '13, 20:30)</span>
<a class="comment-user userinfo" href="/users/4861/naoliv">naoliv</a>
</div>
</div>
<a name="22750"></a>
<div class="comment" id="comment-22750">
<div class="comment-score" id="post-22750-score">1</div>
<div class="comment-text"><p>Thanks again, <a href="//wiki.openstreetmap.org/w/index.php?title=JOSM/Advanced_Tricks&amp;diff=prev&amp;oldid=907158">ment</a><a href="//wiki.openstreetmap.org/w/index.php?title=MapCSS&amp;diff=prev&amp;oldid=907159">ioned</a> in the relevant (hopefully) wiki pages.</p></div>
<div class="comment-info" id="comment-22750-info">
<span class="comment-age">(25 May '13, 00:32)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-22650">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22650-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="22537"></a>
<div class="answer" id="answer-container-22537">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22537/up/" id="post-22537-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22537-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/22537/down/" id="post-22537-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In your private data version you can remove (or do whatever you want with) these "unneeded" points. But, please, be careful doing similar changes to the OSM source data. There may be some, to us unknown, reasons for uploading these "unneeded"/redundant points by local editors. Besides, the cases you refer to are just a little fraction of the redundant node cases. The node redundancy comes from point replications, colinear (and almost colinear) neighbouring vector/line-segments, cases like ...A,B,C,B,C...C,D..., overlapping (or almost overlapping) ways/polylines in the same or different object classes and so on. The number of "unneeded" nodes in a Planet dump may easily exceed 10**8 (hundred million).</p>
<p>So, my suggestion is, do not worry about these "unneeded" points in the OSM source data. In raster mapping (rendered/pre-rasterized map images on servers) you will never see them. In vector mapping (rendering/rasterization on the clients, parametric data transmission) mappers will remove this redundancy anyway especially in mobile mapping (simply, it is too expensive to transmit them in cellular networks). </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/22537/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 May '13, 08:09</strong>
</p>
<img alt="sanser's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/03cd9ea0efd97a7040fda0d6a76aba8e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3194/sanser">sanser</a><br/>
<span class="score" title="695 reputation points">695</span><span title="38 badges"><span class="badge1">●</span><span class="badgecount">38</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="55 badges"><span class="bronze">●</span><span class="badgecount">55</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="sanser has 2 accepted answers">5%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22537">
<a name="22541"></a>
<div class="comment" id="comment-22541">
<div class="comment-score" id="post-22541-score">2</div>
<div class="comment-text"><p>Sorry if I look rude here (it's really not the intention) but I know what I am doing. In no way I am going to destroy data (and exactly because of this I don't want to use any kind of automated process to remove the nodes).
Like I said before, I just need help in highlighting these nodes.</p>
<p>The majority of the cases that I see in my area are nodes created by new users.</p>
<p>If I am doing some QA work or updating an area, I see no problem in also removing spurious nodes.</p></div>
<div class="comment-info" id="comment-22541-info">
<span class="comment-age">(18 May '13, 14:25)</span>
<a class="comment-user userinfo" href="/users/4861/naoliv">naoliv</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-22537">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22537-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/22384/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="TaYCoV6Vn9MeEuqLuTVbJRvduh952esE"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>