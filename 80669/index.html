<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/80669/im-trying-to-download-the-internal-boundaries-of-nearly-each-country-and-facing-runtime-errors">I'm trying to download the internal boundaries of nearly each country and facing runtime errors.</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80669/up/" id="post-80669-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80669-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80669/down/" id="post-80669-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/80669/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm facing runtime errors for big countries and if it succeeds the browser crashes. I'm actually using this qeury in a python script</p>
<pre><code>[out:json][timeout:350];
    area(3600365331)-&gt;.searchArea;
    (
      way["boundary"="administrative"](area.searchArea);
      relation["boundary"="administrative"](area.searchArea);
    );
     (._;&gt;;);out body;
</code></pre>
<p>Is there anything I'm doing wrong ? or is there any better query for what I want ? 
<a href="https://drive.google.com/file/d/1WGWKxXpW3s0xee-JU2E_9rXL_5vAxIZo/view?usp=sharing">https://drive.google.com/file/d/1WGWKxXpW3s0xee-JU2E_9rXL_5vAxIZo/view?usp=sharing</a> </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-query" href="/tags/query/" rel="tag" title="see questions tagged 'query'">query</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>23 Jun '21, 09:00</strong>
</p>
<img alt="Jad's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/37064a4c6737277dbdc244fd3fdd108e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20405/jad">Jad</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Jad has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80669/">
                edited
                <strong>23 Jun '21, 16:58</strong>
</a>
</p>
<img alt="TZorn's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ddebc8d5f4e0458413eacf65e36561a9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10133/tzorn">TZorn</a><br/>
<span class="score" title="12350 reputation points"><span class="">12.3k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="225 badges"><span class="bronze">●</span><span class="badgecount">225</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-80669">
<a name="80671"></a>
<div class="comment" id="comment-80671">
<div class="comment-score" id="post-80671-score"></div>
<div class="comment-text"><p><a href="https://drive.google.com/file/d/1WGWKxXpW3s0xee-JU2E_9rXL_5vAxIZo/view?usp=sharing">https://drive.google.com/file/d/1WGWKxXpW3s0xee-JU2E_9rXL_5vAxIZo/view?usp=sharing</a> 
This is an instance</p></div>
<div class="comment-info" id="comment-80671-info">
<span class="comment-age">(23 Jun '21, 09:02)</span>
<a class="comment-user userinfo" href="/users/20405/jad">Jad</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80669">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80669-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/80669/im-trying-to-download-the-internal-boundaries-of-nearly-each-country-and-facing-runtime-errors?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/80669/im-trying-to-download-the-internal-boundaries-of-nearly-each-country-and-facing-runtime-errors?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/80669/im-trying-to-download-the-internal-boundaries-of-nearly-each-country-and-facing-runtime-errors?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/80669/im-trying-to-download-the-internal-boundaries-of-nearly-each-country-and-facing-runtime-errors?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="80673"></a>
<div class="answer" id="answer-container-80673">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80673/up/" id="post-80673-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80673-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/80673/down/" id="post-80673-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Have a look at <a href="https://osm-boundaries.com/">https://osm-boundaries.com/</a> On the left-hand side in the country structure you can right-click and select all children (or only those you need). After clicking the download button you'll be asked which data format you require.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80673/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>23 Jun '21, 11:19</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80673">
</div>
<div class="comment-tools" id="comment-tools-80673">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80673-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="80683"></a>
<div class="answer" id="answer-container-80683">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80683/up/" id="post-80683-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80683-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80683/down/" id="post-80683-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hello.</p>
<p>Boundaries <strong>are</strong> huge, thus I think mtmail's answer is probably the best way.</p>
<p>But if you really need to go through overpass, first you should simplify your request. You don't need to ask for the ways, as they will be children of the relation. That should lighten the burden of the server if you don't ask the same objects twice.</p>
<p>Then, the search area is not precise enough, in your example (targeting Italy) I got the whole boundary of France and some of its regions. Maybe "is_in" might be better.</p>
<p>Also, do you really need every kind of boundaries there is ? National parks, municipality, voting zones, and so on. Maybe you could filter with admin_level. Trouble is that it's not totally consistent across every country, but I think it's thoroughly documented in the wiki (<a href="https://wiki.openstreetmap.org/wiki/Key:boundary">boundary</a>, <a href="https://wiki.openstreetmap.org/wiki/Key:admin_level">admin_level</a> and subpages).</p>
<p>Good luck.</p>
<p>Regards.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80683/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Jun '21, 11:05</strong>
</p>
<img alt="H_mlet's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9434692e9afccaf03af5acf20b3a3279?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/13231/h_mlet">H_mlet</a><br/>
<span class="score" title="5443 reputation points"><span class="">5.4k</span></span><span title="17 badges"><span class="silver">●</span><span class="badgecount">17</span></span><span title="81 badges"><span class="bronze">●</span><span class="badgecount">81</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="H_mlet has 40 accepted answers">13%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80683">
</div>
<div class="comment-tools" id="comment-tools-80683">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80683-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="80688"></a>
<div class="answer" id="answer-container-80688">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80688/up/" id="post-80688-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80688-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/80688/down/" id="post-80688-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>First, a general point: Could contributors, other than the OP, not alter the original question. It can make any replies appear to be nonsense &amp; confuse those trying to learn. A part of Jad's problem was the syntax of the code. To correct it, an Answer should have been provided.</p>
<p>There are two answers to this Q</p>
<p>1) As as <a href="https://help.openstreetmap.org/users/150/mtmail">@mtmail</a> suggests use the boundary site, where they have already been saved &amp; segregated off the main server.</p>
<p>2) Going on JAD's original code as posted, the routine wouldn't have run, &amp; even when corrected would probably have timed out for the whole of Italy.</p>
<p>This adapted routine is restricted to the visible area &amp; to boundaries of only one admin level:
<a href="https://overpass-turbo.eu/s/18Nl">https://overpass-turbo.eu/s/18Nl</a></p>
<pre><code>[bbox:{{bbox}}];
rel[boundary=administrative][admin_level=4];
out geom;
</code></pre>
<p>There is no need to search for boundary <code>ways</code> as all should be mapped as <code>rels</code>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80688/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Jun '21, 13:34</strong>
</p>
<img alt="DaveF's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1532/davef">DaveF</a><br/>
<span class="score" title="3264 reputation points"><span class="">3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="DaveF has 17 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80688">
<a name="80689"></a>
<div class="comment" id="comment-80689">
<div class="comment-score" id="post-80689-score"></div>
<div class="comment-text"><p>Dave. I merely formatted the query as code (with the grey background) as it was displayed as a single long line before. I didn't alter it in any way. And I shortened the title which ran over several lines and put the question in the text instead. Both served to make the question better readable but I didn't change anything in the content.</p></div>
<div class="comment-info" id="comment-80689-info">
<span class="comment-age">(24 Jun '21, 14:44)</span>
<a class="comment-user userinfo" href="/users/10133/tzorn">TZorn</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80688">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80688-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/80669/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="7YkDYgehrtMnxLQ66LoS9lnCWWS8DniN"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>