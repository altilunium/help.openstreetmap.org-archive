<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/19407/how-to-make-post-office-town-available-to-nominatim">How to make "post office town" available to nominatim?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19407/up/" id="post-19407-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19407-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/19407/down/" id="post-19407-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/19407/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>In the US, it is common for areas outside of any municipality ("unincorporated areas") to have an address that is based on the town where the nearest post office is.  For instance, addresses on <a href="http://www.openstreetmap.org/browse/way/20415635">Abilene Road</a> near where I live would be listed as "xxx Abilene Rd, Farmville, VA".</p>
<p>As it stands, if you type in that address on osm.org, you get nothing at all.  If you happen to know the ins and outs of nominatim, and you happen to know the name of the county that the municipality is in, you could type "Abilene Road, Prince Edward" (but not "Prince Edward County"!) and it would find it.  But that's not exactly very user-friendly (to say the least), and it's certainly not what arbitrary users are likely to type into the search field.</p>
<p>So I assume that what's needed here is a separate set of boundaries, that Nominatim knows about, that correspond to post office service areas but include the name of the town that the post office serves (and there's a lot of complexity there in terms of overlap with other named entities, like towns, cities, and counties).  Does such a thing already exist?  Should it?  Does it fit within the existing framework (i.e. "add a new key-value pair") or would this require additional architecting for some reason I can't think of right now?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-boundary" href="/tags/boundary/" rel="tag" title="see questions tagged 'boundary'">boundary</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-postcode" href="/tags/postcode/" rel="tag" title="see questions tagged 'postcode'">postcode</a>
<a class="post-tag tag-link-address" href="/tags/address/" rel="tag" title="see questions tagged 'address'">address</a>
<a class="post-tag tag-link-unincorporated" href="/tags/unincorporated/" rel="tag" title="see questions tagged 'unincorporated'">unincorporated</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>28 Jan '13, 19:34</strong>
</p>
<img alt="blahedo's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4a4c8a91603aa21e05f5a441d5c13f26?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4851/blahedo">blahedo</a><br/>
<span class="score" title="736 reputation points">736</span><span title="11 badges"><span class="badge1">●</span><span class="badgecount">11</span></span><span title="19 badges"><span class="silver">●</span><span class="badgecount">19</span></span><span title="28 badges"><span class="bronze">●</span><span class="badgecount">28</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="blahedo has 2 accepted answers">50%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19407">
<a name="19416"></a>
<div class="comment" id="comment-19416">
<div class="comment-score" id="post-19416-score"></div>
<div class="comment-text"><p>Just a note that Ireland is another country affected by this "postal address != geographical address" post-office crazyness. I dont think we've tried tagging that fact anywhere in Ireland yet, though.</p></div>
<div class="comment-info" id="comment-19416-info">
<span class="comment-age">(29 Jan '13, 09:38)</span>
<a class="comment-user userinfo" href="/users/867/vincent-de-phily">Vincent de P... ♦</a>
</div>
</div>
<a name="29129"></a>
<div class="comment" id="comment-29129">
<div class="comment-score" id="post-29129-score"></div>
<div class="comment-text"><p>I just ran across another question on essentially the same problem, which I'll crosslink here for future reference: <a href="https://help.openstreetmap.org/questions/24133/incorrect-city-name">https://help.openstreetmap.org/questions/24133/incorrect-city-name</a></p></div>
<div class="comment-info" id="comment-29129-info">
<span class="comment-age">(16 Dec '13, 19:20)</span>
<a class="comment-user userinfo" href="/users/4851/blahedo">blahedo</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-19407">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19407-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/19407/how-to-make-post-office-town-available-to-nominatim?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/19407/how-to-make-post-office-town-available-to-nominatim?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/19407/how-to-make-post-office-town-available-to-nominatim?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/19407/how-to-make-post-office-town-available-to-nominatim?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="19414"></a>
<div class="answer" id="answer-container-19414">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19414/up/" id="post-19414-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19414-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/19414/down/" id="post-19414-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you are able to define postal town boundaries they can be drawn as polygons I would suggest tagging them in a similar way to how some postal_codes have been imported (<a href="http://wiki.openstreetmap.org/wiki/Key:boundary">see here</a>). i.e. tag the relation type=boundary, boundary=postal_town</p>
<p>If you decide to go down this route you should:</p>
<p>1) discuss it with the USA mapping community to get consensus</p>
<p>2) document the boundary=postal_town tagging on the wiki</p>
<p>When there is a reasonable amount of data in the correct format hopefully nominatim can be modified to make use of the data but it is easier to do once there is test data available.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/19414/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Jan '13, 01:37</strong>
</p>
<img alt="twain's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bda08a105bb6a4a606d47c1b27187fac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4/twain">twain</a><br/>
<span class="score" title="2381 reputation points"><span class="">2.4k</span></span><span title="25 badges"><span class="silver">●</span><span class="badgecount">25</span></span><span title="38 badges"><span class="bronze">●</span><span class="badgecount">38</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="twain has 15 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19414">
</div>
<div class="comment-tools" id="comment-tools-19414">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19414-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="19412"></a>
<div class="answer" id="answer-container-19412">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19412/up/" id="post-19412-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19412-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/19412/down/" id="post-19412-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Simply add an addr:city tag to your road to indicate the postal town. Nominatim will respect that, provided the road is not inside the boundaries of another town.</p>
<p>I'm not aware of any established tagging schema for mapping something like that as boundaries but there are no architectural reasons for not adding support for it to Nominatim, should one come into regular use.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/19412/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>28 Jan '13, 22:35</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19412">
<a name="19476"></a>
<div class="comment" id="comment-19476">
<div class="comment-score" id="post-19476-score"></div>
<div class="comment-text"><p>I dont think that will work, asfar as I can see nomiatim does not care about addr:city. See <a href="http://nominatim.openstreetmap.org/details.php?place_id=70613583">http://nominatim.openstreetmap.org/details.php?place_id=70613583</a> as an example</p></div>
<div class="comment-info" id="comment-19476-info">
<span class="comment-age">(31 Jan '13, 01:27)</span>
<a class="comment-user userinfo" href="/users/5509/tothod">tothod</a>
</div>
</div>
<a name="19479"></a>
<div class="comment" id="comment-19479">
<div class="comment-score" id="post-19479-score">1</div>
<div class="comment-text"><p>addr:city is indeed only taken into account if it is on the road. It will not work on individual nodes/ways for house numbers. This is due to the way Nominatim handles house numbers internally: they don't have their own address but simply reuse the one from their parent street.</p></div>
<div class="comment-info" id="comment-19479-info">
<span class="comment-age">(31 Jan '13, 06:31)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
<a name="28671"></a>
<div class="comment" id="comment-28671">
<div class="comment-score" id="post-28671-score">1</div>
<div class="comment-text"><p>There is some conflicting advice being given on a related question ( <a href="https://help.openstreetmap.org/questions/28625/automatically-add-addrcity-tag-to-roads?">https://help.openstreetmap.org/questions/28625/automatically-add-addrcity-tag-to-roads?</a> ).</p></div>
<div class="comment-info" id="comment-28671-info">
<span class="comment-age">(01 Dec '13, 20:45)</span>
<a class="comment-user userinfo" href="/users/4851/blahedo">blahedo</a>
</div>
</div>
<a name="28701"></a>
<div class="comment" id="comment-28701">
<div class="comment-score" id="post-28701-score">2</div>
<div class="comment-text"><p>Hello blahedi and lonvia,</p>
<p>addr:city should really NOT be tagged to a street!</p>
<p>Here in Germany we have postal_code=XXXX on some ways, that wa sthe "old" method to define where a street belongs to. But this schema is superseded due to boundary relations that define the area where a postal_code is valid.</p>
<p>So please don't change OSM tagging because Nominatim "needs" this.</p></div>
<div class="comment-info" id="comment-28701-info">
<span class="comment-age">(02 Dec '13, 19:50)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="28730"></a>
<div class="comment" id="comment-28730">
<div class="comment-score" id="post-28730-score"></div>
<div class="comment-text"><p>There are boundary relations that define the area where a postal_code is valid?  Is a postal_code the same as an addr:postcode?  This is helpful and sounds like it would be an answer to this question---could you formulate that into an answer (not just a comment)?</p></div>
<div class="comment-info" id="comment-28730-info">
<span class="comment-age">(03 Dec '13, 17:26)</span>
<a class="comment-user userinfo" href="/users/4851/blahedo">blahedo</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-19412">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19412-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="35490"></a>
<div class="answer" id="answer-container-35490">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/35490/up/" id="post-35490-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-35490-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/35490/down/" id="post-35490-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Blahedo (or anyone else, for that matter),</p>
<p>Has there ever been a resolution for this problem?  I ask because I've noticed it as well for many addresses.</p>
<p>--jack</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/35490/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 Aug '14, 04:33</strong>
</p>
<img alt="Jack%20the%20Ripper's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b95d3c8204ce3675edc226a8a55b7067?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8675/jack-the-ripper">Jack the Ripper</a><br/>
<span class="score" title="280 reputation points">280</span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="15 badges"><span class="bronze">●</span><span class="badgecount">15</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Jack the Ripper has one accepted answer">12%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-35490">
<a name="35491"></a>
<div class="comment" id="comment-35491">
<div class="comment-score" id="post-35491-score">1</div>
<div class="comment-text"><p>Not that I can tell (including in the other two related questions that I cross-linked).  Part of the problem here, I think, is that most of the technical competence is held by residents of countries with a more sane boundary system, who are having a hard time even understanding the question. :)</p></div>
<div class="comment-info" id="comment-35491-info">
<span class="comment-age">(04 Aug '14, 04:48)</span>
<a class="comment-user userinfo" href="/users/4851/blahedo">blahedo</a>
</div>
</div>
<a name="35500"></a>
<div class="comment" id="comment-35500">
<div class="comment-score" id="post-35500-score"></div>
<div class="comment-text"><p><a href="http://wiki.openstreetmap.org/wiki/Tag:boundary%3Dpostal_code">http://wiki.openstreetmap.org/wiki/Tag:boundary%3Dpostal_code</a></p>
<p>Seems like the best solution in my opinion, with a name if it matches the postal code area. If not then create something similar like <em>boundary=postal_town</em> as pointed out in the other comment.</p></div>
<div class="comment-info" id="comment-35500-info">
<span class="comment-age">(04 Aug '14, 12:13)</span>
<a class="comment-user userinfo" href="/users/8152/andig88">AndiG88</a>
</div>
</div>
<a name="35535"></a>
<div class="comment" id="comment-35535">
<div class="comment-score" id="post-35535-score"></div>
<div class="comment-text"><p>Yeah...the hard part will be figuring out exactly where the boundary is.  I know it for some streets, but there are thousands of them in unincorporated areas of the county.  :-(  Me no likey this answer.</p></div>
<div class="comment-info" id="comment-35535-info">
<span class="comment-age">(05 Aug '14, 16:34)</span>
<a class="comment-user userinfo" href="/users/8675/jack-the-ripper">Jack the Ripper</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-35490">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-35490-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/19407/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="VQUzPKHvVwzYycOHhQ19WlXB8lNKbGsT"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>