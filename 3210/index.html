<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/3210/creating-layers-on-offline-tiles">creating layers on offline tiles</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/3210/up/" id="post-3210-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-3210-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/3210/down/" id="post-3210-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/3210/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I want to have tiles available for and offline web-app (local server).  However the overlay of POIs will change occasionally.  Furthermore, I need to draw routes (vector lines) on the map in real-time based on updating data from the db.</p>
<p>Is this possible?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-tile" href="/tags/tile/" rel="tag" title="see questions tagged 'tile'">tile</a>
<a class="post-tag tag-link-offline" href="/tags/offline/" rel="tag" title="see questions tagged 'offline'">offline</a>
<a class="post-tag tag-link-overlay" href="/tags/overlay/" rel="tag" title="see questions tagged 'overlay'">overlay</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>20 Feb '11, 07:00</strong>
</p>
<img alt="Lee's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/987544e21386bb96293f4b96a3f0005c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/895/lee">Lee</a><br/>
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Lee has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-3210">
<a name="3212"></a>
<div class="comment" id="comment-3212">
<div class="comment-score" id="post-3212-score"></div>
<div class="comment-text"><p>How big is this area you are talking about, how many routes, and what database?</p></div>
<div class="comment-info" id="comment-3212-info">
<span class="comment-age">(20 Feb '11, 08:13)</span>
<a class="comment-user userinfo" href="/users/188/emj">emj</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-3210">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-3210-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/3210/creating-layers-on-offline-tiles?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/3210/creating-layers-on-offline-tiles?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/3210/creating-layers-on-offline-tiles?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/3210/creating-layers-on-offline-tiles?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="3238"></a>
<div class="answer" id="answer-container-3238">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/3238/up/" id="post-3238-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-3238-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/3238/down/" id="post-3238-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yes it's possible. OpenLayers (a popular slippy map javascript library) can be downloaded and run locally, hence on <a href="http://openlayers.org/"></a><a href="http://openlayers.org"></a><a href="http://openlayers.org">openlayers.org</a> you see a "Link to the hosted version" and a download link. You want to download. And when you come to invoke it with a <code>&lt;script&gt;</code> tag, you would reference a relative path rather than the <a href="http://openlayers.org">openlayers.org</a> URL.</p>
<p>Likewise for the tileset. Rather than having OpenLayers point at a tileset on a remote server (the normal setup) you would point it at relative tile URLs.</p>
<p>You then need tile images arranged in a standard directory structure on your local disk. You might come by these tile files by downloading them from someone else's tile server, e.g. using tile <a href="http://wiki.openstreetmap.org/wiki/Category:Tile_downloading">downloader software</a>, but this approach tends to be problematic for the source server, if you're downloading more than a couple of hundred tiles (a large area of map or several zoom levels). A better thing to do (and much more flexible and fun!) is <a href="http://wiki.openstreetmap.org/wiki/Creating_your_own_tiles">Creating your own tiles</a> (various approaches) Once you've got a directory full of tiles, and figured out how to initialise OpenLayers to the right part of the world...  it will happily all work from your local machine, or on webserver on a local network, with no internet connection.</p>
<p>This a unique advantage of OpenStreetMap. Google maps and other providers do not allow their maps to be used in this way.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/3238/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>21 Feb '11, 15:55</strong>
</p>
<img alt="Harry%20Wood's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9e04333be840d50c6aa66fb112aad77c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/107/harry-wood">Harry Wood</a><br/>
<span class="score" title="9489 reputation points"><span class="">9.5k</span></span><span title="25 badges"><span class="badge1">●</span><span class="badgecount">25</span></span><span title="88 badges"><span class="silver">●</span><span class="badgecount">88</span></span><span title="128 badges"><span class="bronze">●</span><span class="badgecount">128</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Harry Wood has 19 accepted answers">14%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-3238">
</div>
<div class="comment-tools" id="comment-tools-3238">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-3238-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="3213"></a>
<div class="answer" id="answer-container-3213">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/3213/up/" id="post-3213-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-3213-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/3213/down/" id="post-3213-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It all depends on what you want to do, and what you have:  one way would be to:</p>
<ol>
<li>setup a reverse proxy for <a href="http://tile.osm.org">tile.osm.org</a>, to cache tiles. Either a <a href="http://wiki.openstreetmap.org/wiki/ProxySimplePHP">small php script</a>, or <a href="http://www.varnish-cache.org/">Varnish</a></li>
<li>install postgis</li>
<li>install <a href="http://tinyows.org/trac2.">tinyows</a></li>
<li>load WFS from Tinyows on top of Openlayers</li>
</ol>
<p>But I have not seen any tools for updating this in realtime, I'm not entirely sure there are standard tools for that, except just reloading all the features.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/3213/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Feb '11, 08:28</strong>
</p>
<img alt="emj's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/dd3858f5f89f5a6b738f9dbe59824440?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/188/emj">emj</a><br/>
<span class="score" title="2024 reputation points"><span class="">2.0k</span></span><span title="12 badges"><span class="badge1">●</span><span class="badgecount">12</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="47 badges"><span class="bronze">●</span><span class="badgecount">47</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="emj has 11 accepted answers">15%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-3213">
</div>
<div class="comment-tools" id="comment-tools-3213">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-3213-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/3210/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="EqlHBegIB6VnMgrqOvXNC9SfxV4bNu0O"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>