<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/62515/how-to-configure-remote-postgres-instance">How to configure remote Postgres instance?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62515/up/" id="post-62515-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62515-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/62515/down/" id="post-62515-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/62515/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello!  I've been able to successfully setup the map server locally, but now I'm trying to configure the system to hit a remote Postgres instance.  However, I can't figure out where this is configured.  I've tried adding parameters to the mapnik.xml file, but it still appears to hit the localhost:</p>
<p>renderd[20693]: An error occurred while loading the map layer 'ajt': Postgis Plugin: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?</p>
<p>For reference, I was using this URL for the mapnik parameters:
<a href="https://github.com/mapnik/mapnik/wiki/PostGIS">https://github.com/mapnik/mapnik/wiki/PostGIS</a></p>
<p>I've also tried guessing at what the host, user, and password variable names would be in renderd.conf, but haven't had luck with this either.  Does someone have a link to an example or documentation on how to hit a remote Posgres instance? I've already loaded all of the data for North America into the external Postgres server, so I'd very much like to use that if possible.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-remote" href="/tags/remote/" rel="tag" title="see questions tagged 'remote'">remote</a>
<a class="post-tag tag-link-postgresql" href="/tags/postgresql/" rel="tag" title="see questions tagged 'postgresql'">postgresql</a>
<a class="post-tag tag-link-external" href="/tags/external/" rel="tag" title="see questions tagged 'external'">external</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>05 Mar '18, 17:20</strong>
</p>
<img alt="gordysc's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f508de3ba12e39cc742c46d67d480a00?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14831/gordysc">gordysc</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="gordysc has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-62515">
</div>
<div class="comment-tools" id="comment-tools-62515">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62515-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/62515/how-to-configure-remote-postgres-instance?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/62515/how-to-configure-remote-postgres-instance?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/62515/how-to-configure-remote-postgres-instance?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/62515/how-to-configure-remote-postgres-instance?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="62516"></a>
<div class="answer answered-by-owner" id="answer-container-62516">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62516/up/" id="post-62516-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62516-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/62516/down/" id="post-62516-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It looks like I've had a bit of a break through (of course after posting this question).. For future reference, I added host, user, and password to osm2pgsql in project.mml and then regenerated the file using carto project.mml &gt; mapnik.xml  .  This seemed to cause the server to connect to the database on startup.  However, I'm getting connection timeouts when loading /hot/0/0/0.png.  Will post back later if I figure out why.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/62516/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Mar '18, 17:31</strong>
</p>
<img alt="gordysc's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f508de3ba12e39cc742c46d67d480a00?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14831/gordysc">gordysc</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="gordysc has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-62516">
<a name="62518"></a>
<div class="comment" id="comment-62518">
<div class="comment-score" id="post-62518-score"></div>
<div class="comment-text"><p>One more follow up, this solves the connection issue:
<a href="https://help.openstreetmap.org/questions/32367/rendering-open-street-map-stoped">https://help.openstreetmap.org/questions/32367/rendering-open-street-map-stoped</a></p>
<p>For some reason the server went extremely fast rendering the tiles after leaving it for an hour.  Perhaps it was creating indexes, etc? Anyway, hope all of this helps someone down the road!</p></div>
<div class="comment-info" id="comment-62518-info">
<span class="comment-age">(05 Mar '18, 19:06)</span>
<a class="comment-user userinfo" href="/users/14831/gordysc">gordysc</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-62516">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62516-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/62515/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="u51iGD1OtfHNXIafWssjb5plZ8efpW5y"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>