<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/84693/city-detail-is-missing-from-nominatim-query-responses-in-helsinki-finland">City detail is missing from Nominatim query responses in Helsinki, Finland</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/84693/up/" id="post-84693-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-84693-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/84693/down/" id="post-84693-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/84693/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello!</p>
<p>I have a problem the whole Helsinki city is missing in nominatim query responses. Someone in somewhere is switched isaddress boolean = false in city of Helsinki details and that could be the reason for that. Could someone advice me how to switch it back to true?</p>
<p>I hope you have a nice day!</p>
<p>Peace &amp; happiness, always Ari</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-isaddress" href="/tags/isaddress/" rel="tag" title="see questions tagged 'isaddress'">isaddress</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>04 Jun '22, 00:47</strong>
</p>
<img alt="talousala's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3d23564d397175b70be936844e1395e2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/21777/talousala">talousala</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="talousala has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/84693/">
                edited
                <strong>06 Jun '22, 22:56</strong>
</a>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-84693">
<a name="84694"></a>
<div class="comment" id="comment-84694">
<div class="comment-score" id="post-84694-score"></div>
<div class="comment-text"><p>Could you explain in a bit more detail what seems to be the problem - what query you are actually executing and where?</p>
<p><a href="https://www.openstreetmap.org/search?whereami=1&amp;query=60.17063%2C24.93268">https://www.openstreetmap.org/search?whereami=1&amp;query=60.17063%2C24.93268</a></p>
<p>returns "Original Sokos Hotel Presidentti, 4, Eteläinen Rautatiekatu, Kamppi, Helsinki, Helsinki sub-region, Uusimaa, Southern Finland, Mainland Finland, 00100, Finland" for me, which seems correct?</p></div>
<div class="comment-info" id="comment-84694-info">
<span class="comment-age">(04 Jun '22, 01:05)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="84695"></a>
<div class="comment" id="comment-84695">
<div class="comment-score" id="post-84695-score"></div>
<div class="comment-text"><p>OK. It looks like the whole Helsinki is not missing. E.g. address Iivarintie 3, Helsinki:</p>
<p><a href="https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=xml&amp;polygon_geojson=1&amp;addressdetails=1">https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=xml&amp;polygon_geojson=1&amp;addressdetails=1</a></p>
<p>place_id="123297206" have no &lt;city&gt; so that is wrong
place_id="178976505" have &lt;city&gt; so that is correct </p>
<p>The problem is many places all around Helsinki area has similar problem the &lt;city&gt; data missing.  </p>
<p>&lt;searchresults ...="" &lt;place="" place_id="123297206" ...="" &lt;house_number=""&gt;3&lt;/house_number&gt;
&lt;road&gt;Iivarintie&lt;/road&gt;
&lt;neighbourhood&gt;Puistola&lt;/neighbourhood&gt;
&lt;suburb&gt;Suurmetsä&lt;/suburb&gt;
&lt;city_district&gt;Northeastern major district&lt;/city_district&gt;
&lt;municipality&gt;Helsinki sub-region&lt;/municipality&gt;
&lt;county&gt;Uusimaa&lt;/county&gt;
&lt;iso3166-2-lvl6&gt;FI-18&lt;/iso3166-2-lvl6&gt;
&lt;state_district&gt;Southern Finland&lt;/state_district&gt;
&lt;region&gt;Mainland Finland&lt;/region&gt;
&lt;postcode&gt;00760&lt;/postcode&gt;
&lt;country&gt;Finland&lt;/country&gt;
&lt;country_code&gt;fi&lt;/country_code&gt;
&lt;/place&gt;</p>
<p>&lt;place place_id="178976505" ...="" &lt;house_number=""&gt;3&lt;/house_number&gt;
&lt;road&gt;Iivarintie&lt;/road&gt;
&lt;neighbourhood&gt;Iivisniemi&lt;/neighbourhood&gt;
&lt;suburb&gt;Kaitaa&lt;/suburb&gt;
&lt;city_district&gt;Suur-Espoonlahti&lt;/city_district&gt;
&lt;city&gt;Espoo&lt;/city&gt;
...
&lt;/place&gt;
&lt;/searchresults&gt;</p></div>
<div class="comment-info" id="comment-84695-info">
<span class="comment-age">(04 Jun '22, 01:38)</span>
<a class="comment-user userinfo" href="/users/21777/talousala">talousala</a>
</div>
</div>
<a name="84697"></a>
<div class="comment" id="comment-84697">
<div class="comment-score" id="post-84697-score"></div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/387/someoneelse"></a><a href="https://help.openstreetmap.org/users/387/someoneelse">@SomeoneElse</a>:</p>
<p>and your query example <a href="https://www.openstreetmap.org/search?whereami=1&amp;query=60.17063%2C24.93268">https://www.openstreetmap.org/search?whereami=1&amp;query=60.17063%2C24.93268</a> returns only Mainland Finland (so this relation: <a href="https://www.openstreetmap.org/relation/2375172">https://www.openstreetmap.org/relation/2375172</a> ) from here. So it looks like (at least) one of OpenStreetMaps Nominatim instances is having the problem...</p>
<p>Hm, I now checked pummelzacken, dulcy, longma, stormfly-04 separately and all return the Original Sokos Hotel, while using the search at www.openstreetmap.org (or your whereami link) only returns Mainland Finland.</p>
<p>And a few minutes later, the whereami link returns this relation: <a href="https://www.openstreetmap.org/relation/184714">https://www.openstreetmap.org/relation/184714</a> so it's getting closer :) (It does look as if someone is already working on the nominatim problem.)</p></div>
<div class="comment-info" id="comment-84697-info">
<span class="comment-age">(04 Jun '22, 09:36)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
<a name="84699"></a>
<div class="comment" id="comment-84699">
<div class="comment-score" id="post-84699-score"></div>
<div class="comment-text"><p>Hi, we've discussed this in the OSM Finland Telegram group, and I'm not even close to being an expert in this either. I wasn't able to reproduce the problem in the neighboring city Espoo, or in Turku with the show address/whereami function on the OSM website. Some examples in Helsinki: <a href="https://www.openstreetmap.org/search?whereami=1&amp;query=60.2246%2C24.9183#map=16/60.2246/24.9183">https://www.openstreetmap.org/search?whereami=1&amp;query=60.2246%2C24.9183#map=16/60.2246/24.9183</a> , <a href="https://www.openstreetmap.org/search?whereami=1&amp;query=60.24335%2C24.95233#map=18/60.24335/24.95233">https://www.openstreetmap.org/search?whereami=1&amp;query=60.24335%2C24.95233#map=18/60.24335/24.95233</a> , <a href="https://www.openstreetmap.org/search?whereami=1&amp;query=60.15136%2C24.88384#map=17/60.15136/24.88384">https://www.openstreetmap.org/search?whereami=1&amp;query=60.15136%2C24.88384#map=17/60.15136/24.88384</a> All the other relevant info is included except city. And checking the API output showed that the isaddress field for "Helsinki" is false in such places for some reason: <a href="https://nominatim.openstreetmap.org/details.php?osmtype=W&amp;osmid=772172190&amp;class=highway&amp;addressdetails=1&amp;hierarchy=0&amp;group_hierarchy=1&amp;format=json">https://nominatim.openstreetmap.org/details.php?osmtype=W&amp;osmid=772172190&amp;class=highway&amp;addressdetails=1&amp;hierarchy=0&amp;group_hierarchy=1&amp;format=json</a></p></div>
<div class="comment-info" id="comment-84699-info">
<span class="comment-age">(04 Jun '22, 11:01)</span>
<a class="comment-user userinfo" href="/users/21853/larmax">Larmax</a>
</div>
</div>
<a name="84702"></a>
<div class="comment" id="comment-84702">
<div class="comment-score" id="post-84702-score"></div>
<div class="comment-text"><p>The problem still exist. Can you SomeoneElse tell me who is fixing the problem just now? Is there anybody fixing it at all.</p>
<p>Larmax said the problem is active also in the Lauttasaari(suburb of the Helsinki) Helsinki. The problem exist all around in the Helsinki maybe other cities too. Someone must do a sql query and find out the problem and fix it. Also need to fix a buggy algorithm or correct the person who made this kind of problem.</p>
<p>In my point of view the problem is real major problem here in the Finland. If I compare that city missing problem to a credit card transaction: 1. so you know the product you are buing and the price for it; 2.you see the product name and other detail but you don't see the price you are going to accept when you are needed to accept the credit card transaction. 3. in the accepting view there is also other option with same details as the product you are going to buy also these product prices could be missing and invisible prices are also different - probably higher. None vise person don't want to use that kind of credit card you must use as blind eyes - am I right? Now the nominatim is like "blind eye" adderess source for some parts of the Finland.</p></div>
<div class="comment-info" id="comment-84702-info">
<span class="comment-age">(04 Jun '22, 20:27)</span>
<a class="comment-user userinfo" href="/users/21777/talousala">talousala</a>
</div>
</div>
<a name="84703"></a>
<div class="comment not_top_scorer" id="comment-84703">
<div class="comment-score" id="post-84703-score"></div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/21777/talousala"></a><a href="https://help.openstreetmap.org/users/21777/talousala">@talousala</a> and <a href="https://help.openstreetmap.org/users/21853/larmax"></a><a href="https://help.openstreetmap.org/users/21853/larmax">@Larmax</a> this is not the issue tracker for nominatim (or anything else), if you want to report a problem with the software you need to open an issue with the developers, in this case <a href="https://github.com/osm-search/Nominatim">https://github.com/osm-search/Nominatim</a></p>
<p>If it is a case of one instance having an issue and others not, this is likely an operational issue and should be reported here <a href="https://github.com/openstreetmap/operations">https://github.com/openstreetmap/operations</a></p>
<p>In both cases you are going to help everybody with legible, clearly laid out reports, that includes making an appropriate number of line breaks.</p></div>
<div class="comment-info" id="comment-84703-info">
<span class="comment-age">(05 Jun '22, 08:52)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-84693">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-84693-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/84693/city-detail-is-missing-from-nominatim-query-responses-in-helsinki-finland?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/84693/city-detail-is-missing-from-nominatim-query-responses-in-helsinki-finland?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/84693/city-detail-is-missing-from-nominatim-query-responses-in-helsinki-finland?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/84693/city-detail-is-missing-from-nominatim-query-responses-in-helsinki-finland?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="84704"></a>
<div class="answer accepted-answer" id="answer-container-84704">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/84704/up/" id="post-84704-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-84704-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/84704/down/" id="post-84704-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/84704/" rel="nofollow" title="SimonPoole has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>An artefact from times when the boundary of Helsinki wasn't properly classified as a city. Updating the whole area should have fixed this now. There is already a <a href="https://github.com/osm-search/Nominatim/issues/2551">bug report for Nominatim</a> that the classification changes can cause havoc.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/84704/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Jun '22, 09:08</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-84704">
<a name="84705"></a>
<div class="comment" id="comment-84705">
<div class="comment-score" id="post-84705-score"></div>
<div class="comment-text"><p>Thank you. 
Actually I'm using nominatim query geocodejson format but in this question I opened I used xml format for reason to get my explain short for limited character space. The xml format query works now but geocodejson query have still wrong data. Is geocodejson format slower, have some kind of delay to get your update in or is there still some kind of issue?</p>
<p><a href="https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=geocodejson&amp;polygon_geojson=1&amp;addressdetails=1">https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=geocodejson&amp;polygon_geojson=1&amp;addressdetails=1</a></p>
<p>= city  "Helsinki sub-region" . Not working.</p>
<p><a href="https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=xml&amp;polygon_geojson=1&amp;addressdetails=1">https://nominatim.openstreetmap.org/search?q=Iivarintie+3,+Helsinki&amp;format=xml&amp;polygon_geojson=1&amp;addressdetails=1</a></p>
<p>= &lt;city&gt;Helsinki&lt;/city&gt; . Working</p>
<p>I don't know what to do. Do I need to convert my code to use xml format or what. That's a bit crazy situation. </p>
<p>I hope you have a nice day!</p></div>
<div class="comment-info" id="comment-84705-info">
<span class="comment-age">(05 Jun '22, 15:30)</span>
<a class="comment-user userinfo" href="/users/21777/talousala">talousala</a>
</div>
</div>
<a name="84706"></a>
<div class="comment" id="comment-84706">
<div class="comment-score" id="post-84706-score">1</div>
<div class="comment-text"><p>Fixed that too, I hope.</p></div>
<div class="comment-info" id="comment-84706-info">
<span class="comment-age">(05 Jun '22, 16:08)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
<a name="84707"></a>
<div class="comment" id="comment-84707">
<div class="comment-score" id="post-84707-score"></div>
<div class="comment-text"><p>Still same situation: not works. geocodejson city = "Helsinki sub-region".  What is different with xml and geocodejson? How those format works on server side? Could there be a bug in xml and different bug in geocodejson.</p>
<p>How I can easily find out what is different in xml and geocodejson at server side? - which format I should use. </p>
<p>What is the right place discuss about possibilities use nominatim for everyday needs. I have received data in correct from nominatim responses. I felt I can trust nominatim works for me. I'm not sure anymore what format I was used to collect the data. Now I feel a week ago something changed different and nominatim responses not anymore correct. How it could be possible things not working and probably changing that way? I really don't know what to do. I go crazy! Nightmare. Thank you all! I feel like cry now! Peace &amp; happiness, always Ari</p></div>
<div class="comment-info" id="comment-84707-info">
<span class="comment-age">(05 Jun '22, 17:59)</span>
<a class="comment-user userinfo" href="/users/21777/talousala">talousala</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-84704">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-84704-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/84693/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="P8nr5dFBwKf89z0RDT9X709UcJCIqNDW"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>