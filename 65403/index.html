<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/65403/what-are-drawbacks-of-osmosis-monthly-update">What are drawbacks of Osmosis Monthly Update?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65403/up/" id="post-65403-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65403-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/65403/down/" id="post-65403-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/65403/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have made a tile server importing full planet data. I want to keep my database updated to openstreetmap changes using osmosis as explained in <a href="https://ircama.github.io/osm-carto-tutorials/updating-data/">this tutorial</a>. <a href="https://ircama.github.io/osm-carto-tutorials/updating-data/">This tutorial</a> emphasizes on keeping database updated to minutely or daily changes in openstreetmap data.</p>
<p>My question is that - will there be any problem if I apply osm database update scripts on monthly basis? The <a href="https://ircama.github.io/osm-carto-tutorials/updating-data/">tutorial</a> also says that monthly update may take much time as the changeset will be large. Does anyone here have an idea of how much time will it take approximately for applying monthly changesets?[ Given that I am using 1TB SSD for Database, 64GB RAM and 10 virtual cpu ]</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-openstreetmap-carto" href="/tags/openstreetmap-carto/" rel="tag" title="see questions tagged 'openstreetmap-carto'">openstreetmap-carto</a>
<a class="post-tag tag-link-diff" href="/tags/diff/" rel="tag" title="see questions tagged 'diff'">diff</a>
<a class="post-tag tag-link-renderd" href="/tags/renderd/" rel="tag" title="see questions tagged 'renderd'">renderd</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
<a class="post-tag tag-link-mod_tile" href="/tags/mod_tile/" rel="tag" title="see questions tagged 'mod_tile'">mod_tile</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>17 Aug '18, 14:01</strong>
</p>
<img alt="anuranpal's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/943a788b771da12a63057582fbf250b0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/15374/anuranpal">anuranpal</a><br/>
<span class="score" title="21 reputation points">21</span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="12 badges"><span class="silver">●</span><span class="badgecount">12</span></span><span title="15 badges"><span class="bronze">●</span><span class="badgecount">15</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="anuranpal has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/65403/">
                edited
                <strong>17 Aug '18, 19:08</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-65403">
</div>
<div class="comment-tools" id="comment-tools-65403">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65403-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/65403/what-are-drawbacks-of-osmosis-monthly-update?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/65403/what-are-drawbacks-of-osmosis-monthly-update?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/65403/what-are-drawbacks-of-osmosis-monthly-update?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/65403/what-are-drawbacks-of-osmosis-monthly-update?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="65404"></a>
<div class="answer accepted-answer" id="answer-container-65404">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65404/up/" id="post-65404-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65404-score" title="current number of votes">
    5
</div>
<a class="ajax-command post-vote down" href="/vote/65404/down/" id="post-65404-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/65404/" rel="nofollow" title="anuranpal has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In my experience, somewhere along the two-week mark there comes the point when a full new data import will be faster than applying diffs. Applying diffs is generally much more "expensive" than importing into a new database, that's why such a point exists. If you settle for a method where you do a full import every month, this also means you can import with the <code>--drop</code> option which will approximately halve your database size. You can then import into a new database, and when done, you delete the old and rename the new. Total disk space needed for this procedure is a bit (maybe 20%?) more than having one full, updatable database, because during the import of the new database a couple of temporary tables are needed. But during normal use your database will be leaner, faster, and not suffer from index bloat. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/65404/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>17 Aug '18, 14:40</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-65404">
<a name="65443"></a>
<div class="comment" id="comment-65443">
<div class="comment-score" id="post-65443-score"></div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/104/frederik-ramm"></a><a href="https://help.openstreetmap.org/users/104/frederik-ramm">@frederik</a> if I use a new database, how will I identify the tile list that needs to be expired? In my case I prerender tiles upto zoom level 13 in disk. So, does it mean that I need to rerender all those tiles as well?</p></div>
<div class="comment-info" id="comment-65443-info">
<span class="comment-age">(19 Aug '18, 16:07)</span>
<a class="comment-user userinfo" href="/users/15374/anuranpal">anuranpal</a>
</div>
</div>
<a name="65444"></a>
<div class="comment" id="comment-65444">
<div class="comment-score" id="post-65444-score">2</div>
<div class="comment-text"><p>Typically, what you do in this scenario is you create a file named "planet-import-complete" in your tile directory when you have finished the import. mod_tile will then look at the time stamp of a tile in the cache, and consider it "old" when its time stamp is older than that of the planet import. "old" tiles will then be re-rendered either on the fly or in the background, depending on your setting of the <code>ModTileRequestTimeout</code> configuration option. -- There is no way to explicitly determine which tiles have changed, but after a month, chances are that most tiles have changed anyway!</p></div>
<div class="comment-info" id="comment-65444-info">
<span class="comment-age">(19 Aug '18, 16:10)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-65404">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65404-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/65403/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="72fxEXNw3rKU3qiKWmNJKq3Bem5Gfss3"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>