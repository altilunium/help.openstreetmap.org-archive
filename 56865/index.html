<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes">Extract all places as nodes with their corresponding admin boundaries ISO codes</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/56865/up/" id="post-56865-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-56865-score" title="current number of votes">
    -1
</div>
<a class="ajax-command post-vote down" href="/vote/56865/down/" id="post-56865-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/56865/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm looking for a way to extract a list of all places (cites, towns and so on) with their respective admin boundary ISO codes. Is there a way to do it with whatever tool is available?</p>
<p>The issue I'm working around is this:</p>
<ol>
<li>Some places might be represented by areas, some by nodes. While I need all places to be nodes, with their respective lat/lon values.</li>
<li>Relationship between cities and their admin boundaries are not standartized across all countries in the OSM file.</li>
</ol>
<p>What's the best to tackle this problem?</p>
<p>Do you think it's possible to achieve a 100% accuracy for this particular data in question, considering the today's state of the OSM file.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-filtering" href="/tags/filtering/" rel="tag" title="see questions tagged 'filtering'">filtering</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-exporting" href="/tags/exporting/" rel="tag" title="see questions tagged 'exporting'">exporting</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>03 Jul '17, 23:17</strong>
</p>
<img alt="meglio's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c9a1577cedad5cf1af59379a5bd6721b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/13884/meglio">meglio</a><br/>
<span class="score" title="40 reputation points">40</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="meglio has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-56865">
</div>
<div class="comment-tools" id="comment-tools-56865">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-56865-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/56865/extract-all-places-as-nodes-with-their-corresponding-admin-boundaries-iso-codes?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="56872"></a>
<div class="answer" id="answer-container-56872">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/56872/up/" id="post-56872-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-56872-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/56872/down/" id="post-56872-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You tackle this problem not by asking one question after another here hoping others will do all the work for you, but by sitting down and creating a solution yourself. Try out those things others have told you in your other questions and play around with it. You have looked at the data already, good! Now try out solutions. When you have tried something, come back with more specific question.</p>
<p>Nobody ever has 100% accuracy. Only you know what you want to use this data for so only you can decide what level of accuracy you actually need and where you are willing to make compromises. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/56872/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 Jul '17, 07:00</strong>
</p>
<img alt="Jochen%20Topf's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/2d4dfcdcde73aa5e2ffa4a9b3a7cb51d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/112/jochen-topf">Jochen Topf</a><br/>
<span class="score" title="5244 reputation points"><span class="">5.2k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="50 badges"><span class="silver">●</span><span class="badgecount">50</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Jochen Topf has 32 accepted answers">31%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-56872">
</div>
<div class="comment-tools" id="comment-tools-56872">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-56872-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="56871"></a>
<div class="answer" id="answer-container-56871">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/56871/up/" id="post-56871-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-56871-score" title="current number of votes">
    -1
</div>
<a class="ajax-command post-vote down" href="/vote/56871/down/" id="post-56871-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>To answer your last question first, there will certainly not be 100% accuracy nor completeness. This starts with the question of "what is a city's respective admin boundary"! For many countries you will not even have all city nodes, much less admin boundaries on the municipal level.</p>
<p>If I were asked to generate this data set, I would</p>
<ol>
<li>import planet into osm2pgql (possibly with a reduced dataset like you asked about earlier)</li>
<li>where there are polygons with a place=city tag, compute a point on surface (not centroid)</li>
<li>for each place=city node and each node found in step 2, find the smallest enclosing admin boundary of admin_level 8 or smaller; if that admin boundary is not of admin_level 8 (but smaller) then ensure that no <em>other</em> place=city nodes are in the same area (else drop it)</li>
<li>de-duplicate the list created in step 3 since step 2 might have introduced a place=city node that was already there</li>
</ol>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/56871/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 Jul '17, 06:54</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-56871">
</div>
<div class="comment-tools" id="comment-tools-56871">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-56871-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/56865/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="eE3JQVoZ6BMN2HfBlu7jHVwlax75ePJq"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>