<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/51979/do-relations-auto-delete-when-there-are-no-members">Do relations auto-delete when there are no members?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/51979/up/" id="post-51979-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-51979-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/51979/down/" id="post-51979-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/51979/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>If I remove all the ways (2, in this case) from a relation, does the relation automatically get deleted?</p>
<p>I needed to basically 'merge' 2 route relations, but it was easier to just remove the 2 ways that were in the wrong relation and add them to the right one, then delete the empty relation. But after removing the 2 ways, I couldn't see any way to select the empty relation. Looking at the changeset information later, it looks like it got deleted automatically. Is this correct?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-ideditor" href="/tags/ideditor/" rel="tag" title="see questions tagged 'ideditor'">ideditor</a>
<a class="post-tag tag-link-relations" href="/tags/relations/" rel="tag" title="see questions tagged 'relations'">relations</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>11 Sep '16, 01:33</strong>
</p>
<img alt="ljb_nj's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c1e98ded2982cd352d4c77075aa0cd74?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11758/ljb_nj">ljb_nj</a><br/>
<span class="score" title="659 reputation points">659</span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="17 badges"><span class="silver">●</span><span class="badgecount">17</span></span><span title="27 badges"><span class="bronze">●</span><span class="badgecount">27</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="ljb_nj has one accepted answer">12%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-51979">
<a name="51981"></a>
<div class="comment" id="comment-51981">
<div class="comment-score" id="post-51981-score">1</div>
<div class="comment-text"><p>I would like to see some wiki page on the topic of editing existing relations, in JOSM. I always feel like I am screwing them up, and when I try to delete them entirely, I often get errors that have me poking around trying to fix it. I hope someone answering this question can point us to a good online tutorial.</p></div>
<div class="comment-info" id="comment-51981-info">
<span class="comment-age">(11 Sep '16, 03:25)</span>
<a class="comment-user userinfo" href="/users/12686/mtc">mtc</a>
</div>
</div>
<a name="51987"></a>
<div class="comment" id="comment-51987">
<div class="comment-score" id="post-51987-score"></div>
<div class="comment-text"><p>If you think it's worth creating a wiki page about something then obviously go ahead and create it - it's a wiki!  </p>
<p>If you want to go through various drafts and get other people's opinions on it before making it "live" then create it below your user account and ask for feedback on it first.</p></div>
<div class="comment-info" id="comment-51987-info">
<span class="comment-age">(11 Sep '16, 10:09)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="51989"></a>
<div class="comment" id="comment-51989">
<div class="comment-score" id="post-51989-score"></div>
<div class="comment-text"><p>With SimonPoole's hint, I looked further at the specific editor, and found this iD issue: <a href="https://github.com/openstreetmap/iD/issues/465">"What to do with emptied relations"</a>.</p>
<p>The resolution of that issue was that iD does delete any relation that becomes empty.</p></div>
<div class="comment-info" id="comment-51989-info">
<span class="comment-age">(11 Sep '16, 15:48)</span>
<a class="comment-user userinfo" href="/users/11758/ljb_nj">ljb_nj</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-51979">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-51979-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/51979/do-relations-auto-delete-when-there-are-no-members?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/51979/do-relations-auto-delete-when-there-are-no-members?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/51979/do-relations-auto-delete-when-there-are-no-members?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/51979/do-relations-auto-delete-when-there-are-no-members?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="51985"></a>
<div class="answer" id="answer-container-51985">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/51985/up/" id="post-51985-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-51985-score" title="current number of votes">
    8
</div>
<a class="ajax-command post-vote down" href="/vote/51985/down/" id="post-51985-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The OSM API does not delete empty relations*. Depending on what you are using your editor may do so, but I'm not aware of one that does. A warning is clearly in order, auto-deleting is probably not (there are a couple of reasons why you temporarily might want to keep an empty relation around).</p>
<p>Relations are really easy, they are simply lists of other OSM objects. </p>
<p>Difficulties happen because some times they are very large (and very large lists are hard to manipulate in any medium) and when there are complicated implied or explicit rules in the tagging scheme that define the required relationships between the objects in the relations. </p>
<p>JOSM has of late started popping up relation related error messages that are a nuisance and are not really helpful. Typically for example when splitting a way you want the resulting two parts to remain in the relation except if the relation in question is a turn restriction. This however can easily be handled by the editor without involving the user at the time they are splitting the way.</p>
<p>(* empty relations have no associated geometry and as such will not be retrievable except if their id is known once they are stored in the database, so in general they are useless.)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/51985/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>11 Sep '16, 08:53</strong>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SimonPoole has 209 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/51985/">
                edited
                <strong>11 Sep '16, 09:00</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-51985">
<a name="51988"></a>
<div class="comment" id="comment-51988">
<div class="comment-score" id="post-51988-score">1</div>
<div class="comment-text"><p>I'm using iD (I put that in the tags, but I should have mentioned it too).</p>
<p>Here is the changeset: <a href="https://www.openstreetmap.org/changeset/42068474">https://www.openstreetmap.org/changeset/42068474</a></p>
<p>I deleted all (2) ways from this relation: <a href="https://www.openstreetmap.org/relation/5880967">https://www.openstreetmap.org/relation/5880967</a></p>
<p>The history of that relation is that it used to have 2 member ways: <a href="https://www.openstreetmap.org/relation/5880967/history">https://www.openstreetmap.org/relation/5880967/history</a></p>
<p>I'm pretty sure I just removed the relation from both those ways, but did nothing to delete the relation. Yet the changeset says the relation was deleted. Perhaps iD did that?</p>
<p>I agree that in general automatically deleting a relation that becomes empty would be a bad idea. But perhaps it makes sense for iD, given the typical user base (such as me).</p></div>
<div class="comment-info" id="comment-51988-info">
<span class="comment-age">(11 Sep '16, 15:21)</span>
<a class="comment-user userinfo" href="/users/11758/ljb_nj">ljb_nj</a>
</div>
</div>
<a name="51998"></a>
<div class="comment" id="comment-51998">
<div class="comment-score" id="post-51998-score"></div>
<div class="comment-text"><p>The wiki has a useful <a href="http://wiki.openstreetmap.org/wiki/Empty_relations">article about empty relations</a>, including a link to a tool that lists them, and some hint on why they appear and how to handle them. Info about iD is currently missing, if you use that editor please update the wiki page.</p></div>
<div class="comment-info" id="comment-51998-info">
<span class="comment-age">(12 Sep '16, 09:14)</span>
<a class="comment-user userinfo" href="/users/867/vincent-de-phily">Vincent de P... ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-51985">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-51985-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="52091"></a>
<div class="answer" id="answer-container-52091">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/52091/up/" id="post-52091-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-52091-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/52091/down/" id="post-52091-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yes, iD does delete the Relation when it no longer has any members.</p>
<p>see:  <a href="https://github.com/openstreetmap/iD/blob/c8e4f76c230512dc82dc060bf337e3ba489b113e/modules/actions/delete_member.js#L10-L11"><code>delete_member.js</code></a>  and  <a href="https://github.com/openstreetmap/iD/blob/c8e4f76c230512dc82dc060bf337e3ba489b113e/modules/core/relation.js#L67-L69"><code>relation.js#isDegenerate</code></a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/52091/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>18 Sep '16, 02:49</strong>
</p>
<img alt="bhousel's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/5372740989fdca18458f194a285fcb3e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7499/bhousel">bhousel</a><br/>
<span class="score" title="2089 reputation points"><span class="">2.1k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="25 badges"><span class="silver">●</span><span class="badgecount">25</span></span><span title="28 badges"><span class="bronze">●</span><span class="badgecount">28</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="bhousel has 13 accepted answers">38%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-52091">
</div>
<div class="comment-tools" id="comment-tools-52091">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-52091-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/51979/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="tDrgkOom64JyRLqkOQ90be0EpNd9fkla"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>