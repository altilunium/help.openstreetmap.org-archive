<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/20943/compile-error-in-mod_tile-on-fedora-18">compile error in mod_tile on fedora 18</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/20943/up/" id="post-20943-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-20943-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/20943/down/" id="post-20943-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/20943/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am going through the process of building a map server on fedora 18 (cos that is what I've got, so don't ask) and got an error building mod_map :
apxs:Error: Command failed with rc=65536</p>
<p>When I switched off the compiler warnings it showed this error from libtool:
./mod_tile.c:661:28: error: 'conn_rec' has no member named 'remote_ip'</p>
<p>This is a described in <a href="https://code.google.com/p/mod-auth-external/issues/detail?id=8">https://code.google.com/p/mod-auth-external/issues/detail?id=8</a>
Where they helpfully write:
"The remote_ip field in the conn_rec structure was removed in Apache 2.4.1 and replaced with client_ip and useragent_ip."</p>
<p>In mod_tile.c I replaced the 3 occurrences of remote_ip with client_ip and the mod compiled. great.
But i dont know yet if it will run. 
Still, I thought I ought to tell someone... you probably know all this already I am sure, but if not could you pass this on to a developer? I don't know who that might be. I have only just started playing around with this stuff and don't know my way around.
Oh, and I downloaded the code about 4 hours ago and I am writing this on Sat Mar 23 23:19:58 GMT 2013
so goodnight.</p>
<p>Panca Kanga</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-mod_map" href="/tags/mod_map/" rel="tag" title="see questions tagged 'mod_map'">mod_map</a>
<a class="post-tag tag-link-mod_tile.c" href="/tags/mod_tile.c/" rel="tag" title="see questions tagged 'mod_tile.c'">mod_tile.c</a>
<a class="post-tag tag-link-mod_authnz_external" href="/tags/mod_authnz_external/" rel="tag" title="see questions tagged 'mod_authnz_external'">mod_authnz_external</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>23 Mar '13, 23:24</strong>
</p>
<img alt="Panca%20Kanga's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1bca123c0c1f7ff52cb5ac0972837cc7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5906/panca-kanga">Panca Kanga</a><br/>
<span class="score" title="30 reputation points">30</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Panca Kanga has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-20943">
</div>
<div class="comment-tools" id="comment-tools-20943">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-20943-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/20943/compile-error-in-mod_tile-on-fedora-18?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/20943/compile-error-in-mod_tile-on-fedora-18?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/20943/compile-error-in-mod_tile-on-fedora-18?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/20943/compile-error-in-mod_tile-on-fedora-18?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="20963"></a>
<div class="answer" id="answer-container-20963">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/20963/up/" id="post-20963-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-20963-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/20963/down/" id="post-20963-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>mod_tile should now compile with apache 2.4. If there are any additional fixes required to build mod_tile on Fedora 18, please let me know.</p>
<p>Thank you for reporting the issue.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/20963/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>25 Mar '13, 02:29</strong>
</p>
<img alt="apmon's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/65/apmon">apmon</a><br/>
<span class="score" title="6527 reputation points"><span class="">6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="apmon has 9 accepted answers">20%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-20963">
<a name="20974"></a>
<div class="comment" id="comment-20974">
<div class="comment-score" id="post-20974-score"></div>
<div class="comment-text"><p>Thank you for working on it so quickly. It compiled and installed under my fedora 18 system.
I am just working through the steps at <a href="http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/">http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/</a>
It seems very clearly written though I keep making silly mistakes. I should just follow the instructions
and not mess about. I think I will download the UK tonight and wait and see how it goes with that map set installed. Currently renderd says it is writing mod_tile/default/0/0/0/0/0/0.meta but httpd cannot see
it and when I look it is not there. Maybe because I have installed a too small dataset (of Nepal.) 
I am not writing expecting an `answer' BTW.</p></div>
<div class="comment-info" id="comment-20974-info">
<span class="comment-age">(25 Mar '13, 21:43)</span>
<a class="comment-user userinfo" href="/users/5906/panca-kanga">Panca Kanga</a>
</div>
</div>
<a name="21006"></a>
<div class="comment" id="comment-21006">
<div class="comment-score" id="post-21006-score">2</div>
<div class="comment-text"><p>Sorry, there was another bug in renderd, that caused tiles to not be written out. This should be fixed now as well.</p></div>
<div class="comment-info" id="comment-21006-info">
<span class="comment-age">(26 Mar '13, 16:43)</span>
<a class="comment-user userinfo" href="/users/65/apmon">apmon</a>
</div>
</div>
<a name="21013"></a>
<div class="comment" id="comment-21013">
<div class="comment-score" id="post-21013-score"></div>
<div class="comment-text"><p>Oh, it was a little bug was it? I thought it was  me. I had moved the install to another disk, and also I was switching selinux on and off trying various ways of setting <em>that</em>. 
The recompile with the V.29407 code does indeed get everything going. Yep, there is the world at 0/0/0. Excellent.
I am only installing the map server at home for my own satisfaction and not expecting a 4-hour call-out on a bug report! However I am sure this speedy fix will help others with more serious needs.
I am still grateful though. Thanx. 
Hmm ... But no sign of Nepal yet... I think I had better get England into the db and then see where I can find. I downloaded England last night and I will let it load in tonight.
Panca Kanga.</p></div>
<div class="comment-info" id="comment-21013-info">
<span class="comment-age">(26 Mar '13, 22:01)</span>
<a class="comment-user userinfo" href="/users/5906/panca-kanga">Panca Kanga</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-20963">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-20963-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="20956"></a>
<div class="answer answered-by-owner" id="answer-container-20956">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/20956/up/" id="post-20956-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-20956-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/20956/down/" id="post-20956-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I found this patch this afternoon: 
<a href="http://www.michael-joost.de/mod_tile_apache2.4.patch">http://www.michael-joost.de/mod_tile_apache2.4.patch</a></p>
<p>It is provided to meet  the  errors like I was having yesterday and also sorts out the renamed unixd_set_global_perms. 
On top of that it fixes the compiler warnings about getting long int instead of apr_uint64_t &amp;etc. 
Except unfortunately it does not apply correctly to my copy of mod_tile.c extracted from build 29393. (I assume it is intended  to be applied with the gnu patch(1)).
However not quite working does not matter 'cos looking at the patch shows you what needs doing. The main problems were the implicit declarations and it is obvious where to fix  them once you know what to change them to. 
It seems all the funny ints can be left to get on with it.</p>
<p>Onwards and upwards..</p>
<p>BTW. The preview of this note looks funny all the _ have disappeared. What to do about it?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/20956/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Mar '13, 22:13</strong>
</p>
<img alt="Panca%20Kanga's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1bca123c0c1f7ff52cb5ac0972837cc7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5906/panca-kanga">Panca Kanga</a><br/>
<span class="score" title="30 reputation points">30</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Panca Kanga has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-20956">
</div>
<div class="comment-tools" id="comment-tools-20956">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-20956-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/20943/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="1b7IzWkIKoaQt8wPvq124q21xPLBUcMB"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>