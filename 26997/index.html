<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/26997/resuming-failed-nominatim-setup-due-to-no-osmosis">Resuming failed Nominatim setup (due to no osmosis)</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/26997/up/" id="post-26997-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-26997-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/26997/down/" id="post-26997-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/26997/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>On my CentOS 6 machine, I ran the command:</p>
<pre><code>./Nominatim-2.0.1/utils/setup.php --osm-file /postgres/OpenStreetMaps/planetfile/planet-latest.osm.pbf --all --osm2pgsql-cache 18000
</code></pre>
<p>to set up Nominatim, and after waiting for 3 days, it failed with the following log:</p>
<pre><code>Osm2pgsql took 238253s overall
.
.

                         addgeometrycolumn
-------------------------------------------------------------------
 public.location_road_230.geometry SRID:4326 TYPE:GEOMETRY DIMS:2
(1 row)

CREATE INDEX

.
.
Reanalysing database...
NOTICE:   no notnull values, invalid stats
NOTICE:   no notnull values, invalid stats
ANALYZE
ERROR: please download osmosis
please download osmosis
</code></pre>
<p>I had no idea that osmosis was a dependency. After I download and install osmosis, is there a way I can resume the setup process without having to start from the beginning? I'm assuming I don't have to import to postgres database anymore, because the setup failed after the output "Osm2pgsql took 238253s overall". If possible, what would the command be? Thanks!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>07 Oct '13, 19:26</strong>
</p>
<img alt="baekacaek's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/61de868d7785f30711497cecbdddf5f4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7476/baekacaek">baekacaek</a><br/>
<span class="score" title="176 reputation points">176</span><span title="12 badges"><span class="badge1">●</span><span class="badgecount">12</span></span><span title="13 badges"><span class="silver">●</span><span class="badgecount">13</span></span><span title="17 badges"><span class="bronze">●</span><span class="badgecount">17</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="baekacaek has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-26997">
</div>
<div class="comment-tools" id="comment-tools-26997">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-26997-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/26997/resuming-failed-nominatim-setup-due-to-no-osmosis?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/26997/resuming-failed-nominatim-setup-due-to-no-osmosis?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/26997/resuming-failed-nominatim-setup-due-to-no-osmosis?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/26997/resuming-failed-nominatim-setup-due-to-no-osmosis?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="27005"></a>
<div class="answer accepted-answer" id="answer-container-27005">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/27005/up/" id="post-27005-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-27005-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/27005/down/" id="post-27005-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/27005/" rel="nofollow" title="baekacaek has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You can continue by using:</p>
<pre><code>./Nominatim-2.0.1/utils/setup.php --index
</code></pre>
<p>However you should be aware that 2.1 (which includes a fix for this problem) has now been released.  It would be recommended to do a new install using that since no more fixes or updates to 2.0.1 will be released.</p>
<p>Also, if osm2pgsql by itself took 3 days it is likely that it will take a very, very long time to index the data.  You may want to look at upgrading your server with an ssd drive or seeing if you can manage with just an extract rather than the full plant.</p>
<p>Also, we always recommend doing a test install with a small extract first before trying a full plant import to check everything is installed and working.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/27005/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Oct '13, 00:05</strong>
</p>
<img alt="twain's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bda08a105bb6a4a606d47c1b27187fac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4/twain">twain</a><br/>
<span class="score" title="2381 reputation points"><span class="">2.4k</span></span><span title="25 badges"><span class="silver">●</span><span class="badgecount">25</span></span><span title="38 badges"><span class="bronze">●</span><span class="badgecount">38</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="twain has 15 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-27005">
<a name="27006"></a>
<div class="comment" id="comment-27006">
<div class="comment-score" id="post-27006-score"></div>
<div class="comment-text"><p>Thanks, I installed Nominatim 2.1, and now I'm having other issues. Very frustrating :/</p></div>
<div class="comment-info" id="comment-27006-info">
<span class="comment-age">(08 Oct '13, 01:58)</span>
<a class="comment-user userinfo" href="/users/7476/baekacaek">baekacaek</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-27005">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-27005-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/26997/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="6i8zHjXiijtlYHdQRcOKoegSJEkQieN3"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>