<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/13870/different-result-of-nominatim-on-my-server-while-comparing-with-original">Different result of nominatim on my server while comparing with original</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/13870/up/" id="post-13870-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-13870-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/13870/down/" id="post-13870-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/13870/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I was trying to configure Nominatim OSM DB on my own server and facing so many issues while using planet file. So as per the suggestions of experts on forums, I did this job for particular small city "Bremen" in Germany and I was successful to do so. Now my issue is, when I am checking the lat/lon of a place from that city I am getting following result:</p>
<p>My query:
<a href="http://MY_SERVER/reverse.php?format=xml&amp;lat=53.078717&amp;lon=8.801239">http://MY_SERVER/reverse.php?format=xml&amp;lat=53.078717&amp;lon=8.801239</a></p>
<p>My result:</p>
<pre><code>&lt;reversegeocode timestamp="Thu, 28 Jun 12 07:38:58 +0200" attribution="Data Copyright OpenStreetMap Contributors, Some Rights Reserved. CC-BY-SA 2.0." querystring="format=xml&amp;lat=53.078717&amp;lon=8.801239"&gt;
    &lt;result place_id="127453" osm_type="way" osm_id="25418182" lat="53.0784786859461" lon="8.80216752051522"&gt;
        Straßenbahn Linie 2,3,3S, Germany
    &lt;/result&gt;
&lt;addressparts&gt;
    &lt;tram&gt;Straßenbahn Linie 2,3,3S&lt;/tram&gt;
    &lt;country&gt;Germany&lt;/country&gt;
    &lt;country_code&gt;de&lt;/country_code&gt;
&lt;/addressparts&gt;
</code></pre>
&lt;/reversegeocode&gt;

<p>While you can see the actual result here for the same lat/ lon: <a href="http://nominatim.openstreetmap.org/reverse.php?format=xml&amp;lat=53.078717&amp;lon=8.801239">http://nominatim.openstreetmap.org/reverse.php?format=xml&amp;lat=53.078717&amp;lon=8.801239</a></p>
<p>So please suggest why all this tags (pedestrian, neighbourhood, suburb , city, state, postcode etc.) are missing on my server. what is my mistake in configuration or import? What can I do to solve this?</p>
<p>More (Another question), As I have already nominatm installed for one city on my server and now I want to do it for planet. So should I do all the things from the begening? or there is some update kind of mechanism which will upgrade my installation to planet level from the current city level? Please anwser.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-planet" href="/tags/planet/" rel="tag" title="see questions tagged 'planet'">planet</a>
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-postgresql" href="/tags/postgresql/" rel="tag" title="see questions tagged 'postgresql'">postgresql</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>28 Jun '12, 07:03</strong>
</p>
<img alt="Ravi%20Kotwani's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b3013a84207a32bed7ddfad7004100f7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3908/ravi-kotwani">Ravi Kotwani</a><br/>
<span class="score" title="136 reputation points">136</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="9 badges"><span class="bronze">●</span><span class="badgecount">9</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Ravi Kotwani has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-13870">
</div>
<div class="comment-tools" id="comment-tools-13870">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-13870-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/13870/different-result-of-nominatim-on-my-server-while-comparing-with-original?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/13870/different-result-of-nominatim-on-my-server-while-comparing-with-original?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/13870/different-result-of-nominatim-on-my-server-while-comparing-with-original?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/13870/different-result-of-nominatim-on-my-server-while-comparing-with-original?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="13894"></a>
<div class="answer" id="answer-container-13894">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/13894/up/" id="post-13894-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-13894-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/13894/down/" id="post-13894-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Small extracts have the disadvantage that they often do not contain the relations of higher administrative units, city and state in your case. Or they are missing some of the boundary ways, which probably happens with the neighborhood.</p>
<p>There are two possibilities to fix this:</p>
<ol>
<li>Import a large enough extract, Germany should do in your case. You will have to start the import from scratch.</li>
<li>
<p>Add the missing boundaries. For this you need to find out the relation ID of the boundary or boundaries in question and then import them with:</p>
<pre><code>./utils/update.php --import-relation &lt;relation id&gt;
</code></pre>
<p>Then reindex the entire database like this:</p>
<pre><code>psql -d nominatim -c 'UPDATE placex SET indexed_status=2'
./utils/setup.php --index
</code></pre>
</li>
</ol>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/13894/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Jun '12, 08:17</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-13894">
<a name="13898"></a>
<div class="comment" id="comment-13898">
<div class="comment-score" id="post-13898-score"></div>
<div class="comment-text"><p>Thanks for your answer. I am going with solution one. So doing process from scratch for Germany.</p></div>
<div class="comment-info" id="comment-13898-info">
<span class="comment-age">(29 Jun '12, 10:06)</span>
<a class="comment-user userinfo" href="/users/3908/ravi-kotwani">Ravi Kotwani</a>
</div>
</div>
<a name="13940"></a>
<div class="comment" id="comment-13940">
<div class="comment-score" id="post-13940-score"></div>
<div class="comment-text"><p><a href="/users/2921/lonvia">@lonvia</a> Hi, I have imported the Germany data from scratch as you told in your option 1. Still I am facing the same problem. </p>
<p>Some details: 1043 tables are in DB and following errors I faced while importing:
-- type "planet_osm_ways" does not exist
-- type "nearplace" does not exist 
-- type "nearfeature" does not exist 
-- relation "planet_osm_rels" does not exist</p>
<p>Please suggest the solution.</p></div>
<div class="comment-info" id="comment-13940-info">
<span class="comment-age">(02 Jul '12, 11:38)</span>
<a class="comment-user userinfo" href="/users/3908/ravi-kotwani">Ravi Kotwani</a>
</div>
</div>
<a name="13951"></a>
<div class="comment" id="comment-13951">
<div class="comment-score" id="post-13951-score">2</div>
<div class="comment-text"><p>If "planet_osm_ways" and "planet_osm_rels" do not exist then something went wrong already with the osm2pgsql import. Make sure you have the latest version of Nominatim (not older than a week) and that you use the version of osm2pgsql that comes with it.</p></div>
<div class="comment-info" id="comment-13951-info">
<span class="comment-age">(02 Jul '12, 20:13)</span>
<a class="comment-user userinfo" href="/users/2921/lonvia">lonvia</a>
</div>
</div>
<a name="13969"></a>
<div class="comment" id="comment-13969">
<div class="comment-score" id="post-13969-score"></div>
<div class="comment-text"><p>I upgraded my osm2pgsql version as you told. But still facing all the same error. There was no difference even in one small error. Everything was same as previous. Please suggest any other solution. Thanks in advance.</p></div>
<div class="comment-info" id="comment-13969-info">
<span class="comment-age">(03 Jul '12, 14:28)</span>
<a class="comment-user userinfo" href="/users/3908/ravi-kotwani">Ravi Kotwani</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-13894">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-13894-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="28137"></a>
<div class="answer" id="answer-container-28137">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28137/up/" id="post-28137-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28137-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/28137/down/" id="post-28137-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi</p>
<p>is a old questiond, but i resolved with reindexed data, give the solution for someone in need ...</p>
<p>whit this resolved indexed all "place", before the "placex" is a 30%, now is a 100% of a "place" table.</p>
<pre><code>./utils/update.php --import-file &lt;osmfile.osm&gt;
./utils/update.php --index
</code></pre>
<p>Gracias a todos por su ayuda</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/28137/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Nov '13, 17:26</strong>
</p>
<img alt="alveniz's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/8151a2cd9f1041f10b62d8ca446d3b2a?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4955/alveniz">alveniz</a><br/>
<span class="score" title="51 reputation points">51</span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="5 badges"><span class="silver">●</span><span class="badgecount">5</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="alveniz has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28137">
</div>
<div class="comment-tools" id="comment-tools-28137">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28137-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/13870/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="VWqKaVr9uuEDZrx6yGt8Mp4wpcxN530t"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>