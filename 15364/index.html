<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/15364/should-i-extract-the-data-from-relations-or-from-ways">Should I extract the data from relations or from ways?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/15364/up/" id="post-15364-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-15364-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/15364/down/" id="post-15364-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/15364/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm working with the tag=power (power lines and similar) and seems like a lot of ways are not contained in relations. Do you know why is this happening and what will be the evolution of this data in the future? Relations will disappear or the existent ways will be included in new relations?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-power" href="/tags/power/" rel="tag" title="see questions tagged 'power'">power</a>
<a class="post-tag tag-link-relations" href="/tags/relations/" rel="tag" title="see questions tagged 'relations'">relations</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Aug '12, 12:22</strong>
</p>
<img alt="JorgePM's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/40d0052a4cd080ec949c64c2ae62bd82?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3516/jorgepm">JorgePM</a><br/>
<span class="score" title="51 reputation points">51</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="JorgePM has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/15364/">
                edited
                <strong>22 Aug '12, 16:04</strong>
</a>
</p>
<img alt="Sanderd17's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1fe9a0c696a5000fb304ababea9f83af?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/280/sanderd17">Sanderd17</a><br/>
<span class="score" title="1111 reputation points"><span class="">1.1k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="37 badges"><span class="bronze">●</span><span class="badgecount">37</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-15364">
<a name="15371"></a>
<div class="comment" id="comment-15371">
<div class="comment-score" id="post-15371-score">1</div>
<div class="comment-text"><p>Why do you think every way with a power tag should belong to a relation?</p></div>
<div class="comment-info" id="comment-15371-info">
<span class="comment-age">(22 Aug '12, 13:14)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="15377"></a>
<div class="comment" id="comment-15377">
<div class="comment-score" id="post-15377-score"></div>
<div class="comment-text"><p>Because there a lot of ways with similar characteristics than the ones that belong to relations, not being part of them. So for example, I tried to get all the 380kV lines and if you go for the relations, a lot of ways are left behind (not being shown) while they are exactly the same as the ones inside the relations. Maybe I'm missing something, but this is my experience working with the data. Maybe I'm missing the point about what relations really represent.</p></div>
<div class="comment-info" id="comment-15377-info">
<span class="comment-age">(22 Aug '12, 14:30)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-15364">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-15364-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/15364/should-i-extract-the-data-from-relations-or-from-ways?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/15364/should-i-extract-the-data-from-relations-or-from-ways?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/15364/should-i-extract-the-data-from-relations-or-from-ways?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/15364/should-i-extract-the-data-from-relations-or-from-ways?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="15393"></a>
<div class="answer accepted-answer" id="answer-container-15393">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/15393/up/" id="post-15393-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-15393-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/15393/down/" id="post-15393-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/15393/" rel="nofollow" title="JorgePM has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yep, it's better to go via ways.</p>
<p>In fact, the best is to combine ways and relation search. Search for both and apply the tags of the relation to the ways. Sometimes, if someone decides some ways fits in a relation, they don't add the tags to the ways any more.</p>
<p>About that relation, it does look like all those ways have the same number of lines and the same voltage, and they follow each other up. So one could argue they belong in a relation. Although the middle line has the suspicious tag source=guessed. And together with those weird turns, it makes the entire relation a bit incredible.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/15393/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Aug '12, 15:56</strong>
</p>
<img alt="Sanderd17's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1fe9a0c696a5000fb304ababea9f83af?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/280/sanderd17">Sanderd17</a><br/>
<span class="score" title="1111 reputation points"><span class="">1.1k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="37 badges"><span class="bronze">●</span><span class="badgecount">37</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Sanderd17 has 15 accepted answers">31%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-15393">
<a name="44845"></a>
<div class="comment" id="comment-44845">
<div class="comment-score" id="post-44845-score"></div>
<div class="comment-text"><p>relations are there to build transmission circuits, that's why they are composed of several substations and ways. </p></div>
<div class="comment-info" id="comment-44845-info">
<span class="comment-age">(20 Aug '15, 15:36)</span>
<a class="comment-user userinfo" href="/users/11388/widedangel">widedangel</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-15393">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-15393-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="15379"></a>
<div class="answer" id="answer-container-15379">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/15379/up/" id="post-15379-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-15379-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/15379/down/" id="post-15379-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Please read this part of the OSM wiki, it will clarify your view on relations: <a href="http://wiki.openstreetmap.org/wiki/Relations/Relations_are_not_Categories">http://wiki.openstreetmap.org/wiki/Relations/Relations_are_not_Categories</a></p>
<p>Next to that, you can use <a href="http://wiki.openstreetmap.org/wiki/Xapi">xapi</a> or the <a href="http://wiki.openstreetmap.org/wiki/Overpass_API">overpass API</a> to gather features with the same tags.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/15379/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Aug '12, 14:39</strong>
</p>
<img alt="Sanderd17's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1fe9a0c696a5000fb304ababea9f83af?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/280/sanderd17">Sanderd17</a><br/>
<span class="score" title="1111 reputation points"><span class="">1.1k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="37 badges"><span class="bronze">●</span><span class="badgecount">37</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Sanderd17 has 15 accepted answers">31%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/15379/">
                edited
                <strong>22 Aug '12, 14:40</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-15379">
<a name="15380"></a>
<div class="comment" id="comment-15380">
<div class="comment-score" id="post-15380-score">1</div>
<div class="comment-text"><p>Relations in this case are mostly used for grouping ways (lines) going from one substation to another (sometimes they include the substation, some other times they don't). Then some other lines with the same behaviour do not belong to any relation. It means there are ways that if you put them together, will create a relation similar to the ones already exist. So what is the protocol for a way to form a relation or not when both ways the one that belongs to the relation and the one that it doesn't, are the same?</p></div>
<div class="comment-info" id="comment-15380-info">
<span class="comment-age">(22 Aug '12, 14:48)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
<a name="15383"></a>
<div class="comment" id="comment-15383">
<div class="comment-score" id="post-15383-score"></div>
<div class="comment-text"><p>Like when you group the different pieces of way and the different houses of a street into a relation. Some mappers consider it valuable (because it makes sure the house is linked to the right street), others don't (because there is too much other work, and the chance that a house is assigned to a wrong way is small).</p>
<p>The same goes for power lines. Some think it's valuable to put a relation over the line (because that entity is one power line), others don't because there is too much other work.</p></div>
<div class="comment-info" id="comment-15383-info">
<span class="comment-age">(22 Aug '12, 15:09)</span>
<a class="comment-user userinfo" href="/users/280/sanderd17">Sanderd17</a>
</div>
</div>
<a name="15384"></a>
<div class="comment" id="comment-15384">
<div class="comment-score" id="post-15384-score"></div>
<div class="comment-text"><p>hmmm but then in this case relations are useless. Just to show my point, I'm working with the German transmission grid. Originally there were about 3.5k relations and about 150k ways. After some heavy data mining I have about 6.5k "new" relations formed by ways jointed together going from one substation to another. All the relations, new and old behave the same, same tags, same characteristics, same element. So if I want to perform any kind of analysis relations will only produce errors and not any given values because they are hiding lines.</p></div>
<div class="comment-info" id="comment-15384-info">
<span class="comment-age">(22 Aug '12, 15:14)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
<a name="15385"></a>
<div class="comment not_top_scorer" id="comment-15385">
<div class="comment-score" id="post-15385-score"></div>
<div class="comment-text"><p>Even I tried to get some visualization not based on tiles server using OpenLayers and if you base it in relations you get a third of the lines that you get if you base it on ways... So when and/or why the relations are there if they are aleatory grouping elements or not. (They don't have anything in common, not the same TSO, nor voltage, just the user decides when to include the ways in a relation or not)</p></div>
<div class="comment-info" id="comment-15385-info">
<span class="comment-age">(22 Aug '12, 15:17)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
<a name="15387"></a>
<div class="comment" id="comment-15387">
<div class="comment-score" id="post-15387-score">1</div>
<div class="comment-text"><p>can you give a link to such a relation, maybe the OSM data has a problem, or somebody tried to mass-edit it.</p></div>
<div class="comment-info" id="comment-15387-info">
<span class="comment-age">(22 Aug '12, 15:23)</span>
<a class="comment-user userinfo" href="/users/280/sanderd17">Sanderd17</a>
</div>
</div>
<a name="15391"></a>
<div class="comment" id="comment-15391">
<div class="comment-score" id="post-15391-score">1</div>
<div class="comment-text"><p>Sure, don't get me wrong, I'm trying to be constructive but the lack of coherence with the relations gave me some good headaches. <a href="http://www.openstreetmap.org/?relation=1728819">http://www.openstreetmap.org/?relation=1728819</a> That relation ends on the left into a substation (Denzlingen), the line that comes out from that substation are a group of ways. None of them belong to any relation. There are a good couple of thousands more cases like this. So when you try to analise what lines are available, if you go through relations, you will miss a lot of them. So it is better to go directly through ways... (PS: my data comes from geofabrik.de)</p></div>
<div class="comment-info" id="comment-15391-info">
<span class="comment-age">(22 Aug '12, 15:38)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
<a name="15394"></a>
<div class="comment not_top_scorer" id="comment-15394">
<div class="comment-score" id="post-15394-score"></div>
<div class="comment-text"><p>can you make your last comment the answer for this question? I believe it is the correct one. I absolutely agree with the relations-ways combination strategy and it should be specified in some point of the wiki.</p></div>
<div class="comment-info" id="comment-15394-info">
<span class="comment-age">(22 Aug '12, 16:00)</span>
<a class="comment-user userinfo" href="/users/3516/jorgepm">JorgePM</a>
</div>
</div>
<a name="15395"></a>
<div class="comment not_top_scorer" id="comment-15395">
<div class="comment-score" id="post-15395-score"></div>
<div class="comment-text"><p>I have done so, about the wiki, well, lets just say it also needs some work.</p>
<p>There is a lot quality data in OSM, but you need to study the data a lot before you can work with it.</p></div>
<div class="comment-info" id="comment-15395-info">
<span class="comment-age">(22 Aug '12, 16:03)</span>
<a class="comment-user userinfo" href="/users/280/sanderd17">Sanderd17</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-15379">
<span class="comments-showing">
            showing 5 of 8
        </span>
<a class="show-all-comments-link" href="#">show 3 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-15379-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/15364/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="u67MBWdChvyqBmj04zgEijtMSK0Wdziz"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>