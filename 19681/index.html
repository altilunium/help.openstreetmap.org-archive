<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/19681/overpass-get-postcodes-boundarys-from-area">Overpass: Get postcodes-boundarys from area</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19681/up/" id="post-19681-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19681-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/19681/down/" id="post-19681-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/19681/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello!</p>
<p>I try to get all postcodes from a area like "Munich". I tried:</p>
<pre><code>&lt;area-query ref="3600062428" /&gt;
 &lt;recurse type="node-relation" /&gt;
 &lt;query type="relation"&gt;
   &lt;item /&gt;
   &lt;has-kv k="boundary" v="postal_code"/&gt;
 &lt;/query&gt;
&lt;print /&gt;
</code></pre>
<p>but the result is just empty. Any ideas how to do it? What I need are just the postcodes itself.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>07 Feb '13, 13:39</strong>
</p>
<img alt="wuschba's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/12f399704c1d69150128133157881125?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5576/wuschba">wuschba</a><br/>
<span class="score" title="41 reputation points">41</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="wuschba has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/19681/">
                edited
                <strong>07 Feb '13, 13:40</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19681">
</div>
<div class="comment-tools" id="comment-tools-19681">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19681-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/19681/overpass-get-postcodes-boundarys-from-area?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/19681/overpass-get-postcodes-boundarys-from-area?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/19681/overpass-get-postcodes-boundarys-from-area?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/19681/overpass-get-postcodes-boundarys-from-area?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="19744"></a>
<div class="answer accepted-answer" id="answer-container-19744">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19744/up/" id="post-19744-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19744-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/19744/down/" id="post-19744-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/19744/" rel="nofollow" title="wuschba has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yes, please use "recurse type='up'" instead.</p>
<pre><code>&lt;area-query ref="3600062428" /&gt;
  &lt;recurse **type="up"** /&gt;
  &lt;query type="relation"&gt;
    &lt;item /&gt;
    &lt;has-kv k="boundary" v="postal_code" /&gt;
  &lt;/query&gt;
&lt;print /&gt;
</code></pre>
<p>Postal code boundaries are made of ways which in turn are made of nodes, so there is no direct connection between the nodes and the relations. For that reason, the recurse node-relation doesn't find anything. By contrast, recurse "up" searches also for these indirect memberships.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/19744/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Feb '13, 07:42</strong>
</p>
<img alt="Roland%20Olbricht's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fcfdb0825826fd13d2ff0d83d58819c6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3480/roland-olbricht">Roland Olbricht</a><br/>
<span class="score" title="6666 reputation points"><span class="">6.7k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Roland Olbricht has 40 accepted answers">36%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/19744/">
                edited
                <strong>08 Feb '13, 07:44</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19744">
<a name="20112"></a>
<div class="comment" id="comment-20112">
<div class="comment-score" id="post-20112-score"></div>
<div class="comment-text"><p>Any idea why this won't work in Austria?
Apetlon, 3600105619, should have the postcodes: 7132,7143,7161
but the result of the query</p>
<pre><code>node(area:3600105619);
&lt;;
relation._["boundary"="postal_code"];
out;
</code></pre>
<p>stays empty.</p></div>
<div class="comment-info" id="comment-20112-info">
<span class="comment-age">(21 Feb '13, 13:57)</span>
<a class="comment-user userinfo" href="/users/5576/wuschba">wuschba</a>
</div>
</div>
<a name="20115"></a>
<div class="comment" id="comment-20115">
<div class="comment-score" id="post-20115-score"></div>
<div class="comment-text"><p>Got a 2nd problem:
The node for "Ingolstadt" gives me these postcodes:
 &lt;tag k="postal_code" v="85049,85051,85053,85055,85057"/&gt;</p>
<p>But doing your query on 3600062381, I get much more postcodes. What might be the problem?</p></div>
<div class="comment-info" id="comment-20115-info">
<span class="comment-age">(21 Feb '13, 14:08)</span>
<a class="comment-user userinfo" href="/users/5576/wuschba">wuschba</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-19744">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19744-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/19681/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="SzdfqhLulwCWRL1QnxByNJL1Ek0FU6gY"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>