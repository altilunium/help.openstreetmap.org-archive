<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/8363/how-to-setup-postgis-server-and-import-osm-file-on-windows">How to setup PostGIS server and import .osm-file on Windows</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8363/up/" id="post-8363-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8363-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/8363/down/" id="post-8363-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/8363/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi guys,</p>
<p>I spent the whole day trying to import a .osm-file into a database on Windows 7. I read many many pages about how to do this, but still I didn't succeed. :-(</p>
<p>The problem is that there are so many different tools available and as a newbie I just can't decide which to use.</p>
<p>I would be so happy, if you could give a step by step instruction on how to do it. It must be possible somehow! ;-) There is no need to be too detailed right now, I will try to follow your steps as good as possible and will just ask if more detail is needed for me.</p>
<p>Thank you so much in advance!</p>
<p>drummer</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-windows" href="/tags/windows/" rel="tag" title="see questions tagged 'windows'">windows</a>
<a class="post-tag tag-link-import" href="/tags/import/" rel="tag" title="see questions tagged 'import'">import</a>
<a class="post-tag tag-link-postgis" href="/tags/postgis/" rel="tag" title="see questions tagged 'postgis'">postgis</a>
<a class="post-tag tag-link-database" href="/tags/database/" rel="tag" title="see questions tagged 'database'">database</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>08 Oct '11, 18:24</strong>
</p>
<img alt="drummer83's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/eec6214146fb12e56a8866dab146feac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2194/drummer83">drummer83</a><br/>
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="drummer83 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8363">
</div>
<div class="comment-tools" id="comment-tools-8363">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8363-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/8363/how-to-setup-postgis-server-and-import-osm-file-on-windows?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/8363/how-to-setup-postgis-server-and-import-osm-file-on-windows?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/8363/how-to-setup-postgis-server-and-import-osm-file-on-windows?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/8363/how-to-setup-postgis-server-and-import-osm-file-on-windows?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="8364"></a>
<div class="answer" id="answer-container-8364">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8364/up/" id="post-8364-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8364-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/8364/down/" id="post-8364-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Once you have set up PostGIS on Windows (which is outside the scope of OSM and you should find information about this elsewhere), <a href="http://wiki.openstreetmap.org/wiki/Osmosis">Osmosis</a> can be used to import data. You will not get a database that is fit for standard rendering with Mapnik, but if all you need is to <em>somehow</em> get the data into PostGIS, that might be the easiest way. Osmosis can write different data schemas and which one you choose depends on what you want to do with the data.</p>
<p>You could also choose an even simpler path and download a set of shape files for your region from the <a href="http://download.geofabrik.de/osm">Geofabrik download server</a>, then use the shp2pgsql that comes with PostGIS to load the shape files into a database. Note however that in contrast to the Osmosis approach, this will not give you the complete set of OSM data - just the stuff that the Geofabrik people chose to export in their shape file.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/8364/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Oct '11, 18:41</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8364">
<a name="8370"></a>
<div class="comment" id="comment-8370">
<div class="comment-score" id="post-8370-score"></div>
<div class="comment-text"><p>Hi,</p>
<p>thanks for your answer. I decided to go for your second approach, as it seems to be easier. So I set up PostgreSQL 9.1 and PostGIS 1.5.3 using all the standard settings. I didn't choose to create a spatial database during the PostGIS setup.</p>
<p>When I try to import the shapefile (hamburg.shp -&gt; roads.shp) using shp2pgsql it says the connection succeeded, but I get the following error:</p>
<blockquote>
<p>Failed in pgui_exec(): FEHLER:  Funktion addgeometrycolumn(unknown, unknown, unknown, unknown, unknown, integer) existiert nicht
LINE 12: SELECT AddGeometryColumn('public','roads','the_geom','-1','M...
                ^
HINT:  Keine Funktion stimmt mit dem angegebenen Namen und den Argumenttypen überein. Sie müssen möglicherweise ausdrückliche Typumwandlungen hinzufügen.
Shapefile import failed.</p>
</blockquote>
<p>What is the problem here?</p>
<p>Thanks for any suggestions.</p>
<p>Using your first approach (osmosis) I guess I have to set up a database with the correct structure first. Is any of the files in this folder doing it for me? </p>
<p>C:Program Filesosmosis-0.39scriptcontrib</p>
<p>apidb_0.6.sql maybe? But what do I have to do to execute the script? I tried pasting the code in the SQL part of pgAdmin but which database has to be selected: postgres? template_postgis? a new one?</p>
<p>Thanks for any help!</p></div>
<div class="comment-info" id="comment-8370-info">
<span class="comment-age">(09 Oct '11, 10:33)</span>
<a class="comment-user userinfo" href="/users/2194/drummer83">drummer83</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-8364">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8364-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="8443"></a>
<div class="answer" id="answer-container-8443">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8443/up/" id="post-8443-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8443-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/8443/down/" id="post-8443-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi, you have to do some tweaking to your postgis database to make it work with osm.
If you understand German, look at my wiki-Page:
<a href="http://wiki.openstreetmap.org/wiki/User:Ajoessen/Postgis">http://wiki.openstreetmap.org/wiki/User:Ajoessen/Postgis</a></p>
<p>Greetings,
ajoessen</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/8443/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Oct '11, 07:45</strong>
</p>
<img alt="ajoessen's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/baddeab22266e1533be4ba4c9f3deb49?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2221/ajoessen">ajoessen</a><br/>
<span class="score" title="168 reputation points">168</span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="6 badges"><span class="bronze">●</span><span class="badgecount">6</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="ajoessen has one accepted answer">9%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8443">
<a name="17971"></a>
<div class="comment" id="comment-17971">
<div class="comment-score" id="post-17971-score"></div>
<div class="comment-text"><p>Any chance you'd know of an english version of that?</p></div>
<div class="comment-info" id="comment-17971-info">
<span class="comment-age">(25 Nov '12, 19:21)</span>
<a class="comment-user userinfo" href="/users/5025/juzeeman">JuZeeMan</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-8443">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8443-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/8363/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="cTIPaSDRuadEveuLrN77emzB2Vij71JP"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>