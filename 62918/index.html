<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/62918/how-to-select-ways-that-are-not-in-specific-areas">How to select ways that are NOT in specific areas?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62918/up/" id="post-62918-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62918-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/62918/down/" id="post-62918-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/62918/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
I am trying this for hours now. </p>
<p>How to select ways that are OUTSIDE an area (polygon) with a certain tag?</p>
<p>The following code prints out tracks (<a href="https://overpass-turbo.eu/s/xBx">overpass turbo</a>). Now, I want the subset of Tracks that are NOT part of polygons with tags like ("boundary"="protected_area"):</p>
<pre><code>[out:json][timeout:25];
(
 way
   ["highway"="track"]
   ({{bbox}}); 
   // remove ways outside of area with tag "boundary"="protected_area"
);
out body;
&gt;;
out skel qt;
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
<a class="post-tag tag-link-overpass-ql" href="/tags/overpass-ql/" rel="tag" title="see questions tagged 'overpass-ql'">overpass-ql</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>05 Apr '18, 11:29</strong>
</p>
<img alt="StefanFreilig's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bc0f1c3258b1fcf7447344eebbf8f88f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14951/stefanfreilig">StefanFreilig</a><br/>
<span class="score" title="21 reputation points">21</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="StefanFreilig has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-62918">
</div>
<div class="comment-tools" id="comment-tools-62918">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62918-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/62918/how-to-select-ways-that-are-not-in-specific-areas?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/62918/how-to-select-ways-that-are-not-in-specific-areas?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/62918/how-to-select-ways-that-are-not-in-specific-areas?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/62918/how-to-select-ways-that-are-not-in-specific-areas?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="62937"></a>
<div class="answer" id="answer-container-62937">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62937/up/" id="post-62937-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62937-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/62937/down/" id="post-62937-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>There are some unclear issues related to your question like: what is the "outside" to your original area (the complementary area relative to the whole Planet or to a larger rectangular polygon enclosing you area), what with the ways crossing the area... just to mention some. Anyway, assuming that the query/filtering model you have mentioned works properly here are some hints/options:  <br/>
-Using a larger rectangular polygon and your query model select the ways inside the rectangle. So, subtract from that set of ways the ways you have already as a result from before.  <br/>
-Create a complementary area to your original area and run your query using this as the area argument. To create the complement area is rather simple. Take the larger rectangular polygon and tag it as outer. Add to this the polygons from your original area with opposite rules. This multipolygon now probably represents the "outside" of your original area.  <br/>
However, be careful. If the set of ways to filter is large and so is the outer polygon of your original area, the procedure to accomplish may take many, many hours. In similar cases you need much more robust and specialized filtering/extracting models than the one you have described.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/62937/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>07 Apr '18, 09:17</strong>
</p>
<img alt="sanser's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/03cd9ea0efd97a7040fda0d6a76aba8e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3194/sanser">sanser</a><br>
<span class="score" title="695 reputation points">695</span><span title="38 badges"><span class="badge1">●</span><span class="badgecount">38</span></span><span title="39 badges"><span class="silver">●</span><span class="badgecount">39</span></span><span title="55 badges"><span class="bronze">●</span><span class="badgecount">55</span></span><br>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="sanser has 2 accepted answers">5%</span>
</br></br></p>
</div>
</div>
<div class="comments-container" id="comments-container-62937">
</div>
<div class="comment-tools" id="comment-tools-62937">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62937-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="62942"></a>
<div class="answer answered-by-owner" id="answer-container-62942">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62942/up/" id="post-62942-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62942-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/62942/down/" id="post-62942-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This is the solution I am working with. It is quite slow though.</p>
<pre><code>[out:json];
area
  ["boundary"="protected_area"]
  ({{bbox}})-&gt;.searchArea;

way
  ["highway"="track"]
  ({{bbox}})
  (area.searchArea)-&gt;.badTracks;

way
  ["highway"="track"]
  ["tracktype"!~"^grade1$"]
  ({{bbox}})-&gt;.allTracks;

(.allTracks - .badTracks;);
(._;&gt;;);
out skel;
</code></pre>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/62942/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Apr '18, 10:34</strong>
</p>
<img alt="StefanFreilig's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bc0f1c3258b1fcf7447344eebbf8f88f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14951/stefanfreilig">StefanFreilig</a><br>
<span class="score" title="21 reputation points">21</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="StefanFreilig has no accepted answers">0%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-62942">
</div>
<div class="comment-tools" id="comment-tools-62942">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62942-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/62918/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="TF4nvYMSxl4p9vIuRACWdER8LPa0XlWk"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>