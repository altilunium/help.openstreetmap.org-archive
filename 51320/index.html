<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/51320/how-to-optimize-josm-for-low-power-laptop">How to optimize josm for low-power laptop?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/51320/up/" id="post-51320-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-51320-score" title="current number of votes">
    5
</div>
<a class="ajax-command post-vote down" href="/vote/51320/down/" id="post-51320-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/51320/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I recently bought a chromebook with an ARM processor (the Asus Flip). I'm using <a href="https://github.com/dnschneid/crouton">Crouton</a> to run the xfce in a chroot, to provide a full (lightweight) Linux desktop. Everything is working great, <em>except</em> JOSM. It is painfully laggy, with multiple second delays for every action. Click on menu, wait 2-3 sec for it to open. Click on node, wait 1-2 sec for to to be selected. Zoom, wait 4-8 seconds. Pretty much unusable.</p>
<p>I bought this laptop for an upcoming bicycle trip, that I am planing to do lots of mapping with it. Because I specifically bought this laptop for running JOSM it's unusability is quite disappointing. </p>
<p>I'm running JOSM from the latest tested .jar file from the command line, giving it extra RAM, with the -Xmx2048m option. The version in the Ubuntu repositories is very old, so I'm not using that (the building plug-in is not supported!).</p>
<p>The bottleneck might be the CPU. It's Rockchip 1.8GHz Quad-core. Sounds fast to me, but htop reports one of the cores in the mid 90 percent range when zooming, or after downloading fresh data. They remain low at other times, despite lag with other tasks. </p>
<p>RAM usage always remains low. Is there a way to optimize CPU usage? Looking at htop, I seem to have multiple threads running.</p>
<p>Sorry if my question is too specific to my needs, I can make it more applicable to others by asking: <strong>How do I trouble shoot JOSM lag, and optimize performance to mitigate lag?</strong></p>
<p><strong>Update:</strong> I've added Sun/Oracle Java, as per the info from <a href="https://help.openstreetmap.org/users/5179/aseerel4c26">aseerel4c26</a> and <a href="https://help.openstreetmap.org/users/30/rorym">rorym</a> and JOSM is now running very responsively. I'm really happy with the results.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-hardware" href="/tags/hardware/" rel="tag" title="see questions tagged 'hardware'">hardware</a>
<a class="post-tag tag-link-josm" href="/tags/josm/" rel="tag" title="see questions tagged 'josm'">josm</a>
<a class="post-tag tag-link-optimization" href="/tags/optimization/" rel="tag" title="see questions tagged 'optimization'">optimization</a>
<a class="post-tag tag-link-arm_cpu" href="/tags/arm_cpu/" rel="tag" title="see questions tagged 'arm_cpu'">arm_cpu</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>09 Aug '16, 20:52</strong>
</p>
<img alt="keithonearth's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f88a467aa884aeb760041004f62448ee?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9027/keithonearth">keithonearth</a><br/>
<span class="score" title="2939 reputation points"><span class="">2.9k</span></span><span title="56 badges"><span class="badge1">●</span><span class="badgecount">56</span></span><span title="76 badges"><span class="silver">●</span><span class="badgecount">76</span></span><span title="108 badges"><span class="bronze">●</span><span class="badgecount">108</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="keithonearth has 3 accepted answers">13%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/51320/">
                edited
                <strong>11 Aug '16, 00:31</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-51320">
<a name="51321"></a>
<div class="comment" id="comment-51321">
<div class="comment-score" id="post-51321-score"></div>
<div class="comment-text"><p>Sounds more like a bug or incompatibility. Did you already test if the problem persists when using different JOSM versions (stable vs latest), a different JRE (openjdk vs Oracle JDK) or another window manager?</p></div>
<div class="comment-info" id="comment-51321-info">
<span class="comment-age">(09 Aug '16, 21:02)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="51343"></a>
<div class="comment" id="comment-51343">
<div class="comment-score" id="post-51343-score"></div>
<div class="comment-text"><p>BTW: There are some reports that Asus Flip runs apps from Google Play store as well. Did you try e.g. Vespucci?</p>
<p>Also tried JOSM on my Raspberry PI 2 (also some ARM chipset) using Oracle JDK 8 via remote ssh session. Although it's a bit sluggish it's not completely unusable, running even on 0.9GHz CPU speed only, though. Oracle JDK can be installed via <code>sudo apt-get install oracle-java8-jdk</code> on Raspbian.</p></div>
<div class="comment-info" id="comment-51343-info">
<span class="comment-age">(11 Aug '16, 06:41)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
<a name="51357"></a>
<div class="comment" id="comment-51357">
<div class="comment-score" id="post-51357-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/8708/mmd">@mmd</a>, thanks for the info. Looks like it should be possible, but I like the way I've got it set up at the moment, and don't want to break anything right before my trip. (updates to chromeos can break crouton apparently, and running android apps requires changing chromeos to the dev branch)</p>
<p>I'll mess around with it when I get back, because once I'm back the chromebook won't be my only computer, and if it's out of commision for a bit that'll be fine.</p>
<p>If things work out well with this set up I'll do a Diary post on this chromebook. I should probably do a review either way... we'll see how much enthusiasm I have for that.</p></div>
<div class="comment-info" id="comment-51357-info">
<span class="comment-age">(11 Aug '16, 19:36)</span>
<a class="comment-user userinfo" href="/users/9027/keithonearth">keithonearth</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-51320">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-51320-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/51320/how-to-optimize-josm-for-low-power-laptop?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/51320/how-to-optimize-josm-for-low-power-laptop?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/51320/how-to-optimize-josm-for-low-power-laptop?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/51320/how-to-optimize-josm-for-low-power-laptop?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="51324"></a>
<div class="answer" id="answer-container-51324">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/51324/up/" id="post-51324-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-51324-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/51324/down/" id="post-51324-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>What java are you using? I found the open source java to be very very slow for JOSM and noticed a massive speed in JOSM when I switched to the closed source Sun/Oracle java.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/51324/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '16, 09:39</strong>
</p>
<img alt="rorym's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/16e12e337f6edc3750681492656097ed?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/30/rorym">rorym</a><br/>
<span class="score" title="5358 reputation points"><span class="">5.4k</span></span><span title="14 badges"><span class="badge1">●</span><span class="badgecount">14</span></span><span title="49 badges"><span class="silver">●</span><span class="badgecount">49</span></span><span title="100 badges"><span class="bronze">●</span><span class="badgecount">100</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="rorym has 18 accepted answers">11%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-51324">
<a name="51325"></a>
<div class="comment" id="comment-51325">
<div class="comment-score" id="post-51325-score">1</div>
<div class="comment-text"><p>when I type:</p>
<pre><code>java -version
</code></pre>
<p>it outputs:</p>
<pre><code>java version "1.7.0_101"
OpenJDK Runtime Environment (IcedTea 2.6.6) (7u101-2.6.6-0ubuntu0.15.10.1)
OpenJDK Zero VM (build 24.95-b01, interpreted mode)
</code></pre></div>
<div class="comment-info" id="comment-51325-info">
<span class="comment-age">(10 Aug '16, 10:09)</span>
<a class="comment-user userinfo" href="/users/9027/keithonearth">keithonearth</a>
</div>
</div>
<a name="51326"></a>
<div class="comment" id="comment-51326">
<div class="comment-score" id="post-51326-score"></div>
<div class="comment-text"><p>That looks like the open source Java. The logo used when JOSM starts will also tell you. I suggest installing, and switching to, the closed source java, it might be much faster.</p></div>
<div class="comment-info" id="comment-51326-info">
<span class="comment-age">(10 Aug '16, 10:10)</span>
<a class="comment-user userinfo" href="/users/30/rorym">rorym</a>
</div>
</div>
<a name="51330"></a>
<div class="comment" id="comment-51330">
<div class="comment-score" id="post-51330-score">1</div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/9027/keithonearth"></a><a href="http://help.openstreetmap.org/users/9027/keithonearth">@keithonearth</a>: try to update to Java 8. You are running version 7. The next JOSM "tested" release (in a few days) will not run with this old Java version anymore. Small performance improvements are expected, too.</p>
<p>For comparison, this is an example <code>-version</code> output of Java 8 (with openJDK on a x86-64 system):</p>
<pre><code>openjdk version "1.8.0_102"
OpenJDK Runtime Environment (build 1.8.0_102-b14)
OpenJDK 64-Bit Server VM (build 25.102-b14, mixed mode)
</code></pre></div>
<div class="comment-info" id="comment-51330-info">
<span class="comment-age">(10 Aug '16, 13:01)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-51324">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-51324-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="51331"></a>
<div class="answer" id="answer-container-51331">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/51331/up/" id="post-51331-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-51331-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/51331/down/" id="post-51331-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It <em>seems</em> (see "Update" below) there is no openJDK VM for ARM processors available which uses (fast) assembler code. See <a href="http://icedtea.classpath.org/wiki/ZeroSharkFaq">http://icedtea.classpath.org/wiki/ZeroSharkFaq</a> "As an interpreter-only port of OpenJDK, Zero is very much slower than vanilla OpenJDK on the same hardware." You seem to run "Zero VM" (see your java version output). Slowness of all Java applications is expected – but at least they run (that's the goal of "Zero"). Other Java applications should run comparatively slow, too.</p>
<p><em>Update:</em> according to <a href="https://en.wikipedia.org/wiki/Comparison_of_Java_virtual_machines#Supported_CPU_architectures">Wikipedia</a>, openJDK looks to be available also without "Zero" for ARM. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/51331/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '16, 13:02</strong>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="aseerel4c26 has 169 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/51331/">
                edited
                <strong>11 Aug '16, 01:29</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-51331">
<a name="51333"></a>
<div class="comment" id="comment-51333">
<div class="comment-score" id="post-51333-score"></div>
<div class="comment-text"><p>Thank you! Installing Sun/Oracle Java has improved the performance so that it's faster than on my x86 laptop. It's working beautifully now.</p></div>
<div class="comment-info" id="comment-51333-info">
<span class="comment-age">(10 Aug '16, 19:44)</span>
<a class="comment-user userinfo" href="/users/9027/keithonearth">keithonearth</a>
</div>
</div>
<a name="51342"></a>
<div class="comment" id="comment-51342">
<div class="comment-score" id="post-51342-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/9027/keithonearth"></a><a href="http://help.openstreetmap.org/users/9027/keithonearth">@keithonearth</a>: fine! :-) Could you please provide the <code>java -version</code> output? (just for other people's reference). And I guess the Oracle Java download for ARM was on the official page?</p></div>
<div class="comment-info" id="comment-51342-info">
<span class="comment-age">(11 Aug '16, 00:28)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-51331">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-51331-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/51320/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="voKbLHRc4ndmI7gXReTy47R7P1y042pj"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>