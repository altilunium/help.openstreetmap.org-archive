<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/50987/split-large-osm-file-into-smaller-osm-files-by-feature-limit">Split large OSM file into smaller OSM files by feature limit</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50987/up/" id="post-50987-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50987-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/50987/down/" id="post-50987-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/50987/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have a very large 2GB osm file that I need to split up into &lt;=50K feature chunks.  </p>
<p>I have attempted to use <a href="http://www.mkgmap.org.uk/doc/splitter.html">splitter</a>, which is a great tool.  you can set the # of nodes within each split file.  Splitter then creates x amount of polygons to ensure there are no more then the requested # of nodes within each split file.  The problem is splitter duplicates ways across overlapping changesets so that it does not cut them at intersection points.  I am trying to find a solution that simply splits the osm file up without worrying about location of features.  </p>
<p>Is there a tool to simply split an osm file based on # of features that ignores the location of features.  </p>
<p>Any insight is welcome.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-changesets" href="/tags/changesets/" rel="tag" title="see questions tagged 'changesets'">changesets</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-split" href="/tags/split/" rel="tag" title="see questions tagged 'split'">split</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>19 Jul '16, 16:50</strong>
</p>
<img alt="Cellington's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/943c484e8c04680902357de8f080dcc0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/12265/cellington">Cellington</a><br/>
<span class="score" title="216 reputation points">216</span><span title="9 badges"><span class="badge1">●</span><span class="badgecount">9</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="15 badges"><span class="bronze">●</span><span class="badgecount">15</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Cellington has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/50987/">
                edited
                <strong>19 Jul '16, 18:20</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50987">
<a name="50989"></a>
<div class="comment" id="comment-50989">
<div class="comment-score" id="post-50989-score"></div>
<div class="comment-text"><p>I've linked to mkgmap's tile splitter - I presume that's what you meant.  </p>
<p>Unfortunately I don't know an answer (and have no idea what you'd do with relations).</p></div>
<div class="comment-info" id="comment-50989-info">
<span class="comment-age">(19 Jul '16, 17:57)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="50990"></a>
<div class="comment" id="comment-50990">
<div class="comment-score" id="post-50990-score"></div>
<div class="comment-text"><p>Yes, I was talking about mkgmap's splitter.jar tool.  I hadn't thought of relations.</p></div>
<div class="comment-info" id="comment-50990-info">
<span class="comment-age">(19 Jul '16, 18:26)</span>
<a class="comment-user userinfo" href="/users/12265/cellington">Cellington</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-50987">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50987-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/50987/split-large-osm-file-into-smaller-osm-files-by-feature-limit?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/50987/split-large-osm-file-into-smaller-osm-files-by-feature-limit?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/50987/split-large-osm-file-into-smaller-osm-files-by-feature-limit?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/50987/split-large-osm-file-into-smaller-osm-files-by-feature-limit?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="50994"></a>
<div class="answer" id="answer-container-50994">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/50994/up/" id="post-50994-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-50994-score" title="current number of votes">
    5
</div>
<a class="ajax-command post-vote down" href="/vote/50994/down/" id="post-50994-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Generally it doesn't make much sense to split up OSM files into chunks without taking geometry into account, because you would end up with lots of ways and relations without the nodes and members they are referring to. About the only thing I can think of where this would make sense is when you are trying to transport the data over some "link" that doesn't support large files, but you will re-assemble the file on the other end before using it as a whole again. For instance if you only have a small USB stick or so. But then you can just use any normal file splitting program that can work with binary data, on Linux you can use 'split' for this.</p>
<p>Using splitter seems to be the right approach here, maybe you can cut the ways after using splitter somehow? Osmosis can cut ways, but you'd have to figure out the bounding box of each splitter output file in some way. Maybe it would be easier to write a small script that calls osmosis with different parameters splitting into a reglar grid? The same could be accomplished using the <a href="https://github.com/joto/osm-history-splitter">OSM history splitter</a>. Maybe you can tell us <strong>why</strong> you want to do the splitting in the way you describe and we have a better way to help you.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/50994/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Jul '16, 07:13</strong>
</p>
<img alt="Jochen%20Topf's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/2d4dfcdcde73aa5e2ffa4a9b3a7cb51d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/112/jochen-topf">Jochen Topf</a><br/>
<span class="score" title="5244 reputation points"><span class="">5.2k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="50 badges"><span class="silver">●</span><span class="badgecount">50</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Jochen Topf has 32 accepted answers">31%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-50994">
<a name="51002"></a>
<div class="comment" id="comment-51002">
<div class="comment-score" id="post-51002-score"></div>
<div class="comment-text"><p>So my ultimate goal is to get a 2gb osm file into my personal API db. This file contains nearly 7 million total features (nodes, ways, relations). The proper way to get this into my OSM server is through the use of Osmosis using the upload change command (I also use osmosis to convert this file into a create changeset)</p>
<p>I use negative ids in my osm file so that when running the upload command, the data gets pushed into my database with the correct ids.</p>
<p>The osmosis upload command is limited to 50K features per changeset. This is why I am trying to split apart my file into many smaller files.</p>
<p>Ideally I would like to create a script that would parse through the large xml file and write multiple small xmls up to a max feature count while retaining the proper relationships between nodes, ways and relations.</p></div>
<div class="comment-info" id="comment-51002-info">
<span class="comment-age">(20 Jul '16, 19:09)</span>
<a class="comment-user userinfo" href="/users/12265/cellington">Cellington</a>
</div>
</div>
<a name="51004"></a>
<div class="comment" id="comment-51004">
<div class="comment-score" id="post-51004-score"></div>
<div class="comment-text"><p>Have a look at <a href="http://wiki.openstreetmap.org/wiki/Import/Software">http://wiki.openstreetmap.org/wiki/Import/Software</a> . There are multiple programs there that might help you.</p></div>
<div class="comment-info" id="comment-51004-info">
<span class="comment-age">(20 Jul '16, 21:24)</span>
<a class="comment-user userinfo" href="/users/112/jochen-topf">Jochen Topf</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-50994">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-50994-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/50987/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="ruisB7XFFrae3lbJhk1aH44aV2P5cAW2"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>