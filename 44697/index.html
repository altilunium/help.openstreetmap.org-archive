<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/44697/find-entrances-into-boundary-areas-like-national-parks">Find entrances into boundary areas like national parks</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44697/up/" id="post-44697-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44697-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/44697/down/" id="post-44697-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/44697/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I've extracted some National Parks from Openstreetmap. But now I want to find out where the entrances are. Openstreetmap has some tags for it but it isn't used that often.</p>
<p>So I tought: An entrance into a national park is a road which crosses the border of that park. Must be true: You are going into the park. The only downside I can think off is that it could be a private road for staff or something but that should be a small percentage.</p>
<p><img alt="alt text" src="http://i.stack.imgur.com/kjfFe.png"/></p>
<p>So what is the best ways to find these points?</p>
<p>My guess: I know the boundaries of the park. So I can download all roads in that park. Then I can use the "Ray casting algorithm" for all sections of all roads in the parks to see if it crosses a border. When it does: that is a road that goes into the park. However, that might be very slow. If you have a large park with lots of roads inside it, it might take ages to check all segments.
Is there a more clever way?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-openstreetmap" href="/tags/openstreetmap/" rel="tag" title="see questions tagged 'openstreetmap'">openstreetmap</a>
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
<a class="post-tag tag-link-algorithm" href="/tags/algorithm/" rel="tag" title="see questions tagged 'algorithm'">algorithm</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>10 Aug '15, 11:23</strong>
</p>
<img alt="NLAnaconda's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/cbcec43f8f6c9d5b869aa5bdc56eb673?s=32&amp;d=identicon&amp;r=g" width="32">
<p><a href="/users/11351/nlanaconda">NLAnaconda</a><br/>
<span class="score" title="166 reputation points">166</span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="NLAnaconda has no accepted answers">0%</span>
</p>
</img></div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/44697/">
                edited
                <strong>10 Aug '15, 20:47</strong>
</a>
</p>
<img alt="mmd's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/264d84ab05b942224b05960903eba7a7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8708/mmd">mmd</a><br/>
<span class="score" title="5682 reputation points"><span class="">5.7k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="53 badges"><span class="silver">●</span><span class="badgecount">53</span></span><span title="88 badges"><span class="bronze">●</span><span class="badgecount">88</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-44697">
<a name="44698"></a>
<div class="comment" id="comment-44698">
<div class="comment-score" id="post-44698-score"></div>
<div class="comment-text"><p>crosspost: <a href="https://stackoverflow.com/questions/31909933/openstreetmap-get-all-entrances-in-a-park">https://stackoverflow.com/questions/31909933/openstreetmap-get-all-entrances-in-a-park</a></p></div>
<div class="comment-info" id="comment-44698-info">
<span class="comment-age">(10 Aug '15, 11:45)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-44697">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44697-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/44697/find-entrances-into-boundary-areas-like-national-parks?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/44697/find-entrances-into-boundary-areas-like-national-parks?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/44697/find-entrances-into-boundary-areas-like-national-parks?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/44697/find-entrances-into-boundary-areas-like-national-parks?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="44704"></a>
<div class="answer accepted-answer" id="answer-container-44704">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44704/up/" id="post-44704-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44704-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/44704/down/" id="post-44704-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/44704/" rel="nofollow" title="NLAnaconda has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Here's an Overpass API solution for it: it will find all ways, which intersect with boundary=national_park relations:</p>
<p>Try it in overpass turbo! <a href="http://overpass-turbo.eu/s/aS7">link</a></p>
<p>Just navigate to the area you're interested in and hit "Run". There's no need for a local DB or any other download.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/44704/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '15, 15:01</strong>
</p>
<img alt="mmd's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/264d84ab05b942224b05960903eba7a7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8708/mmd">mmd</a><br/>
<span class="score" title="5682 reputation points"><span class="">5.7k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="53 badges"><span class="silver">●</span><span class="badgecount">53</span></span><span title="88 badges"><span class="bronze">●</span><span class="badgecount">88</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mmd has 44 accepted answers">37%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/44704/">
                edited
                <strong>10 Aug '15, 15:03</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-44704">
<a name="44705"></a>
<div class="comment" id="comment-44705">
<div class="comment-score" id="post-44705-score"></div>
<div class="comment-text"><p>This works great!</p>
<p>One question: Some roads are the border/on the border. They light up as bordercorssing but some dont really go in the park. Is there a way to exclude these roads?</p></div>
<div class="comment-info" id="comment-44705-info">
<span class="comment-age">(10 Aug '15, 16:22)</span>
<a class="comment-user userinfo" href="/users/11351/nlanaconda">NLAnaconda</a>
</div>
</div>
<a name="44711"></a>
<div class="comment" id="comment-44711">
<div class="comment-score" id="post-44711-score">1</div>
<div class="comment-text"><p>Can you please try the following query: <a href="http://overpass-turbo.eu/s/aSN">http://overpass-turbo.eu/s/aSN</a> - this one should exclude highways which are part of the boundary relation itself. A detailed explanation for this query can be found on the linked stackoverflow page.</p></div>
<div class="comment-info" id="comment-44711-info">
<span class="comment-age">(10 Aug '15, 20:40)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
<a name="44713"></a>
<div class="comment" id="comment-44713">
<div class="comment-score" id="post-44713-score"></div>
<div class="comment-text"><p>I guess that some roads are on the boundary without being part of the boundary (like its an extra layer) Some are still highlighted. For example this one (north east) on Kruger National Park: <a href="http://overpass-turbo.eu/s/aSO">http://overpass-turbo.eu/s/aSO</a></p></div>
<div class="comment-info" id="comment-44713-info">
<span class="comment-age">(10 Aug '15, 21:43)</span>
<a class="comment-user userinfo" href="/users/11351/nlanaconda">NLAnaconda</a>
</div>
</div>
<a name="44715"></a>
<div class="comment" id="comment-44715">
<div class="comment-score" id="post-44715-score">1</div>
<div class="comment-text"><p><a href="http://www.openstreetmap.org/way/327080110">Way 327080110</a> seems to be on the border. However, if you zoom in a bit, you'll notice that it actually crosses the border somewhere near node <a href="http://www.openstreetmap.org/node/3337923111">3337923111</a>.. that's why this way is also included in the result.</p></div>
<div class="comment-info" id="comment-44715-info">
<span class="comment-age">(11 Aug '15, 10:10)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
<a name="44724"></a>
<div class="comment" id="comment-44724">
<div class="comment-score" id="post-44724-score"></div>
<div class="comment-text"><p>You are right. Sorry. I think I can filter these roads out when I check if they have a node further into the parks.</p></div>
<div class="comment-info" id="comment-44724-info">
<span class="comment-age">(12 Aug '15, 00:35)</span>
<a class="comment-user userinfo" href="/users/11351/nlanaconda">NLAnaconda</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-44704">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44704-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="44700"></a>
<div class="answer" id="answer-container-44700">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/44700/up/" id="post-44700-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-44700-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/44700/down/" id="post-44700-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You could filter an OSM data file (e.g. for the whole planet or a region you care about) using <code>osmosis</code> to only include roads and parks. Then import it into postgis with <code>osm2pgsql</code>, then use a standard <code>ST_Intersection</code> SQL query to find places where a park is crossed with a road. Internally it uses something like the 'ray casting algorithm', but you don't have to care about that.</p>
<p>I don't know how slow it is, depending on the size of the data, that might be fast enough.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/44700/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '15, 13:25</strong>
</p>
<img alt="rorym's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/16e12e337f6edc3750681492656097ed?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/30/rorym">rorym</a><br/>
<span class="score" title="5358 reputation points"><span class="">5.4k</span></span><span title="14 badges"><span class="badge1">●</span><span class="badgecount">14</span></span><span title="49 badges"><span class="silver">●</span><span class="badgecount">49</span></span><span title="100 badges"><span class="bronze">●</span><span class="badgecount">100</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="rorym has 18 accepted answers">11%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-44700">
</div>
<div class="comment-tools" id="comment-tools-44700">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-44700-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/44697/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="3w2Z7vNRpY1bItuGFunTwKFyryhgbDVk"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>