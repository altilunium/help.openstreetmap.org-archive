<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/34477/gather-the-latest-records-with-osmconvert">gather the latest records with osmconvert</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/34477/up/" id="post-34477-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-34477-score" title="current number of votes">
    -3
</div>
<a class="ajax-command post-vote down" href="/vote/34477/down/" id="post-34477-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/34477/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>hello </p>
<p><strong>update;</strong>  - i want to gather the latest 100 records that <strong>have the amenity=school</strong> - school from </p>
<pre><code>a. south-america -(yes - the whole continent) 
b. Africa 
c. the planet - (guess that my notebook do not will do this job - the file is toooo big.
</code></pre>
<p>So as a first step i am willing to start with South-America. </p>
<p>According the manual here  <a href="http://m.m.i24.cc/osmconvert.c">http://m.m.i24.cc/osmconvert.c</a>  I THINK THAT  i can use some of the following terms to get the right data out of the bunch of data. </p>
<pre><code>"--timestamp=&lt;date_time&gt;   add a timestamp to the data\n"
"--timestamp=NOW-&lt;seconds&gt; add a timestamp in seconds before now\n"
"--out-timestamp           **output the file\'s timestamp, nothing else\n"**
</code></pre>
<p>and if i want to gather all the results that contain a webseite then </p>
<pre><code>a.  i reduce the new entries and records to a minimum - 
note we have approx 1000 new records..
b.  the question is : how to name this condition - " have a website" ?
</code></pre>
<p>i want to do this with osmconvert.... any and all help will be greatly appreciated. 
Question: i wonder where i can use the drop-statement. If it will be used very early then i can limit the amount of data that has to be parsed. What do you think !? Does this make sense..!?</p>
<p>See below - my first trials which are very very general... and  not very sophisticatde --- lo-level-processing;-)</p>
<p><strong>end of update:</strong> </p>
<p>i am pretty new to Geographic-information Systems so do not bear with me if i ask newby questions:
i am interested in gatherin information on schools Some days before i have heard that it is interesting to have a closer look at the taginfo-site (see below): i have question: what does this mean <a href="https://taginfo.openstreetmap.org/tags/amenity=school">https://taginfo.openstreetmap.org/tags/amenity=school</a></p>
<p>here we have two requests on the above site:</p>
<p>see the details:</p>
<pre><code>593 454 - at 30 th of june 
593 319
593 194
592 853
592 443 - at 24 th of june
</code></pre>
<p>1000 records </p>
<p>you see: the results  differs:  approx 1000 x (entries, records or some what)</p>
<p>questions: </p>
<p>a. is it true that we can see the diff - that means how the entries of schools grow? 
b. is there a total growth of records (!!!) of schools or does the this mean - some records have been changed!?
c. can i grab the neewst ones -- that are the newest entires with osmonvert?</p>
<p>look forward to hear from you</p>
<p>btw i have this code up and running...</p>
<pre><code> wget <a href="http://download.geofabrik.de/south-america/colombia-latest.osm.pbf">http://download.geofabrik.de/south-america/colombia-latest.osm.pbf</a>
./osmconvert colombia-latest.osm.pbf -o=columbia.o5m
./osmfilter columbia.o5m --keep="amenity=school" -o=columbia-schools.o5m
./osmconvert columbia-schools.o5m --all-to-nodes -o=columbia-schools_nodes.o5m
./osmfilter columbia-schools_nodes.o5m --keep="amenity=school" -o=columbia-schools-results.o5m
./osmconvert columbia-schools-results.o5m --csv="<a href="/users/260/idoneus">@id</a> <a href="/users/1350/longestaugust">@lon</a> <a href="/users/5110/latroc">@lat</a> name addr:street addr:housenumber addr:city website email" --csv-headline -o=columbia-schools-results.csv
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-xml" href="/tags/xml/" rel="tag" title="see questions tagged 'xml'">xml</a>
<a class="post-tag tag-link-apache" href="/tags/apache/" rel="tag" title="see questions tagged 'apache'">apache</a>
<a class="post-tag tag-link-perl" href="/tags/perl/" rel="tag" title="see questions tagged 'perl'">perl</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-linux" href="/tags/linux/" rel="tag" title="see questions tagged 'linux'">linux</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>30 Jun '14, 23:44</strong>
</p>
<img alt="say_hello_to_the_world's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bf4d2d8660e82c4a7387b7d2a8a8cfcd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8644/say_hello_to_the_world">say_hello_to...</a><br/>
<span class="score" title="19 reputation points">19</span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="24 badges"><span class="silver">●</span><span class="badgecount">24</span></span><span title="27 badges"><span class="bronze">●</span><span class="badgecount">27</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="say_hello_to_the_world has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/34477/">
                edited
                <strong>01 Jul '14, 19:37</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-34477">
<a name="34494"></a>
<div class="comment" id="comment-34494">
<div class="comment-score" id="post-34494-score">3</div>
<div class="comment-text"><p>Your two questions <em>a</em> and <em>b</em> have already been answered a week ago here: <a href="https://gis.stackexchange.com/questions/103052/scaling-of-results-the-comparing-of-osm-files-for-a-few-days-a-statistical-ap">https://gis.stackexchange.com/questions/103052/scaling-of-results-the-comparing-of-osm-files-for-a-few-days-a-statistical-ap</a></p></div>
<div class="comment-info" id="comment-34494-info">
<span class="comment-age">(01 Jul '14, 14:36)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="34502"></a>
<div class="comment" id="comment-34502">
<div class="comment-score" id="post-34502-score"></div>
<div class="comment-text"><p>hello dear scai - right said! well at the moment i try to find a way to get with osmconvert the latest records - from a osm-files. i try to figure out how to do that... hopefully osmconvert will provide some ways - other wise i have to use another technique or what do you suggest. note. i am not familiar with much of the others - with java or java-script</p></div>
<div class="comment-info" id="comment-34502-info">
<span class="comment-age">(01 Jul '14, 18:07)</span>
<a class="comment-user userinfo" href="/users/8644/say_hello_to_the_world">say_hello_to...</a>
</div>
</div>
<a name="34504"></a>
<div class="comment" id="comment-34504">
<div class="comment-score" id="post-34504-score">1</div>
<div class="comment-text"><p>If you struggle with osmconvert then try asking a question about osmconvert including what you have tried, what result you are expecting and what actual result or error message you got. Your current question is not very clear.</p></div>
<div class="comment-info" id="comment-34504-info">
<span class="comment-age">(01 Jul '14, 18:23)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="34507"></a>
<div class="comment" id="comment-34507">
<div class="comment-score" id="post-34507-score"></div>
<div class="comment-text"><p>hello dear scai - many many thanks for the response. i ve added a update. You see i have made some efforts - and figured out which conditions i need to have in the osmconvert-request. i ve digged into the man-pages. and i have found out that we can use the timestamp to do the magic. Additionally - i want to exclude all the new records (that are within ) the new time-zone of let me say one or two weeks - which have no website... so this will limit the results to a minimum - note we ve got (sometimes )a rate of 1 -to-10 percent of records that contain a website. so we need to take 1000 records</p></div>
<div class="comment-info" id="comment-34507-info">
<span class="comment-age">(01 Jul '14, 19:26)</span>
<a class="comment-user userinfo" href="/users/8644/say_hello_to_the_world">say_hello_to...</a>
</div>
</div>
<a name="34508"></a>
<div class="comment not_top_scorer" id="comment-34508">
<div class="comment-score" id="post-34508-score"></div>
<div class="comment-text"><p>if  we take the timestamp that lies in the past let me say the last one or two weeks - then we usually gather more than 1000 records (in the global file) - and if wie drop all those records that do not contain a website - then we get - approx 100 in the results... what do you say?  Now i try to make the posting above a bit more concrete. And i would be more than happy if you can show me how i got stuck - so that i can finally go there and write down the full osmconvert request.  - Scai i look forward to any and all help - greetings say helloi</p></div>
<div class="comment-info" id="comment-34508-info">
<span class="comment-age">(01 Jul '14, 19:29)</span>
<a class="comment-user userinfo" href="/users/8644/say_hello_to_the_world">say_hello_to...</a>
</div>
</div>
<a name="34509"></a>
<div class="comment" id="comment-34509">
<div class="comment-score" id="post-34509-score">1</div>
<div class="comment-text"><p>I'm not a friend of editing the question over and over again. This doesn't make things clearer.</p></div>
<div class="comment-info" id="comment-34509-info">
<span class="comment-age">(01 Jul '14, 19:49)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="34510"></a>
<div class="comment not_top_scorer" id="comment-34510">
<div class="comment-score" id="post-34510-score"></div>
<div class="comment-text"><p>hmm - i understand. what should i do now... i think that i have some dificulties in expressing the necesary conditions in a osmconvert-request. the tooolchain is a bit tricky - what do you say. in short; i need to gather the latest 100 records from south america - best would be a relatively full dataset (therefore in want to exclude all non-website-records) .... Guess that i need to add a timestamp into the search-request. BTW - did not take into account if this would be gained with overpasss-api - too</p></div>
<div class="comment-info" id="comment-34510-info">
<span class="comment-age">(01 Jul '14, 20:00)</span>
<a class="comment-user userinfo" href="/users/8644/say_hello_to_the_world">say_hello_to...</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-34477">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-34477-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<form action="/questions/34477/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="9s0UWgliNSQxmMp9viUpSM561V2LCByu"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>