<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/40310/underscore-amenities-not-working">Underscore Amenities Not Working</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/40310/up/" id="post-40310-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-40310-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/40310/down/" id="post-40310-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/40310/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello,</p>
<p>I'm trying to locate the <code>drinking_water</code> amenity to no avail. When I run the following query:</p>
<p><a href="http://nominatim.openstreetmap.org/search?q=Washington+DC+[parking]&amp;addressdetails=1&amp;format=json&amp;bounded=1"><code></code></a><code><a href="http://nominatim.openstreetmap.org/search?q=Washington+DC+[parking]&amp;addressdetails=1&amp;format=json&amp;bounded=1">http://nominatim.openstreetmap.org/search?q=Washington+DC+[parking]&amp;addressdetails=1&amp;format=json&amp;bounded=1</a></code></p>
<p>I have no problems. I get an actual response. However, upon running </p>
<p><a href="http://nominatim.openstreetmap.org/search?q=Washington+DC+[parking]&amp;addressdetails=1&amp;format=json&amp;bounded=1"><code></code></a><code><a href="http://nominatim.openstreetmap.org/search?q=Washington+DC+[drinking_water]&amp;addressdetails=1&amp;format=json&amp;bounded=1">http://nominatim.openstreetmap.org/search?q=Washington+DC+[drinking_water]&amp;addressdetails=1&amp;format=json&amp;bounded=1</a></code></p>
<p>I get no results. I've tried various other tags with underscores: <code>charging_station</code>, <code>car_rental</code>, etc. to no avail. Is there some trick I'm missing? I'd just like to be able to query for things with underscores.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-query" href="/tags/query/" rel="tag" title="see questions tagged 'query'">query</a>
<a class="post-tag tag-link-amenity" href="/tags/amenity/" rel="tag" title="see questions tagged 'amenity'">amenity</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Jan '15, 19:05</strong>
</p>
<img alt="mjkaufer's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/cbcf754909ab6d8152e25fac2c53a0d9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10322/mjkaufer">mjkaufer</a><br/>
<span class="score" title="46 reputation points">46</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mjkaufer has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-40310">
</div>
<div class="comment-tools" id="comment-tools-40310">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-40310-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/40310/underscore-amenities-not-working?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/40310/underscore-amenities-not-working?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/40310/underscore-amenities-not-working?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/40310/underscore-amenities-not-working?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="40313"></a>
<div class="answer accepted-answer" id="answer-container-40313">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/40313/up/" id="post-40313-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-40313-score" title="current number of votes">
    6
</div>
<a class="ajax-command post-vote down" href="/vote/40313/down/" id="post-40313-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/40313/" rel="nofollow" title="mjkaufer has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Try with space instead of the underscore, e.g. <a href="http://nominatim.openstreetmap.org/search?q=Washington+DC+[drinking water]&amp;addressdetails=1&amp;format=json&amp;bounded=1">this</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/40313/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jan '15, 20:12</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/40313/">
                edited
                <strong>13 Jan '15, 20:23</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-40313">
<a name="40321"></a>
<div class="comment" id="comment-40321">
<div class="comment-score" id="post-40321-score"></div>
<div class="comment-text"><p>Thanks. This should be updated in the wiki, as it's out of date and rather misleading...</p></div>
<div class="comment-info" id="comment-40321-info">
<span class="comment-age">(14 Jan '15, 03:40)</span>
<a class="comment-user userinfo" href="/users/10322/mjkaufer">mjkaufer</a>
</div>
</div>
<a name="40329"></a>
<div class="comment" id="comment-40329">
<div class="comment-score" id="post-40329-score">1</div>
<div class="comment-text"><p>Feel free to update the wiki yourself, anybody is allowed to edit it :)</p></div>
<div class="comment-info" id="comment-40329-info">
<span class="comment-age">(14 Jan '15, 07:55)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="40334"></a>
<div class="comment" id="comment-40334">
<div class="comment-score" id="post-40334-score">4</div>
<div class="comment-text"><p>What you type for nominatim is plain text, not tags. Then nominatim tries to convert some of key words into tags equivalence. This is called "special phrases" and is documented here in the wiki <a href="https://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases">https://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases</a></p></div>
<div class="comment-info" id="comment-40334-info">
<span class="comment-age">(14 Jan '15, 09:31)</span>
<a class="comment-user userinfo" href="/users/87/pieren">Pieren</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-40313">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-40313-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="52626"></a>
<div class="answer" id="answer-container-52626">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/52626/up/" id="post-52626-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-52626-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/52626/down/" id="post-52626-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Interesting, that your example is working. It does not work with [charging_station] or [charging station] or [charging+station], which is an amenity (not in the special phrases). </p>
<p>There is a station at <br/>
49,9120536, 10,0017795 
but the request</p>
<p><a href="http://nominatim.openstreetmap.org/?format=json&amp;addressdetails=1&amp;viewbox=9.95%2C49.86%2C10.04%2C49.94&amp;q=[charging_station]&amp;bounded=1">http://nominatim.openstreetmap.org/?format=json&amp;addressdetails=1&amp;viewbox=9.95%2C49.86%2C10.04%2C49.94&amp;q=[charging_station]&amp;bounded=1</a></p>
<p>does not return anything.</p>
<p>In my opinion the request should be valid according to the description <a href="https://wiki.openstreetmap.org/wiki/Nominatim#Parameters">here</a> (under "bounded"):
charging_station is an amenity and bounded=1 with a viewbox allows the search for it.</p>
<p>At the same address as the charging station there is a fuel station, which is returned</p>
<p><a href="http://nominatim.openstreetmap.org/?format=json&amp;addressdetails=1&amp;viewbox=9.95%2C49.86%2C10.04%2C49.94&amp;q=[fuel]&amp;bounded=1">http://nominatim.openstreetmap.org/?format=json&amp;addressdetails=1&amp;viewbox=9.95%2C49.86%2C10.04%2C49.94&amp;q=[fuel]&amp;bounded=1</a></p>
<p>Can anyone tell me, what is wrong?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/52626/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>21 Oct '16, 14:44</strong>
</p>
<img alt="autumnus's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d001d4c331042ef1dade5af6ed5f7ac2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/12892/autumnus">autumnus</a><br>
<span class="score" title="121 reputation points">121</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="autumnus has no accepted answers">0%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-52626">
<a name="52627"></a>
<div class="comment" id="comment-52627">
<div class="comment-score" id="post-52627-score">2</div>
<div class="comment-text"><p>There aren't any special phrases for charging stations in the list that Pieren linked to, so I have to assume that Nominatim just won't search for charging stations.</p></div>
<div class="comment-info" id="comment-52627-info">
<span class="comment-age">(21 Oct '16, 16:39)</span>
<a class="comment-user userinfo" href="/users/8189/alester">alester</a>
</div>
</div>
<a name="52656"></a>
<div class="comment" id="comment-52656">
<div class="comment-score" id="post-52656-score"></div>
<div class="comment-text"><p>Ok. But then description is a bit misleading to me. I understand it as two different features (1) The search for special phrases, which are translated into amenities and (2) the search for amenities, if you use a bounding box and the 'bounded' property. Thanks anyway.</p></div>
<div class="comment-info" id="comment-52656-info">
<span class="comment-age">(24 Oct '16, 07:21)</span>
<a class="comment-user userinfo" href="/users/12892/autumnus">autumnus</a>
</div>
</div>
<a name="52657"></a>
<div class="comment" id="comment-52657">
<div class="comment-score" id="post-52657-score">1</div>
<div class="comment-text"><p>For everybody who is interested:
After some more investigation after the hint from alester (thanks again) I finally found out the source for the special phrases: TheSpecial Phrases page in the Wiki (quite obvious and it looks like I missed that several times ).
This lists are imported from time to time. I inserted charging station in English and German and as I have a self hosted Nominatim, I have initialized the skript by hand and now it is working.</p></div>
<div class="comment-info" id="comment-52657-info">
<span class="comment-age">(24 Oct '16, 09:26)</span>
<a class="comment-user userinfo" href="/users/12892/autumnus">autumnus</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-52626">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-52626-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/40310/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="MIlefPO9a2cvNQOIEsAYntvnPV0lzqMG"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>