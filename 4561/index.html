<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/4561/why-are-some-items-not-rendered-by-mapnik">Why are some items not rendered by Mapnik?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/4561/up/" id="post-4561-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-4561-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/4561/down/" id="post-4561-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/4561/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>While designing a fantasy map, I got some strange unconsistent behaviors with my OSM file when processing it with mapnik (not from a database, from the .osm file in command line)</p>
<p>I made some parts with the "natural"="fell" tag. One is made of 39 nodes, an other one is 70 nodes and a third one is 6 nodes. Only the first "fell" is displayed. When I move a single node in the third fell, making it slightly more pointy, then it is displayed like the first one.</p>
<p>I tried to alter the scaledenominator (also to remove them), but it was useless.
The rule is quite simple: </p>
<pre><code>&lt;Filter&gt;[landuse] = 'fell' or [natural] = 'fell'&lt;/Filter&gt; 
      &lt;MaxScaleDenominator&gt;20000000&lt;/MaxScaleDenominator&gt;
      &lt;MinScaleDenominator&gt;0&lt;/MinScaleDenominator&gt;
      &lt;PolygonSymbolizer&gt;
        &lt;CssParameter name="fill"&gt;#8dc56c&lt;/CssParameter&gt;
     &lt;/PolygonSymbolizer&gt;
    &lt;/Rule&gt;
    &lt;Rule&gt;
      &lt;Filter&gt;[landuse] = 'fell' or [natural] = 'fell'&lt;/Filter&gt;
      &lt;MaxScaleDenominator&gt;20000000&lt;/MaxScaleDenominator&gt;
      &lt;MinScaleDenominator&gt;0&lt;/MinScaleDenominator&gt;
      &lt;PolygonPatternSymbolizer file= "/temp/mapnik/symbols/forest.png" type="png" width="21" height="24"/&gt;
    &lt;/Rule&gt;
</code></pre>
<p>What can it be?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>16 Apr '11, 22:00</strong>
</p>
<img alt="otto's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/71d339cacc167d5b3fef9344badd74e5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1183/otto">otto</a><br/>
<span class="score" title="251 reputation points">251</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="8 badges"><span class="bronze">●</span><span class="badgecount">8</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="otto has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-4561">
</div>
<div class="comment-tools" id="comment-tools-4561">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-4561-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/4561/why-are-some-items-not-rendered-by-mapnik?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/4561/why-are-some-items-not-rendered-by-mapnik?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/4561/why-are-some-items-not-rendered-by-mapnik?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/4561/why-are-some-items-not-rendered-by-mapnik?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="4676"></a>
<div class="answer" id="answer-container-4676">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/4676/up/" id="post-4676-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-4676-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/4676/down/" id="post-4676-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The osm plugin in mapnik is not a drop in replacement for a proper postgis db. I read it's also missing (parts of) relation handling.</p>
<p>Also, the osm.xml stylesheet is not maintained with the osm plugin in mind, and this can also lead to strange behaviours, dropped items and other assorted rendering quirks.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/4676/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Apr '11, 22:04</strong>
</p>
<img alt="Lennard's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/90263d23dc3f15a98d14d91e889b9d25?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1224/lennard">Lennard</a><br/>
<span class="score" title="91 reputation points">91</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Lennard has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-4676">
<a name="4712"></a>
<div class="comment" id="comment-4712">
<div class="comment-score" id="post-4712-score"></div>
<div class="comment-text"><p>Thank you for telling me about those problems. I hadn't read there was limitations, but I find it now: <a href="http://wiki.openstreetmap.org/wiki/Mapnik:_Rendering_OSM_XML_data_directly#Limitations">http://wiki.openstreetmap.org/wiki/Mapnik:_Rendering_OSM_XML_data_directly#Limitations</a>
I've tried to separate my elements into different layers, but it seems it's not much better, only one element is shown according to the order it is called.
If you're curious or willing to help, here is the archive of my tests so far: <a href="http://dl.free.fr/hAVI7ezre">http://dl.free.fr/hAVI7ezre</a></p></div>
<div class="comment-info" id="comment-4712-info">
<span class="comment-age">(21 Apr '11, 19:51)</span>
<a class="comment-user userinfo" href="/users/1183/otto">otto</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-4676">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-4676-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="4576"></a>
<div class="answer" id="answer-container-4576">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/4576/up/" id="post-4576-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-4576-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/4576/down/" id="post-4576-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I don't know about the stylesheet part, but I would double check if these areas are correctly drawn (first and last node of the way is the same node)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/4576/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>17 Apr '11, 20:32</strong>
</p>
<img alt="RM87's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f7f8127223bd00c9e8f569ce2e9ddf22?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/268/rm87">RM87</a><br/>
<span class="score" title="3346 reputation points"><span class="">3.3k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="37 badges"><span class="silver">●</span><span class="badgecount">37</span></span><span title="53 badges"><span class="bronze">●</span><span class="badgecount">53</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="RM87 has 20 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-4576">
<a name="4578"></a>
<div class="comment" id="comment-4578">
<div class="comment-score" id="post-4578-score"></div>
<div class="comment-text"><p>It can't be, because for the same shape, one time it's rendered, another time, when I move a single node a few miles away, it's not.</p>
<p>After some investigations, I noticed some elements are preventing the others to render, for example I have a "natural=peak" above a "fell" which prevents another fell to be displayed (except if I make it bigger). </p>
<p>When I remove all the other elements, the 3 "fells" are correctly displayed.</p></div>
<div class="comment-info" id="comment-4578-info">
<span class="comment-age">(17 Apr '11, 22:40)</span>
<a class="comment-user userinfo" href="/users/1183/otto">otto</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-4576">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-4576-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/4561/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="N82ekoC61ZnouvQfrL1cseM4ffdhBUQo"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>