<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation">Could someone check this multipolygon outer/inner/outer relation?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65303/up/" id="post-65303-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65303-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/65303/down/" id="post-65303-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/65303/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi
I've made amendments to this relation in an attempt to get it to render correctly:
<a href="https://www.openstreetmap.org/relation/7347417#map=18/51.02516/-3.93304">https://www.openstreetmap.org/relation/7347417#map=18/51.02516/-3.93304</a></p>
<p>This doesn't appear to be rendering the innermost (which has an outer role) polygon in this correctly in OSM-Carto.</p>
<p>Note: Cycle &amp; Transport render it correctly (those renders are from before my updates)
Note: I've changed the innermost polygon to landuse=residential to distinguish it from the wood. I'll swap back once sorted. </p>
<p><a href="https://wiki.openstreetmap.org/wiki/Relation:multipolygon#Island_within_a_hole">https://wiki.openstreetmap.org/wiki/Relation:multipolygon#Island_within_a_hole</a></p>
<p>Am I missing something or is there an OSM-Carto error?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-rendering" href="/tags/rendering/" rel="tag" title="see questions tagged 'rendering'">rendering</a>
<a class="post-tag tag-link-relations" href="/tags/relations/" rel="tag" title="see questions tagged 'relations'">relations</a>
<a class="post-tag tag-link-multipolygon" href="/tags/multipolygon/" rel="tag" title="see questions tagged 'multipolygon'">multipolygon</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Aug '18, 16:40</strong>
</p>
<img alt="DaveF's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1532/davef">DaveF</a><br/>
<span class="score" title="3264 reputation points"><span class="">3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="DaveF has 17 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-65303">
</div>
<div class="comment-tools" id="comment-tools-65303">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65303-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/65303/could-someone-check-this-multipolygon-outerinnerouter-relation?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="65306"></a>
<div class="answer" id="answer-container-65306">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65306/up/" id="post-65306-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65306-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/65306/down/" id="post-65306-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The water should be turned into relation too - see <a href="https://www.openstreetmap.org/relation/8529025">https://www.openstreetmap.org/relation/8529025</a>. Otherwise it tries to cover all the area inside. The rendering should be updated soon.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/65306/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Aug '18, 17:05</strong>
</p>
<img alt="kocio's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e228dd20b7da2a6c8f559e2118ce08d3?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11332/kocio">kocio</a><br/>
<span class="score" title="2054 reputation points"><span class="">2.1k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="23 badges"><span class="silver">●</span><span class="badgecount">23</span></span><span title="41 badges"><span class="bronze">●</span><span class="badgecount">41</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="kocio has 14 accepted answers">20%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/65306/">
                edited
                <strong>14 Aug '18, 15:00</strong>
</a>
</p>
<img alt="Tordanik's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0626be5f46f32fce501353e8a5ec399c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14/tordanik">Tordanik</a><br/>
<span class="score" title="11998 reputation points"><span class="">12.0k</span></span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="106 badges"><span class="silver">●</span><span class="badgecount">106</span></span><span title="147 badges"><span class="bronze">●</span><span class="badgecount">147</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-65306">
<a name="65329"></a>
<div class="comment" id="comment-65329">
<div class="comment-score" id="post-65329-score"></div>
<div class="comment-text"><p>Apologies, <a href="https://help.openstreetmap.org/users/11332/kocio">@kocio</a>. I didn't fully read the wiki link I sent you, where it says an additional relation is required if the inner island needs to be rendered differently.
This situations doesn't require that so I removed the tagging as well as the relation you added. It still doesn't render.
Here is another example which I hadn't edited:
<a href="https://www.openstreetmap.org/relation/6968441#map=19/51.60949/0.01005">https://www.openstreetmap.org/relation/6968441#map=19/51.60949/0.01005</a> </p>
<p>I could have sworn it used to render accurately previously with just one relation in OSM-Carto.</p></div>
<div class="comment-info" id="comment-65329-info">
<span class="comment-age">(14 Aug '18, 13:53)</span>
<a class="comment-user userinfo" href="/users/1532/davef">DaveF</a>
</div>
</div>
<a name="65330"></a>
<div class="comment" id="comment-65330">
<div class="comment-score" id="post-65330-score">1</div>
<div class="comment-text"><p>I still think that <a href="https://www.openstreetmap.org/way/616701768">https://www.openstreetmap.org/way/616701768</a> should be turned into relation. It's water with a hole inside, where the island (islet) is, so it's not the whole area covered with water. Any shape with holes inside should be relation. </p>
<p>The water multipolygon is totally different problem than wood multipolygon - the water shape is independent from its role as a hole in the wood.</p></div>
<div class="comment-info" id="comment-65330-info">
<span class="comment-age">(14 Aug '18, 14:02)</span>
<a class="comment-user userinfo" href="/users/11332/kocio">kocio</a>
</div>
</div>
<a name="65331"></a>
<div class="comment" id="comment-65331">
<div class="comment-score" id="post-65331-score"></div>
<div class="comment-text"><p>When the water was relation, the tree symbols were rendered on the islet as expected. The only problem is why green background was not there, but this might be OSM Carto issue.</p></div>
<div class="comment-info" id="comment-65331-info">
<span class="comment-age">(14 Aug '18, 14:24)</span>
<a class="comment-user userinfo" href="/users/11332/kocio">kocio</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-65306">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65306-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="65333"></a>
<div class="answer" id="answer-container-65333">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65333/up/" id="post-65333-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65333-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/65333/down/" id="post-65333-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In the region you linked to, you have defined two areas. One, representing a forest, shaped like this:</p>
<p><img alt="Outline of the forest multipolygon" src="https://help.openstreetmap.org/upfiles/help-mp-forest.png"/></p>
<p>And one, representing a water body, shaped like this:</p>
<p><img alt="Outline of the water polygon" src="https://help.openstreetmap.org/upfiles/help-mp-water.png"/></p>
<p>There is nothing about the water area to indicate that it has an island. So according to your mapping, the location in the center is both part of the forest area and the water area.</p>
<p>To fix this, it would be best to restore the multipolygon relation <a href="https://www.openstreetmap.org/relation/8529025/history">8529025</a> that kocio originally created.</p>
<p>Apart from that issue, the forest multipolygon is correct, although the use of multiple outer members is unnecessary here. (The forest on the island could simply be a separate polygon.)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/65333/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Aug '18, 15:16</strong>
</p>
<img alt="Tordanik's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0626be5f46f32fce501353e8a5ec399c?s=32&amp;d=identicon&amp;r=g" width="32">
<p><a href="/users/14/tordanik">Tordanik</a><br/>
<span class="score" title="11998 reputation points"><span class="">12.0k</span></span><span title="15 badges"><span class="badge1">●</span><span class="badgecount">15</span></span><span title="106 badges"><span class="silver">●</span><span class="badgecount">106</span></span><span title="147 badges"><span class="bronze">●</span><span class="badgecount">147</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Tordanik has 58 accepted answers">35%</span>
</p>
</img></div>
</div>
<div class="comments-container" id="comments-container-65333">
<a name="65387"></a>
<div class="comment" id="comment-65387">
<div class="comment-score" id="post-65387-score"></div>
<div class="comment-text"><p>From the wiki link I posted:
"A construct like this would previously have required different multipolygon relations, one with way 1 being outer and way 2 being inner, as well as one with way 2 being outer and way 3 being inner."</p>
<p>So now, MPs don't require a doubling up of relations.</p>
<p>Again, from the wiki:
"Such cascading is still needed when the "island" in the middle is something else than the area on the outside, but where the "island" is the same stuff it can just be made a hole in the hole."</p>
<p>In this case it isn't different, it should be rendering as a wood.</p>
<p>It's interesting that other renderings manage to do it:
<a href="https://www.openstreetmap.org/#map=18/51.02509/-3.93343&amp;layers=C">https://www.openstreetmap.org/#map=18/51.02509/-3.93343&amp;layers=C</a></p></div>
<div class="comment-info" id="comment-65387-info">
<span class="comment-age">(16 Aug '18, 16:27)</span>
<a class="comment-user userinfo" href="/users/1532/davef">DaveF</a>
</div>
</div>
<a name="65388"></a>
<div class="comment" id="comment-65388">
<div class="comment-score" id="post-65388-score">1</div>
<div class="comment-text"><p>That example describes an island in a hole, not an island in a lake. In that example, way #2 doesn't have any tags, so the area surrounding the island is an empty void. If you tag way #2 as natural=water, that filled polygon would override the island, since there's nothing describing the island as being an inner of way #2. That's why the second relation is required. TBH, the example in the wiki is misleading, because it doesn't work for an "island" in the geological sense (ie. land inside of water).</p></div>
<div class="comment-info" id="comment-65388-info">
<span class="comment-age">(16 Aug '18, 17:26)</span>
<a class="comment-user userinfo" href="/users/8189/alester">alester</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-65333">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65333-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/65303/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="Mjj6HnyLLolU0hgFIabnAIRMaO06KVOt"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>