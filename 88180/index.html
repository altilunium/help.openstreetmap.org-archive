<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/88180/tag-transformation-with-osmosis-missing-water-rendering">Tag Transformation with Osmosis - Missing water rendering</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/88180/up/" id="post-88180-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-88180-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/88180/down/" id="post-88180-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/88180/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Edit: No idea why my uploaded images aren't shown.</p>
<p>I'm trying to host my own map with a few changes, including renaming "watery" areas using <a href="https://wiki.openstreetmap.org/wiki/Osmosis">osmosis</a> and <a href="https://switch2osm.org/serving-tiles/using-a-docker-container/">this</a> docker setup.
If I only try to match water or waterway everything works as expected, just missing some areas that don't have those tags.</p>
<p><a href="https://imgur.com/a/HKmoDSz">code</a></p>
<pre><code>osmosis --read-pbf bw.osm.pbf --tag-transform file="transforms.xml" --write-pbf updated-bw.osm.pbf
</code></pre>
<p><a href="https://imgur.com/a/qQwwa30">renamed rhine</a></p>
<p>As soon as I add any mention of <code>natural:*</code> water areas just disappear.</p>
<p><a href="https://imgur.com/a/GEjwIIF">transform xml with natural key</a><br/>
<a href="https://imgur.com/a/r6ZJAOO">Rhine not renamed and missing the blue color</a></p>
<p>I just started using OSM, so my knowledge is limied. How does this happen and what would be the correct way to make this work?
The log then "sometimes" spout out errors:  </p>
<pre><code>Mapnik LOG&gt; 2024-01-19 21:55:02: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;overflow&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
Mapnik LOG&gt; 2024-01-19 21:55:04: SVG PARSING ERROR:"SVG support error: &lt;enable-background&gt; attribute is not supported"
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-tag" href="/tags/tag/" rel="tag" title="see questions tagged 'tag'">tag</a>
<a class="post-tag tag-link-transformation" href="/tags/transformation/" rel="tag" title="see questions tagged 'transformation'">transformation</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>20 Jan, 12:38</strong>
</p>
<img alt="Gor1lla's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ea22c4c883c5cf3c0f4b703818b87102?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/23615/gor1lla">Gor1lla</a><br>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Gor1lla has no accepted answers">0%</span>
</br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/88180/">
                edited
                <strong>20 Jan, 12:51</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-88180">
<a name="88181"></a>
<div class="comment" id="comment-88181">
<div class="comment-score" id="post-88181-score"></div>
<div class="comment-text"><p>I suspect the $64,000 question will be "what's actually in the database"?</p>
<p>Just to check, everything works (and you don't get the "Mapnik log errors" when you are not using osmosis?</p></div>
<div class="comment-info" id="comment-88181-info">
<span class="comment-age">(20 Jan, 14:15)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="88182"></a>
<div class="comment" id="comment-88182">
<div class="comment-score" id="post-88182-score"></div>
<div class="comment-text"><p>For info, in case it helps, some <a href="https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh#L386">working transformations</a> (using osmium and osm-tag-transform, but perhaps adaptable to your use).</p></div>
<div class="comment-info" id="comment-88182-info">
<span class="comment-age">(20 Jan, 14:19)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="88184"></a>
<div class="comment" id="comment-88184">
<div class="comment-score" id="post-88184-score"></div>
<div class="comment-text"><p>@SomeonElse It works as expected if I don't change anything or just the waterways. I used the Baden-Wuerttemberg map from here <a href="https://download.geofabrik.de/europe/germany.html">https://download.geofabrik.de/europe/germany.html</a></p></div>
<div class="comment-info" id="comment-88184-info">
<span class="comment-age">(20 Jan, 22:38)</span>
<a class="comment-user userinfo" href="/users/23615/gor1lla">Gor1lla</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-88180">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-88180-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<form action="/questions/88180/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="RJhLvZATndPfzsvut858eWdPkEcHwbgD"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>