<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/72012/tag-a-building-with-its-city">tag a building with its city</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72012/up/" id="post-72012-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72012-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/72012/down/" id="post-72012-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/72012/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am trying to tag a building but cannot get the city right. I have
provided values for addr:housenumber, addr:street, addr:postcode and
addr:city but when I right-click on the building in openstreetmap.org
and ask for the address it gets everything right except for the
city. We seem to be inheriting the name of an entity nearby that is
characterized as follows:</p>
<ul>
<li>place      hamlet</li>
<li>gnis:Class Populated Place</li>
</ul>
<p>I have tried using the tags addr:hamlet, addr:district, addr:province,
addr:subdistrict, and addr:suburb but none of them work.</p>
<p>Is there a way to override this default?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>05 Dec '19, 19:26</strong>
</p>
<img alt="edkademan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/89d05342bbe4395e1bd01bdf0202269d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17544/edkademan">edkademan</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="edkademan has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72012">
<a name="72013"></a>
<div class="comment" id="comment-72013">
<div class="comment-score" id="post-72013-score"></div>
<div class="comment-text"><p>Hi Ed, can you link to the building in question?</p></div>
<div class="comment-info" id="comment-72013-info">
<span class="comment-age">(05 Dec '19, 20:40)</span>
<a class="comment-user userinfo" href="/users/14350/jmapb">jmapb</a>
</div>
</div>
<a name="72017"></a>
<div class="comment" id="comment-72017">
<div class="comment-score" id="post-72017-score"></div>
<div class="comment-text"><p>Hi, Thanks for responding. I'm not sure of the best way to supply a
link but the following gets you in the neighborhood:</p>
<p><a href="https://www.openstreetmap.org/#map=19/42.99725/-78.12668">https://www.openstreetmap.org/#map=19/42.99725/-78.12668</a></p>
<p>I'm trying to get the address for the building labelled "Farm House"
for example to include the city of Batavia but it gives "Five Corners"
instead.</p></div>
<div class="comment-info" id="comment-72017-info">
<span class="comment-age">(06 Dec '19, 09:50)</span>
<a class="comment-user userinfo" href="/users/17544/edkademan">edkademan</a>
</div>
</div>
<a name="72019"></a>
<div class="comment" id="comment-72019">
<div class="comment-score" id="post-72019-score"></div>
<div class="comment-text"><p>Here's the details page for the street: <a href="https://nominatim.openstreetmap.org/details.php?place_id=78244064">https://nominatim.openstreetmap.org/details.php?place_id=78244064</a></p>
<p>Do note that adding tags to manipulate the behavior of one service is frowned upon. I understand you are trying to find something that works at the moment, but the extra tags on the buildings should be cleaned up and so on.</p></div>
<div class="comment-info" id="comment-72019-info">
<span class="comment-age">(06 Dec '19, 11:02)</span>
<a class="comment-user userinfo" href="/users/10973/maxerickson">maxerickson</a>
</div>
</div>
<a name="72021"></a>
<div class="comment" id="comment-72021">
<div class="comment-score" id="post-72021-score">2</div>
<div class="comment-text"><p>Nominatim looks at the city boundaries (<a href="https://www.openstreetmap.org/relation/176203)">https://www.openstreetmap.org/relation/176203)</a> and the street is outside. I know people on the ground often say a place belongs to a city when it's outside the boundaries, but it's harder for computers to know when to ignore information.</p></div>
<div class="comment-info" id="comment-72021-info">
<span class="comment-age">(06 Dec '19, 11:29)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="72022"></a>
<div class="comment" id="comment-72022">
<div class="comment-score" id="post-72022-score">2</div>
<div class="comment-text"><p>place_id changes whenever the database gets reimported. This is the same URL <a href="https://nominatim.openstreetmap.org/details.php?osmtype=W&amp;osmid=20644760">https://nominatim.openstreetmap.org/details.php?osmtype=W&amp;osmid=20644760</a></p></div>
<div class="comment-info" id="comment-72022-info">
<span class="comment-age">(06 Dec '19, 11:31)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="72027"></a>
<div class="comment not_top_scorer" id="comment-72027">
<div class="comment-score" id="post-72027-score"></div>
<div class="comment-text"><p>furthermore, are "Barn" and "Garden Shed" really the names of the buildings? Or should that be tagged as building=barn and building=shed instead?</p></div>
<div class="comment-info" id="comment-72027-info">
<span class="comment-age">(07 Dec '19, 07:03)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-72012">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72012-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/72012/tag-a-building-with-its-city?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/72012/tag-a-building-with-its-city?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/72012/tag-a-building-with-its-city?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/72012/tag-a-building-with-its-city?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="72014"></a>
<div class="answer" id="answer-container-72014">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72014/up/" id="post-72014-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72014-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/72014/down/" id="post-72014-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The geocoder that powers that feature, <a href="https://nominatim.openstreetmap.org/">https://nominatim.openstreetmap.org/</a>, does not index those address tags.</p>
<p>(it associates a <code>highway</code> with a given city and then links addresses to that <code>highway</code>)</p>
<p>The <code>place=hamlet</code> tag might be sensibly changed to something else, if the thing really is something else. The <code>gnis:Class</code> tag is from the import of the data and not really used by anything.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/72014/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Dec '19, 22:12</strong>
</p>
<img alt="maxerickson's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c860445e868ebb21da141635a4aa7b06?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10973/maxerickson">maxerickson</a><br/>
<span class="score" title="12700 reputation points"><span class="">12.7k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="176 badges"><span class="bronze">●</span><span class="badgecount">176</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="maxerickson has 93 accepted answers">32%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72014">
</div>
<div class="comment-tools" id="comment-tools-72014">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72014-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="72024"></a>
<div class="answer" id="answer-container-72024">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72024/up/" id="post-72024-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72024-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/72024/down/" id="post-72024-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>It's best to think of the map at openstreetmap.org as a demo, of the OSM database and of some of the mapping technologies that have arisen along with it -- map rendering, map search, routing. </p>
<p>In this case, the right-click "Show Address" feature demonstrates the reverse geocoding capabilities of the search tool Nominatim. </p>
<p>"Reverse geocoding" means taking map coordinates and attempting to deduce the address. In its simplest form, it does <em>not</em> look at any of the data tags of the building, but instead just tries to make a best guess based on the coordinates. In this implementation it <em>does</em> try to pull some data from the building (the building name and housenumber) but takes the city name strictly from the coordinates, which, as Maxerikson mentioned, are outside the city limits of Batavia.</p>
<p>My guess is that it assigns the city name Five Corners since it's the nearest placename that does not have distinct boundaries -- it's just indicated by a node. Nominatim "knows" the building isn't in Batavia so it's looking for the nearest place it <em>might</em> be in.</p>
<p>I can see how this might not look like ideal behavior. Nominatim, like everything else in the OSM world, is under constant development, and you could open a issue at the <a href="https://github.com/openstreetmap/Nominatim">Nominatim Github page</a> to suggest different behavior. Don't hold your breath, though, because there may well be a very good reason for this design choice.</p>
<p>The good news is that the city is tagged correctly on the building, so if you want to see the house with the correct address just use the link <a href="https://www.openstreetmap.org/way/182393593">https://www.openstreetmap.org/way/182393593</a>.</p>
<p>Btw, it looks like as of now there's still one incorrect address tag, <code>addr:province=Batavia</code>. Best to delete that.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/72024/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>06 Dec '19, 17:34</strong>
</p>
<img alt="jmapb's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/977d95e2184a885d9a01fb3297225872?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14350/jmapb">jmapb</a><br/>
<span class="score" title="3387 reputation points"><span class="">3.4k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="33 badges"><span class="silver">●</span><span class="badgecount">33</span></span><span title="61 badges"><span class="bronze">●</span><span class="badgecount">61</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="jmapb has 22 accepted answers">22%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/72024/">
                edited
                <strong>06 Dec '19, 17:44</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72024">
</div>
<div class="comment-tools" id="comment-tools-72024">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72024-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="72026"></a>
<div class="answer answered-by-owner" id="answer-container-72026">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72026/up/" id="post-72026-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72026-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/72026/down/" id="post-72026-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks to all those who took the time to answer my question. I have a better appreciation for how openstreetmap and the geocoding applications relate now.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/72026/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>06 Dec '19, 23:20</strong>
</p>
<img alt="edkademan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/89d05342bbe4395e1bd01bdf0202269d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17544/edkademan">edkademan</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="edkademan has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72026">
</div>
<div class="comment-tools" id="comment-tools-72026">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72026-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/72012/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="P7DvKcZIxWcYP6RaNhjuYh4sv1q6NCsl"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>