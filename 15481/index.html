<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/15481/converting-a-relation-into-an-osmosis-polygon-file">Converting a relation into an Osmosis polygon file</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/15481/up/" id="post-15481-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-15481-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/15481/down/" id="post-15481-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/15481/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm trying to use the boundary of London as a bounding polygon for an osmembrane pipeline. How do I convert <a href="http://www.openstreetmap.org/browse/relation/175342">http://www.openstreetmap.org/browse/relation/175342</a> into something more like <a href="http://wiki.openstreetmap.org/wiki/Osmosis/Polygon_Filter_File_Format">http://wiki.openstreetmap.org/wiki/Osmosis/Polygon_Filter_File_Format</a> so I can use it as the boundary polygon?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-london" href="/tags/london/" rel="tag" title="see questions tagged 'london'">london</a>
<a class="post-tag tag-link-bounding-polygon" href="/tags/bounding-polygon/" rel="tag" title="see questions tagged 'bounding-polygon'">bounding-polygon</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>24 Aug '12, 14:49</strong>
</p>
<img alt="PeterGribble's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e4f9f47a8c9be862c0e6f344151013e6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4359/petergribble">PeterGribble</a><br/>
<span class="score" title="66 reputation points">66</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="PeterGribble has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-15481">
</div>
<div class="comment-tools" id="comment-tools-15481">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-15481-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/15481/converting-a-relation-into-an-osmosis-polygon-file?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/15481/converting-a-relation-into-an-osmosis-polygon-file?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/15481/converting-a-relation-into-an-osmosis-polygon-file?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/15481/converting-a-relation-into-an-osmosis-polygon-file?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="15483"></a>
<div class="answer accepted-answer" id="answer-container-15483">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/15483/up/" id="post-15483-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-15483-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/15483/down/" id="post-15483-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/15483/" rel="nofollow" title="PeterGribble has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I don't know if there is an easier way, but that is how I was doing:</p>
<p>With JOSM</p>
<ol>
<li>File-&gt;Download an object, choose the type "relation" and give the id, uncheck "Download referents" and check "Download members"</li>
<li>select all objects (Ctrl+A) and unselect the admin_centre (London in your example)</li>
<li>copy the data (Ctr+C), create a new Layer (Ctrl+N) and paste your data (Ctrl+V)</li>
<li>remove all the tags</li>
<li>save the layer created in a .osm file (Ctrl+S)</li>
<li>Use <a href="http://svn.openstreetmap.org/applications/utils/osm-extract/polygons/osm2poly.pl">osm2poly.pl</a> script for generate the poly file : perl osm2poly.pl data.osm &gt; data.poly</li>
</ol>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/15483/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Aug '12, 15:22</strong>
</p>
<img alt="NicolasDumoulin's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2839f25c5f2da24f6ffd25de1641684?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/868/nicolasdumoulin">NicolasDumoulin</a><br/>
<span class="score" title="3327 reputation points"><span class="">3.3k</span></span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="22 badges"><span class="silver">●</span><span class="badgecount">22</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="NicolasDumoulin has 15 accepted answers">13%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/15483/">
                edited
                <strong>04 Sep '12, 16:36</strong>
</a>
</p>
<img alt="Pieren's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0e92f2d89853fd4e04c4b40a921e519b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/87/pieren">Pieren</a><br/>
<span class="score" title="9847 reputation points"><span class="">9.8k</span></span><span title="20 badges"><span class="badge1">●</span><span class="badgecount">20</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="157 badges"><span class="bronze">●</span><span class="badgecount">157</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-15483">
<a name="15486"></a>
<div class="comment" id="comment-15486">
<div class="comment-score" id="post-15486-score"></div>
<div class="comment-text"><p>Thanks, that seems to have worked. It's cooking away now, so I'll have to see how it comes out!</p></div>
<div class="comment-info" id="comment-15486-info">
<span class="comment-age">(24 Aug '12, 16:33)</span>
<a class="comment-user userinfo" href="/users/4359/petergribble">PeterGribble</a>
</div>
</div>
<a name="15569"></a>
<div class="comment" id="comment-15569">
<div class="comment-score" id="post-15569-score"></div>
<div class="comment-text"><p>It seems to have come out in 60 different polygons, and when I ran my query it only found two results, whereas with a box covering the same rough area I got over 6000... Is that because the relation is made of 60 different ways? I've combined them in JOSM, and I'm about to try it again.</p></div>
<div class="comment-info" id="comment-15569-info">
<span class="comment-age">(28 Aug '12, 09:39)</span>
<a class="comment-user userinfo" href="/users/4359/petergribble">PeterGribble</a>
</div>
</div>
<a name="15570"></a>
<div class="comment" id="comment-15570">
<div class="comment-score" id="post-15570-score">1</div>
<div class="comment-text"><p>I don't understand which query you're talking. Ensure that you're merging all the ways in JOSM, and remove all the tags. Then, you can check the resulting .poly file by opening it in a text editor. You should have only one polygon section in the file.</p></div>
<div class="comment-info" id="comment-15570-info">
<span class="comment-age">(28 Aug '12, 10:11)</span>
<a class="comment-user userinfo" href="/users/868/nicolasdumoulin">NicolasDumoulin</a>
</div>
</div>
<a name="15571"></a>
<div class="comment" id="comment-15571">
<div class="comment-score" id="post-15571-score">1</div>
<div class="comment-text"><p>Have you seen the text at the top of osm2poly.pl? The bit about the "must have" tags is missing from Nicolas' description:</p>
<pre><code># script to convert an OSM file to a polygon file.
# the OSM file must follow certain conventions, namely
# each way must have a polygon_file and polygon_id tag,
# may have a note tag and must not have others.
</code></pre></div>
<div class="comment-info" id="comment-15571-info">
<span class="comment-age">(28 Aug '12, 10:19)</span>
<a class="comment-user userinfo" href="/users/2933/cartinus">cartinus</a>
</div>
</div>
<a name="15574"></a>
<div class="comment not_top_scorer" id="comment-15574">
<div class="comment-score" id="post-15574-score"></div>
<div class="comment-text"><p>you're right cartinus, but I've never done that in my previous usage of this script … so I don't know, but you may try ;)</p></div>
<div class="comment-info" id="comment-15574-info">
<span class="comment-age">(28 Aug '12, 10:48)</span>
<a class="comment-user userinfo" href="/users/868/nicolasdumoulin">NicolasDumoulin</a>
</div>
</div>
<a name="15795"></a>
<div class="comment" id="comment-15795">
<div class="comment-score" id="post-15795-score">1</div>
<div class="comment-text"><p>Yeah, it seems the original data were split into different ways, and combining them in JOSM before converting has fixed the problem. It's all working fine! Thanks Nicolas :)</p></div>
<div class="comment-info" id="comment-15795-info">
<span class="comment-age">(04 Sep '12, 14:41)</span>
<a class="comment-user userinfo" href="/users/4359/petergribble">PeterGribble</a>
</div>
</div>
<a name="15796"></a>
<div class="comment not_top_scorer" id="comment-15796">
<div class="comment-score" id="post-15796-score"></div>
<div class="comment-text"><p>It seems that a JOSM plugin can be installed (name 'poly') and you can export the poly file directly from JOSM (<a href="http://josm.openstreetmap.de/wiki/Plugins)">http://josm.openstreetmap.de/wiki/Plugins)</a></p></div>
<div class="comment-info" id="comment-15796-info">
<span class="comment-age">(04 Sep '12, 16:40)</span>
<a class="comment-user userinfo" href="/users/87/pieren">Pieren</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-15483">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-15483-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="67081"></a>
<div class="answer" id="answer-container-67081">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/67081/up/" id="post-67081-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-67081-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/67081/down/" id="post-67081-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You can use: <a href="http://polygons.openstreetmap.fr/">http://polygons.openstreetmap.fr/</a> </p>
<p>It will convert your relation ID to a poly file and it has an API : </p>
<blockquote>
<p><a href="http://polygons.openstreetmap.fr/get_poly.py?id=376823&amp;params=0">http://polygons.openstreetmap.fr/get_poly.py?id=376823&amp;params=0</a></p>
</blockquote>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/67081/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>06 Dec '18, 09:05</strong>
</p>
<img alt="Potdeyaourt's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/6863bef08c5e0bc17bee1e10c2b56b83?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/13021/potdeyaourt">Potdeyaourt</a><br/>
<span class="score" title="61 reputation points">61</span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Potdeyaourt has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-67081">
</div>
<div class="comment-tools" id="comment-tools-67081">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-67081-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/15481/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="b8RN27nrQZ9wXqrnKhryI72qu8lmVaAP"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>