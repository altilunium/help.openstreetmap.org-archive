<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/60241/how-to-obtain-administrative-boundaries-within-a-higher-level-in-overpass-turbo">How to obtain administrative boundaries within a higher level in Overpass Turbo</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60241/up/" id="post-60241-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60241-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/60241/down/" id="post-60241-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/60241/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have admin_level=8 for South Oxfordshire District.  I wish to obtain admin_level=10 civil parishes within that boundary.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-within" href="/tags/within/" rel="tag" title="see questions tagged 'within'">within</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>23 Oct '17, 13:01</strong>
</p>
<img alt="silver%20mapper's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ffcc41f13929627742b4936ec178c6f1?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2110/silver-mapper">silver mapper</a><br/>
<span class="score" title="256 reputation points">256</span><span title="26 badges"><span class="badge1">●</span><span class="badgecount">26</span></span><span title="27 badges"><span class="silver">●</span><span class="badgecount">27</span></span><span title="35 badges"><span class="bronze">●</span><span class="badgecount">35</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="silver mapper has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60241">
</div>
<div class="comment-tools" id="comment-tools-60241">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60241-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/60241/how-to-obtain-administrative-boundaries-within-a-higher-level-in-overpass-turbo?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/60241/how-to-obtain-administrative-boundaries-within-a-higher-level-in-overpass-turbo?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/60241/how-to-obtain-administrative-boundaries-within-a-higher-level-in-overpass-turbo?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/60241/how-to-obtain-administrative-boundaries-within-a-higher-level-in-overpass-turbo?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="60243"></a>
<div class="answer" id="answer-container-60243">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60243/up/" id="post-60243-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60243-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/60243/down/" id="post-60243-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I think this should do it:</p>
<p><a href="http://overpass-turbo.eu/s/sy3">http://overpass-turbo.eu/s/sy3</a></p>
<p>For queries like <code>in South Oxfordshire</code>, Overpass Turbo looks up the name using the service at <a href="http://nominatim.openstreetmap.org/">http://nominatim.openstreetmap.org/</a>. It takes the first result, which for "South Oxfordshire District" is not the area you want to search in: <a href="http://nominatim.openstreetmap.org/search.php?q=South+Oxfordshire+District&amp;polygon_geojson=1&amp;viewbox=">http://nominatim.openstreetmap.org/search.php?q=South+Oxfordshire+District&amp;polygon_geojson=1&amp;viewbox=</a></p>
<p>Here removing "district" does the trick. Overpass API also has some ways of retrieving an area created from a specific OpenStreetMap feature: <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#By_area_.28area.29">http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#By_area_.28area.29</a></p>
<p>So <code>area(3600299097)-&gt;.searchArea;</code> or <code>area[admin_level=8][name="South Oxfordshire"]-&gt;.searchArea;</code> should also work to retrieve the area. These methods can be useful if Nominatim doesn't match a search or to move the query out of Overpass Turbo.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/60243/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>23 Oct '17, 14:13</strong>
</p>
<img alt="maxerickson's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c860445e868ebb21da141635a4aa7b06?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10973/maxerickson">maxerickson</a><br/>
<span class="score" title="12700 reputation points"><span class="">12.7k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="176 badges"><span class="bronze">●</span><span class="badgecount">176</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="maxerickson has 93 accepted answers">32%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60243">
<a name="60246"></a>
<div class="comment" id="comment-60246">
<div class="comment-score" id="post-60246-score"></div>
<div class="comment-text"><p>Max</p>
<p>I thank you for your prompt and informative reply.</p>
<p>I realised my post should have read "admin_level"=8 and name="South Oxfordshire", and wanted to edit it but your reply beat me to it.  Running your suggestion gives me a result but there are straight lines connecting certain points in addition to the boundaries themselves.  The appearance is a mixture of white and yellow areas, suggesting some sort of overlap.  This is the same result as I have achieved, myself, which is why I asked the question.  Copying the result as a .kml file into uMap replicates all lines.  Opening an exported and saved .kml file into JOSM displays the boundaries alone, however.  Importing that saved .kml file into uMap gives the same result as copying it.</p>
<p>Looking into it further, my impression is this: each admin level 10 boundary is formed of a number of sections, as we contributors choose.  The straight lines appear to run between the ends of such sections, when I view and select sections in JOSM.</p></div>
<div class="comment-info" id="comment-60246-info">
<span class="comment-age">(23 Oct '17, 16:33)</span>
<a class="comment-user userinfo" href="/users/2110/silver-mapper">silver mapper</a>
</div>
</div>
<a name="60247"></a>
<div class="comment" id="comment-60247">
<div class="comment-score" id="post-60247-score"></div>
<div class="comment-text"><p>I expect the tools you are using expect the relations to be in a certain order, which isn't something OSM has treated as important.</p>
<p>You can use <a href="http://overpass-turbo.eu/s/syd">http://overpass-turbo.eu/s/syd</a> to download the OSM data directly into JOSM and see that it is able to process the areas reasonably. The relation editor window also has a feature where it visualizes how the ways are connected.</p>
<p>If you are looking for a KML file, the easiest solution is probably <code>out geom;</code> which will cause Overpass API to generate the areas (instead of Overpass Turbo): <a href="http://overpass-turbo.eu/s/sye">http://overpass-turbo.eu/s/sye</a></p></div>
<div class="comment-info" id="comment-60247-info">
<span class="comment-age">(23 Oct '17, 16:58)</span>
<a class="comment-user userinfo" href="/users/10973/maxerickson">maxerickson</a>
</div>
</div>
<a name="60249"></a>
<div class="comment" id="comment-60249">
<div class="comment-score" id="post-60249-score"></div>
<div class="comment-text"><p>Max</p>
<p>Between times, I thought the result was because the administrative boundaries are not closed ways.</p>
<p>I thank you for your further information and help, and <a href="http://overpass-turbo.eu/s/sye">http://overpass-turbo.eu/s/sye</a> does give me what I seek, indeed.  This answers my post.</p></div>
<div class="comment-info" id="comment-60249-info">
<span class="comment-age">(23 Oct '17, 18:24)</span>
<a class="comment-user userinfo" href="/users/2110/silver-mapper">silver mapper</a>
</div>
</div>
<a name="74389"></a>
<div class="comment" id="comment-74389">
<div class="comment-score" id="post-74389-score"></div>
<div class="comment-text"><p>Hi there, I want to get the city, district and Xian boundaries on that website too. I'm allergic to code, tried change number 10 to 5 in your link but not work. I want to draw the city, district, and County(Xian in China) level boundaries of those cities: Shanghai, Suzhou, Wuxi, Changzhou, Huzhou, Jiaxing, Hangzhou, Shaoxing and Ningbo. Please help. What should I code to achieve that, please</p></div>
<div class="comment-info" id="comment-74389-info">
<span class="comment-age">(27 Apr '20, 03:53)</span>
<a class="comment-user userinfo" href="/users/18244/cliffhu">CliffHU</a>
</div>
</div>
<a name="74392"></a>
<div class="comment" id="comment-74392">
<div class="comment-score" id="post-74392-score">1</div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/18244/cliffhu">@CliffHU</a>, please ask a new question. Do not use comments to ask new questions.</p></div>
<div class="comment-info" id="comment-74392-info">
<span class="comment-age">(27 Apr '20, 04:36)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
<a name="74397"></a>
<div class="comment not_top_scorer" id="comment-74397">
<div class="comment-score" id="post-74397-score"></div>
<div class="comment-text"><p>OK, please check the QS here: <a href="https://help.openstreetmap.org/questions/74396/overpass-draw-multiple-cities-with-district-boundaries-to-calculate-population-in-driving-range">https://help.openstreetmap.org/questions/74396/overpass-draw-multiple-cities-with-district-boundaries-to-calculate-population-in-driving-range</a></p></div>
<div class="comment-info" id="comment-74397-info">
<span class="comment-age">(27 Apr '20, 07:05)</span>
<a class="comment-user userinfo" href="/users/18244/cliffhu">CliffHU</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-60243">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60243-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/60241/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="LFuJXJL4eIUCCuJ62R85QkhmO1fcFXIW"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>