<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/74266/traversing-a-road-network">Traversing a road network</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/74266/up/" id="post-74266-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-74266-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/74266/down/" id="post-74266-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/74266/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>In my project, a driving app, I want to traverse the OSM road network as the user is driving.  There's no routing at all and I don't need geometry.  I just want to be able to display info about where the user is driving (road name and administrative area names like city, county, and state) and what the max speed is for the current road segment.  What's the best way to approach this without constantly reverse geocoding?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-network" href="/tags/network/" rel="tag" title="see questions tagged 'network'">network</a>
<a class="post-tag tag-link-road" href="/tags/road/" rel="tag" title="see questions tagged 'road'">road</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>18 Apr '20, 19:47</strong>
</p>
<img alt="jbjb00's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4413e5a84cc70727f83f6b80b47cdb16?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18239/jbjb00">jbjb00</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="jbjb00 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-74266">
</div>
<div class="comment-tools" id="comment-tools-74266">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-74266-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/74266/traversing-a-road-network?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/74266/traversing-a-road-network?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/74266/traversing-a-road-network?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/74266/traversing-a-road-network?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="74280"></a>
<div class="answer" id="answer-container-74280">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/74280/up/" id="post-74280-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-74280-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/74280/down/" id="post-74280-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This is effectively "map matching", where you take a GPS trace and work out the most likely route from it. Most routing engines, such as OSRM and Graphhopper, provide a map matching feature.</p>
<p>This does mean that you have to run an instance of a routing engine. Unfortunately, running a simple proximity search without a routing engine is less likely to work, because it won't know which road you're on at junctions or other situations where there's more than one road in the area. You could try building some logic which is "sticky" to the current road, but that's likely to be problematic in urban areas where the road network is dense, GPS reception is poor, and you might be making numerous turns.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/74280/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>19 Apr '20, 09:31</strong>
</p>
<img alt="Richard's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/08324717c25d6067fa4ff23ef37d455f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5/richard">Richard ♦</a><br/>
<span class="score" title="30902 reputation points"><span class="">30.9k</span></span><span title="44 badges"><span class="badge1">●</span><span class="badgecount">44</span></span><span title="279 badges"><span class="silver">●</span><span class="badgecount">279</span></span><span title="412 badges"><span class="bronze">●</span><span class="badgecount">412</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Richard has 98 accepted answers">18%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-74280">
<a name="74319"></a>
<div class="comment" id="comment-74319">
<div class="comment-score" id="post-74319-score"></div>
<div class="comment-text"><p>Thank you for the answer, Richard.  Do you have any suggestions for implementing map matching in the way that I've described?  An example to start with, that is.  I've looked at OSRM, and it can easily provide snap-to-road functionality given a few GPS locations, but it doesn't give any administrative info or max speed, and there doesn't appear to be any way I could effectively cache results for "random" location inputs (e.g. I could drive the same road 1,000,000 times and never get the same set of GPS locations twice).  I've also taken a cursory look at Graphhopper, but its map matching is buried in so much other stuff that I don't need.</p></div>
<div class="comment-info" id="comment-74319-info">
<span class="comment-age">(21 Apr '20, 18:18)</span>
<a class="comment-user userinfo" href="/users/18239/jbjb00">jbjb00</a>
</div>
</div>
<a name="74320"></a>
<div class="comment" id="comment-74320">
<div class="comment-score" id="post-74320-score">2</div>
<div class="comment-text"><p>Mapbox (who maintained OSRM until recently) have a "route annotator" which is designed to work with OSRM. You feed it the node ids returned from OSRM, and it supplied the OSM way properties. I don't have any experience with it but have seen reports that it works. <a href="https://github.com/mapbox/route-annotator">https://github.com/mapbox/route-annotator</a></p>
<p>For administrative areas, you <em>could</em> try doing just a simple polygon lookup - i.e. download boundary polygons and then just do a point-in-polygon lookup. This is much simpler than map matching.</p></div>
<div class="comment-info" id="comment-74320-info">
<span class="comment-age">(21 Apr '20, 20:42)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-74280">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-74280-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/74266/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="8s8WNNhZs9BxTFnjgaRd0cSoSyu2FiZy"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>