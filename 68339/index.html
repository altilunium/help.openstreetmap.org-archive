<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/68339/android-full-offline">android full-offline</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68339/up/" id="post-68339-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68339-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/68339/down/" id="post-68339-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/68339/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hey guys...</p>
<p>I want to develop a full offline app, where the map data is included in the apk, for android (java). First I started using the mapbox sdk but unfortunately I noticed that they have a tile limitation of 6k Tiles and I couldn't figure out how to load OpenStreetMap data...</p>
<p>Now I used the osmand sdk to make the map show up with the markers and stuff... I didn't find a clear solution for my <strong>problem</strong>:</p>
<p>Say I have downloaded the data from <a href="https://openmaptiles.com/downloads/planet/">https://openmaptiles.com/downloads/planet/</a> in .mbtiles how can I load the data from the asset folder to my device and show the map, so that someone can install the .apk and will have a full offline Map.</p>
<p>Or is there any "how to" tutorial for building a full offline map-app...</p>
<p>I also checked mapsforge but how I figured out, they focus more on rendering than on pre-loaded data or do I miss something there?</p>
<p>SO: 
 1. Tutorial to include .mbtiles 
 or 2. Any Tutorial / tips to build full offline map...</p>
<p>Thanks a lot. </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-map" href="/tags/map/" rel="tag" title="see questions tagged 'map'">map</a>
<a class="post-tag tag-link-android" href="/tags/android/" rel="tag" title="see questions tagged 'android'">android</a>
<a class="post-tag tag-link-osmand" href="/tags/osmand/" rel="tag" title="see questions tagged 'osmand'">osmand</a>
<a class="post-tag tag-link-offlinemaps" href="/tags/offlinemaps/" rel="tag" title="see questions tagged 'offlinemaps'">offlinemaps</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>09 Mar '19, 15:42</strong>
</p>
<img alt="mathmike's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d8a8bd0f93cd544c77b9192ec5d759e8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/16385/mathmike">mathmike</a><br/>
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mathmike has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/68339/">
                edited
                <strong>09 Mar '19, 21:09</strong>
</a>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-68339">
</div>
<div class="comment-tools" id="comment-tools-68339">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68339-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/68339/android-full-offline?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/68339/android-full-offline?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/68339/android-full-offline?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/68339/android-full-offline?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="68344"></a>
<div class="answer accepted-answer" id="answer-container-68344">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68344/up/" id="post-68344-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68344-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/68344/down/" id="post-68344-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/68344/" rel="nofollow" title="mathmike has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The correct answer really depends on what functionality you want to provide (which in turn tends to impact the offline data format).</p>
<p>For simply providing an offline map, <a href="https://github.com/mapsforge/mapsforge">mapsforge</a> is a tried solution.</p>
<p>For completeness sake, <a href="https://wiki.openstreetmap.org/wiki/Frameworks#Displaying_interactive_maps">https://wiki.openstreetmap.org/wiki/Frameworks#Displaying_interactive_maps</a> is a list of relevant frameworks.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/68344/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Mar '19, 19:50</strong>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SimonPoole has 209 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/68344/">
                edited
                <strong>09 Mar '19, 21:08</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68344">
<a name="68348"></a>
<div class="comment" id="comment-68348">
<div class="comment-score" id="post-68348-score"></div>
<div class="comment-text"><p>Ok, so I definitely will work on mapsforge in that case.</p>
<p>Right now the needed functions are: -providing offlinemap -adding markers and user location (and some marker.OnClickListener) -reverse geocoding -would be nice to provide a full street directory</p>
<p>Is this possible with mapsforge?</p></div>
<div class="comment-info" id="comment-68348-info">
<span class="comment-age">(09 Mar '19, 20:41)</span>
<a class="comment-user userinfo" href="/users/16385/mathmike">mathmike</a>
</div>
</div>
<a name="68349"></a>
<div class="comment" id="comment-68349">
<div class="comment-score" id="post-68349-score">1</div>
<div class="comment-text"><p>I don't know how well it works but here is an example <a href="https://github.com/mapsforge/mapsforge/blob/c8294c7ae27b2ce4a6af56516216af8c6d7cb0b3/mapsforge-samples-android/src/main/java/org/mapsforge/samples/android/ReverseGeocodeViewer.java">https://github.com/mapsforge/mapsforge/blob/c8294c7ae27b2ce4a6af56516216af8c6d7cb0b3/mapsforge-samples-android/src/main/java/org/mapsforge/samples/android/ReverseGeocodeViewer.java</a></p></div>
<div class="comment-info" id="comment-68349-info">
<span class="comment-age">(09 Mar '19, 21:06)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-68344">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68344-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="68342"></a>
<div class="answer" id="answer-container-68342">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68342/up/" id="post-68342-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68342-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/68342/down/" id="post-68342-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>My knowledge here is as a user of OsmAnd not as a developer, but with that caveat in mind:</p>
<p>While OsmAnd can show tiles it primarily stores map data as *.obf files (it's own format) and renders the map from these files. If there is no file for the area you are interested in you can create one yourself with <a href="https://wiki.openstreetmap.org/wiki/OsmAndMapCreator">OsmAndMapCreator</a>. There are then different styles within the application for how these should be displayed, for custom styles see links in <a href="https://wiki.openstreetmap.org/wiki/OsmAnd#Custom_rendering_style">this section</a> of the OsmAnd wiki page. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/68342/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Mar '19, 16:21</strong>
</p>
<img alt="InsertUser's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ec8a0cf213f9797ad1c1ae2c28c2332d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4426/insertuser">InsertUser</a><br/>
<span class="score" title="11005 reputation points"><span class="">11.0k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="69 badges"><span class="silver">●</span><span class="badgecount">69</span></span><span title="185 badges"><span class="bronze">●</span><span class="badgecount">185</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="InsertUser has 73 accepted answers">19%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68342">
</div>
<div class="comment-tools" id="comment-tools-68342">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68342-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="84191"></a>
<div class="answer" id="answer-container-84191">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/84191/up/" id="post-84191-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-84191-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/84191/down/" id="post-84191-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I wrote about this very problem last year. You can read about the whole solution here</p>
<p><a href="https://medium.com/@ty2/how-to-display-offline-maps-using-maplibre-mapbox-39ad0f3c7543">https://medium.com/@ty2/how-to-display-offline-maps-using-maplibre-mapbox-39ad0f3c7543</a></p>
<p>and the code for the same is here</p>
<p><a href="https://github.com/kuwapa/OfflineMapExample/tree/83c7e81391a5f0946ab1fcb3155966c4997d44d3">https://github.com/kuwapa/OfflineMapExample/tree/83c7e81391a5f0946ab1fcb3155966c4997d44d3</a></p>
<p>Essentially, solution is  </p>
<ol>
<li>Use MapLibre SDK</li>
<li>Generate MBTILES using tilemaker or downloaded tiles from Maptiler (the important thing here is that the vector tiles in the MBTILES file are built using the openmaptiles styles)</li>
<li>Load MBTILES file in the assets folder on the Android app</li>
<li>Create a local style file json for vector tiles with a placeholder for a local MBTILES file.</li>
<li>In app code, load local style file, replaced placeholder with MBTILES file uri and add "mbtiles://" before the uri</li>
<li>Save new style file in some location</li>
<li>Open map, load the new style</li>
<li>View MBTILES file locally</li>
<li>For future for loading multiple MBTILES files together, create a local server and point the style file to local server and using local server, serve vector files to the map. </li>
</ol>
<p>I hope this helps. Please comment any questions you might have. Happy to help. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/84191/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 Apr '22, 09:18</strong>
</p>
<img alt="protos29's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/79e65eed0a4d543a7229550d59f0e309?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20659/protos29">protos29</a><br/>
<span class="score" title="41 reputation points">41</span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="protos29 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/84191/">
                edited
                <strong>16 Apr '22, 09:18</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-84191">
</div>
<div class="comment-tools" id="comment-tools-84191">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-84191-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/68339/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="i5kwap7h8CmfTT2nFOvIqcVz32LPdJhJ"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>