<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/22996/how-can-i-get-overpass-api-to-just-display-my-objects-with-just-one-tag">How can I get Overpass-API to just display my objects with just one tag ?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22996/up/" id="post-22996-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22996-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/22996/down/" id="post-22996-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/22996/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hey,
you can I ask Overpass to just give me back Objects with <strong>just one</strong> particular tag and no other tags.
e.g. if a object has the tag building=yes it should be displayed if it has building=yes and addr:city=whatever it shouldn't?</p>
<p>How can i make that happen ?
Thanks for your answers!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-tag" href="/tags/tag/" rel="tag" title="see questions tagged 'tag'">tag</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>03 Jun '13, 20:05</strong>
</p>
<img alt="hno2's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0c43c2c53ad9723aa6598d37579b2bbc?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4241/hno2">hno2</a><br/>
<span class="score" title="66 reputation points">66</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="8 badges"><span class="bronze">●</span><span class="badgecount">8</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="hno2 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22996">
<a name="36726"></a>
<div class="comment" id="comment-36726">
<div class="comment-score" id="post-36726-score"></div>
<div class="comment-text"><p>Update September 2014: Now that Overpass API also supports regular expressions for keys, this kind of query is now possible. See my answer below for details.</p></div>
<div class="comment-info" id="comment-36726-info">
<span class="comment-age">(10 Sep '14, 10:12)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-22996">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22996-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/22996/how-can-i-get-overpass-api-to-just-display-my-objects-with-just-one-tag?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/22996/how-can-i-get-overpass-api-to-just-display-my-objects-with-just-one-tag?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/22996/how-can-i-get-overpass-api-to-just-display-my-objects-with-just-one-tag?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/22996/how-can-i-get-overpass-api-to-just-display-my-objects-with-just-one-tag?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="23001"></a>
<div class="answer" id="answer-container-23001">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/23001/up/" id="post-23001-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-23001-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/23001/down/" id="post-23001-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I don't know if overpass API can count tags. Neither do I know if you can query "your" objects.</p>
<p>If you are looking for buildings wighout house numbers, you could either use <a href="http://qa.poole.ch/?layers=FTFB0">Simon's no address layer</a> or you could use <a href="http://overpass-turbo.eu/s/i3">this overpass query</a> (objects that have a building tag set and don't have an addr:housenumber tag):</p>
<pre><code>(
 node({{bbox}})["building"]
  ["addr:housenumber"!~".*"];
 way({{bbox}})["building"]
  ["addr:housenumber"!~".*"];
 rel({{bbox}})["building"]
  ["addr:housenumber"!~".*"];
);
(._;&gt;;);
out;
</code></pre>
<p>HTH
/al</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/23001/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 Jun '13, 13:21</strong>
</p>
<img alt="_al's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/5501080a7333d6383d6c545f076eaeba?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/507/_al">_al</a><br/>
<span class="score" title="860 reputation points">860</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="10 badges"><span class="silver">●</span><span class="badgecount">10</span></span><span title="18 badges"><span class="bronze">●</span><span class="badgecount">18</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="_al has one accepted answer">4%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-23001">
<a name="27085"></a>
<div class="comment" id="comment-27085">
<div class="comment-score" id="post-27085-score">1</div>
<div class="comment-text"><p>Thanks, I was looking for a query to find ways with addr:interpolation but without addr:street </p>
<pre><code>(
 node({{bbox}})["addr:interpolation"]
  ["addr:street"!~".*"];
 way({{bbox}})["addr:interpolation"]
  ["addr:street"!~".*"];
 rel({{bbox}})["addr:interpolation"]
  ["addr:street"!~".*"];
);
(._;&gt;;);
out;
</code></pre></div>
<div class="comment-info" id="comment-27085-info">
<span class="comment-age">(10 Oct '13, 20:17)</span>
<a class="comment-user userinfo" href="/users/5200/cyph3r">cyph3r</a>
</div>
</div>
<a name="41849"></a>
<div class="comment" id="comment-41849">
<div class="comment-score" id="post-41849-score">1</div>
<div class="comment-text"><p>Overpass API cannot count tags yet. There's an open issue for that on Github: <a href="https://github.com/drolbr/Overpass-API/issues/197">https://github.com/drolbr/Overpass-API/issues/197</a></p></div>
<div class="comment-info" id="comment-41849-info">
<span class="comment-age">(22 Mar '15, 17:07)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-23001">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-23001-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="36725"></a>
<div class="answer" id="answer-container-36725">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/36725/up/" id="post-36725-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-36725-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/36725/down/" id="post-36725-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>A combination of the difference operator and regular expressions for keys can make this happen. Unfortunately, you cannot use negative look-ahead (?!) for regular expressions, which makes the whole story very complex (see <a href="http://stackoverflow.com/questions/7883819/using-posix-to-exclude-a-word-inside-a-string">this stackoverflow post</a> on how to build such an expression).</p>
<p>That's why I resort to a simplified approach and exclude buildings, which have any tags that don't start with a letter "b". However, the basic principle is the same.</p>
<pre><code>[bbox:{{bbox}}];
((
// retrieve all buildings    
  way[building=yes];
// and remove...    
  - 
// all buildings which also have a tag not starting with "b"    
  way[building=yes][~"^[^b].*$"~"."]; 
); &gt;; );
out;
</code></pre>
<p>Try in Overpass Turbo: <a href="http://overpass-turbo.eu/s/4Z9">http://overpass-turbo.eu/s/4Z9</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/36725/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Sep '14, 09:02</strong>
</p>
<img alt="mmd's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/264d84ab05b942224b05960903eba7a7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8708/mmd">mmd</a><br/>
<span class="score" title="5682 reputation points"><span class="">5.7k</span></span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="53 badges"><span class="silver">●</span><span class="badgecount">53</span></span><span title="88 badges"><span class="bronze">●</span><span class="badgecount">88</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mmd has 44 accepted answers">37%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-36725">
</div>
<div class="comment-tools" id="comment-tools-36725">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-36725-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="58855"></a>
<div class="answer" id="answer-container-58855">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/58855/up/" id="post-58855-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-58855-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/58855/down/" id="post-58855-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p><a href="http://overpass-turbo.eu/s/rjM">http://overpass-turbo.eu/s/rjM</a> has an example of query that is using tag counting. It will find poorly tagged object - with only tourism=attraction or tourism attraction + name tag in Poland,</p>
<pre><code>/*
This has been generated by the overpass-turbo wizard.
The original search was:
“addr:housenumber=* and name=* and type:node and aeroway!=* and amenity!=* and craft!=* and historic!=* and leisure!=* and man_made!=* and office!=* and power!=* and railway!=* and shop!=* and tourism!=* in Polska”
*/
[out:xml]/*fixed by auto repair*/[timeout:2500];
// fetch area “Polska” to search in
{{geocodeArea:Polska}}-&gt;.searchArea;
// gather results
(
  // query part for: “"addr:housenumber"=* and name=* and aeroway!=* and amenity!=* and craft!=* and historic!=* and leisure!=* and man_made!=* and office!=* and power!=* and railway!=* and shop!=* and tourism!=*”
 node[tourism=attraction](if:count_tags()==1)(area.searchArea);
   node[tourism=attraction][name](if:count_tags()==2)(area.searchArea);
);
// print results
out meta;/*fixed by auto repair*/
&gt;;
out meta qt;/*fixed by auto repair*/
</code></pre>
<p>query was provided by RicoElectrico, thanks! source: <a href="https://forum.openstreetmap.org/viewtopic.php?pid=661266#p661266">https://forum.openstreetmap.org/viewtopic.php?pid=661266#p661266</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/58855/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Aug '17, 08:58</strong>
</p>
<img alt="Mateusz%20Konieczny's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/220a7c896723cbc2b5d57a1bfd5d66f0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9159/mateusz-konieczny">Mateusz Koni...</a><br/>
<span class="score" title="361 reputation points">361</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="6 badges"><span class="silver">●</span><span class="badgecount">6</span></span><span title="16 badges"><span class="bronze">●</span><span class="badgecount">16</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Mateusz Konieczny has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/58855/">
                edited
                <strong>29 Aug '17, 08:59</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-58855">
</div>
<div class="comment-tools" id="comment-tools-58855">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-58855-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="23019"></a>
<div class="answer" id="answer-container-23019">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/23019/up/" id="post-23019-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-23019-score" title="current number of votes">
    -2
</div>
<a class="ajax-command post-vote down" href="/vote/23019/down/" id="post-23019-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I'm not sure what you mean. </p>
<p>Concerning the output format, Overpass API prints for an object always either all tags or no tags at all.</p>
<p>If you want to find an object with a certain tag but not a certain other tag, you can the solution provided by _al above.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/23019/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Jun '13, 07:34</strong>
</p>
<img alt="Roland%20Olbricht's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fcfdb0825826fd13d2ff0d83d58819c6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3480/roland-olbricht">Roland Olbricht</a><br/>
<span class="score" title="6666 reputation points"><span class="">6.7k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Roland Olbricht has 40 accepted answers">36%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-23019">
<a name="23021"></a>
<div class="comment" id="comment-23021">
<div class="comment-score" id="post-23021-score">2</div>
<div class="comment-text"><p>As far as I understand he is looking for a solution to find objects which only have one tag - the specified tag - and no other tags at all.</p></div>
<div class="comment-info" id="comment-23021-info">
<span class="comment-age">(05 Jun '13, 08:14)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="23035"></a>
<div class="comment" id="comment-23035">
<div class="comment-score" id="post-23035-score">1</div>
<div class="comment-text"><p>Thats right, e.g a node with the tag addr:street: Obama Alley and without any other tags should be printed a node with addr:street and addr:country not. But I already solved my problem with an other possible solution</p></div>
<div class="comment-info" id="comment-23035-info">
<span class="comment-age">(05 Jun '13, 16:45)</span>
<a class="comment-user userinfo" href="/users/4241/hno2">hno2</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-23019">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-23019-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/22996/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="CAJwRGnD1B9aQEPPyUifNuquld2b4zNo"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>