<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/17694/create-a-changeset-using-api">Create a 'changeset' using api</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17694/up/" id="post-17694-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17694-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/17694/down/" id="post-17694-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/17694/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
I'm creating a client for OSM api. I'm failing to create a changeset. (I'm using developers' url).
I'm sending followings in header.
oauth_token,oauth_consumer_key,oauth_signature_method,oauth_version,oauth_nonce,oauth_timestamp
And message body as follows:</p>
<pre><code>&lt;osm&gt;
&lt;changeset&gt;&lt;tag k="A" v="Aaa"/&gt;&lt;tag k="B" v="Bbb"/&gt;&lt;tag k="c" v="Ccc"/&gt;&lt;/changeset&gt;
&lt;changeset&gt;&lt;tag k="B" v="Bbl"/&gt;&lt;/changeset&gt;
&lt;changeset&gt;&lt;tag k="A" v="Aab"/&gt;&lt;tag k="F" v="Afff"/&gt;&lt;tag k="B" v="bbb"/&gt;&lt;/changeset&gt;
&lt;/osm&gt;
</code></pre>
<p><strong>After sending data to server using PUT, I'm receiving http 500 response (Application error).</strong></p>
<p>Could someone help to solve this issue please?</p>
<p>Thanks!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-oauth" href="/tags/oauth/" rel="tag" title="see questions tagged 'oauth'">oauth</a>
<a class="post-tag tag-link-changeset" href="/tags/changeset/" rel="tag" title="see questions tagged 'changeset'">changeset</a>
<a class="post-tag tag-link-api" href="/tags/api/" rel="tag" title="see questions tagged 'api'">api</a>
<a class="post-tag tag-link-put" href="/tags/put/" rel="tag" title="see questions tagged 'put'">put</a>
<a class="post-tag tag-link-client" href="/tags/client/" rel="tag" title="see questions tagged 'client'">client</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Nov '12, 16:25</strong>
</p>
<img alt="buddhima's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/658670034a8466e9db4fb65067d310f8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3742/buddhima">buddhima</a><br/>
<span class="score" title="116 reputation points">116</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="buddhima has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/17694/">
                edited
                <strong>14 Nov '12, 14:13</strong>
</a>
</p>
<img alt="Harry%20Wood's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9e04333be840d50c6aa66fb112aad77c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/107/harry-wood">Harry Wood</a><br/>
<span class="score" title="9489 reputation points"><span class="">9.5k</span></span><span title="25 badges"><span class="badge1">●</span><span class="badgecount">25</span></span><span title="88 badges"><span class="silver">●</span><span class="badgecount">88</span></span><span title="128 badges"><span class="bronze">●</span><span class="badgecount">128</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-17694">
<a name="17707"></a>
<div class="comment" id="comment-17707">
<div class="comment-score" id="post-17707-score">1</div>
<div class="comment-text"><p>Silly question : which URI are you using ? /api/0.6/changeset/create</p>
<p>Did you try first with only one &lt;changeset&gt; element ?</p></div>
<div class="comment-info" id="comment-17707-info">
<span class="comment-age">(14 Nov '12, 10:01)</span>
<a class="comment-user userinfo" href="/users/87/pieren">Pieren</a>
</div>
</div>
<a name="17708"></a>
<div class="comment" id="comment-17708">
<div class="comment-score" id="post-17708-score">1</div>
<div class="comment-text"><p>Hi,
url is 
<a href="http://api06.dev.openstreetmap.org/api/0.6/changeset/create">http://api06.dev.openstreetmap.org/api/0.6/changeset/create</a>
Yes, I've tried with only one element too. But the result is same</p></div>
<div class="comment-info" id="comment-17708-info">
<span class="comment-age">(14 Nov '12, 10:05)</span>
<a class="comment-user userinfo" href="/users/3742/buddhima">buddhima</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-17694">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17694-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/17694/create-a-changeset-using-api?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/17694/create-a-changeset-using-api?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/17694/create-a-changeset-using-api?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/17694/create-a-changeset-using-api?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="17720"></a>
<div class="answer" id="answer-container-17720">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17720/up/" id="post-17720-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17720-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/17720/down/" id="post-17720-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I don't know exactly the reason for the 500 error code, but you are at least missing the <em>xml</em> tag. Here are the header and body of a <em>PUT</em> request to <em>/api/0.6/changeset/create</em> from a recent JOSM version:</p>
<p>header:</p>
<pre><code>PUT /api/0.6/changeset/create HTTP/1.1
User-Agent: JOSM/1.5 (5587 de)
Connection: close
Authorization: OAuth oauth_token="blah", oauth_consumer_key="blah", oauth_version="1.0", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1353272088", oauth_nonce="blah", oauth_signature="blah"
Content-type: text/xml
Host: api.openstreetmap.org
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Content-Length: 42
</code></pre>
<p>body:</p>
<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;osm version='0.6' generator='JOSM'&gt;
  &lt;changeset  id='0' open='false'&gt;
    &lt;tag k='comment' v='my changeset comment' /&gt;
    &lt;tag k='created_by' v='JOSM/1.5 (5581 en)' /&gt;
  &lt;/changeset&gt;
&lt;/osm&gt;
</code></pre>
<p>Also make sure to always include the <em>comment</em> and <em>created_by</em> tag in your changesets.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/17720/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Nov '12, 06:59</strong>
</p>
<img alt="scai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/158/scai">scai ♦</a><br/>
<span class="score" title="33317 reputation points"><span class="">33.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="309 badges"><span class="silver">●</span><span class="badgecount">309</span></span><span title="459 badges"><span class="bronze">●</span><span class="badgecount">459</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="scai has 168 accepted answers">23%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/17720/">
                edited
                <strong>18 Nov '12, 20:58</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-17720">
<a name="17768"></a>
<div class="comment" id="comment-17768">
<div class="comment-score" id="post-17768-score"></div>
<div class="comment-text"><p>Hi,
In API spec. it is not mentioned to add xml tag. I failed even it is added.
is it necessary to add version,generator attributes to osm tag?
and id, open attributes in changeset tag?</p>
<p>I also would appriciate, if you can give me an example of PUT with headers too. (eg: Content-Type,etc.)
Thanks!</p></div>
<div class="comment-info" id="comment-17768-info">
<span class="comment-age">(18 Nov '12, 19:06)</span>
<a class="comment-user userinfo" href="/users/3742/buddhima">buddhima</a>
</div>
</div>
<a name="17769"></a>
<div class="comment" id="comment-17769">
<div class="comment-score" id="post-17769-score"></div>
<div class="comment-text"><p>I've added a header. You can use a program like wireshark or tcpdump yourself to read network packets of JOSM or other programs.</p>
<p>I'm not familiar with the API details so I can't say anything about which XML attributes are required and which not. Just try it if you can't find anything in the API documentation about this.</p></div>
<div class="comment-info" id="comment-17769-info">
<span class="comment-age">(18 Nov '12, 21:00)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-17720">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17720-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="18457"></a>
<div class="answer answered-by-owner" id="answer-container-18457">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18457/up/" id="post-18457-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18457-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/18457/down/" id="post-18457-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi All,
Thanks  for the help, specially scai. Message should follow following format in body.</p>
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
&lt;osm version="0.6" generator="MyOpenstreetmapApp"&gt; 
&lt;changeset&gt;
    &lt;tag k='comment' v='my changeset comment' /&gt;
    &lt;tag k='created_by' v='JOSM/1.5 (5581 en)' /&gt;   
&lt;/changeset&gt; 
&lt;/osm&gt;
</code></pre>
<p>The above message format worked finally !</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/18457/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Dec '12, 15:50</strong>
</p>
<img alt="buddhima's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/658670034a8466e9db4fb65067d310f8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3742/buddhima">buddhima</a><br/>
<span class="score" title="116 reputation points">116</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="buddhima has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/18457/">
                edited
                <strong>14 Dec '12, 15:51</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18457">
</div>
<div class="comment-tools" id="comment-tools-18457">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18457-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="17716"></a>
<div class="answer" id="answer-container-17716">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/17716/up/" id="post-17716-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-17716-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/17716/down/" id="post-17716-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The detail is on the <a href="http://wiki.openstreetmap.org/wiki/API_v0.6#Create:_PUT_.2Fapi.2F0.6.2Fchangeset.2Fcreate">wiki page</a>. You need to submit the page with an HTTP PUT. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/17716/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Nov '12, 20:28</strong>
</p>
<img alt="ChrisH's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b906204accce0fd58bc408b22bae01f2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/34/chrish">ChrisH</a><br/>
<span class="score" title="4075 reputation points"><span class="">4.1k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="42 badges"><span class="silver">●</span><span class="badgecount">42</span></span><span title="62 badges"><span class="bronze">●</span><span class="badgecount">62</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="ChrisH has 11 accepted answers">15%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-17716">
<a name="17717"></a>
<div class="comment" id="comment-17717">
<div class="comment-score" id="post-17717-score"></div>
<div class="comment-text"><p>Hi,
I was following that wiki page.But fails. can someone give me a full details of a successful http PUT request to OSM
Thanks</p></div>
<div class="comment-info" id="comment-17717-info">
<span class="comment-age">(15 Nov '12, 03:40)</span>
<a class="comment-user userinfo" href="/users/3742/buddhima">buddhima</a>
</div>
</div>
<a name="17728"></a>
<div class="comment" id="comment-17728">
<div class="comment-score" id="post-17728-score"></div>
<div class="comment-text"><p>You may have an authentication problem. Check this page about OAuth in OSM : <a href="http://wiki.openstreetmap.org/wiki/OAuth">http://wiki.openstreetmap.org/wiki/OAuth</a></p></div>
<div class="comment-info" id="comment-17728-info">
<span class="comment-age">(15 Nov '12, 12:51)</span>
<a class="comment-user userinfo" href="/users/87/pieren">Pieren</a>
</div>
</div>
<a name="17751"></a>
<div class="comment" id="comment-17751">
<div class="comment-score" id="post-17751-score"></div>
<div class="comment-text"><p>Hi, It's not a problem with authentication, since I'm getting a token and a secret after Access Token step.
Thanks</p></div>
<div class="comment-info" id="comment-17751-info">
<span class="comment-age">(16 Nov '12, 14:11)</span>
<a class="comment-user userinfo" href="/users/3742/buddhima">buddhima</a>
</div>
</div>
<a name="46734"></a>
<div class="comment" id="comment-46734">
<div class="comment-score" id="post-46734-score"></div>
<div class="comment-text"><p>i have latitude and longitude of a location. i want to upload xml file about this location to add POI.where should i use lat and long? In changset?</p></div>
<div class="comment-info" id="comment-46734-info">
<span class="comment-age">(20 Nov '15, 05:42)</span>
<a class="comment-user userinfo" href="/users/11577/er-pawan-verma">Er Pawan Verma</a>
</div>
</div>
<a name="46735"></a>
<div class="comment" id="comment-46735">
<div class="comment-score" id="post-46735-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/11577/er-pawan-verma"></a><a href="http://help.openstreetmap.org/users/11577/er-pawan-verma">@Er Pawan Verma</a>: to the node object. See the documentation for the API - e.g. <a href="https://wiki.openstreetmap.org/wiki/API_v0.6#Create:_PUT_.2Fapi.2F0.6.2F.5Bnode.7Cway.7Crelation.5D.2Fcreate">about nodes</a>.  Please keep in mind that you should not create objects <a href="https://wiki.openstreetmap.org/wiki/Automated_edits">automatically</a>.</p></div>
<div class="comment-info" id="comment-46735-info">
<span class="comment-age">(20 Nov '15, 05:58)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
<a name="46736"></a>
<div class="comment not_top_scorer" id="comment-46736">
<div class="comment-score" id="post-46736-score"></div>
<div class="comment-text"><p>How can i put changeset? when i dont know.</p></div>
<div class="comment-info" id="comment-46736-info">
<span class="comment-age">(20 Nov '15, 06:02)</span>
<a class="comment-user userinfo" href="/users/11577/er-pawan-verma">Er Pawan Verma</a>
</div>
</div>
<a name="46743"></a>
<div class="comment not_top_scorer" id="comment-46743">
<div class="comment-score" id="post-46743-score"></div>
<div class="comment-text"><p>Please don't hijack other people's question. Ask a new question instead (which you already did <a href="https://help.openstreetmap.org/questions/46741/using-put-api-http-authentication-to-upload-xml">here</a>).</p></div>
<div class="comment-info" id="comment-46743-info">
<span class="comment-age">(20 Nov '15, 07:49)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-17716">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-17716-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/17694/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="pxKZuNE4MuTYD32FMikKpchhGg6Z3Lve"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>