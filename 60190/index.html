<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database">OSM2PLSQL : Error Importing OSM File into the Database</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60190/up/" id="post-60190-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60190-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/60190/down/" id="post-60190-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/60190/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello Team,</p>
<p>I am trying to import the history file (OSH) from Geofabrik web site as shown below
<a href="https://download.geofabrik.de/europe/great-britain.html">https://download.geofabrik.de/europe/great-britain.html</a>
[great-britain.osh.pbf, a file that contains the full OSM history for this region for processing with e.g. osmium. This file was last modified 3 days ago. File size: 1.5 GB; MD5 sum: eb54225a2019051736dde7b84d7dda3d]</p>
<p>I can successfully convert the OSH file to OSM file using the OSMIUM Utility
Every time the extract for Great Britain fails with the error message when using OSM2PGSQL to import the OSM data into the PostGreSQL database. I have tried a couple of times (with different files) and get same issue. 
WARNING: Node 5156175847 (version 2d) has an invalid location and has been ignored. This is not expected to happen with recent planet files, so please check that your input is correct.
Processing: Node(133658k 38.4k/s) Way(25181k 21.20k/s) Relation(13110 126.06/s)node cache: stored: 133658930(100.00%), storage efficiency: 50.00% (dense blocks: 0, sparse nodes: 133658930), hit rate: 99.85%
Osm2pgsql failed due to ERROR: Missing ref on relation member</p>
<p>The history extracts for other regions like Australia / New Zealand / San Francisco etc all work perfectly fine without any issues and this is only for Great Britain. Can you please help me with the issue ? Is this something to do with the extract data contents ?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-import" href="/tags/import/" rel="tag" title="see questions tagged 'import'">import</a>
<a class="post-tag tag-link-osh" href="/tags/osh/" rel="tag" title="see questions tagged 'osh'">osh</a>
<a class="post-tag tag-link-osm2pgsql" href="/tags/osm2pgsql/" rel="tag" title="see questions tagged 'osm2pgsql'">osm2pgsql</a>
<a class="post-tag tag-link-error" href="/tags/error/" rel="tag" title="see questions tagged 'error'">error</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>20 Oct '17, 07:55</strong>
</p>
<img alt="rchittor's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/de679c3f376bc4dd7e428ad9e1a25df6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14335/rchittor">rchittor</a><br/>
<span class="score" title="21 reputation points">21</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="rchittor has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60190">
</div>
<div class="comment-tools" id="comment-tools-60190">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60190-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/60190/osm2plsql-error-importing-osm-file-into-the-database?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="60191"></a>
<div class="answer" id="answer-container-60191">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/60191/up/" id="post-60191-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-60191-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/60191/down/" id="post-60191-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>osm2pgsql is not suitable for importing history files into PostGIS. In fact, there is no software that does this in a full-featured way. It is a difficult issue because many different historical versions of an object have to be created - often more versions than the object has.</p>
<p>You may have processed other history files without errors, this does not mean that the results will make sense.</p>
<p>The only software that comes near importing a history file into PostGIS is <a href="https://github.com/MaZderMind/osm-history-renderer/tree/master/importer">https://github.com/MaZderMind/osm-history-renderer/tree/master/importer</a> but it is old and unmaintained. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/60191/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Oct '17, 09:13</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-60191">
</div>
<div class="comment-tools" id="comment-tools-60191">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-60191-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/60190/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="9Y6BrJ5g93eoS3y66Sx8aBDidxAYZjfo"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>