<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/80710/how-to-filter-or-shrink-osmpbf-size-for-planet-map">How to filter or shrink .osm.pbf size for planet map</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80710/up/" id="post-80710-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80710-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80710/down/" id="post-80710-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/80710/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi everyone!</p>
<p>First of all, I am a beginner at using OpenStreetMap for development purposes. Now, I am being involved in a project where we would like to have the planet map for offline usage due to limited or no internet connection.</p>
<p>So, we are considering to self-host an OpenStreetMap Tile Server locally on our HMI touchscreen device using this approach described <a href="https://switch2osm.org/serving-tiles/using-a-docker-container/">here</a>, by running a docker image. And feed our Qt application on a touchscreen device with map data through the local self-hosted tile server and update data when it's possible with a better internet connection.  </p>
<p>However, our HMI touchscreen device has limited hardware capabilities and I am really concerned about this <a href="https://github.com/Overv/openstreetmap-tile-server#setting-up-the-server">step</a> where we have to import .osm.pbf raw data into PostgreSQL. Since we want to load the planet map the importing time and resources can be extremely high and this is a big problem during first-time device installation. </p>
<p>Is there a tool to filter or shrink the planet map .osm.pbf file size? For example to discard information about places, streets, and side roads, since we are mainly interested in cities, ports, airports, and highways? And also apply a range of specific zoom levels to be exported? Or do you have any idea for a different strategy, such as first-time importing data into PostgreSQL on a more powerful machine and then copy final docker volume on target devices?</p>
<p>Thanks! </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-docker" href="/tags/docker/" rel="tag" title="see questions tagged 'docker'">docker</a>
<a class="post-tag tag-link-switch2osm" href="/tags/switch2osm/" rel="tag" title="see questions tagged 'switch2osm'">switch2osm</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-tiles" href="/tags/tiles/" rel="tag" title="see questions tagged 'tiles'">tiles</a>
<a class="post-tag tag-link-tileserver" href="/tags/tileserver/" rel="tag" title="see questions tagged 'tileserver'">tileserver</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>25 Jun '21, 12:48</strong>
</p>
<img alt="pc_pacman's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f60805c350f89d4e73a57be60624454e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20415/pc_pacman">pc_pacman</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="pc_pacman has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80710">
<a name="80711"></a>
<div class="comment" id="comment-80711">
<div class="comment-score" id="post-80711-score"></div>
<div class="comment-text"><p>A bit more info on the specifications of the "HMI touchscreen device" you're trying to use would be helpful, and also what zoom levels, what geographical area you want to cover and what map style you're planning to use. </p>
<p>If it's really limited then a different approach (perhaps using vector tiles, as is often done for phone-based map apps) might be a better one.</p></div>
<div class="comment-info" id="comment-80711-info">
<span class="comment-age">(25 Jun '21, 13:01)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="80715"></a>
<div class="comment" id="comment-80715">
<div class="comment-score" id="post-80715-score">1</div>
<div class="comment-text"><p>A different approach using vector tiles how it can be achieved? Any helpful guide and initial reference?</p>
<p>Below you can find more info about the device and specs.</p>
<p>Hardware Requirements of our HMI touchscreen device: </p>
<p>CPU: Intel® Pentium® QuadCore N4200
GPU Graphics: Intel® HD Graphics
Memory  4GB DDR4 non-ECC (max. 8GB)
Storage: Industrial 128GB SSD</p>
<p>Geographical area: the whole planet since we may need to display points anywhere in the planet map</p>
<p>Zoom Level: Preferred range of zoom levels from 2 to 16.</p>
<p>Map Style: we can start with the basic style and later it's under discussion to select a different map style</p></div>
<div class="comment-info" id="comment-80715-info">
<span class="comment-age">(25 Jun '21, 14:40)</span>
<a class="comment-user userinfo" href="/users/20415/pc_pacman">pc_pacman</a>
</div>
</div>
<a name="80720"></a>
<div class="comment" id="comment-80720">
<div class="comment-score" id="post-80720-score">2</div>
<div class="comment-text"><p>If you need the planet in z2-16, that hardware specs is nowhere able to help you out with raster tiles.</p>
<p>You may have a look at openmaptiles.org for vector tiles but I'd strongly recommend to not render anything on that hardware, be it vector or raster.</p>
<p>And even if you would render the raster tiles elsewhere, 128gb is not sufficient to save all those tiles. That might be different with vector tiles w/ reduced data/information and overzooming used.</p></div>
<div class="comment-info" id="comment-80720-info">
<span class="comment-age">(25 Jun '21, 19:08)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80710">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80710-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/80710/how-to-filter-or-shrink-osmpbf-size-for-planet-map?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/80710/how-to-filter-or-shrink-osmpbf-size-for-planet-map?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/80710/how-to-filter-or-shrink-osmpbf-size-for-planet-map?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/80710/how-to-filter-or-shrink-osmpbf-size-for-planet-map?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="80721"></a>
<div class="answer" id="answer-container-80721">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80721/up/" id="post-80721-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80721-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80721/down/" id="post-80721-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<blockquote>
<p>Is there a tool to filter or shrink the planet map .osm.pbf file size? For example to discard information about places, streets, and side roads, since we are mainly interested in cities, ports, airports, and highways? </p>
</blockquote>
<p>You can use <code>osmium</code> for this, using the <code>tags-filter</code> <a href="https://docs.osmcode.org/osmium/latest/osmium-tags-filter.html">option</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80721/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>25 Jun '21, 22:20</strong>
</p>
<img alt="mvexel's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/acea3c9fd5908d7ff09596d16b8724d8?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17/mvexel">mvexel</a><br/>
<span class="score" title="762 reputation points">762</span><span title="8 badges"><span class="badge1">●</span><span class="badgecount">8</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="23 badges"><span class="bronze">●</span><span class="badgecount">23</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mvexel has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80721">
<a name="80760"></a>
<div class="comment" id="comment-80760">
<div class="comment-score" id="post-80760-score"></div>
<div class="comment-text"><p>I started working with osmium using the tags-filter and it seems that can help me shrinking the planet map file size. Now, I am trying to find all the suitable filter expressions for what should be excluded. Do you think by shrinking the .osm.pbf and using vector tiles instead of raster that it could be possible to load the planet map in offline mode on the device specs mentioned?</p></div>
<div class="comment-info" id="comment-80760-info">
<span class="comment-age">(28 Jun '21, 13:16)</span>
<a class="comment-user userinfo" href="/users/20415/pc_pacman">pc_pacman</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80721">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80721-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/80710/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="VALrMdYuS7QMh2FavW9TClRk59rJfSQG"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>