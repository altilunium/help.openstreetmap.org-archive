<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/49835/osm-data-import-error-into-nominatim">OSM data import error into nominatim</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/49835/up/" id="post-49835-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-49835-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/49835/down/" id="post-49835-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/49835/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi everybody!</p>
<p>I have been trying, for days now, to import a set of osm data into nominatim. These data have been manually generated using the JOSM tool. The import seems to work smoothly, but, at the end I get the following output:</p>
<pre><code>Stopping table: planet_osm_rels
Building index on table: planet_osm_rels
Stopping table: planet_osm_ways
Stopped table: planet_osm_ways in 0s
Stopping table: planet_osm_nodes
Stopped table: planet_osm_nodes in 0s
Stopped table: planet_osm_rels in 0s
node cache: stored: 7(100.00%), storage efficiency: 0.68% (dense blocks: 1, sparse nodes: 0), hit rate: -nan%

Osm2pgsql took 0s overall
ERROR: No Data
No Data
</code></pre>
<p>And, in the end, nothing is imported even though it seems.</p>
<p>A small sample of the data I am trying to import:</p>
<pre><code>&lt;node id='-9149' visible='true' lat='51.8386' lon='4.9578'&gt;
   &lt;tag k='electrical_capacity' v='12h' /&gt;
   &lt;tag k='general_state' v='normal' /&gt;
   &lt;tag k='name' v='Beatrixziekenhuis' /&gt;
   &lt;tag k='number_of_men' v='1500' /&gt;
   &lt;tag k='resource_availability' v='HIGH' /&gt;
   &lt;tag k='state' v='1' /&gt;
   &lt;tag k='telecom_availability' v='TRUE' /&gt;
   &lt;tag k='type' v='hospital' /&gt;
&lt;/node&gt;
&lt;node id='-9202'  visible='true' lat='51.8456942144' lon='4.95328903198' /&gt;
&lt;node id='-9203'  visible='true' lat='51.83503500628' lon='4.94672298431' /&gt;
&lt;node id='-9204'  visible='true' lat='51.83020836571' lon='4.96204376221' /&gt;
&lt;node id='-9205'  visible='true' lat='51.83697082115' lon='4.97406005859' /&gt;
&lt;node id='-9206'  visible='true' lat='51.84625096935' lon='4.97860908508' /&gt;
&lt;node id='-9207'  visible='true' lat='51.8456942144' lon='4.95328903198' /&gt;

&lt;way id='-9208' visible='true'&gt;
  &lt;nd ref='-9202' /&gt;
  &lt;nd ref='-9203' /&gt;
  &lt;nd ref='-9204' /&gt;
  &lt;nd ref='-9205' /&gt;
  &lt;nd ref='-9206' /&gt;
  &lt;nd ref='-9207' /&gt;
  &lt;tag k='electricity_availability' v='TRUE' /&gt;
  &lt;tag k='flood_vulnerability' v='350' /&gt;
  &lt;tag k='general_state' v='normal' /&gt;
  &lt;tag k='name' v='Gorinchem' /&gt;
  &lt;tag k='number_of_men' v='1000' /&gt;
  &lt;tag k='state' v='1' /&gt;
  &lt;tag k='telecom_availability' v='TRUE' /&gt;
  &lt;tag k='type' v='residentialarea' /&gt;
  &lt;tag k='water_availability' v='TRUE' /&gt;
&lt;/way&gt;
</code></pre>
<p>Any suggestions ? Anyone ever encountered this same issue ?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-import" href="/tags/import/" rel="tag" title="see questions tagged 'import'">import</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-error" href="/tags/error/" rel="tag" title="see questions tagged 'error'">error</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>26 May '16, 10:12</strong>
</p>
<img alt="GabBurnout's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/dc400b116300e713442e10b6d3c1dfe4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/12216/gabburnout">GabBurnout</a><br/>
<span class="score" title="21 reputation points">21</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="GabBurnout has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/49835/">
                edited
                <strong>27 May '16, 22:58</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-49835">
<a name="49836"></a>
<div class="comment" id="comment-49836">
<div class="comment-score" id="post-49836-score"></div>
<div class="comment-text"><p>Forgot to mention, I am trying to import the data using Nominatim.</p>
<p>Thanks again</p></div>
<div class="comment-info" id="comment-49836-info">
<span class="comment-age">(26 May '16, 10:17)</span>
<a class="comment-user userinfo" href="/users/12216/gabburnout">GabBurnout</a>
</div>
</div>
<a name="49837"></a>
<div class="comment" id="comment-49837">
<div class="comment-score" id="post-49837-score"></div>
<div class="comment-text"><p>I'd compare what's in your data with what's in some data that you can import successfully.  I'd specifically look at what enclosing XML tags are in there.</p></div>
<div class="comment-info" id="comment-49837-info">
<span class="comment-age">(26 May '16, 10:19)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="49839"></a>
<div class="comment" id="comment-49839">
<div class="comment-score" id="post-49839-score"></div>
<div class="comment-text"><p>Thank for your answer,</p>
<p>Have tried to remove all the tags, leaving only the name, but the problem persists.</p></div>
<div class="comment-info" id="comment-49839-info">
<span class="comment-age">(26 May '16, 10:30)</span>
<a class="comment-user userinfo" href="/users/12216/gabburnout">GabBurnout</a>
</div>
</div>
<a name="49840"></a>
<div class="comment" id="comment-49840">
<div class="comment-score" id="post-49840-score"></div>
<div class="comment-text"><p>Did the data that you were able to import from some other source have "only the name" in it?  If not, try a (small) Nominatim import of some other data, and look at the tags in that.</p></div>
<div class="comment-info" id="comment-49840-info">
<span class="comment-age">(26 May '16, 10:40)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="49842"></a>
<div class="comment" id="comment-49842">
<div class="comment-score" id="post-49842-score">1</div>
<div class="comment-text"><p>I used a group of tags directly from the Faroe-islands downloaded from Geofabrik.</p>
<p>Now something is imported. Finally! </p>
<p>It seems to be a tags-related problem.</p>
<p>Where is a list of supported tags for an osm data that Nominatim does not complain about ? And that can be used for searching operations ?</p>
<p>Thanks again</p></div>
<div class="comment-info" id="comment-49842-info">
<span class="comment-age">(26 May '16, 11:20)</span>
<a class="comment-user userinfo" href="/users/12216/gabburnout">GabBurnout</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-49835">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-49835-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/49835/osm-data-import-error-into-nominatim?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/49835/osm-data-import-error-into-nominatim?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/49835/osm-data-import-error-into-nominatim?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/49835/osm-data-import-error-into-nominatim?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="49841"></a>
<div class="answer" id="answer-container-49841">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/49841/up/" id="post-49841-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-49841-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/49841/down/" id="post-49841-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Nominatim doesn't index everything with a name (or ref) tag. It looks for places, streets and similar tag combinations. For some tags it uses a positive list of desired values, for others a negative list. That happens in the file output_gazetteer.cpp.</p>
<p><a href="https://github.com/openstreetmap/osm2pgsql/blob/d0af11f267a202c7c1961c2061d121c726d8db3a/output-gazetteer.cpp">https://github.com/openstreetmap/osm2pgsql/blob/d0af11f267a202c7c1961c2061d121c726d8db3a/output-gazetteer.cpp</a></p>
<p>You can either change the logic in the process_tags method to treat all electrical lines like places. Or add a tag place=locality to all your data before importing. <a href="http://wiki.openstreetmap.org/wiki/Key:place">http://wiki.openstreetmap.org/wiki/Key:place</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/49841/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>26 May '16, 11:10</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-49841">
<a name="49870"></a>
<div class="comment" id="comment-49870">
<div class="comment-score" id="post-49870-score">1</div>
<div class="comment-text"><p>thanks for you reply. I played a bit around with tags, and finally managed to get something, the import was successful, and also some research operation works. </p>
<p>Still, it's not how I want yet. I want to have a node representing an hospital, in a specific city (e.g. Gorinchem) in a specific country.</p>
<p>This is the node, in the osm file, that I am using:</p>
<pre><code>&lt;node id='-9149' visible='true' lat='51.8386' lon='4.9578'&gt;
&lt;tag k="is_in" v="Gorinchem, The Netherlands"/&gt;
&lt;tag k="amenity" v="hospital"/&gt;
&lt;tag k="building" v="yes"/&gt;
    &lt;tag k='name' v='Beatrixziekenhuis' /&gt;
&lt;tag k='addr:city' v='Gorinchem' /&gt;
&lt;tag k='addr:country' v='NL' /&gt;
&lt;tag k="addr:street" v="Banneweg"/&gt;
&lt;tag k="addr:postcode" v="4204AA"/&gt;
&lt;tag k="addr:housenumber" v="57"/&gt;
 &lt;/node&gt;
</code></pre>
<p>I also added information relative to the specific address.</p>
<p>Basically, I want to be able to perform a research operation that could return me the hospital present in that city, or in that country.</p>
<p>As far as I know the query should be:</p>
<pre><code>  q=The+Netherlands[hospitals]
</code></pre>
<p>What am I missing in that node ?</p>
<p>Thanks</p></div>
<div class="comment-info" id="comment-49870-info">
<span class="comment-age">(27 May '16, 15:22)</span>
<a class="comment-user userinfo" href="/users/12216/gabburnout">GabBurnout</a>
</div>
</div>
<a name="49920"></a>
<div class="comment" id="comment-49920">
<div class="comment-score" id="post-49920-score"></div>
<div class="comment-text"><p>Did you import the city and country as well? The is_in key is a hint but the place still needs to exist in the Nominatim database to create a hierarchy.</p>
<p>The query format looks good</p>
<p><a href="http://nominatim.openstreetmap.org/search.php?q=the+nederlands+%5Bhospitals%5D">http://nominatim.openstreetmap.org/search.php?q=the+nederlands+%5Bhospitals%5D</a></p>
<p>Here's a list of all 'special phrases' that can be added to those square brackets. <a href="http://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases">http://wiki.openstreetmap.org/wiki/Nominatim/Special_Phrases</a>
after you ran the <a href="http://wiki.openstreetmap.org/wiki/Nominatim/Installation#Add_special_phrases">http://wiki.openstreetmap.org/wiki/Nominatim/Installation#Add_special_phrases</a> step of the installation.</p></div>
<div class="comment-info" id="comment-49920-info">
<span class="comment-age">(31 May '16, 02:21)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-49841">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-49841-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/49835/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="n8KKLT2UJQStC4q8Hps0XYsFEtFN6Rew"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>