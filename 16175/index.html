<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/16175/nominatim-installation-problem-projection-code-failed">Nominatim Installation Problem - Projection Code Failed</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16175/up/" id="post-16175-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16175-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/16175/down/" id="post-16175-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/16175/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Installed Nominatim and received the following error during import of the pbf:</p>
<p>CREATE TABLE</p>
<p>ALTER TABLE</p>
<p>Import</p>
<p>Projection code failed to initialise</p>
<p>osm2pgsql SVN version 0.80.0 (64bit id space)</p>
<p>ERROR: Error executing external command: /home/user/Nominatim/osm2pgsql/osm2pgsql -lsc -O gazetteer --hstore -C 1059 -d nominatim /home/user/osm_data/central-america.osm.pbf</p>
<p>Not sure if this is the issue or not but I am not importing the planet file just two country files.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-code" href="/tags/code/" rel="tag" title="see questions tagged 'code'">code</a>
<a class="post-tag tag-link-failed" href="/tags/failed/" rel="tag" title="see questions tagged 'failed'">failed</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-installation" href="/tags/installation/" rel="tag" title="see questions tagged 'installation'">installation</a>
<a class="post-tag tag-link-projection" href="/tags/projection/" rel="tag" title="see questions tagged 'projection'">projection</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>17 Sep '12, 19:13</strong>
</p>
<img alt="mooreja's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b412da9024d219e82fc430b7a4e5a02c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4530/mooreja">mooreja</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mooreja has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16175">
</div>
<div class="comment-tools" id="comment-tools-16175">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16175-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/16175/nominatim-installation-problem-projection-code-failed?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/16175/nominatim-installation-problem-projection-code-failed?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/16175/nominatim-installation-problem-projection-code-failed?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/16175/nominatim-installation-problem-projection-code-failed?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="16180"></a>
<div class="answer" id="answer-container-16180">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16180/up/" id="post-16180-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16180-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/16180/down/" id="post-16180-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>A g-search for "Projection code failed to initialise" leads to the page <a href="http://trac.osgeo.org/mapserver/wiki/RenderingOsmData,">http://trac.osgeo.org/mapserver/wiki/RenderingOsmData,</a> which explains:</p>
<pre><code>On windows make sure that PROJ_LIB environment variable is define to the location of your epsg file (In some case the path is: "C:\ms4w\proj\nad") - else you will get a "Projection code failed to initialise" error."
</code></pre>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/16180/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>17 Sep '12, 20:16</strong>
</p>
<img alt="mmehl's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a1156d45a55699715b80fc3cadd0c8d7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1453/mmehl">mmehl</a><br/>
<span class="score" title="565 reputation points">565</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="11 badges"><span class="silver">●</span><span class="badgecount">11</span></span><span title="18 badges"><span class="bronze">●</span><span class="badgecount">18</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mmehl has 3 accepted answers">15%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16180">
<a name="16182"></a>
<div class="comment" id="comment-16182">
<div class="comment-score" id="post-16182-score"></div>
<div class="comment-text"><p>Apologies.  This isn't a windows environment.   I should have put in the environment.</p>
<p>Ubuntu 12.04 server
Postgresql 9.1.4
PostGIS 2.01</p>
<p>I followed the latest Nominatim installlation procedures outlined on <a href="http://wiki.openstreetmap.org/wiki/Nominatim/Installation">http://wiki.openstreetmap.org/wiki/Nominatim/Installation</a></p></div>
<div class="comment-info" id="comment-16182-info">
<span class="comment-age">(17 Sep '12, 21:05)</span>
<a class="comment-user userinfo" href="/users/4530/mooreja">mooreja</a>
</div>
</div>
<a name="16186"></a>
<div class="comment" id="comment-16186">
<div class="comment-score" id="post-16186-score"></div>
<div class="comment-text"><p>Is "proj-epsg" installed properly?</p>
<p>From the Installation guide:</p>
<blockquote>
<p>There is also a problem with proj-epsg on some platforms, so we manually install it:</p>
<p>wget <a href="ftp://ftp.muug.mb.ca/mirror/fedora/epel/6/x86_64/proj-epsg-4.7.0-1.el6.x86_64.rpm">ftp://ftp.muug.mb.ca/mirror/fedora/epel/6/x86_64/proj-epsg-4.7.0-1.el6.x86_64.rpm</a></p>
<p>rpm -i proj-epsg-4.7.0-1.el6.x86_64.rpm  --nodeps</p>
</blockquote></div>
<div class="comment-info" id="comment-16186-info">
<span class="comment-age">(17 Sep '12, 21:35)</span>
<a class="comment-user userinfo" href="/users/1453/mmehl">mmehl</a>
</div>
</div>
<a name="16188"></a>
<div class="comment" id="comment-16188">
<div class="comment-score" id="post-16188-score"></div>
<div class="comment-text"><p>Does that problem apply to Ubuntu too?  That line's in the Fedora section of the wiki page, and on Ubuntu an alternative to an rpm would be needed.</p></div>
<div class="comment-info" id="comment-16188-info">
<span class="comment-age">(17 Sep '12, 22:04)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="16193"></a>
<div class="comment" id="comment-16193">
<div class="comment-score" id="post-16193-score"></div>
<div class="comment-text"><p>No, since that portion of the procedure deals with Fedora/CentOS, and the link is fedora specific, it shouldn't be applicable to an Ubuntu implementation.</p></div>
<div class="comment-info" id="comment-16193-info">
<span class="comment-age">(18 Sep '12, 00:56)</span>
<a class="comment-user userinfo" href="/users/4530/mooreja">mooreja</a>
</div>
</div>
<a name="16225"></a>
<div class="comment" id="comment-16225">
<div class="comment-score" id="post-16225-score"></div>
<div class="comment-text"><p>Update.  The error is being caused by the -l in the osm2pgsql -lsc.  I can run the script without the -l but I later get SRID erors which I suspect is being caused by this projection failure.</p>
<p>I have read the osm2pgsql man page and have seen the supported projections but am unsure exactly how the -l checks for the projections.</p>
<p>Does anyone have any knowledge of that?</p>
<p>Thanks in advance.</p></div>
<div class="comment-info" id="comment-16225-info">
<span class="comment-age">(18 Sep '12, 17:29)</span>
<a class="comment-user userinfo" href="/users/4530/mooreja">mooreja</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-16180">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16180-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="16254"></a>
<div class="answer answered-by-owner" id="answer-container-16254">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16254/up/" id="post-16254-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16254-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/16254/down/" id="post-16254-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Found a discussion about a similar problem at <a href="http://web.archiveorange.com/archive/v/wQWIbp8uENgQyNoCJGQz.">http://web.archiveorange.com/archive/v/wQWIbp8uENgQyNoCJGQz.</a>  Even though the discussion happened several years ago the information provided to troubleshoot is still relevant.</p>
<p>In doing some of the troubleshooting listed in this discussion I was able to identify and resolve the problem.</p>
<p>Thanks to Jon Burgess for providing the level of detail that he did in that discussion.</p>
<p>JAM</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/16254/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>19 Sep '12, 13:23</strong>
</p>
<img alt="mooreja's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b412da9024d219e82fc430b7a4e5a02c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4530/mooreja">mooreja</a><br/>
<span class="score" title="26 reputation points">26</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mooreja has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/16254/">
                edited
                <strong>19 Sep '12, 13:25</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16254">
</div>
<div class="comment-tools" id="comment-tools-16254">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16254-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/16175/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="nhV3R4YfS01RnRLIOy1wYLMTmjblEVqa"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>