<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/59542/filtering-osc-files-and-import-to-postgresql">Filtering osc files and import to PostgreSQL</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/59542/up/" id="post-59542-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-59542-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/59542/down/" id="post-59542-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/59542/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am trying to deal with some osc (osm change) files, and put them into PostgreSQL database with Osmosis, but it seems that, Osmosis won't work with --read-xml-change and --tag-filter together. I have the following code:</p>
<pre><code>osmosis --read-xml-change file=source/file.osc outPipe.0="SOURCE" \
        --tf accept-ways highway=motorway,primary inPipe.0="SOURCE" outPipe.0="step1" \
        --tag-filter reject-relations \ 
        --used-node inPipe.0="step1" outPipe.0="step2" \               
        --wpc database=mydb user=postgres inPipe.0="step2"
</code></pre>
<p>(formatted code in order to be readable)</p>
<p>Then the following error message comes:</p>
<pre><code>Task 2-tf does not support data provided by input pipe SOURCE.
</code></pre>
<p>How can I provide a pipe to make it run without errors or how can I apply filters and insert change file into database?</p>
<p>without pipes and filters Osmosis were able to write osc files to the database</p>
<p>I tried only with just read change file and convert it to osm and it also fails with this message:</p>
<pre><code>Task 2-wx does not support data provided by default pipe stored at level 1 in the default pipe stack.
</code></pre>
<p>Osmosis version is: 0.45-52-gd4e52fd-SNAPSHOT</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-.osc" href="/tags/.osc/" rel="tag" title="see questions tagged '.osc'">.osc</a>
<a class="post-tag tag-link-postgresql" href="/tags/postgresql/" rel="tag" title="see questions tagged 'postgresql'">postgresql</a>
<a class="post-tag tag-link-postgis" href="/tags/postgis/" rel="tag" title="see questions tagged 'postgis'">postgis</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>11 Sep '17, 14:48</strong>
</p>
<img alt="horvatha's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/bd59a1956b8ee779ec94d29e78596b72?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14201/horvatha">horvatha</a><br/>
<span class="score" title="11 reputation points">11</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="horvatha has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/59542/">
                edited
                <strong>11 Sep '17, 15:07</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-59542">
</div>
<div class="comment-tools" id="comment-tools-59542">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-59542-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/59542/filtering-osc-files-and-import-to-postgresql?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/59542/filtering-osc-files-and-import-to-postgresql?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/59542/filtering-osc-files-and-import-to-postgresql?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/59542/filtering-osc-files-and-import-to-postgresql?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="59545"></a>
<div class="answer" id="answer-container-59545">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/59545/up/" id="post-59545-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-59545-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/59545/down/" id="post-59545-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You cannot do what you are planning to do because the osc file does not contain enough information. For example, consider a motorway with three nodes that exists in the OSM database. Now I move these nodes to another continent. The osc file will contain the information that the nodes have moved, but it will not contain anything about the way (which is, in OSM's data model, unchanged, consisting now as before of the same three nodes). Your filter query would then fail to detect that the three nodes are actually relevant for your motorway subset and drop them.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/59545/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>11 Sep '17, 15:40</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-59545">
</div>
<div class="comment-tools" id="comment-tools-59545">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-59545-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/59542/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="e8i7jreSsVghd74Ap8gNYxQtw9IMkw4z"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>