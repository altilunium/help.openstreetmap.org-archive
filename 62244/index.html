<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/62244/error-using-nominatim-reverse-geocoding-node-node-xml-present-but-not-output">Error using Nominatim reverse geocoding node - node xml present, but not output</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62244/up/" id="post-62244-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62244-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/62244/down/" id="post-62244-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/62244/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi -
I want to use Nominatim's reverse geocoder to get a lat/lon for this node: 269908858 (Mérida, Yucatán, Mexico)</p>
<p>Here's the node on OSM:</p>
<p><code><a href="https://www.openstreetmap.org/node/269908858">https://www.openstreetmap.org/node/269908858</a></code></p>
<p>The node has lat/lon data according the XML provided by OSM API: </p>
<p><code><a href="https://www.openstreetmap.org/api/0.6/node/269908858">https://www.openstreetmap.org/api/0.6/node/269908858</a></code></p>
<p>However, when I pass it to Nominatim it returns an error:</p>
<p><code><a href="https://nominatim.openstreetmap.org/reverse?osm_type=N&amp;osm_id=269908858&amp;format=json">https://nominatim.openstreetmap.org/reverse?osm_type=N&amp;osm_id=269908858&amp;format=json</a></code></p>
<p>(the code format tag on this board is subbing "&amp;" for "<code>&amp;amp;</code>" so correct this manually before opening)</p>
<p>Error message:</p>
<p><code>Output:{"error":"Unable to geocode"}</code></p>
<p>What's missing from this node that causes this error, and what can I do about it?</p>
<p>Thanks loads for the help!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-reversegeocoding" href="/tags/reversegeocoding/" rel="tag" title="see questions tagged 'reversegeocoding'">reversegeocoding</a>
<a class="post-tag tag-link-nodes" href="/tags/nodes/" rel="tag" title="see questions tagged 'nodes'">nodes</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
<a class="post-tag tag-link-error" href="/tags/error/" rel="tag" title="see questions tagged 'error'">error</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>21 Feb '18, 10:37</strong>
</p>
<img alt="case_the_joint's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/6b6c480688a03e67db06d3b620edab19?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14781/case_the_joint">case_the_joint</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="case_the_joint has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-62244">
</div>
<div class="comment-tools" id="comment-tools-62244">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62244-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/62244/error-using-nominatim-reverse-geocoding-node-node-xml-present-but-not-output?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/62244/error-using-nominatim-reverse-geocoding-node-node-xml-present-but-not-output?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/62244/error-using-nominatim-reverse-geocoding-node-node-xml-present-but-not-output?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/62244/error-using-nominatim-reverse-geocoding-node-node-xml-present-but-not-output?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="62245"></a>
<div class="answer" id="answer-container-62245">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/62245/up/" id="post-62245-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-62245-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/62245/down/" id="post-62245-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I think you want to use the /lookup method since you're not supplying a lat,lon in the search. <a href="https://nominatim.openstreetmap.org/lookup?osm_ids=R6265959&amp;format=json">https://nominatim.openstreetmap.org/lookup?osm_ids=R6265959&amp;format=json</a></p>
<p>When you do a forward search <a href="https://nominatim.openstreetmap.org/search?q=M%C3%A9rida&amp;countrycodes=mx">https://nominatim.openstreetmap.org/search?q=M%C3%A9rida&amp;countrycodes=mx</a> you'll note that Nominatim uses the city relation (<a href="https://www.openstreetmap.org/relation/5961522),">https://www.openstreetmap.org/relation/5961522),</a> not the city node (<a href="https://www.openstreetmap.org/node/269908858).">https://www.openstreetmap.org/node/269908858).</a></p>
<blockquote>
<blockquote>
<p>What's missing from this node</p>
</blockquote>
</blockquote>
<p>Nothing. The relation has a <code>Node Mérida (269908858) as admin_centre</code> set. For Nominatim that means both describe the same place. Nominatim chooses to ignore the node in this case.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/62245/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>21 Feb '18, 11:06</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/62245/">
                edited
                <strong>21 Feb '18, 13:27</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-62245">
<a name="62247"></a>
<div class="comment" id="comment-62247">
<div class="comment-score" id="post-62247-score">1</div>
<div class="comment-text"><p>Hi <a href="https://help.openstreetmap.org/users/150/mtmail"></a><a href="https://help.openstreetmap.org/users/150/mtmail">@mtmail</a> thanks so much for the quick response and advice. I forget why I used the reverse and not the lookup. For completeness' sake, the lookup has a slightly different syntax than you suggest:</p>
<p><code><a href="https://nominatim.openstreetmap.org/lookup?osm_ids=R6265959&amp;format=json">https://nominatim.openstreetmap.org/lookup?osm_ids=R6265959&amp;format=json</a></code></p>
<p>So if I wanted to get a set of coordinates for the <code>Merida</code> node itself, and Nominatim won't return that, then is the best substitute I can get from OSM  the centre point of the <code>Merida</code> relation (5961522)?</p></div>
<div class="comment-info" id="comment-62247-info">
<span class="comment-age">(21 Feb '18, 11:28)</span>
<a class="comment-user userinfo" href="/users/14781/case_the_joint">case_the_joint</a>
</div>
</div>
<a name="62250"></a>
<div class="comment" id="comment-62250">
<div class="comment-score" id="post-62250-score">1</div>
<div class="comment-text"><p>You're right, thanks, I updated the URL in my answer. For a relation result Nominatim tries to use the linked admin_center or admin_label roles (nodes) to set the center. So it knows about those nodes just merges the information. For example for "Hamburg" (the state, <a href="https://www.openstreetmap.org/relation/62782)">https://www.openstreetmap.org/relation/62782)</a> which is split into two parts it returns the center point of the admin_center not the geographic center <a href="https://nominatim.openstreetmap.org/lookup.php?osm_ids=R62782">https://nominatim.openstreetmap.org/lookup.php?osm_ids=R62782</a> because that wouldn't even be inside the relation/multi-polygon.</p></div>
<div class="comment-info" id="comment-62250-info">
<span class="comment-age">(21 Feb '18, 13:37)</span>
<a class="comment-user userinfo" href="/users/150/mtmail">mtmail</a>
</div>
</div>
<a name="62257"></a>
<div class="comment" id="comment-62257">
<div class="comment-score" id="post-62257-score"></div>
<div class="comment-text"><p>Thanks for the clarification! You've been very helpful, thank you.</p></div>
<div class="comment-info" id="comment-62257-info">
<span class="comment-age">(21 Feb '18, 15:58)</span>
<a class="comment-user userinfo" href="/users/14781/case_the_joint">case_the_joint</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-62245">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-62245-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/62244/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="bRvWnyyzOOu122qxLdQRLHQE7FRdPsWj"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>