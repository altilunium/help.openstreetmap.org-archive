<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/38552/need-help-with-basic-turn-restrictions">[closed] Need help with (basic) turn restrictions</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/38552/up/" id="post-38552-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-38552-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/38552/down/" id="post-38552-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/38552/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>This is a typical 4-ways junction with slip roads for each way:
<a href="https://www.openstreetmap.org/#map=18/4.90865/114.90912">https://www.openstreetmap.org/#map=18/4.90865/114.90912</a></p>
<p>I added some turn restrictions at this junction over a week ago with some visual help from JOSM graphview plugin, but according to map.project-osrm.org they don't work right. I added 4 no_u_turn and 4 no_left_turn for each way, but OSRM says yes_u_turn and allows a roundabout movement to make a left turn. How do I do this right?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-no_u_turn" href="/tags/no_u_turn/" rel="tag" title="see questions tagged 'no_u_turn'">no_u_turn</a>
<a class="post-tag tag-link-junction" href="/tags/junction/" rel="tag" title="see questions tagged 'junction'">junction</a>
<a class="post-tag tag-link-turn_restrictions" href="/tags/turn_restrictions/" rel="tag" title="see questions tagged 'turn_restrictions'">turn_restrictions</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>14 Nov '14, 10:05</strong>
</p>
<img alt="raito's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/edf8bc160bbf7f47d6cbc6979120b2c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9874/raito">raito</a><br/>
<span class="score" title="302 reputation points">302</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="9 badges"><span class="silver">●</span><span class="badgecount">9</span></span><span title="19 badges"><span class="bronze">●</span><span class="badgecount">19</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="raito has one accepted answer">50%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/38552/">
                closed
                <strong>22 Nov '14, 05:04</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-38552">
<a name="38553"></a>
<div class="comment" id="comment-38553">
<div class="comment-score" id="post-38553-score"></div>
<div class="comment-text"><p>you may have read my question <a href="https://help.openstreetmap.org/questions/32420/turn-restrictions-and-routing-engines">https://help.openstreetmap.org/questions/32420/turn-restrictions-and-routing-engines</a>
osrm does take a while to update. mmds comment shows how to see date of osrm data</p></div>
<div class="comment-info" id="comment-38553-info">
<span class="comment-age">(14 Nov '14, 10:28)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="38554"></a>
<div class="comment" id="comment-38554">
<div class="comment-score" id="post-38554-score"></div>
<div class="comment-text"><p>data:   141113 03:59Z That's like yesterday. I made the turn restrictions over a week ago. So most probably I did them wrong.</p></div>
<div class="comment-info" id="comment-38554-info">
<span class="comment-age">(14 Nov '14, 10:57)</span>
<a class="comment-user userinfo" href="/users/9874/raito">raito</a>
</div>
</div>
<a name="38555"></a>
<div class="comment" id="comment-38555">
<div class="comment-score" id="post-38555-score"></div>
<div class="comment-text"><p>I can see the no left turns but i cannot see the u turn restriction in edit mode. and as you say OSRM  does treat this as a square roundabout. Is that illegal? I assume the junction does not have right turn restrictions? but does have U-turn restrictions, is that correct?</p></div>
<div class="comment-info" id="comment-38555-info">
<span class="comment-age">(14 Nov '14, 11:01)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="38556"></a>
<div class="comment" id="comment-38556">
<div class="comment-score" id="post-38556-score"></div>
<div class="comment-text"><p>Yes no right turn restrictions, and U-turns at traffic junctions are illegal generally in the whole country AFAIK.</p></div>
<div class="comment-info" id="comment-38556-info">
<span class="comment-age">(14 Nov '14, 11:05)</span>
<a class="comment-user userinfo" href="/users/9874/raito">raito</a>
</div>
</div>
<a name="38557"></a>
<div class="comment" id="comment-38557">
<div class="comment-score" id="post-38557-score"></div>
<div class="comment-text"><p>My guess is neither the editor or osrm can handle multiple way vias, as mentioned in note 3 on the relation page <a href="http://wiki.openstreetmap.org/wiki/Relation:restriction#cite_note-3">http://wiki.openstreetmap.org/wiki/Relation:restriction#cite_note-3</a> (I was unaware that any ways were allowed in the via role - when I last looked it was just from way, to way, via node). So I think your u-turn relations such as <a href="https://www.openstreetmap.org/relation/4166014#map=19/4.90854/114.90943">https://www.openstreetmap.org/relation/4166014#map=19/4.90854/114.90943</a> are correct as per the wiki. Ah - known issue <a href="https://github.com/Project-OSRM/osrm-backend/issues/483">https://github.com/Project-OSRM/osrm-backend/issues/483</a></p></div>
<div class="comment-info" id="comment-38557-info">
<span class="comment-age">(14 Nov '14, 11:09)</span>
<a class="comment-user userinfo" href="/users/339/edloach">EdLoach ♦</a>
</div>
</div>
<a name="38558"></a>
<div class="comment not_top_scorer" id="comment-38558">
<div class="comment-score" id="post-38558-score"></div>
<div class="comment-text"><p>That's too bad.. Hope OSRM supports via way soon.. So, am I right to think that I did nothing wrong after all?</p></div>
<div class="comment-info" id="comment-38558-info">
<span class="comment-age">(14 Nov '14, 11:22)</span>
<a class="comment-user userinfo" href="/users/9874/raito">raito</a>
</div>
</div>
<a name="38570"></a>
<div class="comment not_top_scorer" id="comment-38570">
<div class="comment-score" id="post-38570-score"></div>
<div class="comment-text"><p>More bad news: OsmAnd (my preferred mobile app for OSM) routing also doesn't understand the restrictions.. (new map update 14Nov2014)</p></div>
<div class="comment-info" id="comment-38570-info">
<span class="comment-age">(15 Nov '14, 05:25)</span>
<a class="comment-user userinfo" href="/users/9874/raito">raito</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-38552">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-38552-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<div class="question-status" style="margin-bottom:15px">
<h3>
                The question has been closed for the following reason "The question is self-answered." by
                <a href="/users/9874/raito">raito</a>
                 22 Nov '14, 05:04
            </h3>
</div>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/38552/need-help-with-basic-turn-restrictions?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/38552/need-help-with-basic-turn-restrictions?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/38552/need-help-with-basic-turn-restrictions?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/38552/need-help-with-basic-turn-restrictions?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="38571"></a>
<div class="answer" id="answer-container-38571">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/38571/up/" id="post-38571-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-38571-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/38571/down/" id="post-38571-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Try Mapquests router, they are the only ones that consider restrictions where via is a way:</p>
<p><a href="http://open.mapquest.com/">http://open.mapquest.com/</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/38571/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Nov '14, 07:34</strong>
</p>
<img alt="Janjko's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0ae71d66eba9ad7437196ee1d689295f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1761/janjko">Janjko</a><br/>
<span class="score" title="323 reputation points">323</span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="9 badges"><span class="bronze">●</span><span class="badgecount">9</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Janjko has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-38571">
</div>
<div class="comment-tools" id="comment-tools-38571">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-38571-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="38669"></a>
<div class="answer answered-by-owner" id="answer-container-38669">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/38669/up/" id="post-38669-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-38669-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/38669/down/" id="post-38669-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hey guys, I think I've just found the answer to my own question/problem! The problem was that most (if not all) routing software can't handle ways as via. And the solution is simply making the junction as only one node..</p>
<blockquote>
<p><a href="http://wiki.openstreetmap.org/wiki/Editing_Standards_and_Conventions#Junctions">"All road junctions should be drawn as a node which connects the ways (both or several ways share the same(!) node)."</a></p>
</blockquote>
<p>Here is my first one-node junction → <a href="https://www.openstreetmap.org/changeset/26891534">changeset 26891534</a>.</p>
<p>I will wait for this update to show on the routing softwares mentioned in this discussion, and test this junction before closing this question. Though they will probably now understand my restrictions, but I'm also interested how they will describe the turn directions ("go straight", "turn right", etc) as now the road that used to go through the junction straight is now not so straight. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/38669/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>19 Nov '14, 18:13</strong>
</p>
<img alt="raito's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/edf8bc160bbf7f47d6cbc6979120b2c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9874/raito">raito</a><br/>
<span class="score" title="302 reputation points">302</span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="9 badges"><span class="silver">●</span><span class="badgecount">9</span></span><span title="19 badges"><span class="bronze">●</span><span class="badgecount">19</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="raito has one accepted answer">50%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-38669">
</div>
<div class="comment-tools" id="comment-tools-38669">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-38669-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/38552/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="a8gBHXeBrxNi4PxMpc80MVPMR9cSKUQf"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>