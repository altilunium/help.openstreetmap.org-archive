<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/48994/overpass-api-diff-from-bbox">Overpass API: Diff from bbox</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/48994/up/" id="post-48994-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-48994-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/48994/down/" id="post-48994-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/48994/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have an application which uses OSM data, but from one city only, which I got the data for using a query:</p>
<pre><code><a href="http://overpass-api.de/api/map?bbox=20.8672,52.1010,21.2723,52.3668">http://overpass-api.de/api/map?bbox=20.8672,52.1010,21.2723,52.3668</a>
</code></pre>
<p>I use information about nodes and ways, put them in my database and then do some calculations on them. Now time has passed and the data changed. I'd like to see what changed, so that I can update (without dropping all the data and inserting it again)</p>
<p>Is there a way, to query <code>overpass-api</code> to give me diff of a selected area (and not only nodes or ways, but both) ? I've read the doc, but didn't find the way to combine <code>diff</code> and <code>bbox</code> in one query.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-download" href="/tags/download/" rel="tag" title="see questions tagged 'download'">download</a>
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-api" href="/tags/api/" rel="tag" title="see questions tagged 'api'">api</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>01 Apr '16, 12:05</strong>
</p>
<img alt="prajmus's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3e73428522352ea6f8b8488b21e8fc24?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/12136/prajmus">prajmus</a><br/>
<span class="score" title="16 reputation points">16</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="prajmus has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-48994">
<a name="48999"></a>
<div class="comment" id="comment-48999">
<div class="comment-score" id="post-48999-score">1</div>
<div class="comment-text"><p>Cross posted: <a href="http://stackoverflow.com/questions/36350382/openstreetmap-diff-from-a-bounding-box">http://stackoverflow.com/questions/36350382/openstreetmap-diff-from-a-bounding-box</a></p></div>
<div class="comment-info" id="comment-48999-info">
<span class="comment-age">(01 Apr '16, 16:11)</span>
<a class="comment-user userinfo" href="/users/8708/mmd">mmd</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-48994">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-48994-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/48994/overpass-api-diff-from-bbox?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/48994/overpass-api-diff-from-bbox?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/48994/overpass-api-diff-from-bbox?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/48994/overpass-api-diff-from-bbox?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="48998"></a>
<div class="answer accepted-answer" id="answer-container-48998">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/48998/up/" id="post-48998-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-48998-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/48998/down/" id="post-48998-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/48998/" rel="nofollow" title="prajmus has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The /map query is part of the XAPI compatibility layer:</p>
<p><a href="http://wiki.openstreetmap.org/wiki/Overpass_API/XAPI_Compatibility_Layer">http://wiki.openstreetmap.org/wiki/Overpass_API/XAPI_Compatibility_Layer</a></p>
<p>Here's a roughly equivalent query using the Overpass API query language:</p>
<p><a href="http://overpass-turbo.eu/s/foV">http://overpass-turbo.eu/s/foV</a></p>
<p>(fetches nodes in the bounding box and also any parent objects. To see the query url, look under "Export" for the "raw data directly from Overpass API" link.)</p>
<p>A global diff statement can be added to that query:</p>
<p><a href="http://overpass-turbo.eu/s/foW">http://overpass-turbo.eu/s/foW</a></p>
<p>(returns nothing)</p>
<p>It'll probably be some work to figure out what's in the diff and so on, but the global diff setting is what you are looking for. You may also want to take a look at the augmented diff:</p>
<p><a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#Delta_between_two_dates_.28.22diff.22.29">http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#Delta_between_two_dates_.28.22diff.22.29</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/48998/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 Apr '16, 15:13</strong>
</p>
<img alt="maxerickson's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c860445e868ebb21da141635a4aa7b06?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10973/maxerickson">maxerickson</a><br/>
<span class="score" title="12700 reputation points"><span class="">12.7k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="176 badges"><span class="bronze">●</span><span class="badgecount">176</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="maxerickson has 93 accepted answers">32%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-48998">
</div>
<div class="comment-tools" id="comment-tools-48998">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-48998-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="48997"></a>
<div class="answer" id="answer-container-48997">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/48997/up/" id="post-48997-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-48997-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/48997/down/" id="post-48997-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I am quite unfamiliar with overpass but by coincidence have been perusing the web documentation in the last few hours and I found that 'newer' and 'changed' under Filters at this site may be what you need if you can download Attic data.
The difference block statement may be suitable if you can do your query on both todays data and the date you did your extract.
<a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL">http://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL</a></p>
<p>Also as reference: <a href="http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide">http://wiki.openstreetmap.org/wiki/Overpass_API/Language_Guide</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/48997/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 Apr '16, 13:03</strong>
</p>
<img alt="nevw's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e5674dd96938593e0af5130dfffe0f90?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7380/nevw">nevw</a><br/>
<span class="score" title="9843 reputation points"><span class="">9.8k</span></span><span title="26 badges"><span class="badge1">●</span><span class="badgecount">26</span></span><span title="90 badges"><span class="silver">●</span><span class="badgecount">90</span></span><span title="178 badges"><span class="bronze">●</span><span class="badgecount">178</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="nevw has 32 accepted answers">9%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/48997/">
                edited
                <strong>01 Apr '16, 14:41</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-48997">
</div>
<div class="comment-tools" id="comment-tools-48997">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-48997-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/48994/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="MtHEfla8BwJDQyBNtUszzwGuyrgt1v6H"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>