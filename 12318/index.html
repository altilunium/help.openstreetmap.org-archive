<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/12318/why-is-my-import-of-planet-latestosm-killed">Why is my import of planet-latest.osm KILLED?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/12318/up/" id="post-12318-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-12318-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/12318/down/" id="post-12318-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/12318/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hey Guys!</p>
<p>When trying to import the planet-latest.osm via osm2pgsql into PostGIS I receive the following problem.</p>
<p><a href="http://dpaste.org/ftsj8/">http://dpaste.org/ftsj8/</a></p>
<p>Can anybody guess, how to solve it?</p>
<p>Greetings,
Matze</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-planet" href="/tags/planet/" rel="tag" title="see questions tagged 'planet'">planet</a>
<a class="post-tag tag-link-import" href="/tags/import/" rel="tag" title="see questions tagged 'import'">import</a>
<a class="post-tag tag-link-postgresql" href="/tags/postgresql/" rel="tag" title="see questions tagged 'postgresql'">postgresql</a>
<a class="post-tag tag-link-osm2pgsql" href="/tags/osm2pgsql/" rel="tag" title="see questions tagged 'osm2pgsql'">osm2pgsql</a>
<a class="post-tag tag-link-postgis" href="/tags/postgis/" rel="tag" title="see questions tagged 'postgis'">postgis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>24 Apr '12, 11:06</strong>
</p>
<img alt="MHein's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/cc0198a02af3c41ad04b61e028c3b126?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3139/mhein">MHein</a><br/>
<span class="score" title="141 reputation points">141</span><span title="11 badges"><span class="badge1">●</span><span class="badgecount">11</span></span><span title="11 badges"><span class="silver">●</span><span class="badgecount">11</span></span><span title="16 badges"><span class="bronze">●</span><span class="badgecount">16</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="MHein has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/12318/">
                edited
                <strong>29 Aug '13, 11:40</strong>
</a>
</p>
<img alt="MagicFab's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0c12497903c6f3b2dd9f4d87deb127de?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/138/magicfab">MagicFab</a><br/>
<span class="score" title="935 reputation points">935</span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="22 badges"><span class="bronze">●</span><span class="badgecount">22</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-12318">
<a name="12328"></a>
<div class="comment" id="comment-12328">
<div class="comment-score" id="post-12328-score"></div>
<div class="comment-text"><p>Not an answer but a question - just checking that you really do want to import the whole planet, i.e. you want to render a map of the world, not a small part of it?</p></div>
<div class="comment-info" id="comment-12328-info">
<span class="comment-age">(24 Apr '12, 13:14)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-12318">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-12318-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/12318/why-is-my-import-of-planet-latestosm-killed?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/12318/why-is-my-import-of-planet-latestosm-killed?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/12318/why-is-my-import-of-planet-latestosm-killed?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/12318/why-is-my-import-of-planet-latestosm-killed?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="12332"></a>
<div class="answer accepted-answer" id="answer-container-12332">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/12332/up/" id="post-12332-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-12332-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/12332/down/" id="post-12332-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/12332/" rel="nofollow" title="MHein has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Please take <a href="http://switch2osm.org/serving-tiles/">http://switch2osm.org/serving-tiles/</a> "System Requirements" seriously.</p>
<p>Importing a full planet doesn't need an awful lot of resources in the grand scheme of things, but you will not be able to avoid allocating enough disk space (at least 300GB for the rendering database), and multiple GBs (as in more than 8) of memory.</p>
<p>Trying to skimp on this is a waste of your and other peoples time.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/12332/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Apr '12, 13:49</strong>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SimonPoole has 209 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/12332/">
                edited
                <strong>24 Apr '12, 14:00</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-12332">
<a name="12350"></a>
<div class="comment" id="comment-12350">
<div class="comment-score" id="post-12350-score"></div>
<div class="comment-text"><p>does anyone have more than 8GB of RAM in an normal PC?</p>
<p>IFAIK WinXP isn't able to cope with more than 2GB of RAM, is it?</p>
<p>Does this mean, that I won't be able to set up a Postgresql/PostGIS - database of the whole planet-file on my computer?
Or is there a way to osm2pgsql it? A way that maybe takes much more time and maybe more disk space but doesn't need more RAM?</p></div>
<div class="comment-info" id="comment-12350-info">
<span class="comment-age">(25 Apr '12, 09:59)</span>
<a class="comment-user userinfo" href="/users/3139/mhein">MHein</a>
</div>
</div>
<a name="12352"></a>
<div class="comment" id="comment-12352">
<div class="comment-score" id="post-12352-score">3</div>
<div class="comment-text"><p>The setup that you're using** (Windows XP VM host with 2Gb of RAM hosting a Linux VM with ~1Gb RAM and ~20Gb disk) is woefully inadequate for a full planet import.</p>
<p>However, it will allow you to become familiar with the tools involved - working out what you need to do to manage the database, using osm2pgsql to append rather than recreate (there are some list discussions on that that you can find with a web search).</p>
<p>** from the IRC discussion</p></div>
<div class="comment-info" id="comment-12352-info">
<span class="comment-age">(25 Apr '12, 10:57)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-12332">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-12332-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="12321"></a>
<div class="answer" id="answer-container-12321">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/12321/up/" id="post-12321-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-12321-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/12321/down/" id="post-12321-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>osm2pgsql was likely killed due to being out of memory. Reduce the -C 12000 to a significantly lower number and try again.</p>
<p>dmesg will likely show if the process was killed by the OutOfMemory (OOM) killer.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/12321/" rel="nofollow" title="answer permanent link">permanent link</a></span>
<div class="community-wiki">
        This answer is marked "community wiki".
        
    </div>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Apr '12, 12:13</strong>
</p>
<img alt="Firefishy's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e79628d44a15e95c607f8c5007d0ccd2?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/48/firefishy">Firefishy ♦♦</a><br/>
<span class="score" title="1296 reputation points"><span class="">1.3k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="36 badges"><span class="silver">●</span><span class="badgecount">36</span></span><span title="52 badges"><span class="bronze">●</span><span class="badgecount">52</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Firefishy has 14 accepted answers">29%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/12321/">
                edited
                <strong>24 Apr '12, 13:40</strong>
</a>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-12321">
<a name="12322"></a>
<div class="comment" id="comment-12322">
<div class="comment-score" id="post-12322-score"></div>
<div class="comment-text"><p>In <a href="http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/">http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/</a> it says:</p>
<p>Depending on the size of the extract you are importing and the performance of the computer, this can take anywhere from a few minutes for small extracts up to several days for the full planet on slower hardware! If you are importing the full planet, it is strongly recommended to set -C 12000 (may increase as the OSM database grows). </p>
<p>Did I missunderstand it?</p></div>
<div class="comment-info" id="comment-12322-info">
<span class="comment-age">(24 Apr '12, 12:16)</span>
<a class="comment-user userinfo" href="/users/3139/mhein">MHein</a>
</div>
</div>
<a name="12324"></a>
<div class="comment" id="comment-12324">
<div class="comment-score" id="post-12324-score">2</div>
<div class="comment-text"><p>No, you didn't misunderstand, but you still need enough memory or/and swap to cater for the 12 GB of node cache. If necessary add a swap file of appropriate size.</p></div>
<div class="comment-info" id="comment-12324-info">
<span class="comment-age">(24 Apr '12, 12:22)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
<a name="12327"></a>
<div class="comment" id="comment-12327">
<div class="comment-score" id="post-12327-score"></div>
<div class="comment-text"><p>how can I add a swapfile of appropriate size?</p>
<p>How much memory on disk do I need for the Postgresql Database including the planet.osm-file?</p>
<p>And how is "dmesg" used?</p></div>
<div class="comment-info" id="comment-12327-info">
<span class="comment-age">(24 Apr '12, 12:46)</span>
<a class="comment-user userinfo" href="/users/3139/mhein">MHein</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-12321">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-12321-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/12318/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="BXPUhqyRdZvH043iHSUyJ2rWncrMCfEI"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>