<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/69829/appropriate-filter-parameters-for-optimal-vehicle-routing-first-time-installer">Appropriate filter parameters for optimal vehicle routing?  First Time Installer</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/69829/up/" id="post-69829-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-69829-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/69829/down/" id="post-69829-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/69829/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I've recently realized that OpenStreetMap is more than just roads and boundaries.  It's incredible.  I had no idea.  A true masterpiece of community collaboration.  However, that creates a small problem.   I'm looking to stand up a basic vehicle routing service without all the additional data bells and whistles. (Very cool never the less). </p>
<p>I found osmfilter - <a href="https://journocode.com/2018/01/08/extract-geodata-openstreetmap-osmfilter/">https://journocode.com/2018/01/08/extract-geodata-openstreetmap-osmfilter/</a></p>
<p>As well as the categories - <a href="https://wiki.openstreetmap.org/wiki/Map_Features">https://wiki.openstreetmap.org/wiki/Map_Features</a></p>
<p>That's a lot of possible combinations and potential relationships within the data that if I remove may have unexpected consequences.   I'd be looking for some direction on what categories to keep and drop to hit the goal below. </p>
<p>Goals:</p>
<ul>
<li>List item</li>
<li>Look/data similar to google directions. </li>
<li>Vehicle routing within city limits. </li>
<li>Dataset for the entire USA.</li>
<li>Needs to render and serve tiles. </li>
<li>Should I use OSRM in docker or the switch2osm 18.04 tutorial? </li>
<li>Expected Disk space needed and RAM.  I've found that 24 GB and 60 GB of disk space wasn't enough but that was a full import without any category drops via osmfilter.  Smaller is better in RAM and Disk but quality shouldn't suffer for vehicle directions.  </li>
</ul>
<p>Thank you for your help. </p>
<p>Casey </p>
<p>Ref URLs:</p>
<ul>
<li><a href="https://github.com/Project-OSRM/osrm-backend/">https://github.com/Project-OSRM/osrm-backend/</a></li>
<li><a href="https://switch2osm.org/manually-building-a-tile-server-18-04-lts/">https://switch2osm.org/manually-building-a-tile-server-18-04-lts/</a></li>
<li><a href="http://project-osrm.org/docs/v5.22.0/api/?language=Python#general-options">http://project-osrm.org/docs/v5.22.0/api/?language=Python#general-options</a></li>
<li><a href="https://openlayers.org/">https://openlayers.org/</a></li>
<li><a href="https://overpass-turbo.eu/">https://overpass-turbo.eu/</a></li>
<li><a href="https://download.geofabrik.de/">https://download.geofabrik.de/</a></li>
</ul>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osrm" href="/tags/osrm/" rel="tag" title="see questions tagged 'osrm'">osrm</a>
<a class="post-tag tag-link-import" href="/tags/import/" rel="tag" title="see questions tagged 'import'">import</a>
<a class="post-tag tag-link-osmfilter" href="/tags/osmfilter/" rel="tag" title="see questions tagged 'osmfilter'">osmfilter</a>
<a class="post-tag tag-link-installation" href="/tags/installation/" rel="tag" title="see questions tagged 'installation'">installation</a>
<a class="post-tag tag-link-routing" href="/tags/routing/" rel="tag" title="see questions tagged 'routing'">routing</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>01 Jul '19, 18:06</strong>
</p>
<img alt="chavenor1's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/2f2802a91a7b23b9a654d5d1f3e4b917?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/16846/chavenor1">chavenor1</a><br/>
<span class="score" title="11 reputation points">11</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="6 badges"><span class="bronze">●</span><span class="badgecount">6</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="chavenor1 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/69829/">
                edited
                <strong>01 Jul '19, 18:12</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-69829">
</div>
<div class="comment-tools" id="comment-tools-69829">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-69829-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/69829/appropriate-filter-parameters-for-optimal-vehicle-routing-first-time-installer?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/69829/appropriate-filter-parameters-for-optimal-vehicle-routing-first-time-installer?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/69829/appropriate-filter-parameters-for-optimal-vehicle-routing-first-time-installer?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/69829/appropriate-filter-parameters-for-optimal-vehicle-routing-first-time-installer?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="69847"></a>
<div class="answer" id="answer-container-69847">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/69847/up/" id="post-69847-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-69847-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/69847/down/" id="post-69847-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Routing and tile rendering are entirely separate toolchains.</p>
<p>OSM data can power both, but you'll need to process it separately for each application, and run two different servers (those servers can, of course, be on the same box!). Typically to render raster map tiles you'll use the switch2osm workflow, loading data into a PostGIS database with osm2pgsql, and then rendering as tiles with Mapnik, renderd and mod_tile. For routing, you'll use software like OSRM, Graphhopper or Valhalla, each of which has a preparation step and then a route server.</p>
<p>Note that OSRM's fast Contraction Hierarchies routing algorithm is very memory-hungry, so if "smaller is better in RAM", you might prefer to choose a tool which offers a slower but more memory-efficient algorithm.</p>
<p>By default, each tool chooses a set of features from OSM to render or route along. You can change these by redesigning the stylesheet for the tileserver, or the "routing profile" for the routing tool. The tools have their own filtering abilities so you probably won't need osmfilter.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/69847/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>02 Jul '19, 14:28</strong>
</p>
<img alt="Richard's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/08324717c25d6067fa4ff23ef37d455f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5/richard">Richard ♦</a><br/>
<span class="score" title="30902 reputation points"><span class="">30.9k</span></span><span title="44 badges"><span class="badge1">●</span><span class="badgecount">44</span></span><span title="279 badges"><span class="silver">●</span><span class="badgecount">279</span></span><span title="412 badges"><span class="bronze">●</span><span class="badgecount">412</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Richard has 98 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/69847/">
                edited
                <strong>02 Jul '19, 14:30</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-69847">
<a name="69849"></a>
<div class="comment" id="comment-69849">
<div class="comment-score" id="post-69849-score"></div>
<div class="comment-text"><p>Can I slim down the Postgres DB by filtering out stuff I don't need for the tile server?   Like I don't need to know where all the bus stops are and so on.   Any advice on how to trim it down.   For the OSRM -- is one better than the other?</p></div>
<div class="comment-info" id="comment-69849-info">
<span class="comment-age">(02 Jul '19, 16:14)</span>
<a class="comment-user userinfo" href="/users/16846/chavenor1">chavenor1</a>
</div>
</div>
<a name="69851"></a>
<div class="comment" id="comment-69851">
<div class="comment-score" id="post-69851-score"></div>
<div class="comment-text"><p>Yes, you can slim the Postgres db by editing the "style file" which tells osm2pgsql which columns to import. Note, however, that you'll then need to edit the stylesheet so that it doesn't try to retrieve data from the columns you've dropped, and that's not necessarily trivial.</p>
<p>When you say "is one better than the other", one what?</p></div>
<div class="comment-info" id="comment-69851-info">
<span class="comment-age">(02 Jul '19, 20:30)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-69847">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-69847-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/69829/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="sWEaXFews8EO5Oh7ECb1Yk0qlf8NktfZ"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>