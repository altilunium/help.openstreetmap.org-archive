<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/6473/problem-with-motorwaytrunk-casing">Problem with Motorway/Trunk casing.</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6473/up/" id="post-6473-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6473-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/6473/down/" id="post-6473-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/6473/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am new in OSM(Q-GIS..quantumnik) and I have problems with my Motorway/Trunk casing. I need the casing to be thick.. but it seems that lower level roads does not respect casing and "bites in" ,, see picture. <a href="http://imageshack.us/photo/my-images/543/174h.png">http://imageshack.us/photo/my-images/543/174h.png</a> 
I think, that bridge/tunnel stuff solves only "fill" and not "casing", I guess nobody expected thick casing.
I work with XML.
Any advice?</p>
<p><a href="http://imageshack.us/photo/my-images/543/174h.png">http://imageshack.us/photo/my-images/543/174h.png</a>
[Tertiary bites into Motorway]</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-motorway" href="/tags/motorway/" rel="tag" title="see questions tagged 'motorway'">motorway</a>
<a class="post-tag tag-link-quantumnik" href="/tags/quantumnik/" rel="tag" title="see questions tagged 'quantumnik'">quantumnik</a>
<a class="post-tag tag-link-casing" href="/tags/casing/" rel="tag" title="see questions tagged 'casing'">casing</a>
<a class="post-tag tag-link-qgis" href="/tags/qgis/" rel="tag" title="see questions tagged 'qgis'">qgis</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>21 Jul '11, 13:44</strong>
</p>
<img alt="rocejkar's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1c85caf99aee6ddc90f46ebd8801e5ae?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1768/rocejkar">rocejkar</a><br/>
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="rocejkar has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/6473/">
                edited
                <strong>21 Jul '11, 18:33</strong>
</a>
</p>
<img alt="Harry%20Wood's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9e04333be840d50c6aa66fb112aad77c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/107/harry-wood">Harry Wood</a><br/>
<span class="score" title="9489 reputation points"><span class="">9.5k</span></span><span title="25 badges"><span class="badge1">●</span><span class="badgecount">25</span></span><span title="88 badges"><span class="silver">●</span><span class="badgecount">88</span></span><span title="128 badges"><span class="bronze">●</span><span class="badgecount">128</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-6473">
<a name="6479"></a>
<div class="comment" id="comment-6479">
<div class="comment-score" id="post-6479-score"></div>
<div class="comment-text"><p>The question is not very clear, and the picture is very small. What do you mean by "biting in"?</p></div>
<div class="comment-info" id="comment-6479-info">
<span class="comment-age">(21 Jul '11, 16:11)</span>
<a class="comment-user userinfo" href="/users/1761/janjko">Janjko</a>
</div>
</div>
<a name="6480"></a>
<div class="comment" id="comment-6480">
<div class="comment-score" id="post-6480-score"></div>
<div class="comment-text"><p>This seems to be a specific problem at a higher level of data processing.</p>
<p>Maybe you can find better help at one of the OSM Mailing lists ( <a href="http://wiki.openstreetmap.org/wiki/Mailing_lists">http://wiki.openstreetmap.org/wiki/Mailing_lists</a> ) or at the OSM forum, see <a href="http://forum.osm.org">http://forum.osm.org</a></p></div>
<div class="comment-info" id="comment-6480-info">
<span class="comment-age">(21 Jul '11, 16:39)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-6473">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6473-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/6473/problem-with-motorwaytrunk-casing?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/6473/problem-with-motorwaytrunk-casing?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/6473/problem-with-motorwaytrunk-casing?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/6473/problem-with-motorwaytrunk-casing?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="6497"></a>
<div class="answer" id="answer-container-6497">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6497/up/" id="post-6497-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6497-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/6497/down/" id="post-6497-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>So normally this is the way you want to draw things - the casings are all drawn first, and all the fills are drawn on top of all the other casings. That's generally what looks best.</p>
<p>Your wide casings are different, and are more similar to the method used for drawing highways in the MapQuest stylesheet. You can find the <a href="https://github.com/MapQuest/MapQuest-Mapnik-Style">XML at github</a> and an example output <a href="http://mapq.st/pk6WzY">on their site</a>. They draw all the other roads first, and then draw the motorway casing after that and the motorway fill last. That means that their casing is never interrupted by fills, which is the problem that you are wanting to solve.</p>
<p>It becomes harder if you want to deal properly with bridges and so on. You will need to experiment with combinations of layer tags, bridge tags and drawing motorway casings after other fills in order to get the effect you seek.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/6497/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Jul '11, 17:51</strong>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Andy Allan has 46 accepted answers">28%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-6497">
<a name="6542"></a>
<div class="comment" id="comment-6542">
<div class="comment-score" id="post-6542-score"></div>
<div class="comment-text"><p>"" They draw all the other roads first, and then draw the motorway casing after that and the motorway fill last. That means that their casing is never interrupted by fills, ""</p>
<p>Yes, that is what I want, but how to reach that? I though, that this is the ordinary way, how Mapnik works. And I have read somewhere, that I can not change layer order :S</p></div>
<div class="comment-info" id="comment-6542-info">
<span class="comment-age">(25 Jul '11, 10:13)</span>
<a class="comment-user userinfo" href="/users/1768/rocejkar">rocejkar</a>
</div>
</div>
<a name="6574"></a>
<div class="comment" id="comment-6574">
<div class="comment-score" id="post-6574-score"></div>
<div class="comment-text"><p>If you want to solve this problem keeping the wide casings you will have to interact with the layer order in the way Andy suggested. I am sure it is possible (because all the code is open source).</p></div>
<div class="comment-info" id="comment-6574-info">
<span class="comment-age">(26 Jul '11, 18:27)</span>
<a class="comment-user userinfo" href="/users/936/dieterdreist">dieterdreist</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-6497">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6497-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="6774"></a>
<div class="answer answered-by-owner" id="answer-container-6774">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6774/up/" id="post-6774-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6774-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/6774/down/" id="post-6774-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Did I mention that I am beginner ? :D. Allright, I have found layer order. They way, how it is rendered, as was said before, is, that first goes casing and on top is fill. This works for every road, basically like in packet (first casing of all roads and then fills of all roads). I need to do: <br/>
-layer all casing (except motorway/trunk)
-layer all fills (except motorway/trunk)
-layer motorway/trunk casing
-layer motorway/trunk fill</p>
<p>I dont know, how to exclude motorway/trunk from packet :/</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/6774/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>02 Aug '11, 10:32</strong>
</p>
<img alt="rocejkar's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1c85caf99aee6ddc90f46ebd8801e5ae?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1768/rocejkar">rocejkar</a><br>
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="rocejkar has no accepted answers">0%</span>
</br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/6774/">
                edited
                <strong>02 Aug '11, 15:28</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-6774">
<a name="6789"></a>
<div class="comment" id="comment-6789">
<div class="comment-score" id="post-6789-score"></div>
<div class="comment-text"><p>Hello rocejar,
it is better to use this O&amp;A-site not like a forum with posting a new answer as a further questuion to the core issue or as an answer to others' contributions. Because each answer to your first question can be ranked by all users to find out what might be most helpful.</p>
<p>So please use the comment function here, or convert your new "answer" to a comment of the other answers. </p>
<p>And: for such a deep asking about data structures you might get better help at forum or mailing lists, like I already hinted.</p></div>
<div class="comment-info" id="comment-6789-info">
<span class="comment-age">(02 Aug '11, 16:13)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="6821"></a>
<div class="comment" id="comment-6821">
<div class="comment-score" id="post-6821-score"></div>
<div class="comment-text"><p>I understand. Sorry for this.
Anyway.. problem solved :]
Needed to take out Motorway/Trunk from standart layer rule and make a new layer rule for them.</p></div>
<div class="comment-info" id="comment-6821-info">
<span class="comment-age">(03 Aug '11, 07:05)</span>
<a class="comment-user userinfo" href="/users/1768/rocejkar">rocejkar</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-6774">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6774-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/6473/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="qN1Rzavj5t6FZLZ2D2OdetFVQOFOaD3y"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>