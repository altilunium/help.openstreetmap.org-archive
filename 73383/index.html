<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/73383/merging-two-files-with-osmium-does-not-work">[closed] Merging two files with osmium does not work</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/73383/up/" id="post-73383-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-73383-score" title="current number of votes">
    -4
</div>
<a class="ajax-command post-vote down" href="/vote/73383/down/" id="post-73383-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/73383/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>So as adviced, I merged several files with osmium, to update the whole database together, instead of doing --append, and after I tried to import the resulting file into the database, I got this error:</p>
<p>Processing: Node(1255048k 1457.7k/s) Way(156069k 11.50k/s) Relation(0 0.00/s)result COPY END for planet_osm_ways failed: ERROR:  duplicate key value violates unique constraint "planet_osm_ways_pkey"
DETAIL:  Key (id)=(23535867) already exists.
CONTEXT:  COPY planet_osm_ways, line 119375
DB copy thread failed: Ending COPY mode</p>
<p>It appears that osmium can't handle overlapping nodes. The worst part of this is that I had to wait 
4 hours to discover this.</p>
<p>The question is, how to merge several pbf files so that overlapping tiles are correctly handled? So that I can finally load the map?</p>
<p>AND WHY RUSSIA IN THE COMPLETE ASIA MAPS IS MISSING HALF ITS TERRITORY (THOUGH IF YOU OPOEN ASIA LISTING ALL ITS TERRITORY IS SHOWED AS BEING INCLUDED)?</p>
<p>P.S. 
@(6 mins ago)SK53</p>
<p>I have no doubt that there must be some magical incantation to make osmosis work. Like in all things.</p>
<p>It's just that a straightforward "osmium merge ./asia-latest.osm.pbf ./northwestern-fed-district-latest.osm.pbf  ./central-fed-district-latest.osm.pbf  -o merged.pbf" yielded and invalid result.</p>
<p>The whole point of question is to find somebody knowledgable enough to identify the issue. It sucks though that people got so sensitive, like it is not the internet anymore.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osmium" href="/tags/osmium/" rel="tag" title="see questions tagged 'osmium'">osmium</a>
<a class="post-tag tag-link-merge" href="/tags/merge/" rel="tag" title="see questions tagged 'merge'">merge</a>
<a class="post-tag tag-link-osm2pgsql" href="/tags/osm2pgsql/" rel="tag" title="see questions tagged 'osm2pgsql'">osm2pgsql</a>
<a class="post-tag tag-link-error" href="/tags/error/" rel="tag" title="see questions tagged 'error'">error</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>05 Mar '20, 07:57</strong>
</p>
<img alt="kartman1's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/7d9dea8db6c9981b45d28f28bb29f49d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17942/kartman1">kartman1</a><br/>
<span class="score" title="38 reputation points">38</span><span title="6 badges"><span class="badge1">●</span><span class="badgecount">6</span></span><span title="7 badges"><span class="silver">●</span><span class="badgecount">7</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="kartman1 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/73383/">
                edited
                <strong>05 Mar '20, 11:56</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-73383">
<a name="73386"></a>
<div class="comment" id="comment-73386">
<div class="comment-score" id="post-73386-score"></div>
<div class="comment-text"><p>Yeah, nice minuses. 
Good thing you can just crap on somebody and walk away feeling smart.+
Guess you are too chicken to at least show your name.</p></div>
<div class="comment-info" id="comment-73386-info">
<span class="comment-age">(05 Mar '20, 09:03)</span>
<a class="comment-user userinfo" href="/users/17942/kartman1">kartman1</a>
</div>
</div>
<a name="73390"></a>
<div class="comment" id="comment-73390">
<div class="comment-score" id="post-73390-score">3</div>
<div class="comment-text"><p>People here are helpful but they're not going to help someone who keeps shouting and yelling. If you can ask your questions calmly and without pejorative language like "the worst part is", then you're more likely to get answers and not downvotes.</p></div>
<div class="comment-info" id="comment-73390-info">
<span class="comment-age">(05 Mar '20, 10:17)</span>
<a class="comment-user userinfo" href="/users/5/richard">Richard ♦</a>
</div>
</div>
<a name="73391"></a>
<div class="comment" id="comment-73391">
<div class="comment-score" id="post-73391-score">3</div>
<div class="comment-text"><p>I can only advise re-evaluating the attitude which you are expressing in your text. I think you have been hinted this before in one of your previous questions. If you like people taking their time for you and getting serious responses it does not help to shout (text in capitals), demand, use words like wtf and OMG, or make totally unrelated and accusing comments to other peoples' questions. There are a lot of folks here who are eager to help and promote the use of OSM but they are doing that for their own good and in their spare time. Stick to the rules/etiquette and you get helped.  </p>
<p>And btw: nobody is hiding anything. You can see the votes in your profile.</p></div>
<div class="comment-info" id="comment-73391-info">
<span class="comment-age">(05 Mar '20, 10:25)</span>
<a class="comment-user userinfo" href="/users/10133/tzorn">TZorn</a>
</div>
</div>
<a name="73392"></a>
<div class="comment" id="comment-73392">
<div class="comment-score" id="post-73392-score">2</div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/17942/kartman1">@kartman1</a> : your general tone is not suitable for this forum. Consider that osmosis has been in use for well over a decade for this very purpose: it just might be you that are in error not the programme.</p></div>
<div class="comment-info" id="comment-73392-info">
<span class="comment-age">(05 Mar '20, 11:41)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
<a name="73403"></a>
<div class="comment" id="comment-73403">
<div class="comment-score" id="post-73403-score"></div>
<div class="comment-text"><p>(to second what SK53 said earlier about osmosis) <a href="https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh">https://github.com/SomeoneElseOSM/SomeoneElse-style/blob/master/update_render.sh</a> is the script that I use to load data for <a href="https://map.atownsend.org.uk/">https://map.atownsend.org.uk/</a> and similar sites.  I've just tested that it doesn't have a problem by using it to load both ends of the ferry route that ends at <a href="https://www.openstreetmap.org/node/4342493001">https://www.openstreetmap.org/node/4342493001</a> together.  That node is in both files, and no error occurs/</p></div>
<div class="comment-info" id="comment-73403-info">
<span class="comment-age">(05 Mar '20, 23:05)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-73383">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-73383-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<div class="question-status" style="margin-bottom:15px">
<h3>
                The question has been closed for the following reason "Too subjective and argumentative" by
                <a href="/users/647/sk53">SK53</a>
                 05 Mar '20, 11:42
            </h3>
</div>
<form action="/questions/73383/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="N7bfFBmzHQW3BzWzrNaotzAwojm64Zh4"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>