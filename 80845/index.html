<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/80845/mapnik-osm-how-to-generate-contour-map-for-state-and-counties">mapnik + osm: how to generate contour map for state and counties</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80845/up/" id="post-80845-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80845-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/80845/down/" id="post-80845-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/80845/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello,</p>
<p>I'm struggling to find info on how to generate maps with Mapnik (mml file) that only show the contour of states and counties for the US (for example), and everything else white or transparent.</p>
<p>Any pointer welcome. Thanks!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>07 Jul '21, 02:00</strong>
</p>
<img alt="pat548's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/af0620755ec3e0728f5fcd00a2fe0239?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20434/pat548">pat548</a><br/>
<span class="score" title="10 reputation points">10</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="pat548 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80845/">
                edited
                <strong>07 Jul '21, 02:04</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80845">
<a name="80854"></a>
<div class="comment" id="comment-80854">
<div class="comment-score" id="post-80854-score"></div>
<div class="comment-text"><p>By contour do you mean height contours or just the administrative outlines?</p></div>
<div class="comment-info" id="comment-80854-info">
<span class="comment-age">(07 Jul '21, 20:37)</span>
<a class="comment-user userinfo" href="/users/4426/insertuser">InsertUser</a>
</div>
</div>
<a name="80900"></a>
<div class="comment" id="comment-80900">
<div class="comment-score" id="post-80900-score"></div>
<div class="comment-text"><p>I probably used the wrong word, I don't want height, just the country or state, or county, as a simple line, nothing else.</p></div>
<div class="comment-info" id="comment-80900-info">
<span class="comment-age">(09 Jul '21, 13:37)</span>
<a class="comment-user userinfo" href="/users/20434/pat548">pat548</a>
</div>
</div>
<a name="80909"></a>
<div class="comment" id="comment-80909">
<div class="comment-score" id="post-80909-score"></div>
<div class="comment-text"><p>There is plenty of ways to achieve this. You should tell us a bit more about your goal, is it for a map on a website, is it for just a few counties, the all country? What have you tried so far?</p></div>
<div class="comment-info" id="comment-80909-info">
<span class="comment-age">(10 Jul '21, 09:43)</span>
<a class="comment-user userinfo" href="/users/5587/yvecai">yvecai</a>
</div>
</div>
<a name="80910"></a>
<div class="comment" id="comment-80910">
<div class="comment-score" id="post-80910-score"></div>
<div class="comment-text"><p>I just want to generate a PNG, with transparency, for either the whole US, with states, or a single state with counties. So far, I've tried modifying the project.mml file of the openstreetmap-carto project to only show those lines, but even with a single layer, it still show the ocean and there's no transparency:</p>
<p>Layer:
  - id: landcover-line
    geometry: linestring
    &lt;&lt;: <em>extents
    Datasource:
      &lt;&lt;: </em>osm2pgsql
      table: |-
        (SELECT
            way
          FROM planet_osm_line
          WHERE man_made = 'cutline'
        ) AS landcover_line
    properties:
      minzoom: 5</p>
<p>I guess my main problem is I can't find any good documentation about all the options I can use here. I've looked into the reference, but without examples, it's hard to follow.</p></div>
<div class="comment-info" id="comment-80910-info">
<span class="comment-age">(10 Jul '21, 14:23)</span>
<a class="comment-user userinfo" href="/users/20434/pat548">pat548</a>
</div>
</div>
<a name="80911"></a>
<div class="comment" id="comment-80911">
<div class="comment-score" id="post-80911-score"></div>
<div class="comment-text"><p>Correction, the layer is actually:</p>
<p>Layer:
  - id: admin-low-zoom
    geometry: linestring
    &lt;&lt;: <em>extents
    Datasource:
      &lt;&lt;: </em>osm2pgsql
      table: |-
        (SELECT
            way,
            admin_level
          FROM planet_osm_roads
          WHERE boundary = 'administrative'
            AND admin_level IN ('0', '1', '2', '3', '4')
            AND osm_id &lt; 0
          ORDER BY admin_level DESC
        ) AS admin_low_zoom
    properties:
      minzoom: 4
      maxzoom: 7</p></div>
<div class="comment-info" id="comment-80911-info">
<span class="comment-age">(10 Jul '21, 15:43)</span>
<a class="comment-user userinfo" href="/users/20434/pat548">pat548</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80845">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80845-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/80845/mapnik-osm-how-to-generate-contour-map-for-state-and-counties?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/80845/mapnik-osm-how-to-generate-contour-map-for-state-and-counties?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/80845/mapnik-osm-how-to-generate-contour-map-for-state-and-counties?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/80845/mapnik-osm-how-to-generate-contour-map-for-state-and-counties?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="80921"></a>
<div class="answer" id="answer-container-80921">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80921/up/" id="post-80921-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80921-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80921/down/" id="post-80921-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You have to set the background color of your map transparent, example in the xml:</p>
<p>In the style.mss, replace the <a href="https://help.openstreetmap.org/users/52/landwirt">@land</a>-color by rgba(0,0,255,0)</p>
<pre><code>Map {
  background-color: rgba(0,0,255,0);
}
</code></pre>
<p>At the end, the &lt;map&gt;tag in the xml generated should look like something like this: </p>
<p><code>&lt;Map srs="..."  background-color="rgba(0, 0, 255, 0)" &gt; .. &lt;/Map&gt;</code></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80921/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>11 Jul '21, 17:20</strong>
</p>
<img alt="yvecai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3c7cffe544d6a1c46c97a25b2fdcdedc?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5587/yvecai">yvecai</a><br/>
<span class="score" title="1481 reputation points"><span class="">1.5k</span></span><span title="12 badges"><span class="silver">●</span><span class="badgecount">12</span></span><span title="26 badges"><span class="bronze">●</span><span class="badgecount">26</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="yvecai has 7 accepted answers">9%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80921">
</div>
<div class="comment-tools" id="comment-tools-80921">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80921-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/80845/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="yIXZDRtGoRpSjj1dsyaGv0VPONuDaXIH"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>