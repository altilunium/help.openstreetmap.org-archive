<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/18148/rails-port-on-apache-passenger">Rails port on Apache Passenger</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18148/up/" id="post-18148-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18148-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/18148/down/" id="post-18148-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/18148/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi everyone!</p>
<p>I have managed to successfuly install Rails port application (following this: <a href="http://wiki.openstreetmap.org/wiki/The_Rails_Port">http://wiki.openstreetmap.org/wiki/The_Rails_Port</a> tutorial. When I run it under WEBRick server, it runs ok and i can access api. However I cannot make it run under Apache Passenger. Accessing any page I get following error:</p>
<p>Your application's database configuration file might be written incorrectly. Please check it and fix any errors. The database server may not be running. Please check whether it's running, and start it if it isn't.</p>
<p>Error message:
PG::Error: ERROR: relation "oauth_tokens" does not exist LINE 5: WHERE a.attrelid = '"oauth_tokens"'::regclass ^ : SELECT a.attname, format_type(a.atttypid, a.atttypmod), pg_get_expr(d.adbin, d.adrelid), a.attnotnull, a.atttypid, a.atttypmod FROM pg_attribute a LEFT JOIN pg_attrdef d ON a.attrelid = d.adrelid AND a.attnum = d.adnum WHERE a.attrelid = '"oauth_tokens"'::regclass AND a.attnum &gt; 0 AND NOT a.attisdropped ORDER BY a.attnum (ActiveRecord::StatementInvalid)</p>
<p>Exception class: 
ActiveRecord::StatementInvalid </p>
<p>Its weird, because under WEBRick server it works. Can anyone help me solve this issue? I am using Debian 6.</p>
<p>thanks!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-apache" href="/tags/apache/" rel="tag" title="see questions tagged 'apache'">apache</a>
<a class="post-tag tag-link-passenger" href="/tags/passenger/" rel="tag" title="see questions tagged 'passenger'">passenger</a>
<a class="post-tag tag-link-problem" href="/tags/problem/" rel="tag" title="see questions tagged 'problem'">problem</a>
<a class="post-tag tag-link-port" href="/tags/port/" rel="tag" title="see questions tagged 'port'">port</a>
<a class="post-tag tag-link-rails" href="/tags/rails/" rel="tag" title="see questions tagged 'rails'">rails</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>02 Dec '12, 14:33</strong>
</p>
<img alt="boksajak's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/86dcc14b5b09a1edfccf25d37df806e4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5117/boksajak">boksajak</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="boksajak has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18148">
</div>
<div class="comment-tools" id="comment-tools-18148">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18148-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/18148/rails-port-on-apache-passenger?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/18148/rails-port-on-apache-passenger?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/18148/rails-port-on-apache-passenger?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/18148/rails-port-on-apache-passenger?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="18396"></a>
<div class="answer" id="answer-container-18396">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/18396/up/" id="post-18396-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-18396-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/18396/down/" id="post-18396-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>By default, "rails server" will access your application using the 'development' rails environment, whereas passenger is configured to use the 'production' environment by default.</p>
<p>I suspect that your production database isn't configured properly, and that's what's giving you the error above. Check the settings in config/database.yml, and check that the expected tables are already set up.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/18396/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Dec '12, 11:52</strong>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Andy Allan has 46 accepted answers">28%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-18396">
<a name="18404"></a>
<div class="comment" id="comment-18404">
<div class="comment-score" id="post-18404-score"></div>
<div class="comment-text"><p>thanks, I managed to repair production osm database (i needed to run gem install builder before creating database).</p>
<p>Now i have a new problem. I still cannot access Rails port application on Apache. I am getting OSM error page with error code 500. Apache log reveals two errors:</p>
<ol>
<li>
<p>ActionView::Template::Error (index.js isn't precompiled)</p>
</li>
<li>
<p>ActionController::RoutingError (No route matches [GET] "/assets/osm_logo.png")</p>
</li>
</ol></div>
<div class="comment-info" id="comment-18404-info">
<span class="comment-age">(12 Dec '12, 19:48)</span>
<a class="comment-user userinfo" href="/users/5117/boksajak">boksajak</a>
</div>
</div>
<a name="22566"></a>
<div class="comment" id="comment-22566">
<div class="comment-score" id="post-22566-score"></div>
<div class="comment-text"><p>Did you manage to solve the issue with <strong>index.js isn't precompiled</strong>?</p></div>
<div class="comment-info" id="comment-22566-info">
<span class="comment-age">(20 May '13, 12:26)</span>
<a class="comment-user userinfo" href="/users/3691/bibstha">bibstha</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-18396">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-18396-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/18148/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="F62ALFu7340wOCy10poCzGCrBipBfyJB"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>