<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/3071/inconsistency-found-in-geofabrik-osm-exports">Inconsistency found in Geofabrik OSM exports ?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/3071/up/" id="post-3071-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-3071-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/3071/down/" id="post-3071-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/3071/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>I'm using the geographic .osm subsets generated by GeoFabrik that can be downloaded here:</p>
<p><a href="http://download.geofabrik.de/osm/europe/france/"></a><a href="http://download.geofabrik.de/osm/europe/france/"></a><a href="http://download.geofabrik.de/osm/europe/france/">http://download.geofabrik.de/osm/europe/france/</a></p>
<p>However, in some of them, I found some strange ways definitions (missing nodes), this sounds to me like a mistake from their side, a kind of inconsistency that occurs during the generation of those subsets.
However, as I'm relatively new to OSM, maybe you can confirm that this is a mistake from their side.</p>
<p>Here's the definition of the way 23301557 in their file:
(with only one node in it)
<img alt="alt text" src="/upfiles/Screen_shot_2011-02-15_at_2.51.34_PM.png"/></p>
<p><strong>And here's the way it is defined in OSM</strong> : <a href="http://www.openstreetmap.org/browse/way/23301557"></a><a href="http://www.openstreetmap.org/browse/way/23301557"></a><a href="http://www.openstreetmap.org/browse/way/23301557">http://www.openstreetmap.org/browse/way/23301557</a>
<img alt="alt text" src="/upfiles/Screen_shot_2011-02-15_at_2.51.50_PM.png"/>
Some nodes seem to be missing.....</p>
<p>Can you confirm me that this is due an error on the geofabrik side and not something I'm missing in my use of the .osm file ?</p>
<p>Thanks a lot.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-geofabrik" href="/tags/geofabrik/" rel="tag" title="see questions tagged 'geofabrik'">geofabrik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>15 Feb '11, 14:02</strong>
</p>
<img alt="y0n3l's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d43d3db062e0ec88d26207ba81878941?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/857/y0n3l">y0n3l</a><br/>
<span class="score" title="6 reputation points">6</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="y0n3l has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-3071">
</div>
<div class="comment-tools" id="comment-tools-3071">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-3071-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/3071/inconsistency-found-in-geofabrik-osm-exports?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/3071/inconsistency-found-in-geofabrik-osm-exports?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/3071/inconsistency-found-in-geofabrik-osm-exports?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/3071/inconsistency-found-in-geofabrik-osm-exports?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="3072"></a>
<div class="answer accepted-answer" id="answer-container-3072">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/3072/up/" id="post-3072-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-3072-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/3072/down/" id="post-3072-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/3072/" rel="nofollow" title="y0n3l has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>What you are seeing is the result of these extracts being created with the Osmosis option <code>--clipIncompleteEntities=true</code> - whenever an object crosses the border of the extract, then only the part of the object that lies inside is actually included in the extract.</p>
<p>Osmosis has two other options how to deal with these situations. One is <code>--clipIncompleteEntities=false</code> which would in your case lead to a way that references all the right nodes, but these nodes would be missing in the file. Geofabrik doesn't do that because the inconsistent files would trip up some users. The other option is <code>--completeWays=true</code> in which Osmosis would collect the extra nodes and add them to the output file even though they lie outside the area in question. This is not used by Geofabrik because it takes too long.</p>
<p>If you cannot work with this file, you will have to use the next larger extract (e.g. france.osm) and then cut out your area of interest yourself with a suitable set of parameters.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/3072/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Feb '11, 14:09</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/3072/">
                edited
                <strong>15 Feb '11, 14:18</strong>
</a>
</p>
<img alt="Jonathan%20Bennett's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9fe361843971cf8b23dc93517f00b996?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6/jonathan-bennett">Jonathan Ben...</a><br/>
<span class="score" title="8261 reputation points"><span class="">8.3k</span></span><span title="17 badges"><span class="badge1">●</span><span class="badgecount">17</span></span><span title="85 badges"><span class="silver">●</span><span class="badgecount">85</span></span><span title="108 badges"><span class="bronze">●</span><span class="badgecount">108</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-3072">
<a name="3073"></a>
<div class="comment" id="comment-3073">
<div class="comment-score" id="post-3073-score"></div>
<div class="comment-text"><p>Thanks for your detailed answer. I would have prefer to avoid using the france.osm but if that's the only way :/ Would you know a "fast" way to get all the nodes that refer indirectly to a relation ? I "just" want ways / nodes for a predefined administrative boundary ( <a href="http://bit.ly/ifGan3">http://bit.ly/ifGan3</a> ) should I parse the france.osm "only for that" :/</p></div>
<div class="comment-info" id="comment-3073-info">
<span class="comment-age">(15 Feb '11, 14:27)</span>
<a class="comment-user userinfo" href="/users/857/y0n3l">y0n3l</a>
</div>
</div>
<a name="3074"></a>
<div class="comment" id="comment-3074">
<div class="comment-score" id="post-3074-score"></div>
<div class="comment-text"><p>Ok I think that the easiest way to do what I want is to rely on the api and ask for the members of the relation using <a href="http://api.openstreetmap.org/api/0.6/relation/7411">http://api.openstreetmap.org/api/0.6/relation/7411</a> and so on for the ways and then the nodes..... As the api also supports multi fetch, this is a nice and fast solution.</p></div>
<div class="comment-info" id="comment-3074-info">
<span class="comment-age">(15 Feb '11, 14:42)</span>
<a class="comment-user userinfo" href="/users/857/y0n3l">y0n3l</a>
</div>
</div>
<a name="3075"></a>
<div class="comment" id="comment-3075">
<div class="comment-score" id="post-3075-score">2</div>
<div class="comment-text"><p>This is not necessary. You can use <a href="http://api.openstreetmap.org/api/0.6/relation/7411/full">http://api.openstreetmap.org/api/0.6/relation/7411/full</a> to give you all referenced objects. However don't do any of this on a regular, automated basis - it's ok for a one-off.</p></div>
<div class="comment-info" id="comment-3075-info">
<span class="comment-age">(15 Feb '11, 14:50)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
<a name="3076"></a>
<div class="comment" id="comment-3076">
<div class="comment-score" id="post-3076-score"></div>
<div class="comment-text"><p>Thanks a lot for the tip ! Yes I only need to do it one time for some relations.</p></div>
<div class="comment-info" id="comment-3076-info">
<span class="comment-age">(15 Feb '11, 14:53)</span>
<a class="comment-user userinfo" href="/users/857/y0n3l">y0n3l</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-3072">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-3072-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/3071/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="FEcamFXu7ss00zBIne2io2G1yreLAPsu"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>