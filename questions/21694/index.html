<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/21694/the-korean-language-letters-non-latin-charset-on-the-tiles-of-my-new-tile-server-on-ubuntu-are-just-boxes">The Korean language letters (non-latin charset) on the tiles of my new tile server on ubuntu are just boxes</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21694/up/" id="post-21694-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21694-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/21694/down/" id="post-21694-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/21694/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>hello </p>
<p><img alt="alt text" src="http://ruby.pe.kr/1.png"/></p>
<p>I installed osm on my Ubuntu server, as shown in the photo below.
The Korean language, Hangul, however, retrieve broken.</p>
<p>I faithfully as a guide, but many times, even if you tried any of these symptoms appear.</p>
<h2>The procedure below.(Very simple)</h2>
<ol>
<li>sudo add-apt-repository ppa:kakrueger/openstreetmap</li>
<li>sudo apt-get update </li>
<li>sudo apt-get install libapache2-mod-tile</li>
<li>wget <a href="http://download.geofabrik.de/openstreetmap/europe/ireland.osm.pbf">http://download.geofabrik.de/openstreetmap/europe/ireland.osm.pbf</a> </li>
</ol>
<p>·</p>
<ul>
<li>sudo su - postgres</li>
<li>createdb osm</li>
<li>createlang plpgsql osm</li>
<li>createuser &lt;username&gt;</li>
</ul>
<p>·5. osm2pgsql --slim -C 1500 ireland.osm.pbf </p>
<p>·6. restart …</p>
<hr/>
<h2>Below is the result of my test.</h2>
<ol>
<li>create test.php -&gt; &lt;? echo("대한민국"); ?&gt;    OK</li>
<li>login psql -&gt; show clinet encoding?          OK - UTF-8</li>
<li>PHP-CHARSET : line comment -&gt; UTF-8        <br/>
</li>
<li>using josm, open the character map check     OK </li>
</ol>
<hr/>
<p>What is the problem?....... bohoo....</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-charset" href="/tags/charset/" rel="tag" title="see questions tagged 'charset'">charset</a>
<a class="post-tag tag-link-tile-server" href="/tags/tile-server/" rel="tag" title="see questions tagged 'tile-server'">tile-server</a>
<a class="post-tag tag-link-ubuntu" href="/tags/ubuntu/" rel="tag" title="see questions tagged 'ubuntu'">ubuntu</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Apr '13, 03:40</strong>
</p>
<img alt="sgGold's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d6e5f1c6e6f0ffac4430f3fe7d2fd1a4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6194/sggold">sgGold</a><br/>
<span class="score" title="15 reputation points">15</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="sgGold has no accepted answers">0%</span>
</br></p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/21694/">
                edited
                <strong>24 Apr '13, 01:05</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-21694">
</div>
<div class="comment-tools" id="comment-tools-21694">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21694-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/21694/the-korean-language-letters-non-latin-charset-on-the-tiles-of-my-new-tile-server-on-ubuntu-are-just-boxes?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/21694/the-korean-language-letters-non-latin-charset-on-the-tiles-of-my-new-tile-server-on-ubuntu-are-just-boxes?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/21694/the-korean-language-letters-non-latin-charset-on-the-tiles-of-my-new-tile-server-on-ubuntu-are-just-boxes?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/21694/the-korean-language-letters-non-latin-charset-on-the-tiles-of-my-new-tile-server-on-ubuntu-are-just-boxes?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="21704"></a>
<div class="answer" id="answer-container-21704">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21704/up/" id="post-21704-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21704-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/21704/down/" id="post-21704-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Make sure that you have the "unifont" font installed (<code>sudo apt-get install ttf-unifont</code>) and that your fontset-settings.inc file correctly references the "unifont Medium" font.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/21704/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Apr '13, 09:58</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21704">
<a name="21709"></a>
<div class="comment" id="comment-21709">
<div class="comment-score" id="post-21709-score">1</div>
<div class="comment-text"><p>Thank you for answer.
I as directed, using the command "sudo apt-get install ttf-unifont"
The installation finished successfully, reboot.</p>
<p>Sadly, the result was the same.
, "Fontset-settings.xml" I open the file but it was in the set.
You, the font is installed correctly, there should not?</p>
<p></p><hr>
<p>mtis @ ubuntu: ~ $ sudo find /-name unifont *
/ usr / share / fonts / truetype / unifont
/ usr / share / fonts / truetype / unifont / unifont.ttf</p>
<hr/><p></p></hr></div>
<div class="comment-info" id="comment-21709-info">
<span class="comment-age">(22 Apr '13, 10:27)</span>
<a class="comment-user userinfo" href="/users/6194/sggold">sgGold</a>
</div>
</div>
<a name="21710"></a>
<div class="comment" id="comment-21710">
<div class="comment-score" id="post-21710-score"></div>
<div class="comment-text"><pre><code>mtis @ ubuntu: ~ $ tail / etc / mapnik-osm-data / inc / fontset-settings.xml.inc
  &lt;! - Font face-name = "unifont Medium" / -&gt;
&lt;/ FontSet
&lt;FontSet Name="bold-fonts"&gt;
  The &lt;font face-name="DejaVu The Sans Bold" /&gt;
  &lt;! - Font face-name = "unifont Medium" / -&gt;
&lt;/ FontSet
&lt;FontSet Name="oblique-fonts"&gt;
  The &lt;font face-name="DejaVu The Sans Oblique" /&gt;
  &lt;! - Font face-name = "unifont Medium" / -&gt;
&lt;/ FontSet
</code></pre></div>
<div class="comment-info" id="comment-21710-info">
<span class="comment-age">(22 Apr '13, 10:28)</span>
<a class="comment-user userinfo" href="/users/6194/sggold">sgGold</a>
</div>
</div>
<a name="21773"></a>
<div class="comment" id="comment-21773">
<div class="comment-score" id="post-21773-score"></div>
<div class="comment-text"><p>Your comment comes out a bit garbled, but notice that the character combination "less than" "exlamation mark" "minus" "minus" is the beginning of a comment in XML ("minus" "minus" "greater than" is the end of a comment) so it looks like the unifont might be commented out in your fontset-settings.inc?</p></div>
<div class="comment-info" id="comment-21773-info">
<span class="comment-age">(23 Apr '13, 18:55)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
<a name="21778"></a>
<div class="comment" id="comment-21778">
<div class="comment-score" id="post-21778-score"></div>
<div class="comment-text"><p>(meta <a href="/users/104/frederik-ramm">@Frederik Ramm</a>: fixed the code formatting)</p></div>
<div class="comment-info" id="comment-21778-info">
<span class="comment-age">(23 Apr '13, 23:38)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
<a name="21961"></a>
<div class="comment" id="comment-21961">
<div class="comment-score" id="post-21961-score"></div>
<div class="comment-text"><p>Thank you.I did not know that it is there, the line block.
However, on the DejaVu font, erase Leaving Unifont only
Does not generate tiles ...</p>
<p>I think, to get back to after the following procedure to install the font.
What do you think?</p>
<p>I'm confused. Boohoo</p></div>
<div class="comment-info" id="comment-21961-info">
<span class="comment-age">(29 Apr '13, 03:26)</span>
<a class="comment-user userinfo" href="/users/6194/sggold">sgGold</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-21704">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21704-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="21964"></a>
<div class="answer" id="answer-container-21964">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21964/up/" id="post-21964-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21964-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/21964/down/" id="post-21964-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Not all fonts are able to display all UTF-8 characters. The DejaVu font for example doesn't appear to be able to display Korean characters, which is what leads to your problem.</p>
<p>Mapnik, the rendering library used to generate the tiles, has the ability to use alternative fonts for those characters that aren't supported by the default font. This alternative font is specified (as you have now done) in the style sheet in font-settings.xml.inc.</p>
<p>In addition, however, you need to tell mapnik where to find this alternative font. As you are using renderd as your driver for mapnik, the way you tell mapnik where to look for the fonts is in /etc/renderd.conf</p>
<p>In that file, there is a configuration parameter font_dir ( <a href="https://github.com/openstreetmap/mod_tile/blob/master/debian/renderd.conf#L9">https://github.com/openstreetmap/mod_tile/blob/master/debian/renderd.conf#L9</a> ) and font_dir_recurse. In the default /etc/renderd.conf these parameters are set wrong, as they point directly to the dejavu font, rather than the generic font dir and then recurse in to load all fonts.</p>
<p>So if you set font_dir_recurse to true and then change font_dir to the generic /usr/share/fonts/truetype/ you should hopefully get mapnik to load the unifont, which should then render the Korean characters correctly.</p>
<p>The Ubuntu 13.04 packages I uploaded a couple of days ago should have this fixed, but I haven't uploaded corrected packages yet for the older versions of Ubuntu. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/21964/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Apr '13, 10:26</strong>
</p>
<img alt="apmon's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/65/apmon">apmon</a><br/>
<span class="score" title="6527 reputation points"><span class="">6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="apmon has 9 accepted answers">20%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21964">
<a name="21981"></a>
<div class="comment" id="comment-21981">
<div class="comment-score" id="post-21981-score">1</div>
<div class="comment-text"><p>Thank you. Has been resolved.
I'm very happy.</p>
<p>Thank you</p></div>
<div class="comment-info" id="comment-21981-info">
<span class="comment-age">(30 Apr '13, 02:30)</span>
<a class="comment-user userinfo" href="/users/6194/sggold">sgGold</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-21964">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21964-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/21694/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="FcfigfqjVnPfNIRamwglt7IQApwGI72J"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>