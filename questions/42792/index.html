<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/42792/ubuntu-1504-tiles-no-longer-generating">Ubuntu 15.04 - Tiles no longer generating</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/42792/up/" id="post-42792-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-42792-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/42792/down/" id="post-42792-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/42792/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I upgraded from Ubuntu 14.04 to 15.04 Friday (via 14.10 then 15.04) - and since my OSM tile server is not generating new tiles. Areas that already have had tiles generated work flawlessly, but if I "pan" around in Leaflet to areas I have not generated tiles for, no tiles are generated, and looking at glances I do not see any of the tile generation services being kicked off. I would rather not do the 36 hour database rebuild for another 6 months as map data is still relatively current for most areas.</p>
<p>Had 2 questions:</p>
<ol>
<li>Ubuntu 15.04 uses systemd now for services called upon on boot. Could the instructions I followed to set up the tile server for 14.04 need updating to reflect systemd now being used instead of init.d?</li>
<li>When upgrading, Ubuntu "automatically removed no longer needed packages" including Boost, Mapnick, and some other actually needed packages. I re-downloaded all the packages in the steps listed <a href="https://switch2osm.org/serving-tiles/manually-building-a-tile-server-14-04/">https://switch2osm.org/serving-tiles/manually-building-a-tile-server-14-04/</a> - but also in the process I noticed my PostgreSQL was updated from 9.3 to 9.4 - thus I did a apt-get postgresql-9.4-postgis-2.1 - I recall somewhere mentioned I may have to do some extra steps due to upgrading PostgreSQL?</li>
</ol>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-tileserver" href="/tags/tileserver/" rel="tag" title="see questions tagged 'tileserver'">tileserver</a>
<a class="post-tag tag-link-postgresql" href="/tags/postgresql/" rel="tag" title="see questions tagged 'postgresql'">postgresql</a>
<a class="post-tag tag-link-15.04" href="/tags/15.04/" rel="tag" title="see questions tagged '15.04'">15.04</a>
<a class="post-tag tag-link-postgis" href="/tags/postgis/" rel="tag" title="see questions tagged 'postgis'">postgis</a>
<a class="post-tag tag-link-ubuntu" href="/tags/ubuntu/" rel="tag" title="see questions tagged 'ubuntu'">ubuntu</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>01 May '15, 19:11</strong>
</p>
<img alt="f00dl3a's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1afe4bf83008befdcf7bdf5c6abfa195?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9650/f00dl3a">f00dl3a</a><br/>
<span class="score" title="171 reputation points">171</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="f00dl3a has one accepted answer">25%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/42792/">
                edited
                <strong>02 May '15, 23:35</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-42792">
</div>
<div class="comment-tools" id="comment-tools-42792">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-42792-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/42792/ubuntu-1504-tiles-no-longer-generating?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/42792/ubuntu-1504-tiles-no-longer-generating?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/42792/ubuntu-1504-tiles-no-longer-generating?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/42792/ubuntu-1504-tiles-no-longer-generating?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="42877"></a>
<div class="answer accepted-answer answered-by-owner" id="answer-container-42877">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/42877/up/" id="post-42877-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-42877-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/42877/down/" id="post-42877-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/42877/" rel="nofollow" title="aseerel4c26 has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>upgraded PostgreSQL by completely removing and re-installing the applicaiton. Re-created databases. Re-downloaded the PBF and re-built the tile server database. Resolved.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/42877/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 May '15, 16:52</strong>
</p>
<img alt="f00dl3a's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1afe4bf83008befdcf7bdf5c6abfa195?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9650/f00dl3a">f00dl3a</a><br/>
<span class="score" title="171 reputation points">171</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="f00dl3a has one accepted answer">25%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-42877">
</div>
<div class="comment-tools" id="comment-tools-42877">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-42877-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="42794"></a>
<div class="answer" id="answer-container-42794">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/42794/up/" id="post-42794-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-42794-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/42794/down/" id="post-42794-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Upon a PostgreSQL upgrade, Ubuntu will normally run the new version in parallel to the old (e.g. 9.4 on port 5433, p.3 on port 5432 or so). Your message does not contain enough information to help you; "tiles not rendering" could be caused by a large variety of issues. Is renderd running? If not, start it by hand. Does it start? If not, check why and eliminate the problem. If renderd is running, check the Apache error log - can mod_tile successfully send its request to renderd? Can renderd successfully talk to the database? Check the PostgreSQL logs. Run renderd in foreground mode (-f flag) to see debug output and let that inform your further bug hunting. This kind of complicated debugging might be better suited to IRC.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/42794/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 May '15, 20:04</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-42794">
</div>
<div class="comment-tools" id="comment-tools-42794">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-42794-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="42797"></a>
<div class="answer answered-by-owner" id="answer-container-42797">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/42797/up/" id="post-42797-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-42797-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/42797/down/" id="post-42797-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I need to at least recompile things as Boost is now a newer version. It appears like it was looking for an old version of Boost when I ran renderd -f. Doing that now, but found another issue.</p>
<p>I am following the instructions at <a href="http://stackoverflow.com/questions/28788653/migrating-from-postgresql-9-3-to-9-4-postgis">http://stackoverflow.com/questions/28788653/migrating-from-postgresql-9-3-to-9-4-postgis</a> as PostgreSQL on Ubuntu 15.04 is version 9.4. For some reason, when running pg_config --pkglibdir it returns /usr/lib/postgresql/9.3/lib, even though psql --version returns 9.4.1. I created a symbolic link, sudo ln -s /usr/lib/postgresql/9.4/lib/postgis-2.1.so /usr/lib/postgresql/9.3/lib , but now in rendered I am getting the error "incompatible library "/usr/lib/postgresql/9.3/lib/postgis-2.1.so" version mismatch DETAIL Server is version 9.3, library is version 9.4. This doesn't make sense as the --version returns 9.4.1. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/42797/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 May '15, 20:47</strong>
</p>
<img alt="f00dl3a's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/1afe4bf83008befdcf7bdf5c6abfa195?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9650/f00dl3a">f00dl3a</a><br/>
<span class="score" title="171 reputation points">171</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="13 badges"><span class="bronze">●</span><span class="badgecount">13</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="f00dl3a has one accepted answer">25%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/42797/">
                edited
                <strong>02 May '15, 11:44</strong>
</a>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-42797">
</div>
<div class="comment-tools" id="comment-tools-42797">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-42797-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/42792/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="OO2OO96n9pkHTmWKz6hpgSozCsqnsOWN"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>