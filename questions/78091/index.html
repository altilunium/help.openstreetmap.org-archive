<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/78091/embedded-map-has-stopped-working">embedded map has stopped working</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/78091/up/" id="post-78091-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-78091-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/78091/down/" id="post-78091-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/78091/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Since today i get just a light gray area, no map at all (i'm using the same html iframe that always worked, no changes have been done.. even if put the iframe inside a blank html with no other html or css or php code (to avoid conflict issues) it's still not working</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-iframe" href="/tags/iframe/" rel="tag" title="see questions tagged 'iframe'">iframe</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>28 Dec '20, 23:56</strong>
</p>
<img alt="cu_i%20comunicazione's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/564677d0c321e6efb569edad6db0496a?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/19455/cu_i-comunicazione">cu_i comunic...</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="cu_i comunicazione has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/78091/">
                edited
                <strong>29 Dec '20, 00:26</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-78091">
<a name="78092"></a>
<div class="comment" id="comment-78092">
<div class="comment-score" id="post-78092-score"></div>
<div class="comment-text"><p>checking with Google Chrome Console, i get several error: FAILED TO LOAD RESOURCE, the missing resources are pointing to: cdn-fastly-test.tile.openstreetmap.org which appears to be offline</p></div>
<div class="comment-info" id="comment-78092-info">
<span class="comment-age">(29 Dec '20, 00:03)</span>
<a class="comment-user userinfo" href="/users/19455/cu_i-comunicazione">cu_i comunic...</a>
</div>
</div>
<a name="78094"></a>
<div class="comment" id="comment-78094">
<div class="comment-score" id="post-78094-score"></div>
<div class="comment-text"><p>Your question looks like it might be the same as <a href="https://help.openstreetmap.org/questions/77894/were-experiencing-an-issue-where-our-leaflet-map-on-our-homepage-is-not-displaying-any-images-and-remains-entirely-blank-a-lot-of-500-errors-are-reported-from-the-chrome-developer-console">https://help.openstreetmap.org/questions/77894/were-experiencing-an-issue-where-our-leaflet-map-on-our-homepage-is-not-displaying-any-images-and-remains-entirely-blank-a-lot-of-500-errors-are-reported-from-the-chrome-developer-console</a> so the answers there will probably apply to you too.</p></div>
<div class="comment-info" id="comment-78094-info">
<span class="comment-age">(29 Dec '20, 01:30)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="78095"></a>
<div class="comment" id="comment-78095">
<div class="comment-score" id="post-78095-score"></div>
<div class="comment-text"><p>thank you for supporting, you pointed me to the right direction!
it's been very kind of you to provide that link.</p>
<p>have a nice day</p></div>
<div class="comment-info" id="comment-78095-info">
<span class="comment-age">(29 Dec '20, 03:03)</span>
<a class="comment-user userinfo" href="/users/19455/cu_i-comunicazione">cu_i comunic...</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-78091">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-78091-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/78091/embedded-map-has-stopped-working?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/78091/embedded-map-has-stopped-working?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/78091/embedded-map-has-stopped-working?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/78091/embedded-map-has-stopped-working?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="78096"></a>
<div class="answer" id="answer-container-78096">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/78096/up/" id="post-78096-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-78096-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/78096/down/" id="post-78096-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>OSM recently switched to fastly for all tile requests. The embed function had been the first to use the fastly cdn and got an extra URL for that. When the transistion was finished around christmas holidays, they forgot to change the now defunct test tile urls in the embed function that won't work anymore. I'll bring this to the sysadmins attention. It should work soon again. Stay tuned. There is nothing you could do now but waiting for this to get resolved.</p>
<p>Edit: TomH from the sysadmins team changed the embed code, it should be working again soon. And a bravo to the sysadmins for reacting that fast.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/78096/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Dec '20, 09:21</strong>
</p>
<img alt="Spiekerooger's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e06ed329df6032df14b5639de4d64782?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17439/spiekerooger">Spiekerooger</a><br/>
<span class="score" title="3148 reputation points"><span class="">3.1k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="23 badges"><span class="silver">●</span><span class="badgecount">23</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Spiekerooger has 18 accepted answers">16%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/78096/">
                edited
                <strong>29 Dec '20, 09:40</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-78096">
<a name="78097"></a>
<div class="comment" id="comment-78097">
<div class="comment-score" id="post-78097-score"></div>
<div class="comment-text"><p>thank you! i'm glad to hear that.. OSM is providing an amazing service</p></div>
<div class="comment-info" id="comment-78097-info">
<span class="comment-age">(29 Dec '20, 10:18)</span>
<a class="comment-user userinfo" href="/users/19455/cu_i-comunicazione">cu_i comunic...</a>
</div>
</div>
<a name="78102"></a>
<div class="comment" id="comment-78102">
<div class="comment-score" id="post-78102-score"></div>
<div class="comment-text"><p>Here still a grey background.
when i use firefox browser the map looks perfect, when I use chrome or chromium only a grey square, just like the description of comunicazione.</p></div>
<div class="comment-info" id="comment-78102-info">
<span class="comment-age">(29 Dec '20, 13:09)</span>
<a class="comment-user userinfo" href="/users/19457/straatmapje">straatmapje</a>
</div>
</div>
<a name="78103"></a>
<div class="comment" id="comment-78103">
<div class="comment-score" id="post-78103-score"></div>
<div class="comment-text"><p>The same embedded code worked fine in chrome yesterday. really weird. </p></div>
<div class="comment-info" id="comment-78103-info">
<span class="comment-age">(29 Dec '20, 13:13)</span>
<a class="comment-user userinfo" href="/users/19457/straatmapje">straatmapje</a>
</div>
</div>
<a name="78104"></a>
<div class="comment" id="comment-78104">
<div class="comment-score" id="post-78104-score">1</div>
<div class="comment-text"><p>That tilelayer url that worked a few days ago just got deprecated.
Tom already pushed a commit (<a href="https://github.com/openstreetmap/chef/commit/2d781ace5d616fd4888f7823f4c34048f3a9b7b1#diff-c329b954343569fb6106e770631a62630dd566f3eb9420aed5012a352d45fc56">https://github.com/openstreetmap/chef/commit/2d781ace5d616fd4888f7823f4c34048f3a9b7b1#diff-c329b954343569fb6106e770631a62630dd566f3eb9420aed5012a352d45fc56</a>) to delete that url from the iframe embed js function. Now we probably just have to wait for this change to propagate through the caching layers and than it should be working again.</p></div>
<div class="comment-info" id="comment-78104-info">
<span class="comment-age">(29 Dec '20, 13:46)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
<a name="78105"></a>
<div class="comment" id="comment-78105">
<div class="comment-score" id="post-78105-score"></div>
<div class="comment-text"><p>Thanks, we just wait then. Forgive me for asking noob questions if it seems silly, but what is the difference in this link between chrome and firefox? I do not see why the same code still works in firefox. </p></div>
<div class="comment-info" id="comment-78105-info">
<span class="comment-age">(29 Dec '20, 14:40)</span>
<a class="comment-user userinfo" href="/users/19457/straatmapje">straatmapje</a>
</div>
</div>
<a name="78106"></a>
<div class="comment not_top_scorer" id="comment-78106">
<div class="comment-score" id="post-78106-score"></div>
<div class="comment-text"><p>We have to wait for the embed.html to refresh. Now you may have a copy in your browsers cache of that file in Chrome, but not in Firefox.</p>
<p>The JS File itself, where the TileLayer URL for the iframe embed function is defined, will never expire but change the filename when its content changes. But then you'll need the new embed.html to fetch the new js file under the new name. So we'll probably have to wait for the embed.html to be rebuilt and expire. That one has a caching time of 7 days. I'm not sure how often cron runs that would rebuild the html page to refer the new js file that has the correct tilelayer url.</p>
<p>You could try the developer tools of Firefox and Chrome (F12) to check for the files loaded and cached at <a href="https://www.openstreetmap.org/export/embed.html.">https://www.openstreetmap.org/export/embed.html.</a></p></div>
<div class="comment-info" id="comment-78106-info">
<span class="comment-age">(29 Dec '20, 15:40)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
<a name="78121"></a>
<div class="comment not_top_scorer" id="comment-78121">
<div class="comment-score" id="post-78121-score"></div>
<div class="comment-text"><p>I'm seeing the right url now, so it's working again. (Wed. 2020-12-30 at 10:45 UTC).</p></div>
<div class="comment-info" id="comment-78121-info">
<span class="comment-age">(30 Dec '20, 10:45)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-78096">
<span class="comments-showing">
            showing 5 of 7
        </span>
<a class="show-all-comments-link" href="#">show 2 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-78096-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="78107"></a>
<div class="answer" id="answer-container-78107">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/78107/up/" id="post-78107-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-78107-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/78107/down/" id="post-78107-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks. confirmed, it was only cache in firefox. Now same in all browsers I use. (Nothing visible on the map)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/78107/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Dec '20, 16:05</strong>
</p>
<img alt="straatmapje's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/27372ec72fe51e8c119c72581e4c0f29?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/19457/straatmapje">straatmapje</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="straatmapje has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/78107/">
                edited
                <strong>29 Dec '20, 16:05</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-78107">
<a name="78108"></a>
<div class="comment" id="comment-78108">
<div class="comment-score" id="post-78108-score"></div>
<div class="comment-text"><p>So your Firefox had a dns cache for the cdn-fastly-test url still pointing somewhere (which is live not the case anymore).
We'll still have to wait for the embed.html to update.</p></div>
<div class="comment-info" id="comment-78108-info">
<span class="comment-age">(29 Dec '20, 16:13)</span>
<a class="comment-user userinfo" href="/users/17439/spiekerooger">Spiekerooger</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-78107">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-78107-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/78091/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="ZQfJRybkCzp9dDpSB4eMS99v9BSLClJq"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>