<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/713/how-to-extract-partial-data-for-large-regions">How to extract partial data for large regions ?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/713/up/" id="post-713-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-713-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/713/down/" id="post-713-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/713/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   2
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'd like to greate an overview map of Europe, from Iceland to Greece, suitable for offline viewing.</p>
<p>What are my options to get e.g. </p>
<ul>
<li>all shoreline</li>
<li>all national boundaries</li>
<li>all big cities &gt;100.000 inhabitants</li>
<li>mayor waterways </li>
<li>mayor roads ?</li>
</ul>
<p>The dataset is to be extracted once, it is intended as an overview, not as a current (up-to-date) map. Besides that, shorelines hopefully do not change as much as to warrant an update on a map of Europe-scale ;-)</p>
<p>I'd prefer to have tha map data in a vectorized form so that I can use e.g. mapnik to render this data for any desired screen size and resolution myself. That XML format that one can get from API/ROMA/TRAPI seems fine.</p>
<p>I learned that many such projects start with downloading planet.osm and extracting data, but I feel that planet.osm and its unpacking process uses more harddisk space than I am able to commit to this process.</p>
<p>I tried the API with bbox=???? and tile=??? but this sems to return all available data within the reach of the specified bounding box/tile. Further, using the API with tile=??? won't work with tiles of eg. zoomlevel 3 that would be needed to make a nice overview.</p>
<p>My problem is that I don't want all of the detail data if possible, but also that I want to cover large regions. Thus, even downloading all of the "regional" extracts from geofabrik.de or <a href="http://cloudmade.com">cloudmade.com</a> is overkill because I'd have to throw away most of the data.</p>
<p>Thank you for any hints</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-download" href="/tags/download/" rel="tag" title="see questions tagged 'download'">download</a>
<a class="post-tag tag-link-overview" href="/tags/overview/" rel="tag" title="see questions tagged 'overview'">overview</a>
<a class="post-tag tag-link-extract" href="/tags/extract/" rel="tag" title="see questions tagged 'extract'">extract</a>
<a class="post-tag tag-link-api" href="/tags/api/" rel="tag" title="see questions tagged 'api'">api</a>
<a class="post-tag tag-link-export" href="/tags/export/" rel="tag" title="see questions tagged 'export'">export</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>27 Aug '10, 17:21</strong>
</p>
<img alt="uuser's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/6cfb88a463b8a6a51176196f74a0de58?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/182/uuser">uuser</a><br/>
<span class="score" title="46 reputation points">46</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="uuser has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/713/">
                edited
                <strong>08 Sep '10, 07:14</strong>
</a>
</p>
<img alt="spaetz's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/278e1af65e82993efd0ba7bbbacf6435?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11/spaetz">spaetz</a><br/>
<span class="score" title="853 reputation points">853</span><span title="8 badges"><span class="badge1">●</span><span class="badgecount">8</span></span><span title="16 badges"><span class="silver">●</span><span class="badgecount">16</span></span><span title="22 badges"><span class="bronze">●</span><span class="badgecount">22</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-713">
</div>
<div class="comment-tools" id="comment-tools-713">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-713-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/713/how-to-extract-partial-data-for-large-regions?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/713/how-to-extract-partial-data-for-large-regions?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/713/how-to-extract-partial-data-for-large-regions?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/713/how-to-extract-partial-data-for-large-regions?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="715"></a>
<div class="answer" id="answer-container-715">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/715/up/" id="post-715-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-715-score" title="current number of votes">
    8
</div>
<a class="ajax-command post-vote down" href="/vote/715/down/" id="post-715-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Extracting data from a planet file does not require unpacking it first. Indeed you could download, unpack, and filter the planet file in one step like so:</p>
<pre><code>wget -O- http://planet.openstreetmap.org/planet-latest.osm.bz2 | bzcat | osmosis --rx - &lt;filter args here&gt; --wx my-compressed-output.osm.gz
</code></pre>
<p>Your real problem is that not only do you want filtered data, you ideally want simplified data - for your purpose, having a country boundary in 100,000 points is a waste of space and processing time. Sadly there are no simple mechanisms for simplifying OSM data in that way.</p>
<p>Are you sure that you need OSM at all? Have a look at the <a href="http://naturalearthdata.com">Natural Earth</a> data set, which has administrative borders, populated places, and more, in different resolutions to choose from, and comes without any license restrictions (public domain).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/715/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>27 Aug '10, 18:29</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-715">
</div>
<div class="comment-tools" id="comment-tools-715">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-715-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="714"></a>
<div class="answer" id="answer-container-714">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/714/up/" id="post-714-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-714-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/714/down/" id="post-714-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You can download data with specific tags using the <a href="http://wiki.openstreetmap.org/wiki/XAPI">Extended API (XAPI)</a>, which allows downloads covering a much larger area than the main API. XAPI only supports one set of filters per download, so you will need several XAPI queries to get all the data you're interested in. If you need all the data in a single file, you can merge the files using <a href="http://wiki.openstreetmap.org/wiki/Osmosis">Osmosis</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/714/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>27 Aug '10, 17:31</strong>
</p>
<img alt="Jonathan%20Bennett's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9fe361843971cf8b23dc93517f00b996?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6/jonathan-bennett">Jonathan Ben...</a><br/>
<span class="score" title="8261 reputation points"><span class="">8.3k</span></span><span title="17 badges"><span class="badge1">●</span><span class="badgecount">17</span></span><span title="85 badges"><span class="silver">●</span><span class="badgecount">85</span></span><span title="108 badges"><span class="bronze">●</span><span class="badgecount">108</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Jonathan Bennett has 21 accepted answers">18%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-714">
<a name="729"></a>
<div class="comment" id="comment-729">
<div class="comment-score" id="post-729-score"></div>
<div class="comment-text"><p>I doubt XAPI is a practical way for downloading data for such large areas. There's limit of how much data you can download, so you'll be forced to split the download area into smaller tiles and then re-merge them into a single dataset.
Use cases like the one described in the question is one of the thing sorely missing in the OSM. One way on how such problems would be easier to solve would be to provide smaler OSM extracts in a lat/long grid. You could then pick and choose which "tiles" you'd need and then merge them using tools like osmosis.</p></div>
<div class="comment-info" id="comment-729-info">
<span class="comment-age">(01 Sep '10, 18:59)</span>
<a class="comment-user userinfo" href="/users/118/breki">Breki</a>
</div>
</div>
<a name="751"></a>
<div class="comment" id="comment-751">
<div class="comment-score" id="post-751-score">1</div>
<div class="comment-text"><p>XAPI can help to a large degree. For example, getting all city names within a lat/lon bounding box is pretty nice and easy with it. But what he wants will still require merging/filtering in any case...</p></div>
<div class="comment-info" id="comment-751-info">
<span class="comment-age">(08 Sep '10, 07:14)</span>
<a class="comment-user userinfo" href="/users/11/spaetz">spaetz</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-714">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-714-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/713/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="qGUeGlnaiesOR02lE1QWrnD1vUS1yNW6"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>