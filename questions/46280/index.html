<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/46280/is-there-a-list-with-the-colors-used-in-the-default-openstreetmap-style">Is there a list with the colors used in the default Openstreetmap style?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46280/up/" id="post-46280-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46280-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/46280/down/" id="post-46280-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/46280/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello everyone.</p>
<p>I'm writing a small android application with osmdroid that shows the map and uses the landcover information of the current position for some features. Since the tiles are being stored on the filesystem of the device either way by osmdroid, i had the idea to analyse them instead of using another service like overpass api, to reduce the traffic caused by my application and to allow usage in areas with bad or no internet.</p>
<p>On <a href="http://wiki.openstreetmap.org/wiki/Mapnik">http://wiki.openstreetmap.org/wiki/Mapnik</a> it says that <a href="https://github.com/gravitystorm/openstreetmap-carto">https://github.com/gravitystorm/openstreetmap-carto</a> is the official style of openstreetmap. Distributed over the relevant .mss files i can find a lot of color hex codes. </p>
<p>But for example the green <a href="http://www.color-hex.com/color/c8f9cc">#c8f9cc</a> which is used in the park at <a href="http://a.tile.openstreetmap.org/16/34126/21791.png">http://a.tile.openstreetmap.org/16/34126/21791.png</a> can't be found anywhere, neither by manual search (going into the files and strg+f) nor with the github search function. looking into the mss file it should be <a href="http://www.color-hex.com/color/c8facc">#c8facc</a></p>
<p>Another example would be the yellow <a href="http://www.color-hex.com/color/fef0ba">#fef0ba</a> which is used in this tile: <a href="http://c.tile.openstreetmap.org/19/274603/166642.png">http://c.tile.openstreetmap.org/19/274603/166642.png</a> where the beach is marked with natural=beach, so it should be <a href="http://www.color-hex.com/color/fff1ba">#fff1ba</a>.</p>
<p>Should be values are based on <a href="https://github.com/gravitystorm/openstreetmap-carto/blob/master/landcover.mss">https://github.com/gravitystorm/openstreetmap-carto/blob/master/landcover.mss</a></p>
<p>I suspect that the gamma adjustments for zoom level and number of nodes are the cause of this, for example:</p>
<pre><code>[feature = 'leisure_park'],
[feature = 'leisure_recreation_ground'] {
[zoom &gt;= 10] {
  polygon-fill: <a href="http://help.openstreetmap.org/users/7824/parkmebrent">@park</a>;
  [way_pixels &gt;= 4]  { **polygon-gamma: 0.75**; }
  [way_pixels &gt;= 64] { **polygon-gamma: 0.3**;  }
}
}
</code></pre>
<p>So i tried playing around with the original colors and the gamma adjustment tool of paint.net, but i was unable to reproduce the used colorcodes.</p>
<p>Is this really the right github project, or am i looking at the wrong one? If it is the wrong one, could you please point me into the right direction?</p>
<p>If it is the right one, what operation gets executed that produces the final colorcodes? Is there maybe somewhere a full list of them?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-rendering" href="/tags/rendering/" rel="tag" title="see questions tagged 'rendering'">rendering</a>
<a class="post-tag tag-link-tiles" href="/tags/tiles/" rel="tag" title="see questions tagged 'tiles'">tiles</a>
<a class="post-tag tag-link-style" href="/tags/style/" rel="tag" title="see questions tagged 'style'">style</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>31 Oct '15, 22:40</strong>
</p>
<img alt="EinFreierNick's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/991a1daf7de47d3dcc3d94933c70ce2d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/11637/einfreiernick">EinFreierNick</a><br/>
<span class="score" title="121 reputation points">121</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="5 badges"><span class="silver">●</span><span class="badgecount">5</span></span><span title="12 badges"><span class="bronze">●</span><span class="badgecount">12</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="EinFreierNick has one accepted answer">50%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/46280/">
                edited
                <strong>04 Nov '15, 19:37</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-46280">
<a name="46281"></a>
<div class="comment" id="comment-46281">
<div class="comment-score" id="post-46281-score"></div>
<div class="comment-text"><p>just a quick drop in (no time to think about your question in deep), maybe it is related: <a href="https://blog.openstreetmap.org/2015/10/30/openstreetmap-org-map-changing/">https://blog.openstreetmap.org/2015/10/30/openstreetmap-org-map-changing/</a></p></div>
<div class="comment-info" id="comment-46281-info">
<span class="comment-age">(31 Oct '15, 23:48)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
<a name="46283"></a>
<div class="comment" id="comment-46283">
<div class="comment-score" id="post-46283-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/5179/aseerel4c26">@aseerel4c26</a> that might be possible. At the green area ~1/4th directly below the the New York label the dark green changes from #AACAAE to #AACBAF</p></div>
<div class="comment-info" id="comment-46283-info">
<span class="comment-age">(01 Nov '15, 08:32)</span>
<a class="comment-user userinfo" href="/users/11637/einfreiernick">EinFreierNick</a>
</div>
</div>
<a name="46285"></a>
<div class="comment" id="comment-46285">
<div class="comment-score" id="post-46285-score">2</div>
<div class="comment-text"><p>meta: Welcome to OSM, <a href="http://help.openstreetmap.org/users/11637/einfreiernick"></a><a href="http://help.openstreetmap.org/users/11637/einfreiernick">@EinFreierNick</a>!</p></div>
<div class="comment-info" id="comment-46285-info">
<span class="comment-age">(01 Nov '15, 09:07)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-46280">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46280-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/46280/is-there-a-list-with-the-colors-used-in-the-default-openstreetmap-style?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/46280/is-there-a-list-with-the-colors-used-in-the-default-openstreetmap-style?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/46280/is-there-a-list-with-the-colors-used-in-the-default-openstreetmap-style?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/46280/is-there-a-list-with-the-colors-used-in-the-default-openstreetmap-style?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="46296"></a>
<div class="answer accepted-answer" id="answer-container-46296">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46296/up/" id="post-46296-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46296-score" title="current number of votes">
    7
</div>
<a class="ajax-command post-vote down" href="/vote/46296/down/" id="post-46296-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/46296/" rel="nofollow" title="EinFreierNick has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You are looking at the correct code for where the colours are defined.</p>
<p>The piece you are missing is how the stylesheet is converted into rendered tiles. The OSMF tileservers use <code>mod_tile</code> and renderd to generate the images. <code>renderd</code> has a <a href="https://github.com/openstreetmap/mod_tile/blob/6b9611aaf763f4f776d1fd363433aac7e25cb34b/src/gen_tile.cpp#L277">hard-coded mapnik image format of "png256"</a> which means that it uses a 256 colour palette with the default settings for calculating the palette. Any differences between the colours set in the stylesheet and those found in the tiles are almost certainly due to the palette creation process.</p>
<p>You can read more details on the <a href="https://github.com/mapnik/mapnik/wiki/OutputFormats">available mapnik image formats</a> on the mapnik wiki.</p>
<p>If you use other software to create the images, such as Tilemill, then you might find the colours are slightly different, either by using full 32bit non-paletted images, or paletted images created with different settings.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/46296/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>02 Nov '15, 11:07</strong>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Andy Allan has 46 accepted answers">28%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-46296">
<a name="46370"></a>
<div class="comment" id="comment-46370">
<div class="comment-score" id="post-46370-score">2</div>
<div class="comment-text"><p>And see <a href="https://github.com/gravitystorm/openstreetmap-carto/issues/1940">https://github.com/gravitystorm/openstreetmap-carto/issues/1940</a> for a related github discussion.</p></div>
<div class="comment-info" id="comment-46370-info">
<span class="comment-age">(03 Nov '15, 16:43)</span>
<a class="comment-user userinfo" href="/users/4653/gormo">gormo</a>
</div>
</div>
<a name="46388"></a>
<div class="comment" id="comment-46388">
<div class="comment-score" id="post-46388-score"></div>
<div class="comment-text"><p>uf, i think i'll have to drop this. there are too many unknowns and even phenomenons in the "creation of the colors". But still, thank you for your help.</p></div>
<div class="comment-info" id="comment-46388-info">
<span class="comment-age">(04 Nov '15, 16:12)</span>
<a class="comment-user userinfo" href="/users/11637/einfreiernick">EinFreierNick</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-46296">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46296-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="46282"></a>
<div class="answer" id="answer-container-46282">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/46282/up/" id="post-46282-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-46282-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/46282/down/" id="post-46282-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You are looking at the right code. Why the color code #c8facc defined in the style sheet ends up as #c8f9cc in the PNG I have no idea - I'd expect some alpha/antialiasing artifacts along the outline of the area but not in the centre. </p>
<p>There's a couple steps from the style sheet to the ready-made image. Some stylesheet instructions that deal with colours (lighten, darken, saturate etc.) are processed by the "carto" compiler that creates a Mapnik XML style description from the CSS files. But the actual drawing (during which the alpha values come into play) is handled by the Mapnik renderer, and more precisely by the AGG library it uses to do the drawing. If you can boil this down to a small test case - Mapnik instructed to render color A but instead rendered color B - then you could perhaps open a ticket on the Mapnik Github repository.</p>
<p>Having said that, trying to deduct geodata from tiles by color codes, and especially with a tolerance so small that a small change like  c8facc-&gt;c8f9cc trips up the logic, sounds extremely brittle to me. Remember, the map style might change at any time.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/46282/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 Nov '15, 00:29</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-46282">
<a name="46284"></a>
<div class="comment" id="comment-46284">
<div class="comment-score" id="post-46284-score"></div>
<div class="comment-text"><p>yes ofcause building in a tolerance probably wouldn't hurt. But when i have no clue why (and how) things are like they are, this is going to be rather wearsome. In this case the difference is 1-3 per color, but what if it is somewhere 15 and not 1-3?</p></div>
<div class="comment-info" id="comment-46284-info">
<span class="comment-age">(01 Nov '15, 08:33)</span>
<a class="comment-user userinfo" href="/users/11637/einfreiernick">EinFreierNick</a>
</div>
</div>
<a name="46286"></a>
<div class="comment" id="comment-46286">
<div class="comment-score" id="post-46286-score"></div>
<div class="comment-text"><p>Like it is happening with #FFF1BA -&gt; #FFF0A9 (see the edit of the start post). The difference in blue is 17.</p></div>
<div class="comment-info" id="comment-46286-info">
<span class="comment-age">(01 Nov '15, 12:50)</span>
<a class="comment-user userinfo" href="/users/11637/einfreiernick">EinFreierNick</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-46282">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-46282-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/46280/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="HZvmtAY9Aeqek4Jr1myd3hJgtsUOIaW5"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>