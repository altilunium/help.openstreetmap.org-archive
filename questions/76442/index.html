<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/76442/overpass-doesnt-find-all-banks">overpass doesn't find all banks</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/76442/up/" id="post-76442-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-76442-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/76442/down/" id="post-76442-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/76442/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello, I am new to using the overpass page, I am trying to extract the number of banks that are in an area of Bogota, Colombia. The problem is that I cannot find all the banks that are in a box. For example, Bancolombia, although when entering the open street map website, it appears in the category of amaneity bank. Thanks for any suggestions.</p>
<p>Your query in pretty Overpass QL: <a href="http://overpass-turbo.eu/s/XIn">overpass</a></p>
<pre><code>node
  ["amenity"="bank"]
  (4.6304414673187,-74.075607061386,4.6332058140013,-74.072549343109);
out;
</code></pre>
<p><a href="https://www.openstreetmap.org/way/392010374#map=18/4.63169/-74.07486">Open street map - Bancolombia (392010374)</a></p>
<pre><code>Etiquetas 
_____________________________________
addr:city         | Bogotá 
addr:country      | CO 
addr:district     | Teusaquillo 
addr:housenumber  | 40-95
addr:state        | Distrito Capital
addr:street       | Carrera 24
addr:suburb       | La Soledad
amenity           | bank
atm               | yes
brand             | Bancolombia
_____________________________________
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpassapi" href="/tags/overpassapi/" rel="tag" title="see questions tagged 'overpassapi'">overpassapi</a>
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-overpass-turbo" href="/tags/overpass-turbo/" rel="tag" title="see questions tagged 'overpass-turbo'">overpass-turbo</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>05 Sep '20, 00:33</strong>
</p>
<img alt="Rafael%20Eduardo%20Diaz's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e5f5e2b902f3ef1991c190295c84e794?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18929/rafael-eduardo-diaz">Rafael Eduar...</a><br/>
<span class="score" title="36 reputation points">36</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Rafael Eduardo Diaz has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-76442">
</div>
<div class="comment-tools" id="comment-tools-76442">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-76442-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/76442/overpass-doesnt-find-all-banks?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/76442/overpass-doesnt-find-all-banks?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/76442/overpass-doesnt-find-all-banks?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/76442/overpass-doesnt-find-all-banks?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="76450"></a>
<div class="answer accepted-answer" id="answer-container-76450">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/76450/up/" id="post-76450-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-76450-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/76450/down/" id="post-76450-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/76450/" rel="nofollow" title="Rafael Eduardo Diaz has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi Rafael, I think the problem is that your query is only looking for banks mapped as nodes, and some of the banks in your search area are mapped as ways. These are both valid methods of mapping banks, depending on the circumstances, so if you're searching for all banks you'll have to check nodes and ways.</p>
<p>Try this search instead:</p>
<pre><code>nwr["amenity"="bank"](4.6304414673187,-74.075607061386,4.6332058140013,-74.072549343109);
out body;
&gt;;
out skel qt;
</code></pre>
<p>The "nwr" command will search for both nodes and ways. It will also search for relations, which might be used to represent, for instance, a bank building with a courtyard. (Here's a bank mapped as a relation: <a href="https://www.openstreetmap.org/relation/2544819">https://www.openstreetmap.org/relation/2544819</a>.)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/76450/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Sep '20, 03:45</strong>
</p>
<img alt="jmapb's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/977d95e2184a885d9a01fb3297225872?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14350/jmapb">jmapb</a><br/>
<span class="score" title="3387 reputation points"><span class="">3.4k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="33 badges"><span class="silver">●</span><span class="badgecount">33</span></span><span title="61 badges"><span class="bronze">●</span><span class="badgecount">61</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="jmapb has 22 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-76450">
</div>
<div class="comment-tools" id="comment-tools-76450">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-76450-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="76443"></a>
<div class="answer" id="answer-container-76443">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/76443/up/" id="post-76443-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-76443-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/76443/down/" id="post-76443-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I find the straight Qverpass Query code too difficult so I used the Overpass Turbo Wizard to find banks with name=Bancolumbia in Bogota and it produced many nodes and polygons. Try it yourself — the link below will be a starting point. Your example asked only for nodes but some of the banks may be mapped as polygons so I did not restrict the query at all.</p>
<p>amenity=bank and brand=Bancolombia in Bogotá</p>
<p><a href="http://overpass-turbo.eu/s/XIq">http://overpass-turbo.eu/s/XIq</a></p>
<p>Note I used name=Bancolombia rather than brand=Bancolumbia. To obtain banks that had the brand tag but not the name tag, or vice-versa, just add the extra condition enclosed in parentheses with an or operation. </p>
<p>amenity=bank and (name=Bancolombia or brand=Bancolumbia) in Bogotá</p>
<p><a href="http://overpass-turbo.eu/s/XIs">http://overpass-turbo.eu/s/XIs</a></p>
<p>You could also restrict your query to your area of interest by using the bounding box data or enclosing the area in your view and deleting the "in Bogotá" part of the query.</p>
<p>Hope this helps.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/76443/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>05 Sep '20, 01:14</strong>
</p>
<img alt="AlaskaDave's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/04dddf6f5ffde333747d385af3ce5829?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5016/alaskadave">AlaskaDave</a><br/>
<span class="score" title="5415 reputation points"><span class="">5.4k</span></span><span title="76 badges"><span class="badge1">●</span><span class="badgecount">76</span></span><span title="107 badges"><span class="silver">●</span><span class="badgecount">107</span></span><span title="164 badges"><span class="bronze">●</span><span class="badgecount">164</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="AlaskaDave has 17 accepted answers">16%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/76443/">
                edited
                <strong>05 Sep '20, 01:20</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-76443">
<a name="76445"></a>
<div class="comment" id="comment-76445">
<div class="comment-score" id="post-76445-score"></div>
<div class="comment-text"><p>Hello thank you, how could I find all the banks in the polygon, which is what I need.</p></div>
<div class="comment-info" id="comment-76445-info">
<span class="comment-age">(05 Sep '20, 01:18)</span>
<a class="comment-user userinfo" href="/users/18929/rafael-eduardo-diaz">Rafael Eduar...</a>
</div>
</div>
<a name="76446"></a>
<div class="comment" id="comment-76446">
<div class="comment-score" id="post-76446-score"></div>
<div class="comment-text"><p>you could add type:relation connected with an AND to the previous examples:</p>
<p>type:relation and amenity=bank and (name=Bancolombia or brand=Bancolumbia) in Bogotá</p></div>
<div class="comment-info" id="comment-76446-info">
<span class="comment-age">(05 Sep '20, 01:22)</span>
<a class="comment-user userinfo" href="/users/5016/alaskadave">AlaskaDave</a>
</div>
</div>
<a name="76449"></a>
<div class="comment" id="comment-76449">
<div class="comment-score" id="post-76449-score"></div>
<div class="comment-text"><p>However, the AV Villas bank is yet to be found in this polygon. <a href="https://www.openstreetmap.org/way/392010458#map=19/4.63106/-74.07539">https://www.openstreetmap.org/way/392010458#map=19/4.63106/-74.07539</a></p></div>
<div class="comment-info" id="comment-76449-info">
<span class="comment-age">(05 Sep '20, 02:13)</span>
<a class="comment-user userinfo" href="/users/18929/rafael-eduardo-diaz">Rafael Eduar...</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-76443">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-76443-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="76470"></a>
<div class="answer" id="answer-container-76470">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/76470/up/" id="post-76470-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-76470-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/76470/down/" id="post-76470-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>"extract the number of banks that are in an area of Bogota"</p>
<p>This is the answer to question as written:</p>
<pre><code>{{geocodeArea:Bogotá}};
nwr[amenity=bank](area);
out count;
out meta center;
</code></pre>
<p><a href="https://overpass-turbo.eu/s/XJT">https://overpass-turbo.eu/s/XJT</a></p>
<p>It searches for an area with the name Bogotá. It then searches for all banks within the boundary of that area.
It outputs a visual representation ('map' tab) &amp; a count of all the banks broken down into how they're mapped ('data' tab).</p>
<p>If you wish to show the boundary:</p>
<pre><code>{{geocodeArea:Bogotá}};
rel(pivot)-&gt;.District;
nwr[amenity=bank](area);
out count;
out meta center;
way(r.District);
out geom;
</code></pre>
<p><a href="https://overpass-turbo.eu/s/XJU">https://overpass-turbo.eu/s/XJU</a></p>
<p>You can filter for specific banks by using the name tag, but use the '~' symbol instead of '=' which searches for all names that <strong>includes</strong> 'Bancolombia' It returns more items</p>
<pre><code>{{geocodeArea:Bogotá}};
nwr[amenity=bank][name~Bancolombia](area);
out count;
out meta center;
</code></pre>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/76470/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>06 Sep '20, 00:49</strong>
</p>
<img alt="DaveF's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1532/davef">DaveF</a><br/>
<span class="score" title="3264 reputation points"><span class="">3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="DaveF has 17 accepted answers">16%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/76470/">
                edited
                <strong>06 Sep '20, 00:54</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-76470">
</div>
<div class="comment-tools" id="comment-tools-76470">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-76470-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/76442/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="AyB6L91NTLCeVkZ0VhhA3PTilyke9oBA"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>