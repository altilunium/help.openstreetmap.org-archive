<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/68878/count-street-length-of-a-city">Count street length of a city</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68878/up/" id="post-68878-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68878-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/68878/down/" id="post-68878-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/68878/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Dear community,
i am aware that the topic is discussed on several places - nevertheless i didn't find an answer up to now (sorry when i missed it). 
My goal is simply to count the total street length of all streets within a certain city (the exact district) for a running project. Two things i can't solve:</p>
<ol>
<li>
<p>I am not able to export ONLY a certain city district within its exact borders - like: <a href="https://www.openstreetmap.org/relation/959809#map=12/48.8367/13.0167">https://www.openstreetmap.org/relation/959809#map=12/48.8367/13.0167</a>
The information is there ... in theory it would be enough to export only the data with a certain regional or community key. I tried it with <a href="https://export.hotosm.org">https://export.hotosm.org</a> - but even with a certain export shape formed i do not get the correct data. So i do not look for a rectangle data - only the data within the city border.</p>
</li>
<li>
<p>I can't find a solution to calculate the street length. In QGIS there is under vector/analytic-tools/summary line length - but this didn't get me any results and i am not sure if it counts only street length or every line. 
Than i found <strong>osm-length-2.pl</strong> but i could't get it to work - (besides the fact i do not have the right data). Sorry for this dummy question: I installed Perl - i have a OSM-file - i run osm-length-2.pl and how tell i the script to use my OSM-file? Within the script there is the info to use stdin - but i could't figure out HOW to use it and i am not a Perl-Programmer - sorry. </p>
</li>
</ol>
<p>Appreciate any help - didn't thought it is so difficult :-O
Christoph</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-length" href="/tags/length/" rel="tag" title="see questions tagged 'length'">length</a>
<a class="post-tag tag-link-street" href="/tags/street/" rel="tag" title="see questions tagged 'street'">street</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Apr '19, 20:16</strong>
</p>
<img alt="KCBCOM's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4a915fd75da0e50efe7bdaa2173cb998?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/16572/kcbcom">KCBCOM</a><br/>
<span class="score" title="41 reputation points">41</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="KCBCOM has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68878">
</div>
<div class="comment-tools" id="comment-tools-68878">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68878-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/68878/count-street-length-of-a-city?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/68878/count-street-length-of-a-city?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/68878/count-street-length-of-a-city?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/68878/count-street-length-of-a-city?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="68883"></a>
<div class="answer" id="answer-container-68883">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68883/up/" id="post-68883-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68883-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/68883/down/" id="post-68883-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>For a precise result, you cannot hope to cut out "all streets within a city" from OSM before you compute the length, because streets can cross the city boundary and if I understand you correctly, in this case you'd only want the length of the bit inside.</p>
<p>One way of getting this done is:</p>
<ol>
<li>Import OSM data for a rectangle around your city into a PostGIS database with osm2pgsql. This will not only give you the roads but also the city boundary if mapped in OSM.</li>
<li>Use PostGIS to sum up the length of geometries inside your area of interest ("clipping polygon") as discussed in <a href="https://help.openstreetmap.org/questions/49200/actual-road-length-of-exported-map">"Actual road length of exported map"</a></li>
</ol>
<p>QGIS will also allow you to filter out all roads and clip them at the polygon boundary but it is a more cumbersome and manual process.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/68883/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>23 Apr '19, 09:27</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68883">
</div>
<div class="comment-tools" id="comment-tools-68883">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68883-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="68971"></a>
<div class="answer" id="answer-container-68971">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68971/up/" id="post-68971-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68971-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/68971/down/" id="post-68971-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yet another possiblity: you can run a query on Overpass API. <a href="https://overpass-turbo.eu/s/Ii6">This one</a> produces a sample statistic for my home town, by value of highway. Length is in meters.</p>
<p>This should also point you to the real issues: You should decide for yourself whether you want to count footways and tracks or not. Another source of incertainty are dual carriageways; they would be counted twice because they are two ways in OpenStreetMap. Frontage roads, turn lanes and more may also affect the results. Finally, the request keeps ways on the boundary intact, thus slightly overestimating length values for that part of the problem.</p>
<p>Nontheless, for best effort guess data is for sure good enough.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/68971/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>26 Apr '19, 18:48</strong>
</p>
<img alt="Roland%20Olbricht's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fcfdb0825826fd13d2ff0d83d58819c6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3480/roland-olbricht">Roland Olbricht</a><br/>
<span class="score" title="6666 reputation points"><span class="">6.7k</span></span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Roland Olbricht has 40 accepted answers">36%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68971">
</div>
<div class="comment-tools" id="comment-tools-68971">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68971-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="68930"></a>
<div class="answer answered-by-owner" id="answer-container-68930">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/68930/up/" id="post-68930-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-68930-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/68930/down/" id="post-68930-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Thanks for your answer Frederik!
After trying your solution it still turned out a little bit complicated for me. So now i came up with following workaround (QGIS 3.6.2):</p>
<ol>
<li>Install QuickOSM-Plugin. Make a search with key=highway and In=NameOfYourCity. Under additionale settings (Dropdown) i checked only Node, Way, Relation and Line. Run the query.</li>
<li>The result will be a list of streets within your city - added in the layers panel. Now i made a right click on the new layer and opened the attribute table. Problem is: There are to many not valid streets (like private or motorway etc.) included. My solution was: A) Make the layer edible (Pen button). Sort by street name. Delete all streets without name. Rename the layer for this result. Problem now is: Some linking overland streets are missing B) Run the same query. Now delete all streets with name. Afterwards sort by highway and delete anything except primary, residential, secondary and tertiary. </li>
<li>Finally for calculating the length i added a new field with the field calculator button in the attribute table. Fieldname=length_km, Fieldtype=decimal(real), Fieldlength=10, precision=2. In the query window add:  $length  / 1000. Than press ok - sort the new field from the end to the beginning if you want and close the attribute table.</li>
<li>Open Vector/Analytic-Tools/Basic-Statistic-For-Fields. Choose your preferred layer for input and choose your new field lenght_km for calculation. Start the process. Under sum you can see the Km. </li>
</ol>
<p>Step 3+4 are fully described here: <a href="http://www.qgistutorials.com/en/docs/calculating_line_lengths.html">http://www.qgistutorials.com/en/docs/calculating_line_lengths.html</a></p>
<p>Greetings - Christoph</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/68930/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>24 Apr '19, 20:30</strong>
</p>
<img alt="KCBCOM's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4a915fd75da0e50efe7bdaa2173cb998?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/16572/kcbcom">KCBCOM</a><br/>
<span class="score" title="41 reputation points">41</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="KCBCOM has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/68930/">
                edited
                <strong>24 Apr '19, 20:34</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-68930">
</div>
<div class="comment-tools" id="comment-tools-68930">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-68930-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="74519"></a>
<div class="answer" id="answer-container-74519">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/74519/up/" id="post-74519-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-74519-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/74519/down/" id="post-74519-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Have you tried this package?</p>
<p><a href="https://github.com/JoaoCarabetta/osm-road-length">https://github.com/JoaoCarabetta/osm-road-length</a></p>
<p>It is super easy,</p>
<p>Install it: pip install osm-road-length</p>
<p>And run:</p>
<p>import osm_road_length
from shapely import wkt</p>
<p>geometry = wkt.loads('POLYGON((-43.2958811591311 -22.853167273541693,-43.30961406928735 -23.035275736044728,-43.115980036084224 -23.02010939749927,-43.157178766552974 -22.832917893834313,-43.2958811591311 -22.853167273541693))')</p>
<p>length = osm_road_length.get(geometry)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/74519/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>30 Apr '20, 22:29</strong>
</p>
<img alt="JOAO%20LUIZ's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/233392fffdef27e8db3a844cf613d74d?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/18304/joao-luiz">JOAO LUIZ</a><br/>
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="JOAO LUIZ has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-74519">
</div>
<div class="comment-tools" id="comment-tools-74519">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-74519-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/68878/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="IQNBem9iIEpGIChAYjUfLBBO5EUPtJ9M"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>