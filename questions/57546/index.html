<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/57546/query-keyvalue-pair-from-nominatim-coverage">Query Key,Value Pair From Nominatim "Coverage"</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/57546/up/" id="post-57546-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-57546-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/57546/down/" id="post-57546-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/57546/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I have spent about , 26 minutes, <strong>looking for a resource that would allow me to query ,key value pairs , on the Nominatim page  to check what type of </strong>coverage<strong> the city has? (I.E if it is a polygon?)</strong></p>
<hr/>
<h2>EXAMPLE</h2>
<p>Bellevue, Washington <a href="https://nominatim.openstreetmap.org/details.php?place_id=172952334">https://nominatim.openstreetmap.org/details.php?place_id=172952334</a></p>
<pre><code>Type    boundary:administrative
Last Updated    2017-06-20 21:45
Admin Level 8
Rank    City
Importance  0.470508128507761
Coverage    Polygon
</code></pre>
<hr/>
<p>Where would I even go for this information? "The information that I am looking for is the <strong>key, value pair  of "Coverage"</strong></p>
<h2>What I have searched for:</h2>
<p>I looked on this page and was not able to find it because "Coverage" is not a tag.
<a href="http://wiki.openstreetmap.org/wiki/Databases_and_data_access_APIs#Sources_of_OSM_Data">Databases and data access APIs </a></p>
<p>I know it says this "Quite a few people break this file down into smaller files for different regions and make extracts available separately on mirror servers. Various tools are available to cut the Planet file up into smaller areas if required."</p>
<p>One solution that I that I have found is to setup  Nominatim db  on a server which I do not want to do if I necessarily do not have too. </p>
<h2>Other Solutions</h2>
<p>Maybe I can query this with osmosis? But from what I read that , it does is allow you manipulate shape files. If what I seek is not in a shape, how would I be able to know beforehand?
<strong>Would it not be useful to know what actual shapes are in the file before you manipulate it?</strong>  Maybe this exists?</p>
<p>That is why I would like to look them up in a nominatum query by coverage. I simply would like to check if a list of city names exist as a polygon against the nominatum api. ( I.e Python:  for i is in Mylist: return True) 
<a href="http://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage_0.43#Default_Arguments">http://wiki.openstreetmap.org/wiki/Osmosis/Detailed_Usage_0.43#Default_Arguments</a></p>
<p>Maybe I suck at searching, I apologize in advance.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-python" href="/tags/python/" rel="tag" title="see questions tagged 'python'">python</a>
<a class="post-tag tag-link-query" href="/tags/query/" rel="tag" title="see questions tagged 'query'">query</a>
<a class="post-tag tag-link-api" href="/tags/api/" rel="tag" title="see questions tagged 'api'">api</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>10 Aug '17, 15:04</strong>
</p>
<img alt="Chris_L's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f53d8e0fa41764d2f69b3c5375501187?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14049/chris_l">Chris_L</a><br/>
<span class="score" title="21 reputation points">21</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Chris_L has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/57546/">
                edited
                <strong>10 Aug '17, 15:06</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-57546">
</div>
<div class="comment-tools" id="comment-tools-57546">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-57546-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/57546/query-keyvalue-pair-from-nominatim-coverage?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/57546/query-keyvalue-pair-from-nominatim-coverage?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/57546/query-keyvalue-pair-from-nominatim-coverage?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/57546/query-keyvalue-pair-from-nominatim-coverage?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="57548"></a>
<div class="answer" id="answer-container-57548">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/57548/up/" id="post-57548-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-57548-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/57548/down/" id="post-57548-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The database query Nominatim runs is (simplified) <code>SELECT name-&gt;'name' from placex where admin_level=8 and ST_GeometryType(geometry) in ('ST_Polygon','ST_MultiPolygon') AS isarea where ...;</code></p>
<p>Without setting up a Nominatim database you won't be able to run such a query against a whole country.</p>
<p>The next best would be to run queries against the Nominatim API <a href="http://nominatim.openstreetmap.org/search.php?city=bellevue&amp;country=united+states&amp;format=jsonv2&amp;polygon_geojson=1">http://nominatim.openstreetmap.org/search.php?city=bellevue&amp;country=united+states&amp;format=jsonv2&amp;polygon_geojson=1</a> and check the type of the geometry value ('Point', 'Polygon', 'MultiPolygon').</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/57548/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>10 Aug '17, 15:40</strong>
</p>
<img alt="mtmail's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/96aad1e1801b7ea36fba50687924c935?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/150/mtmail">mtmail</a><br/>
<span class="score" title="4757 reputation points"><span class="">4.8k</span></span><span title="15 badges"><span class="silver">●</span><span class="badgecount">15</span></span><span title="74 badges"><span class="bronze">●</span><span class="badgecount">74</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mtmail has 50 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-57548">
<a name="57972"></a>
<div class="comment" id="comment-57972">
<div class="comment-score" id="post-57972-score"></div>
<div class="comment-text"><p><a href="https://help.openstreetmap.org/users/150/mtmail"></a><a href="https://help.openstreetmap.org/users/150/mtmail">@mtmail</a> Thank you for your reply. When you say "check the type of the geometry value of each api call ('Point', 'Polygon', 'MultiPolygon')", would that not be computationally expensive and would I not be breaking the terms of service for nominatim? I would then have to parse each query to see if it contains a certain geometry.I think setting up the database, may be the way to go. Does Nominatim have a fuzzy search for the names? I saw this <a href="https://github.com/komoot/photon">https://github.com/komoot/photon</a></p></div>
<div class="comment-info" id="comment-57972-info">
<span class="comment-age">(12 Aug '17, 03:56)</span>
<a class="comment-user userinfo" href="/users/14049/chris_l">Chris_L</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-57548">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-57548-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/57546/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="5H8OWgyQqWyU1GhJVYNodWAFSxOsDkr6"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>