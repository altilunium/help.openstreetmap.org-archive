<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/32163/how-to-filter-only-street-names-and-city-id-in-osmfilter">How to filter only street names and city id in osmfilter?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/32163/up/" id="post-32163-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-32163-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/32163/down/" id="post-32163-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/32163/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello, I'm newbie with the .osm files and I'm trying to get All streets names from a Country with the ID of the city, filtering the file with osmfilter. Now I'm trying to get them with:
./osmfilter ...o5m --keep="highway=cycleway highway=path highway=primary highway=residential highway=tertiary" &gt; ....o5m
But I'm getting nodes without bodies and I can't figure out which is the City ID.</p>
<p>Regards</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-streets" href="/tags/streets/" rel="tag" title="see questions tagged 'streets'">streets</a>
<a class="post-tag tag-link-osmfilter" href="/tags/osmfilter/" rel="tag" title="see questions tagged 'osmfilter'">osmfilter</a>
<a class="post-tag tag-link-name" href="/tags/name/" rel="tag" title="see questions tagged 'name'">name</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>06 Apr '14, 17:58</strong>
</p>
<img alt="Petar81's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b1f1fd6379c69bc7e75b9eb7f90afdf6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8560/petar81">Petar81</a><br/>
<span class="score" title="26 reputation points">26</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="5 badges"><span class="bronze">●</span><span class="badgecount">5</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Petar81 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/32163/">
                edited
                <strong>06 Apr '14, 18:42</strong>
</a>
</p>
<img alt="scai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/158/scai">scai ♦</a><br/>
<span class="score" title="33317 reputation points"><span class="">33.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="309 badges"><span class="silver">●</span><span class="badgecount">309</span></span><span title="459 badges"><span class="bronze">●</span><span class="badgecount">459</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-32163">
<a name="32203"></a>
<div class="comment not_top_scorer" id="comment-32203">
<div class="comment-score" id="post-32203-score"></div>
<div class="comment-text"><p>are you sure that you only get an osm file with only nodes and NO ways?</p>
<p>And about the city where each way belongs to: Tell us where any filter program should know what belongs to a single city in the area you need. Are there good boundary relations or boundary ways for each city? or do you want to differentiate address data via the addr:city tag?</p></div>
<div class="comment-info" id="comment-32203-info">
<span class="comment-age">(08 Apr '14, 15:53)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="32227"></a>
<div class="comment not_top_scorer" id="comment-32227">
<div class="comment-score" id="post-32227-score"></div>
<div class="comment-text"><p>Hello, I'm not familiar with osm files like I said, I don't know if I need to get ways or nodes, I read somewhere in the documentation that for each street there is ID of the City which it belongs to. I extracted the Cities successfuly and now I'm trying to get the streets. That's all. I want to put them in 2 MySQL Tables and list them Cities and Streets</p></div>
<div class="comment-info" id="comment-32227-info">
<span class="comment-age">(09 Apr '14, 16:18)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
<a name="32229"></a>
<div class="comment" id="comment-32229">
<div class="comment-score" id="post-32229-score">1</div>
<div class="comment-text"><p>Would it be possible to link to the "I read somewhere..." link?</p></div>
<div class="comment-info" id="comment-32229-info">
<span class="comment-age">(09 Apr '14, 16:59)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="32239"></a>
<div class="comment" id="comment-32239">
<div class="comment-score" id="post-32239-score">1</div>
<div class="comment-text"><p>Petar, if you want to use raw OSM data for your aims you should at least get familiar with the model of OSM elements ... see <a href="http://wiki.openstreetmap.org/wiki/Elements">http://wiki.openstreetmap.org/wiki/Elements</a> as a starting point.</p>
<p>You wrote: "I extracted the cities successfully" ... How did you do that in detail?? Tell us please so that we can lead you to a solution.</p>
<p>Getting a list of all streets belonging to a certain city is definitively possible with OSM data.</p></div>
<div class="comment-info" id="comment-32239-info">
<span class="comment-age">(09 Apr '14, 19:33)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="32290"></a>
<div class="comment not_top_scorer" id="comment-32290">
<div class="comment-score" id="post-32290-score"></div>
<div class="comment-text"><p>Like I said I used OSMFILTER for this:</p>
<p>./osmfilter32 country.o5m --keep="place=city or place=town" --ignore-dependencies --keep-tags="all place= is_in:country= name:bg= name:en=" &gt; coutry-cities.o5m</p>
<p>Simple as that. Now I'm trying to get ALL street. I'm now using "&lt;way&gt;" and to keep the "addr:tag" BUT it not all &lt;way&gt;s have addr:city..., THIS is my osmfilter details:
./osmfilter32 coutry.o5m
--keep-ways
--drop-nodes
--keep-tags="is_in:country= name:en= name= name:bg="
--keep="highway=cycleway or highway=path or highway=primary or
 highway=residential or highway=tertiary"</p>
<blockquote>
<p>country-streets.o5m</p>
</blockquote></div>
<div class="comment-info" id="comment-32290-info">
<span class="comment-age">(11 Apr '14, 11:36)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
<a name="32294"></a>
<div class="comment" id="comment-32294">
<div class="comment-score" id="post-32294-score">1</div>
<div class="comment-text"><p>Please be aware that having any addr: tag on any highway in the main OSM data you have downloaded is basically WRONG!</p>
<p>Because addr: tags are to determine the position of addresses, and NOT any streets belonging to a city.</p>
<p>So if you have cities or places with addr: tags in your area, that is "not so good tagging style" about the raw OSM data.</p></div>
<div class="comment-info" id="comment-32294-info">
<span class="comment-age">(11 Apr '14, 12:26)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="32296"></a>
<div class="comment not_top_scorer" id="comment-32296">
<div class="comment-score" id="post-32296-score"></div>
<div class="comment-text"><p>So that's just Wrong, ok. Then how to use the raw OSM data to get streets names with Cities without Polygon in MySQL?</p></div>
<div class="comment-info" id="comment-32296-info">
<span class="comment-age">(11 Apr '14, 12:55)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
<a name="32298"></a>
<div class="comment" id="comment-32298">
<div class="comment-score" id="post-32298-score">2</div>
<div class="comment-text"><p>You need polygons, or to be more exact in OSM language: you need boundary relations that display the boundary around a city or a place.</p>
<p>It depends on the area what you are aiming at whethet these boundary relations are already in OSM database.</p>
<p>Either tell us the area you are aiming at, or have a look on your own via <a href="http://openmapsurfer.uni-hd.de">http://openmapsurfer.uni-hd.de</a> -&gt; choose layer: OSM roads grayscale and overlay: OSM admin boundaries.</p></div>
<div class="comment-info" id="comment-32298-info">
<span class="comment-age">(11 Apr '14, 14:14)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="32300"></a>
<div class="comment not_top_scorer" id="comment-32300">
<div class="comment-score" id="post-32300-score"></div>
<div class="comment-text"><p>I'm aming at: user inputs City from database and that selects all streets from the City.
Can you give me example how to extract all Cities and Streets from given Country and put them into MySQL? Thank you in advance =)</p></div>
<div class="comment-info" id="comment-32300-info">
<span class="comment-age">(11 Apr '14, 14:42)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
<a name="32301"></a>
<div class="comment not_top_scorer" id="comment-32301">
<div class="comment-score" id="post-32301-score"></div>
<div class="comment-text"><p>Re "... that selects all streets from the City" - what criteria should be used to determine that a particular street is within the city?</p></div>
<div class="comment-info" id="comment-32301-info">
<span class="comment-age">(11 Apr '14, 14:45)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="32302"></a>
<div class="comment not_top_scorer" id="comment-32302">
<div class="comment-score" id="post-32302-score"></div>
<div class="comment-text"><p>The criteria is if it is in the city(even if it continues to other city) or it's very small in size, to be shown as IN the city. And only show up 1 in the results(because I read that a street can be represented as multiple vectors).</p></div>
<div class="comment-info" id="comment-32302-info">
<span class="comment-age">(11 Apr '14, 14:50)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
<a name="32303"></a>
<div class="comment" id="comment-32303">
<div class="comment-score" id="post-32303-score">1</div>
<div class="comment-text"><p>OK, but how does the server that you're talking to know whether it's in a city or not?  A way in OSM will NOT have an attribute of what city it's in - it just has nodes, each of which has a latitude and longitude value (as previously mentioned, see <a href="http://wiki.openstreetmap.org/wiki/Elements">http://wiki.openstreetmap.org/wiki/Elements</a> for more info).</p></div>
<div class="comment-info" id="comment-32303-info">
<span class="comment-age">(11 Apr '14, 14:54)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="32305"></a>
<div class="comment not_top_scorer" id="comment-32305">
<div class="comment-score" id="post-32305-score"></div>
<div class="comment-text"><p>I found this link:
<a href="http://cdn.oreillystatic.com/en/assets/1/event/56/Openstreetmap%20-">http://cdn.oreillystatic.com/en/assets/1/event/56/Openstreetmap%20-</a><em>%20_PostGIS%7CMySQL%7CSpatiaLite</em>%20-<em>%20OpenLayers</em>%20From%20Map%20to%20Web%20Presentation.pdf</p>
<p>The guy which has created it, have tables(if you see page 21):
1) Planet_osm_polygon 2) Planet_osm_roads
He's using Planet polygon for cities(not sure how) and he has separate table for all roads.</p>
<p>But how to separate the Cities in the Planet_osm_polygon?</p>
<p>I want to do it like here:
<a href="http://services.gisgraphy.com/public/geocoding_worldwide.htm">http://services.gisgraphy.com/public/geocoding_worldwide.htm</a>
Choose Country, choose City, list all Streets. How can it be done?</p></div>
<div class="comment-info" id="comment-32305-info">
<span class="comment-age">(11 Apr '14, 15:24)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-32163">
<span class="comments-showing">
            showing 5 of 13
        </span>
<a class="show-all-comments-link" href="#">show 8 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-32163-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/32163/how-to-filter-only-street-names-and-city-id-in-osmfilter?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/32163/how-to-filter-only-street-names-and-city-id-in-osmfilter?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/32163/how-to-filter-only-street-names-and-city-id-in-osmfilter?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/32163/how-to-filter-only-street-names-and-city-id-in-osmfilter?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="32308"></a>
<div class="answer" id="answer-container-32308">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/32308/up/" id="post-32308-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-32308-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/32308/down/" id="post-32308-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>looking further at the website of gisgraphy.com they say that their framework is opensource, and they have installation instructions if you want to set up an own server.</p>
<p>Have you tried that already?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/32308/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>11 Apr '14, 16:30</strong>
</p>
<img alt="stephan75's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/245b73d4390c3408fe3c6da759b9897f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/99/stephan75">stephan75</a><br/>
<span class="score" title="12642 reputation points"><span class="">12.6k</span></span><span title="5 badges"><span class="badge1">●</span><span class="badgecount">5</span></span><span title="56 badges"><span class="silver">●</span><span class="badgecount">56</span></span><span title="210 badges"><span class="bronze">●</span><span class="badgecount">210</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="stephan75 has 37 accepted answers">6%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-32308">
<a name="32313"></a>
<div class="comment" id="comment-32313">
<div class="comment-score" id="post-32313-score"></div>
<div class="comment-text"><p>There is one problem - This is JAVA application. I need it to be PHP. Secondly for the server part I will need 155 GB of space which is a lot for just Streetnames and cities...
Is there an alternative way I can use for PHP?</p></div>
<div class="comment-info" id="comment-32313-info">
<span class="comment-age">(12 Apr '14, 11:15)</span>
<a class="comment-user userinfo" href="/users/8560/petar81">Petar81</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-32308">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-32308-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/32163/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="JZciv92ZDGuyMqDzRHpmUerRj5TxBLbD"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>