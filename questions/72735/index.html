<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/72735/merge-with-osmosis-problem-with-missing-version-attribute">Merge with Osmosis: problem with missing version attribute</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72735/up/" id="post-72735-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72735-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/72735/down/" id="post-72735-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/72735/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I want to merge two osm files (a certain area and the corresponding contour lines). The purpose is to create a combined osm file to be further processed with mkgmap.</p>
<p>Situation
The first file is a regular osm file coming from Overpass Turbo (with Meta attributes). The second was originally an shp file with contour lines of the same area, coming from a cartographic server of my region. I opened it in JOSM with the plugin OpenData and saved it as osm. Correctly, JOSM creates id's for each object, but not a "Version" attribute.</p>
<p>Problem
I want to merge both files using a command line program under Windows. I tried with Osmosis, but it fails because of the missing Version attributes in the second file. Any suggestion on how to force JOSM to produce Version attributes or to convince Osmosis to ignore the missing attributes?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-merge" href="/tags/merge/" rel="tag" title="see questions tagged 'merge'">merge</a>
<a class="post-tag tag-link-version" href="/tags/version/" rel="tag" title="see questions tagged 'version'">version</a>
<a class="post-tag tag-link-osmosis" href="/tags/osmosis/" rel="tag" title="see questions tagged 'osmosis'">osmosis</a>
<a class="post-tag tag-link-attribute" href="/tags/attribute/" rel="tag" title="see questions tagged 'attribute'">attribute</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>28 Jan '20, 11:47</strong>
</p>
<img alt="stenan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/5caa28ca253794e166c1ad85f15bdb45?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/17802/stenan">stenan</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="stenan has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72735">
</div>
<div class="comment-tools" id="comment-tools-72735">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72735-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/72735/merge-with-osmosis-problem-with-missing-version-attribute?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/72735/merge-with-osmosis-problem-with-missing-version-attribute?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/72735/merge-with-osmosis-problem-with-missing-version-attribute?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/72735/merge-with-osmosis-problem-with-missing-version-attribute?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="72737"></a>
<div class="answer" id="answer-container-72737">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/72737/up/" id="post-72737-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-72737-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/72737/down/" id="post-72737-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I would try to open both files in JOSM and merge the layers with it.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/72737/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>28 Jan '20, 13:34</strong>
</p>
<img alt="H_mlet's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/9434692e9afccaf03af5acf20b3a3279?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/13231/h_mlet">H_mlet</a><br/>
<span class="score" title="5443 reputation points"><span class="">5.4k</span></span><span title="17 badges"><span class="silver">●</span><span class="badgecount">17</span></span><span title="81 badges"><span class="bronze">●</span><span class="badgecount">81</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="H_mlet has 40 accepted answers">13%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-72737">
<a name="72741"></a>
<div class="comment" id="comment-72741">
<div class="comment-score" id="post-72741-score"></div>
<div class="comment-text"><p>Thanks, but this is not the idea. Maybe I should add a bit of context. I'm a hiking guide. Every time I explore a new hike, I want to have a fresh Garmin map for the area. Of course, paths change frequently, but contour lines don't. Thus, the process should look like this:</p>
<ul>
<li>I prepare just one time a big osm file with contour lines for the whole mountain area. </li>
<li>I prepare some scripts to run on the command line (on Windows), where the only parameter I have to change every time is the bounding box related to the small area which includes my new hike. Before every hike, I just want to run the scripts and produce quickly and with a semi-automated process a fresh Garmin map, ready to install. The scripts should do the following, in sequence:</li>
</ul>
<p>A. launch wget to download an up-to-date osm file related to the small area of my interest
B. launch osmconvert to cut the big osm file with the contour lines along the same bounding box
C. launch osmosis (or similar) to merge the two osm files
D. launch mkgmap to produce the map using a proper style sheet</p>
<p>Point C is where I'm stuck because of the missing Version attributes. All the rest works well.</p>
<p>Thanks</p></div>
<div class="comment-info" id="comment-72741-info">
<span class="comment-age">(28 Jan '20, 16:04)</span>
<a class="comment-user userinfo" href="/users/17802/stenan">stenan</a>
</div>
</div>
<a name="72743"></a>
<div class="comment" id="comment-72743">
<div class="comment-score" id="post-72743-score"></div>
<div class="comment-text"><p>I think you can fake version ids with osmconvert, see --fake-version here <a href="http://manpages.ubuntu.com/manpages/trusty/man1/osmconvert.1.html">http://manpages.ubuntu.com/manpages/trusty/man1/osmconvert.1.html</a></p></div>
<div class="comment-info" id="comment-72743-info">
<span class="comment-age">(28 Jan '20, 20:32)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
<a name="72744"></a>
<div class="comment" id="comment-72744">
<div class="comment-score" id="post-72744-score"></div>
<div class="comment-text"><p>Right, sorry I did not pay enough attention to the stance "command line program under Windows."</p>
<p>I was going to suggest osmium, as I've read it's much more flexible than osmosis, but I don't see any windows version.</p>
<p>As .osm is just xml, I think it should be quite easy to add a dummy Version attribute (put "1" everywhere). I would use sed, but if don't already have cygwin, it will be complicated. But search and replace tools must exists for windows.</p>
<p>You might also find an xml tool for windows commandline.</p>
<p>Regards.</p></div>
<div class="comment-info" id="comment-72744-info">
<span class="comment-age">(28 Jan '20, 21:06)</span>
<a class="comment-user userinfo" href="/users/13231/h_mlet">H_mlet</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-72737">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-72737-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/72735/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="I6VLQqmja2uWcuhUznk6aOdw8hQwLJ7b"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>