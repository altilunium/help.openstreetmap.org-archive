<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/80655/overpass-nodes-vs-pois">overpass nodes vs pois</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80655/up/" id="post-80655-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80655-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/80655/down/" id="post-80655-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/80655/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
i have a question about overpass results. Im looking for pois with the following query</p>
<p>amenity=marketplace OR bar OR biergarten OR cafe OR "fast food" OR "food court" OR pub OR restaurant OR shop=alcohol OR bakery OR butcher OR cheese OR chocolate OR coffee OR deli OR farm OR greengrocer OR organic OR pasta OR patisserie OR pizza OR tea OR supermarket OR pizza OR craft=brewery OR caterer OR winery OR distillery</p>
<p>for Seattle i get these results
<a href="https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx">https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx</a>
for each city i try, the number of pois are more or less the half of the number of nodes, always.
Also if i export as kml and convert it to csv i will have only the half of the locations (so, only pois).
I scraped yelp, tripadvisor and gmaps for several cities (with other tools) and im sure the results are close to the number of nodes on overpass (not to the number of pois).
Check this <a href="https://monosnap.com/file/El6H9xwIqHdcAbPrU27SYHjhamug3H">https://monosnap.com/file/El6H9xwIqHdcAbPrU27SYHjhamug3H</a>
how can i extract all the nodes?
thanks! </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-nodes" href="/tags/nodes/" rel="tag" title="see questions tagged 'nodes'">nodes</a>
<a class="post-tag tag-link-pois" href="/tags/pois/" rel="tag" title="see questions tagged 'pois'">pois</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Jun '21, 11:02</strong>
</p>
<img alt="eldoland's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/8bda60ea8e9b91cb7442f70e15d00944?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20354/eldoland">eldoland</a><br/>
<span class="score" title="11 reputation points">11</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="eldoland has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80655/">
                edited
                <strong>22 Jun '21, 18:08</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80655">
<a name="80660"></a>
<div class="comment" id="comment-80660">
<div class="comment-score" id="post-80660-score">2</div>
<div class="comment-text"><p>Can't do much to help without the full routine. Post a link.</p></div>
<div class="comment-info" id="comment-80660-info">
<span class="comment-age">(22 Jun '21, 14:14)</span>
<a class="comment-user userinfo" href="/users/1532/davef">DaveF</a>
</div>
</div>
<a name="80665"></a>
<div class="comment" id="comment-80665">
<div class="comment-score" id="post-80665-score"></div>
<div class="comment-text"><p>oh ok!
here we go
<a href="https://overpass-turbo.eu/s/18Hu">https://overpass-turbo.eu/s/18Hu</a></p>
<p>thanks!</p></div>
<div class="comment-info" id="comment-80665-info">
<span class="comment-age">(22 Jun '21, 18:01)</span>
<a class="comment-user userinfo" href="/users/20354/eldoland">eldoland</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80655">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80655-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/80655/overpass-nodes-vs-pois?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/80655/overpass-nodes-vs-pois?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/80655/overpass-nodes-vs-pois?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/80655/overpass-nodes-vs-pois?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="80666"></a>
<div class="answer" id="answer-container-80666">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80666/up/" id="post-80666-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80666-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/80666/down/" id="post-80666-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>For each POI type, your Overpass query is searching for nodes, ways, and relations. </p>
<ul>
<li>A POI mapped as node will return one node. </li>
<li>A POI mapped as a four-sided way like a rectangle will return four nodes, one for each corner.</li>
<li>A POI mapped as a more complex polygon, or as a relation, may return many nodes.</li>
</ul>
<p>So the node total that Overpass returns is the number of nodes used to draw all of these things on the map. If even one result is a way or relation, then the total number of nodes will be greater than the total number of POIs.</p>
<p>If you search for only POIs mapped as nodes, the node total will be the same as the POI total. See this search (which is just your search with the ways and relations commented out): <a href="https://overpass-turbo.eu/s/18HA">https://overpass-turbo.eu/s/18HA</a></p>
<p>See the OSM wiki for more detailed information about the data elements: <a href="https://wiki.openstreetmap.org/wiki/Elements">https://wiki.openstreetmap.org/wiki/Elements</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80666/" rel="nofollow" title="answer permanent link">permanent link</a></span>
<div class="community-wiki">
        This answer is marked "community wiki".
        
    </div>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Jun '21, 18:29</strong>
</p>
<img alt="jmapb's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/977d95e2184a885d9a01fb3297225872?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/14350/jmapb">jmapb</a><br/>
<span class="score" title="3387 reputation points"><span class="">3.4k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="33 badges"><span class="silver">●</span><span class="badgecount">33</span></span><span title="61 badges"><span class="bronze">●</span><span class="badgecount">61</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="jmapb has 22 accepted answers">22%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80666/">
                edited
                <strong>22 Jun '21, 18:43</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80666">
<a name="80667"></a>
<div class="comment" id="comment-80667">
<div class="comment-score" id="post-80667-score"></div>
<div class="comment-text"><p>Hi,
thanks for clarifying!
so that means that actually osm is missing many pois.
I got many more results scraping other resources (yelp, tripadvisor and gmaps).
Do you agree?
thanks!</p></div>
<div class="comment-info" id="comment-80667-info">
<span class="comment-age">(22 Jun '21, 18:53)</span>
<a class="comment-user userinfo" href="/users/20354/eldoland">eldoland</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80666">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80666-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="80668"></a>
<div class="answer" id="answer-container-80668">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80668/up/" id="post-80668-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80668-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/80668/down/" id="post-80668-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>OK. Lots of variables here.  First off, don't assume OSM (or other databases) are 100% accurate.
Wizard isn't really that detailed. It takes a few, wild guesses For instance your "chocolate" &amp; "coffee" returns vending machine &amp; farm returns beehive! It also searches for both pizza &amp; pasta using cuisine=italian. I /think/ you need to contain the or operators within brackets. It easier to learn to write your own routines IMO.
Use the OSM wiki to find the more accurate tags to search for.
<a href="https://wiki.openstreetmap.org/wiki/Main_Page">https://wiki.openstreetmap.org/wiki/Main_Page</a></p>
<p>This is the condensed routine: <a href="https://overpass-turbo.eu/s/18HF">https://overpass-turbo.eu/s/18HF</a></p>
<pre><code>{{geocodeArea:Seattle}}-&gt;.Seattle;
(
    nwr[amenity~"^(marketplace|bar|biergarten|cafe|fast_food|food_court|pub|restaurant)$"](area.Seattle);
    nwr[shop~"^(alcohol|bakery|butcher|dairy|deli|greengrocer|pastry|supermarket)$"](area.Seattle);
  nwr[amenity=vending_machine][vending~"^(ice_cream|coffee)$"](area.Seattle);
    nwr[man_made=beehive](area.Seattle);

  nwr[amenity=recycling][recycling_type=container]["recycling:green_waste"=yes](area.Seattle);
  nwr[amenity=restaurant][cuisine=italian](area.Seattle);

  nwr[craft~"^(brewery|caterer]|winery|distillery)$"](area.Seattle);
);
out center;
</code></pre>
<p>Use <code>nwr</code> instead of node,way,relation</p>
<p>Use | as a replacement for 'or'</p>
<p>Use RegEx ~"^ and )$" to ensure only those individual words are searched for.</p>
<p>Use <code>out center</code> to return all data as POIs</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80668/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Jun '21, 19:19</strong>
</p>
<img alt="DaveF's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c9c8b421ad22f51ddd62f23413717036?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1532/davef">DaveF</a><br/>
<span class="score" title="3264 reputation points"><span class="">3.3k</span></span><span title="84 badges"><span class="badge1">●</span><span class="badgecount">84</span></span><span title="98 badges"><span class="silver">●</span><span class="badgecount">98</span></span><span title="133 badges"><span class="bronze">●</span><span class="badgecount">133</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="DaveF has 17 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80668">
<a name="80675"></a>
<div class="comment" id="comment-80675">
<div class="comment-score" id="post-80675-score"></div>
<div class="comment-text"><p>Hi DaveF
thanks again for your reply!
yes totally agree there is no 100% accurate database, that's why i scrape different sources and then i merge them all together.
Thanks for the code, will try it and play around with tags!</p></div>
<div class="comment-info" id="comment-80675-info">
<span class="comment-age">(23 Jun '21, 12:59)</span>
<a class="comment-user userinfo" href="/users/20354/eldoland">eldoland</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80668">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80668-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="80663"></a>
<div class="answer answered-by-owner" id="answer-container-80663">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/80663/up/" id="post-80663-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-80663-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/80663/down/" id="post-80663-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi Dave,
thanks for your reply
ok, try this query</p>
<p>amenity=marketplace OR bar OR biergarten OR cafe OR "fast food" OR "food court" OR pub OR restaurant OR shop=alcohol OR bakery OR butcher OR cheese OR chocolate OR coffee OR deli OR farm OR greengrocer OR organic OR pasta OR patisserie OR pizza OR tea OR supermarket OR pizza OR craft=brewery OR caterer OR winery OR distillery in Seattle</p>
<p>through the wizard
i got this <a href="https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx">https://monosnap.com/file/l5fDAzCZ7XBNXEPBABB6pr9cQmuIHx</a>
if you export the pois, you will get 2k something results
but the nodes are twice as much as the pois</p>
<p>I scraped Seattle on yelp and tripadvisor with webscraper.io and i got 5928 results.
So i guess the number of nodes is more accurate than the number of pois.
My question is, how can i get the nodes instead of pois?
thanks!</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/80663/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Jun '21, 17:34</strong>
</p>
<img alt="eldoland's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/8bda60ea8e9b91cb7442f70e15d00944?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/20354/eldoland">eldoland</a><br/>
<span class="score" title="11 reputation points">11</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="eldoland has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/80663/">
                edited
                <strong>22 Jun '21, 17:34</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-80663">
<a name="80664"></a>
<div class="comment" id="comment-80664">
<div class="comment-score" id="post-80664-score"></div>
<div class="comment-text"><p>It's much easier to help you if you post a link using the 'share' button on the Turbo webpage.</p></div>
<div class="comment-info" id="comment-80664-info">
<span class="comment-age">(22 Jun '21, 17:59)</span>
<a class="comment-user userinfo" href="/users/1532/davef">DaveF</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-80663">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-80663-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/80655/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="cu8Em3JTZXK8V3wAe7Kdqzay8RxWqmvq"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>