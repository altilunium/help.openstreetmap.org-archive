<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/27183/how-i-can-find-postcode-from-osm_id-for-uk">How I can find postcode from osm_id for UK?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/27183/up/" id="post-27183-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-27183-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/27183/down/" id="post-27183-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/27183/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello I am making a map for a project in UK and I try to add some data about the buildings. The only unique id that I have form my data is the postcode for each building. 
The map that I got from Open Street Map, for each building there is an osm_id and I would like to join the data with a database that each osm_id has one postcode and after I would be able to add any data that I have for each building with postcode.</p>
<p>Is it possible to find a database with postcodes and osm_id for UK?</p>
<p>Thanks. </p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-postcode" href="/tags/postcode/" rel="tag" title="see questions tagged 'postcode'">postcode</a>
<a class="post-tag tag-link-uk" href="/tags/uk/" rel="tag" title="see questions tagged 'uk'">uk</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>15 Oct '13, 13:01</strong>
</p>
<img alt="chgiorgos's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/999b267b4faa3d2817bcc3ca738734ef?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7597/chgiorgos">chgiorgos</a><br/>
<span class="score" title="41 reputation points">41</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="chgiorgos has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-27183">
<a name="27196"></a>
<div class="comment" id="comment-27196">
<div class="comment-score" id="post-27196-score"></div>
<div class="comment-text"><p>I am not sure whether this can help:</p>
<p><a href="http://wiki.openstreetmap.org/wiki/Free_The_Postcode">http://wiki.openstreetmap.org/wiki/Free_The_Postcode</a></p>
<p>And I fear you have to specify your question with some examples:</p>
<p>Do you have external own data without postal codes, and you want to add them including the correct postal code, and you want to derive the postal code from already existing OSM objects?</p></div>
<div class="comment-info" id="comment-27196-info">
<span class="comment-age">(15 Oct '13, 17:22)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
<a name="27198"></a>
<div class="comment" id="comment-27198">
<div class="comment-score" id="post-27198-score">1</div>
<div class="comment-text"><p>Well, I have Excel data for energy consumption in UK for the buildings. Also I have the map form open street map data with the buildings. To connect the data with the map I need a unique ID. For the buildings in the map the ID is the osm_id. For my energy consumption data the unique ID is the postcode. So I am looking for a database that is giving me for each postcode in UK the osm_id in the open street map.</p>
<p>For example if I am looking in the online map for a building with postcode EC1A 2DE I write the post code in the search engine and it shows me the exact building and at the information of that building is written the osm_id (in this case 338475896). So, maybe there is a database with this combination (osm_id - postcode).</p></div>
<div class="comment-info" id="comment-27198-info">
<span class="comment-age">(15 Oct '13, 17:51)</span>
<a class="comment-user userinfo" href="/users/7597/chgiorgos">chgiorgos</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-27183">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-27183-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/27183/how-i-can-find-postcode-from-osm_id-for-uk?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/27183/how-i-can-find-postcode-from-osm_id-for-uk?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/27183/how-i-can-find-postcode-from-osm_id-for-uk?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/27183/how-i-can-find-postcode-from-osm_id-for-uk?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="27203"></a>
<div class="answer" id="answer-container-27203">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/27203/up/" id="post-27203-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-27203-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/27203/down/" id="post-27203-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I suspect that there won't be an already-existing complete database which contains a list of OSM IDs and postcodes.  This is because many people who have added buildings to OSM haven't added their postcodes.  For example, if you search OSM for your example postcode "EC1A 2DE" no exact match comes back.  Nearby you can see <a href="http://www.openstreetmap.org/browse/way/30610281">this church</a> (which has got a postcode mapped) and <a href="http://www.openstreetmap.org/browse/way/33128759">this adjacent building</a> which hasn't.</p>
<p>It may be possible to infer a postcode for an OSM ID from various external sources - here's <a href="http://sk53-osm.blogspot.co.uk/2013/03/local-government-open-data-2-checking.html">a blog post by <a href="/users/647/sk53">@SK53</a></a> talking about one approach.  I wouldn't underestimate the work required though.</p>
<p>Obviously postcode isn't unique except for large buildings - although maybe you're only interested in certain large buildings which do have a unique postcode?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/27203/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Oct '13, 20:04</strong>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SomeoneElse has 228 accepted answers">16%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-27203">
</div>
<div class="comment-tools" id="comment-tools-27203">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-27203-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="27224"></a>
<div class="answer" id="answer-container-27224">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/27224/up/" id="post-27224-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-27224-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/27224/down/" id="post-27224-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I am afraid this approach is doomed to failure.</p>
<p>The problems are several:</p>
<ul>
<li>OSM Ids are system keys, they do not correspond to anything in the real world. They are not unique identifiers for things in the real world. A building may be represented by several osm objects, several buildings may be represented by a single osm objects, or a building may be built up from several objects in a relation. </li>
<li>OSM Ids are not persistent, and may get reused in other objects. (The actual risk of this is small, as IDs are not reused once deleted).</li>
<li>OSM Ids are only unique within a class of object (nodes, ways, relations). You need to use a compound key of object type and osm_id to ensure uniqueness within OSM.</li>
<li>OSM has a tiny fraction (less than 2%) of all buildings in the UK mapped.</li>
<li>Postcodes are not unique identifiers either.</li>
<li>Postcodes are based on addresses (technically delivery points) not buildings: a building can have more than one address (e.g., a block of flats), many buildings share a postcode. Some buildings don't have postal addresses. Postal delivery offices may have hundreds of postcodes.</li>
<li>Postcode geodata is provided with a centroid which should co-locate with only one of the buildings, there is typically around a 2% chance that it is the right one for houses, probably better for some commercial properties. For campus organisations such as universities the chance is much lower as all buildings share a postcode.</li>
<li>There are no freely-available polygons which accurately show the area which contains locations for a given postcode. Using Voronoi polygons on the OpenData sets is not an adequate substitute.</li>
<li>Postcodes are intermingled (a block of flats may have one postcode, and the buildings either side another different postcode). Therefore closeness to the centroid is only a partial indicator of matching.</li>
<li>Postcodes are usually assigned on the basis of streets. It is possible for a centroid to be located closer to another street than the one it applies to.</li>
</ul>
<p>If the data you have only contains the postcode as a building locator then it is not possible to find the building in <strong>any</strong> dataset. If you have some other criteria (for instance are the buildings public buildings) then this may help by reducing the candidates.</p>
<p>If you have addresses then it may be possible to enrich your data with a location by using Nominatim to provide a set of co-ordinates. Again this is chancy because OSM only has a small proportion of UK addresses mapped.</p>
<p>Sorry for having to be negative about your project, but I'd hate you expending a lot of effort for no result.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/27224/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 Oct '13, 12:37</strong>
</p>
<img alt="SK53's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/06cd84075f1adc2870ad102c7233e661?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/647/sk53">SK53 ♦</a><br/>
<span class="score" title="28084 reputation points"><span class="">28.1k</span></span><span title="48 badges"><span class="badge1">●</span><span class="badgecount">48</span></span><span title="268 badges"><span class="silver">●</span><span class="badgecount">268</span></span><span title="433 badges"><span class="bronze">●</span><span class="badgecount">433</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SK53 has 121 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-27224">
<a name="27225"></a>
<div class="comment" id="comment-27225">
<div class="comment-score" id="post-27225-score"></div>
<div class="comment-text"><p>You broke my heart but I will keep trying. :)
The data that I have to locate a building is:</p>
<p>Address 1 =Flat A </p>
<p>Address 2 = 111, Brixton Hill</p>
<p>City = London</p>
<p>Postcode = SW2 1AA</p>
<p>I told that the postcode is unique for each building (in UK) but maybe is not true. What do you think? With this data would be able to connect my data with open street map buildings?</p></div>
<div class="comment-info" id="comment-27225-info">
<span class="comment-age">(16 Oct '13, 12:51)</span>
<a class="comment-user userinfo" href="/users/7597/chgiorgos">chgiorgos</a>
</div>
</div>
<a name="27227"></a>
<div class="comment" id="comment-27227">
<div class="comment-score" id="post-27227-score">2</div>
<div class="comment-text"><p>No there is hope! Read up on Nominatim on the wiki and you can find how to get a lat/lon pair for such addresses (when they are in OSM).
With that you can find any building at that location.</p>
<p>Start with an area which is well-mapped for address information: Sutton Coldfield, Tendring and Broxtowe are all areas with good quality addresses. London is patchy, but probably reasonably good inside the Circle Line.</p></div>
<div class="comment-info" id="comment-27227-info">
<span class="comment-age">(16 Oct '13, 13:00)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-27224">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-27224-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="27212"></a>
<div class="answer" id="answer-container-27212">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/27212/up/" id="post-27212-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-27212-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/27212/down/" id="post-27212-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you're prepared to do a bit of programming:</p>
<p>Download an extract of OpenStreetMap data for the UK from <a href="http://download.geofabrik.de/europe/british-isles.html">Geofabrik</a>. Save this to a database, for example by using the osm2pgsql tool to save it to a Postgres database with the PostGIS extension.</p>
<p>Download the <a href="http://www.ordnancesurvey.co.uk/business-and-government/products/code-point-open.html">CodePoint Open</a> dataset from Ordnance Survey. This is free of charge and licensed liberally. Add this to another table in the same database.</p>
<p>You can then create a spatial query to associate OSM IDs (in one table) with postcodes (in another). The <a href="http://postgis.net/docs/manual-2.0/PostGIS_Special_Functions_Index.html">PostGIS docs</a> explain the functions you can use in writing your SQL.</p>
<p>This is not for the beginner, but if you have some experience in SQL databases, you shouldn't find it impossible.</p>
<p>Note that CodePoint Open only has the centrepoint of each postcode area, not the full boundary; so this approach will sometimes suggest postcodes which are slightly 'off'. The only way to avoid this is to buy the expensive full data from Royal Mail or Ordnance Survey.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/27212/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Oct '13, 23:57</strong>
</p>
<img alt="Richard's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/08324717c25d6067fa4ff23ef37d455f?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5/richard">Richard ♦</a><br/>
<span class="score" title="30902 reputation points"><span class="">30.9k</span></span><span title="44 badges"><span class="badge1">●</span><span class="badgecount">44</span></span><span title="279 badges"><span class="silver">●</span><span class="badgecount">279</span></span><span title="412 badges"><span class="bronze">●</span><span class="badgecount">412</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Richard has 98 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/27212/">
                edited
                <strong>16 Oct '13, 00:00</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-27212">
<a name="27222"></a>
<div class="comment" id="comment-27222">
<div class="comment-score" id="post-27222-score"></div>
<div class="comment-text"><p>I think that I understand what you are saying. I know a little SQL but I still don't understand what query I should write. Because the osm_id is random.</p>
<p>I did something else, I found a database with post codes and longitude, latitude and I add the points in the GIS, after I add the map data. I selected by location all the building that they have a point inside. So now I have all the buildings with a point inside that is written its postcode.</p>
<p>With this method I have 2 problems. I don't know how to join the tables "by location" (because know I have something common. The data are in the point that is into the building). So I want to take the data from, the point and put it in the building. </p>
<p>The second problem is that only the 30% of the points are located in a building.</p></div>
<div class="comment-info" id="comment-27222-info">
<span class="comment-age">(16 Oct '13, 10:39)</span>
<a class="comment-user userinfo" href="/users/7597/chgiorgos">chgiorgos</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-27212">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-27212-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/27183/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="rkKP24dPHEmy6afLqXWGlFgwTFgtSoxj"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>