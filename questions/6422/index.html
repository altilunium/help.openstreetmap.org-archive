<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/6422/invisible-buildings">Invisible buildings?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6422/up/" id="post-6422-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6422-score" title="current number of votes">
    7
</div>
<a class="ajax-command post-vote down" href="/vote/6422/down/" id="post-6422-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/6422/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,
can anybody tell me why way <a href="http://www.openstreetmap.org/browse/way/122184832">122184832</a> is visible as a building while the adjacent way <a href="http://www.openstreetmap.org/browse/way/122186232">122186232</a>, tagged identically, is not visible on the map (Mapnik renderer)?</p>
<p>Thanks</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-building" href="/tags/building/" rel="tag" title="see questions tagged 'building'">building</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
<a class="post-tag tag-link-visibility" href="/tags/visibility/" rel="tag" title="see questions tagged 'visibility'">visibility</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>19 Jul '11, 08:39</strong>
</p>
<img alt="Pyrokrat's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/48b105baf02b114ad41ef10f1dfd55f5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1757/pyrokrat">Pyrokrat</a><br/>
<span class="score" title="106 reputation points">106</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Pyrokrat has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/6422/">
                retagged
                <strong>19 Jul '11, 14:46</strong>
</a>
</p>
<img alt="banoffee's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/b95e1b5cb818be577b5561688a50368c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1620/banoffee">banoffee</a><br/>
<span class="score" title="884 reputation points">884</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="14 badges"><span class="silver">●</span><span class="badgecount">14</span></span><span title="21 badges"><span class="bronze">●</span><span class="badgecount">21</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-6422">
<a name="6425"></a>
<div class="comment" id="comment-6425">
<div class="comment-score" id="post-6425-score"></div>
<div class="comment-text"><p>Very good question. Osmarender shows them.</p></div>
<div class="comment-info" id="comment-6425-info">
<span class="comment-age">(19 Jul '11, 09:35)</span>
<a class="comment-user userinfo" href="/users/8/petschge">petschge</a>
</div>
</div>
<a name="10301"></a>
<div class="comment" id="comment-10301">
<div class="comment-score" id="post-10301-score"></div>
<div class="comment-text"><p>Any new info?</p></div>
<div class="comment-info" id="comment-10301-info">
<span class="comment-age">(28 Jan '12, 19:54)</span>
<a class="comment-user userinfo" href="/users/1619/lm_1">LM_1</a>
</div>
</div>
<a name="10302"></a>
<div class="comment" id="comment-10302">
<div class="comment-score" id="post-10302-score"></div>
<div class="comment-text"><p>Not yet, the buildings still don't render as of today.</p></div>
<div class="comment-info" id="comment-10302-info">
<span class="comment-age">(28 Jan '12, 20:42)</span>
<a class="comment-user userinfo" href="/users/1757/pyrokrat">Pyrokrat</a>
</div>
</div>
<a name="19386"></a>
<div class="comment" id="comment-19386">
<div class="comment-score" id="post-19386-score">2</div>
<div class="comment-text"><p>Update one year later: The buildings still don't render.</p></div>
<div class="comment-info" id="comment-19386-info">
<span class="comment-age">(28 Jan '13, 07:13)</span>
<a class="comment-user userinfo" href="/users/1757/pyrokrat">Pyrokrat</a>
</div>
</div>
<a name="19390"></a>
<div class="comment not_top_scorer" id="comment-19390">
<div class="comment-score" id="post-19390-score"></div>
<div class="comment-text"><p>I guess uploading a new version of these objects will fix the problem. In JOSM this can be done by adding a tag and removing it again, the object will then be seen as modified and on upload a new version will be created without changing anything. But the actual source of the problem has to be identified in order to avoid further similar issues.</p></div>
<div class="comment-info" id="comment-19390-info">
<span class="comment-age">(28 Jan '13, 09:34)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="19427"></a>
<div class="comment" id="comment-19427">
<div class="comment-score" id="post-19427-score">2</div>
<div class="comment-text"><p>I switched a tag back and forth on these buildings and now they render. I originally wanted to leave way 122186232 as is to keep an example for the problem but unfortunately I forgot it.</p></div>
<div class="comment-info" id="comment-19427-info">
<span class="comment-age">(30 Jan '13, 07:32)</span>
<a class="comment-user userinfo" href="/users/1757/pyrokrat">Pyrokrat</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-6422">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6422-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    3 Answers:
                    </div>
<div class="tabsA"><a href="/questions/6422/invisible-buildings?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/6422/invisible-buildings?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/6422/invisible-buildings?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/6422/invisible-buildings?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="19471"></a>
<div class="answer" id="answer-container-19471">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19471/up/" id="post-19471-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19471-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/19471/down/" id="post-19471-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The tiles you see as the "mapnik tiles" are rendered from a secondary database. This secondary database is kept up to date with the primary database via the application of "minutely diff" files. Furthermore, the data is transformed from a representations of nodes, ways and relations into points, lines and polygons.</p>
<p>The program doing this conversion (osm2pgsql) unfortunately has some known bugs under which in edge cases the transformation during the application of diffs is incorrect, leading to some data not being correctly in the secondary database and thus can't be rendered. This then leads to the "invisible buildings"</p>
<p>The likely bug in your case is #4525 ( <a href="https://trac.openstreetmap.org/ticket/4525">https://trac.openstreetmap.org/ticket/4525</a> ). If a way is originally part of a multipolygon and rendered as such, then if it gets removed from the polygon relation, but the way itself remains unmodified, it will be deleted from the database.</p>
<p>For the moment, until the bug is fixed. Touching the individual way (i.e. re-uploading / modifying the way) is currently the only solution to getting the way to render.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/19471/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>30 Jan '13, 22:48</strong>
</p>
<img alt="apmon's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/32c974c4ca8b246698c2b82c64924da5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/65/apmon">apmon</a><br/>
<span class="score" title="6527 reputation points"><span class="">6.5k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="44 badges"><span class="silver">●</span><span class="badgecount">44</span></span><span title="56 badges"><span class="bronze">●</span><span class="badgecount">56</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="apmon has 9 accepted answers">20%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19471">
<a name="19482"></a>
<div class="comment" id="comment-19482">
<div class="comment-score" id="post-19482-score"></div>
<div class="comment-text"><p>Thanks for the detailed answer! I think this phenomenon is due to the bug you are referring to. The whole block of buildings was in fact a multipolygon before I broke it down into multiple ways.</p></div>
<div class="comment-info" id="comment-19482-info">
<span class="comment-age">(31 Jan '13, 07:12)</span>
<a class="comment-user userinfo" href="/users/1757/pyrokrat">Pyrokrat</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-19471">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19471-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="6717"></a>
<div class="answer" id="answer-container-6717">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6717/up/" id="post-6717-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6717-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/6717/down/" id="post-6717-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The data looks right and Osmarender shows all the buildings. I guess that there was some problem with the mapnik database excerpt or similar which will be resolved automatically once the rendering server does the next full import and the tiles get rerendered.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/6717/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>30 Jul '11, 12:19</strong>
</p>
<img alt="dieterdreist's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f09c0b7a655fed386e070e036e2da248?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/936/dieterdreist">dieterdreist</a><br/>
<span class="score" title="3677 reputation points"><span class="">3.7k</span></span><span title="11 badges"><span class="badge1">●</span><span class="badgecount">11</span></span><span title="35 badges"><span class="silver">●</span><span class="badgecount">35</span></span><span title="67 badges"><span class="bronze">●</span><span class="badgecount">67</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="dieterdreist has 4 accepted answers">3%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-6717">
</div>
<div class="comment-tools" id="comment-tools-6717">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6717-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="6681"></a>
<div class="answer answered-by-owner" id="answer-container-6681">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/6681/up/" id="post-6681-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-6681-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/6681/down/" id="post-6681-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>An update on this: Situation unchanged, I filed it as a <a href="http://trac.openstreetmap.org/ticket/3932">bug</a> but they suspected server outage to be the reason. Since I continuously do mapping and my other changes appear immediately, I can almost certainly rule this out. Any other ideas?</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/6681/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Jul '11, 06:54</strong>
</p>
<img alt="Pyrokrat's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/48b105baf02b114ad41ef10f1dfd55f5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1757/pyrokrat">Pyrokrat</a><br/>
<span class="score" title="106 reputation points">106</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Pyrokrat has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-6681">
<a name="6687"></a>
<div class="comment" id="comment-6687">
<div class="comment-score" id="post-6687-score"></div>
<div class="comment-text"><p>I had looked at it yesterday,what would happen if you deleted a couple of the invisible ones saved it then opened the editor and re drew them. or would downloading the area into josm altering something slightly and uploading again work or have to tried that already</p></div>
<div class="comment-info" id="comment-6687-info">
<span class="comment-age">(29 Jul '11, 10:12)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="6694"></a>
<div class="comment" id="comment-6694">
<div class="comment-score" id="post-6694-score">1</div>
<div class="comment-text"><p>Redrawing the ways (using the existing nodes) helps but I don't want to remove the issue in case a developer wants to have a look at it.</p></div>
<div class="comment-info" id="comment-6694-info">
<span class="comment-age">(29 Jul '11, 12:53)</span>
<a class="comment-user userinfo" href="/users/1757/pyrokrat">Pyrokrat</a>
</div>
</div>
<a name="6696"></a>
<div class="comment" id="comment-6696">
<div class="comment-score" id="post-6696-score"></div>
<div class="comment-text"><p>ok, thanks explaining that</p></div>
<div class="comment-info" id="comment-6696-info">
<span class="comment-age">(29 Jul '11, 15:17)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="6756"></a>
<div class="comment" id="comment-6756">
<div class="comment-score" id="post-6756-score">1</div>
<div class="comment-text"><p>My best "wild guess" would be that the time at which the mapnik server got its last full update before/during the maintenance and the time at which it started applying minutely updates to that data were not the same, and that your changes (as well as any other changes throughout the entire world at a similar time) are not reflected in the mapnik copy of the database...</p>
<p>... and that it would go away when mapnik's database is next <em>fully</em> resynchronised - presumably when the "main" server comes back online.</p>
<p>Seems useful to have a known anomaly to see when this occurs.</p></div>
<div class="comment-info" id="comment-6756-info">
<span class="comment-age">(01 Aug '11, 12:12)</span>
<a class="comment-user userinfo" href="/users/1620/banoffee">banoffee</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-6681">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-6681-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/6422/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="fNKGq6SZ5OIp8jVkkrrJuGIm0Opf8orS"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>