<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/1315/how-to-combine-marker-and-popup">how to combine marker and popup?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/1315/up/" id="post-1315-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-1315-score" title="current number of votes">
    -1
</div>
<a class="ajax-command post-vote down" href="/vote/1315/down/" id="post-1315-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/1315/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I show over lon/lat my position with a icon(PIN) on the map....and I want to add a little popup to the marker with some GeoInfo like City and Country....but if I add a normal popup (new OpenLayers.Popup) it only appears on the top left corner of the page, but I want it at my position or next to my icon(Pin) on the map.... can anyone help or tell me what is wrong with my code....</p>
<pre><code>//ADD LAYER MARKERS
var markers = new OpenLayers.Layer.Markers( "Markers" );
    map.addLayer(markers);
    markers.addMarker(new OpenLayers.Marker(lonLat,icon));

//POPUP
var popup = new OpenLayers.Popup("test1",
                             markers.lonLat,
                             null,
                            "GeoInfo",
                             true);
                  map.addPopup(popup);
</code></pre>
<p>like I said it only appears in the TOP LEFT Corner of the map.....and if I change markers.lonLat to new Openlayers.LonLat(5,40) no popup is shown....</p>
<p>and if I change new.Openlayers.Popup to new.Openlayers.Popup.AnchoredBubble oder new.Openlayers.Popup.Anchored no PopUp appers as well :(</p>
<p>Any ideas?!?!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-marker" href="/tags/marker/" rel="tag" title="see questions tagged 'marker'">marker</a>
<a class="post-tag tag-link-popup" href="/tags/popup/" rel="tag" title="see questions tagged 'popup'">popup</a>
<a class="post-tag tag-link-openlayers" href="/tags/openlayers/" rel="tag" title="see questions tagged 'openlayers'">openlayers</a>
<a class="post-tag tag-link-icon" href="/tags/icon/" rel="tag" title="see questions tagged 'icon'">icon</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>26 Oct '10, 08:28</strong>
</p>
<img alt="BabyPowder's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fdbaeffe869eb3d5b5a0eecd14068b44?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/360/babypowder">BabyPowder</a><br/>
<span class="score" title="15 reputation points">15</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="BabyPowder has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/1315/">
                edited
                <strong>26 Oct '10, 11:37</strong>
</a>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-1315">
</div>
<div class="comment-tools" id="comment-tools-1315">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-1315-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/1315/how-to-combine-marker-and-popup?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/1315/how-to-combine-marker-and-popup?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/1315/how-to-combine-marker-and-popup?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/1315/how-to-combine-marker-and-popup?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="4659"></a>
<div class="answer" id="answer-container-4659">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/4659/up/" id="post-4659-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-4659-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/4659/down/" id="post-4659-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I know that this is fairly old, but I thought I may as well answer it because it comes up a lot in general OpenLayers marker/popup searches quite a lot. </p>
<p>Create a method to add the marker (I use addMarkers) and then within that, create a variable reference to each marker, var marker = new OpenLayers.Marker(ll, etc), then call the .lonlat property of that variable, rather than the layer itself. That way you know you're getting the appropriate projection and all. You might also want to make the popup a child of the marker, so that you can reference each marker's popup easily in the future.</p>
<p>A nice example of popups can be seen here: <a href="http://openlayers.org/dev/examples/popupMatrix.html"></a><a href="http://openlayers.org/dev/examples/popupMatrix.html"></a><a href="http://openlayers.org/dev/examples/popupMatrix.html">http://openlayers.org/dev/examples/popupMatrix.html</a></p>
<p>Check out the source code. It provides a lot of examples, and approaches it a bit differently, although more effectively I feel. </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/4659/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>20 Apr '11, 06:38</strong>
</p>
<img alt="mricci's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/220f58859dd94d9b4c9026e81c5b5cb1?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/1216/mricci">mricci</a><br/>
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="mricci has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-4659">
</div>
<div class="comment-tools" id="comment-tools-4659">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-4659-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="1319"></a>
<div class="answer" id="answer-container-1319">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/1319/up/" id="post-1319-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-1319-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/1319/down/" id="post-1319-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This is a help system for the OpenStreetMap project, but your question is quite a technical one regarding OpenLayers, which is an independent software project. If you don't get any other answers here, you would be better looking at the <a href="http://openlayers.org">OpenLayers</a> site for support queries.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/1319/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>26 Oct '10, 11:39</strong>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Andy Allan has 46 accepted answers">28%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-1319">
</div>
<div class="comment-tools" id="comment-tools-1319">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-1319-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="1362"></a>
<div class="answer answered-by-owner" id="answer-container-1362">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/1362/up/" id="post-1362-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-1362-score" title="current number of votes">
    -1
</div>
<a class="ajax-command post-vote down" href="/vote/1362/down/" id="post-1362-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>This can be closed.......</p>
<p>somehow I did nothing different in my eyes but today exactly what I wanted to do worked for me.......</p>
<p>this thread can be closed </p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/1362/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>29 Oct '10, 13:42</strong>
</p>
<img alt="BabyPowder's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fdbaeffe869eb3d5b5a0eecd14068b44?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/360/babypowder">BabyPowder</a><br/>
<span class="score" title="15 reputation points">15</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="BabyPowder has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/1362/">
                edited
                <strong>29 Oct '10, 13:47</strong>
</a>
</p>
<img alt="Andy%20Allan's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c3743b1b368f5e209eb8aad30164acc4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3/andy-allan">Andy Allan</a><br/>
<span class="score" title="12456 reputation points"><span class="">12.5k</span></span><span title="23 badges"><span class="badge1">●</span><span class="badgecount">23</span></span><span title="128 badges"><span class="silver">●</span><span class="badgecount">128</span></span><span title="153 badges"><span class="bronze">●</span><span class="badgecount">153</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-1362">
</div>
<div class="comment-tools" id="comment-tools-1362">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-1362-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="1320"></a>
<div class="answer answered-by-owner" id="answer-container-1320">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/1320/up/" id="post-1320-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-1320-score" title="current number of votes">
    -2
</div>
<a class="ajax-command post-vote down" href="/vote/1320/down/" id="post-1320-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I am using the OpenStreetMap so I thought that I can ask my question here......</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/1320/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>26 Oct '10, 12:33</strong>
</p>
<img alt="BabyPowder's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fdbaeffe869eb3d5b5a0eecd14068b44?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/360/babypowder">BabyPowder</a><br/>
<span class="score" title="15 reputation points">15</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="BabyPowder has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-1320">
<a name="1321"></a>
<div class="comment" id="comment-1321">
<div class="comment-score" id="post-1321-score"></div>
<div class="comment-text"><p>You can ask your question here, it's just more likely to get a helpful answer if you ask the people of OpenLayers.</p>
<p>However note that your code never makes a connection between the individual marker and the popup. You're somehow trying to couple the markers layer and the popup instead of the marker and the popup. See the OpenLayers examples page for working code.</p></div>
<div class="comment-info" id="comment-1321-info">
<span class="comment-age">(26 Oct '10, 12:55)</span>
<a class="comment-user userinfo" href="/users/162/augustus-kling">Augustus Kling</a>
</div>
</div>
<a name="1324"></a>
<div class="comment" id="comment-1324">
<div class="comment-score" id="post-1324-score"></div>
<div class="comment-text"><p>Example 11 of <a href="http://php-baustelle.de/openlayers/step-by-step/">http://php-baustelle.de/openlayers/step-by-step/</a> might also provide some guidance. However you should rework the variable scope.</p></div>
<div class="comment-info" id="comment-1324-info">
<span class="comment-age">(27 Oct '10, 07:08)</span>
<a class="comment-user userinfo" href="/users/162/augustus-kling">Augustus Kling</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-1320">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-1320-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/1315/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="EoD3xFxQowmkOz6NhyG0jcSjNIB9PqBv"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>