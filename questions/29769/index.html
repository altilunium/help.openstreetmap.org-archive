<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/29769/can-i-reserve-allocate-official-osm-ids-for-private-use">Can I reserve / allocate official osm ids for private use?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29769/up/" id="post-29769-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29769-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/29769/down/" id="post-29769-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/29769/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Dear community,</p>
<p>we currently are creating indoor maps for our university campus. Unfortunately we are not allowed to upload all this data to the official OSM servers, but we had to set up our own one. Since we can't use the official one, we made the database and the processes working with its data to work with negative osm ids.</p>
<p>The problem now is that JOSM behaves as following: When creating new elements these elements get negative ids. Once the just-saved file gets loaded, all negative ids within it will be replaced with new negative ids. That means there's no consistency of the same file thanks to JOSM.</p>
<p>So my question is:
Is there a way to reserve / allocate "real" OSM-IDs for the created ways, relations and nodes without uploading the data itself.</p>
<p>I assume we could just upload a node/way/relation without containing useful information, but I'm frightened someone could remove due to its uselessness and the very same ID could be assigned to some other element.</p>
<p>And since our database data is not stativ but will be upgraded from time to time we cannot just chose any positive ID not yet included in the database because some day it might.</p>
<p>Any help is welcome! Thank you!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-josm" href="/tags/josm/" rel="tag" title="see questions tagged 'josm'">josm</a>
<a class="post-tag tag-link-id" href="/tags/id/" rel="tag" title="see questions tagged 'id'">id</a>
<a class="post-tag tag-link-private" href="/tags/private/" rel="tag" title="see questions tagged 'private'">private</a>
<a class="post-tag tag-link-allocate" href="/tags/allocate/" rel="tag" title="see questions tagged 'allocate'">allocate</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>12 Jan '14, 17:02</strong>
</p>
<img alt="Henry%20Moews's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/34c0a69c5e95a6e56de49aa65cf845e6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8128/henry-moews">Henry Moews</a><br/>
<span class="score" title="1 reputation points">1</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Henry Moews has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-29769">
<a name="29780"></a>
<div class="comment" id="comment-29780">
<div class="comment-score" id="post-29780-score">1</div>
<div class="comment-text"><p>Not a very good idea to work with negative IDs. Editing software all expect negatives to be NEW items without real IDs assigned yet.</p></div>
<div class="comment-info" id="comment-29780-info">
<span class="comment-age">(12 Jan '14, 21:22)</span>
<a class="comment-user userinfo" href="/users/4231/mcpicoli">MCPicoli</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-29769">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29769-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/29769/can-i-reserve-allocate-official-osm-ids-for-private-use?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/29769/can-i-reserve-allocate-official-osm-ids-for-private-use?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/29769/can-i-reserve-allocate-official-osm-ids-for-private-use?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/29769/can-i-reserve-allocate-official-osm-ids-for-private-use?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="29772"></a>
<div class="answer" id="answer-container-29772">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29772/up/" id="post-29772-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29772-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/29772/down/" id="post-29772-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Sorry, but AFAIK there is no way to reserver/lock IDs without real payload.</p>
<p>If you start from an empty dataset, you might use your own (nonnegative) IDs and keep them in a local xml file. Another way would be to setup your own <a href="http://wiki.openstreetmap.org/wiki/Rails_Port">rails port server</a> with own API etc. that keeps your stuff seperated from OSM DB, while allowing multiple users to edit this data.</p>
<p>I'm not an expert but I guess there might be <a href="http://wiki.openstreetmap.org/wiki/Legal_FAQ">legal problems</a> if you mix OSM data with non free (as you aren't allowed to publish) informations on a dataset level.<br/>
</p>
<p>There is also a small but nice existing <a href="http://wiki.openstreetmap.org/wiki/Indoor">indoor community</a> at OSM :)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/29772/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Jan '14, 18:20</strong>
</p>
<img alt="iii's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/49a7d0e0408e9cf2f698faac0f4d837a?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4984/iii">iii</a><br/>
<span class="score" title="4892 reputation points"><span class="">4.9k</span></span><span title="8 badges"><span class="badge1">●</span><span class="badgecount">8</span></span><span title="40 badges"><span class="silver">●</span><span class="badgecount">40</span></span><span title="82 badges"><span class="bronze">●</span><span class="badgecount">82</span></span><br>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="iii has 16 accepted answers">10%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-29772">
<a name="29776"></a>
<div class="comment" id="comment-29776">
<div class="comment-score" id="post-29776-score"></div>
<div class="comment-text"><p>Thanks for pointing out the legal problems. 
Indeed, we're working with these indoor definitions.</p></div>
<div class="comment-info" id="comment-29776-info">
<span class="comment-age">(12 Jan '14, 19:52)</span>
<a class="comment-user userinfo" href="/users/8128/henry-moews">Henry Moews</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-29772">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29772-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="29775"></a>
<div class="answer" id="answer-container-29775">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29775/up/" id="post-29775-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29775-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/29775/down/" id="post-29775-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Use positive IDs for your own data file, starting at 1. If you need to mix your data with data from OSM for some processing, use a small script to re-number your file to using IDs above the highest in OSM at that time.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/29775/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Jan '14, 19:30</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-29775">
<a name="29777"></a>
<div class="comment" id="comment-29777">
<div class="comment-score" id="post-29777-score"></div>
<div class="comment-text"><p>Yeah, actually the data gets immediately in touch with (our own) OSM database. But your idea of re-numbering made me think of re-numbering all of our own OSM elements in the database whenever we update from the official OSM servers having an ID conflict.</p></div>
<div class="comment-info" id="comment-29777-info">
<span class="comment-age">(12 Jan '14, 19:57)</span>
<a class="comment-user userinfo" href="/users/8128/henry-moews">Henry Moews</a>
</div>
</div>
<a name="29808"></a>
<div class="comment" id="comment-29808">
<div class="comment-score" id="post-29808-score"></div>
<div class="comment-text"><p>appending to Frederik's hint:</p>
<p>can this be a solution? <a href="http://www.geofabrik.de/en/projects/separatedata/index.html">http://www.geofabrik.de/en/projects/separatedata/index.html</a></p></div>
<div class="comment-info" id="comment-29808-info">
<span class="comment-age">(13 Jan '14, 17:14)</span>
<a class="comment-user userinfo" href="/users/99/stephan75">stephan75</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-29775">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29775-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="29779"></a>
<div class="answer" id="answer-container-29779">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29779/up/" id="post-29779-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29779-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/29779/down/" id="post-29779-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Reserving IDs is a <em>very bad</em> idea... Aside from the obvious management complications, there are other complications whenever you encounter conflicts of IDs, software not aware of the reservations, etc.</p>
<p>Also, you're trying to use a tool (JOSM) that wasn't designed to work with "mixed" (OSM and private) data. JOSM will keep renumbering your IDs internally, and it wouldn't matter to it, because even if different between different loads of the same file, it'll be consistent <em>at the moment of the upload</em> to the OSM servers (which will replace the negative numbers with valid IDs)</p>
<p>The ID that'll be used is the next sequence number of the relevant tables. If by some reason the upload fails, the whole transaction is rolled back and the IDs used are "lost" forever.</p>
<p>However, not everything is lost... One workaround I thought is relatively simple, emulates the reservation system, but has some limitations. Let me explain...</p>
<ul>
<li>Change the sequences in your local copy of the OSM database, setting the next value to a <strong>very high</strong> number. The IDs are all bigints, use something like 1 x 10^18, totally out of reach of anything that "normal" OSM will reach in the next billion years. And still leaving trillions of IDs for your usage.</li>
<li>Install the full rails port, including the APIDB server, etc.</li>
<li>Modify JOSM to point to your LOCAL server. Very easy, in the configurations. Maybe, even change the look and feel (also in the configurations) to make clear that data processed with this version should NEVER be uploaded to the public servers.</li>
<li>Add your data and upload to your LOCAL server.</li>
<li>Update using the daily/hourly/minutely from the official OSM.</li>
</ul>
<p>The limitations are:</p>
<ul>
<li>Your data will never be compatible again with the OSM data without more processing - the IDs would have to be stripped and replaced with negative IDs before it could be uploaded to the public OSM server. And probably there'll be many conflicts. Maybe someone else will do a survey and upload some version of a map to the same place?</li>
<li>Your data will have to be <em>fully new</em>. Not even one node, one way can be shared with the public OSM database, not because of copyright, but because if someone changes this item in the public OSM database, your private data will be changed as well, probably in ways that you do not intend to.</li>
<li>If someone else uploads something in the area you privately mapped, it'll overlap your data, and you can't remove it without almost surely breaking the possibility of further updates to you LOCAL database, because it'll fail when it doesn't find the conflicting items.</li>
</ul>
<p>Updates to the APIDB using osmosis, or other tools, from the daily/hourly/minutely changes all come with the IDs already assigned, therefore the sequence number is never touched when you apply them. Your own changes, on the other hand, do not have valid IDs yet, and the API server will use the default (implicit or explicit, can't remember) of the ID column which is "nextval([name_of_sequence])".</p>
<p>EDIT: I didn't fully understood Frederick's answer cited before. Corrected!</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/29779/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>12 Jan '14, 21:07</strong>
</p>
<img alt="MCPicoli's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/94b019f273c04cd88bc1c8dd0a8f2161?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4231/mcpicoli">MCPicoli</a><br/>
<span class="score" title="2172 reputation points"><span class="">2.2k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="30 badges"><span class="silver">●</span><span class="badgecount">30</span></span><span title="47 badges"><span class="bronze">●</span><span class="badgecount">47</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="MCPicoli has 10 accepted answers">24%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/29779/">
                edited
                <strong>12 Jan '14, 21:15</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-29779">
</div>
<div class="comment-tools" id="comment-tools-29779">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29779-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="29789"></a>
<div class="answer" id="answer-container-29789">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29789/up/" id="post-29789-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29789-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/29789/down/" id="post-29789-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Why do you even worry about conflicting IDs if you don't intend to upload your results anyway ? Put your objects in your own db, and use a mashup to display your indoor map on top of the osm basemap.</p>
<p>You can "seed" your work using an extract of OSM data if you want, say the town your school resides in. That would just be a snapshot of osm data; updating said data after you modified it <a href="http://wiki.openstreetmap.org/wiki/Osmosis">should be possible</a>, but is likely to run into problems now and then. Also, remember that if you seed your own map this way, it certainly constitute a derived work and you would <a href="http://wiki.openstreetmap.org/wiki/Legal_FAQ#3b._If_I_have_data_derived_from_OSM_data.2C_do_I_have_to_distribute_it.3F">have to redistribute it</a>, making the whole effort of keeping your work separate a bit pointless.</p>
<p>If you ever want to merge your data with the osm data (assuming you didn't seed it with osm data, and kept it separate), just extract your db as a *.osm file, negate all the ids, load it into josm, check for problems, and upload to osm.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/29789/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>13 Jan '14, 09:31</strong>
</p>
<img alt="Vincent%20de%20Phily's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d20f86db9a6f03cb070e9fbaaf0b7228?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/867/vincent-de-phily">Vincent de P... ♦</a><br/>
<span class="score" title="17304 reputation points"><span class="">17.3k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="152 badges"><span class="silver">●</span><span class="badgecount">152</span></span><span title="249 badges"><span class="bronze">●</span><span class="badgecount">249</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Vincent de Phily has 64 accepted answers">19%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-29789">
<a name="29790"></a>
<div class="comment" id="comment-29790">
<div class="comment-score" id="post-29790-score"></div>
<div class="comment-text"><p>You can't upload to your own local DB <em>and update it from the diffs</em> unless you take care about conflicting IDs.</p></div>
<div class="comment-info" id="comment-29790-info">
<span class="comment-age">(13 Jan '14, 10:08)</span>
<a class="comment-user userinfo" href="/users/4231/mcpicoli">MCPicoli</a>
</div>
</div>
<a name="29797"></a>
<div class="comment" id="comment-29797">
<div class="comment-score" id="post-29797-score"></div>
<div class="comment-text"><p>That's part of the problems you could have. You'd have to fix them manually on a case by case basis.</p>
<p>Not that I'm advocating this method. I really think you should either upload directly to osm, or use a completely separate db.</p></div>
<div class="comment-info" id="comment-29797-info">
<span class="comment-age">(13 Jan '14, 12:45)</span>
<a class="comment-user userinfo" href="/users/867/vincent-de-phily">Vincent de P... ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-29789">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29789-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/29769/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="f7RX3r5rWcDQh9E6fKTv0FTiMZyDzTtn"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>