<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/21705/is-there-any-correlation-between-ways-in-openstreetmaps">Is there any correlation between ways in OpenStreetMaps?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21705/up/" id="post-21705-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21705-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/21705/down/" id="post-21705-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/21705/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello All,</p>
<p>Currently I am working on finding all the intersecting nodes present in a region of OpenSteetMap. I wrote a program in python, which is working fine for small areas. But if I run the same program for the whole Niedersachsen, it takes many days to complete. My code is comparing each way with all other ways present in the map, to find intersecting nodes. This method is not efficient for very large data. I can optimize my code if somehow I just restrict the comparison of ways to small region only, not for the whole region. May be there is some correlation between way ids, which I need to know. Or maybe I somehow identify the smallest possible region, which may include all the correlated ways. Please advise.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-openstreetmap" href="/tags/openstreetmap/" rel="tag" title="see questions tagged 'openstreetmap'">openstreetmap</a>
<a class="post-tag tag-link-ways" href="/tags/ways/" rel="tag" title="see questions tagged 'ways'">ways</a>
<a class="post-tag tag-link-intersection" href="/tags/intersection/" rel="tag" title="see questions tagged 'intersection'">intersection</a>
<a class="post-tag tag-link-python" href="/tags/python/" rel="tag" title="see questions tagged 'python'">python</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Apr '13, 10:01</strong>
</p>
<img alt="tfarooqi's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f5d31b13d0fced1a8297e7d9e9385a53?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5892/tfarooqi">tfarooqi</a><br/>
<span class="score" title="30 reputation points">30</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="5 badges"><span class="silver">●</span><span class="badgecount">5</span></span><span title="10 badges"><span class="bronze">●</span><span class="badgecount">10</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="tfarooqi has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/21705/">
                edited
                <strong>22 Apr '13, 10:27</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21705">
</div>
<div class="comment-tools" id="comment-tools-21705">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21705-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/21705/is-there-any-correlation-between-ways-in-openstreetmaps?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/21705/is-there-any-correlation-between-ways-in-openstreetmaps?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/21705/is-there-any-correlation-between-ways-in-openstreetmaps?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/21705/is-there-any-correlation-between-ways-in-openstreetmaps?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="21711"></a>
<div class="answer accepted-answer" id="answer-container-21711">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21711/up/" id="post-21711-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21711-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/21711/down/" id="post-21711-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/21711/" rel="nofollow" title="tfarooqi has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>There is no correlation between node IDs and area.</p>
<p>Assuming that you really want to find intersecting <em>nodes</em> (as opposed to non-noded intersections), use the following algorithm:</p>
<ul>
<li>Use a hash table to store "link counters"</li>
<li>Process all ways; each time a node is referenced by a way, increase the node's link counter in your hash table by one</li>
<li>when finished, look at your hash table - all node IDs with a link counter greater than one are junction or intersection nodes.</li>
<li>If you only want to find nodes where ways cross (and not those where one way ends on a node belonging to another way) then modify step 2 and only look at all inner nodes of the way (ignoring the end nodes).</li>
</ul>
<p>Another option for solving your problem is computing a bounding box for every way (i.e. the minimum and maximum latitude and longitude), and then restrict comparison to ways whose bounding boxes intersect.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/21711/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>22 Apr '13, 10:35</strong>
</p>
<img alt="Frederik%20Ramm's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a2b38d937e70ab39d895d17da0dd1ba4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/104/frederik-ramm">Frederik Ramm ♦</a><br/>
<span class="score" title="82494 reputation points"><span class="">82.5k</span></span><span title="92 badges"><span class="badge1">●</span><span class="badgecount">92</span></span><span title="720 badges"><span class="silver">●</span><span class="badgecount">720</span></span><span title="1273 badges"><span class="bronze">●</span><span class="badgecount">1273</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Frederik Ramm has 417 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21711">
<a name="21713"></a>
<div class="comment" id="comment-21713">
<div class="comment-score" id="post-21713-score"></div>
<div class="comment-text"><p>I was thinking on the same direction of creating a hash table.But I thought there must be a better way.
Using the bounding box to restrict the way comparison is also a good idea but I think finding the intersection of bounding box will lead to the same issue which I am currently facing</p></div>
<div class="comment-info" id="comment-21713-info">
<span class="comment-age">(22 Apr '13, 11:06)</span>
<a class="comment-user userinfo" href="/users/5892/tfarooqi">tfarooqi</a>
</div>
</div>
<a name="21714"></a>
<div class="comment" id="comment-21714">
<div class="comment-score" id="post-21714-score"></div>
<div class="comment-text"><p>But I thank you Mr. Ramm for your valueable comments.</p></div>
<div class="comment-info" id="comment-21714-info">
<span class="comment-age">(22 Apr '13, 11:18)</span>
<a class="comment-user userinfo" href="/users/5892/tfarooqi">tfarooqi</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-21711">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21711-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/21705/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="54n3Hiu2X9tCNanpl9fFeX4PYCsuRe3U"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>