<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/21524/how-to-mass-edit-nodes-with-specific-tags-in-josm">How to mass edit nodes with specific tags in JOSM?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21524/up/" id="post-21524-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21524-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/21524/down/" id="post-21524-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/21524/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   1
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I screwed up.
I did a lot of work editing Tiger data in my hometown of Homer, Alaska. Afterward I read about updating the Tiger-reviewed tag on all those ways so that subsequent Tiger imports wouldn't overwrite my changes. Not wanting to edit each way individually I merely selected multiple ways in JOSM and changed the Tiger tags to Tiger-reviewed=yes. A dozen or so big selections later I was done.</p>
<p>Earlier this week I discovered to my surprise and chagrin that every single NODE included in my selections now carries the Tiger_reviewed=yes tag. That was certainly not expected and I would lke a way to undo those changes. A roll-back is not desirable because a ton of other useful edits would get tossed with the Tiger tags.</p>
<p>I could do what I need to do in a desktop database like Access with a fairly simple SQL statement but the OSM database is a different beast altogether.</p>
<p>My question: Is there any way to select just those nodes that have the Tiger_reviewed=yes tagging in my neighborhood and delete that tag? The ways are fine with that tagging of course. It's just the nodes I want to strip of Tiger tags.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-mass_tagging" href="/tags/mass_tagging/" rel="tag" title="see questions tagged 'mass_tagging'">mass_tagging</a>
<a class="post-tag tag-link-josm" href="/tags/josm/" rel="tag" title="see questions tagged 'josm'">josm</a>
<a class="post-tag tag-link-bulk_editing" href="/tags/bulk_editing/" rel="tag" title="see questions tagged 'bulk_editing'">bulk_editing</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>14 Apr '13, 15:25</strong>
</p>
<img alt="AlaskaDave's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/04dddf6f5ffde333747d385af3ce5829?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5016/alaskadave">AlaskaDave</a><br/>
<span class="score" title="5415 reputation points"><span class="">5.4k</span></span><span title="76 badges"><span class="badge1">●</span><span class="badgecount">76</span></span><span title="107 badges"><span class="silver">●</span><span class="badgecount">107</span></span><span title="164 badges"><span class="bronze">●</span><span class="badgecount">164</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="AlaskaDave has 17 accepted answers">16%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/21524/">
                edited
                <strong>14 Apr '13, 19:27</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-21524">
</div>
<div class="comment-tools" id="comment-tools-21524">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21524-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/21524/how-to-mass-edit-nodes-with-specific-tags-in-josm?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/21524/how-to-mass-edit-nodes-with-specific-tags-in-josm?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/21524/how-to-mass-edit-nodes-with-specific-tags-in-josm?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/21524/how-to-mass-edit-nodes-with-specific-tags-in-josm?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="21526"></a>
<div class="answer" id="answer-container-21526">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21526/up/" id="post-21526-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21526-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/21526/down/" id="post-21526-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Type the following in the search box in JOSM</p>
<blockquote>
<p>Tiger_reviewed:yes type:node</p>
</blockquote>
<p>More examples of search queries: <a href="http://wiki.openstreetmap.org/wiki/JOSM_search_function">http://wiki.openstreetmap.org/wiki/JOSM search function</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/21526/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Apr '13, 18:05</strong>
</p>
<img alt="cartinus's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fed945e27bb98de054a867827550812e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2933/cartinus">cartinus</a><br/>
<span class="score" title="7033 reputation points"><span class="">7.0k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="66 badges"><span class="silver">●</span><span class="badgecount">66</span></span><span title="105 badges"><span class="bronze">●</span><span class="badgecount">105</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="cartinus has 35 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21526">
<a name="21527"></a>
<div class="comment" id="comment-21527">
<div class="comment-score" id="post-21527-score"></div>
<div class="comment-text"><p>I tried every combination of your suggested query that I could come up with. </p>
<p>Tiger_reviewed:yes type:node</p>
<p>type:node key:"tiger:reviewed=yes"</p>
<p>type:node tiger:reviewed</p>
<p>type:node key:tiger:reviewed</p>
<p>and even</p>
<p>type:node key:tiger yes</p>
<p>None of these produced results. I tried them both with and without an active selection. WTF?</p>
<p>Finally I hit on simply selecting ALL nodes, i.e., only the words type:node in the search box. I discovered that the nodes making up the ways I tagged do not inherit tags from their "parents" so when the results appeared I merely deleted the tiger:reviewed tag. It affected nodes only, which is just what I wanted.</p>
<p>Thanks for your help...</p></div>
<div class="comment-info" id="comment-21527-info">
<span class="comment-age">(14 Apr '13, 19:24)</span>
<a class="comment-user userinfo" href="/users/5016/alaskadave">AlaskaDave</a>
</div>
</div>
<a name="38863"></a>
<div class="comment" id="comment-38863">
<div class="comment-score" id="post-38863-score"></div>
<div class="comment-text"><p>Try ("tiger:reviewed"=yes) (type:node)</p>
<p>By the way, am I doing it wrong? Instead of changing tiger:reviewed=no to yes I delete the tag.</p></div>
<div class="comment-info" id="comment-38863-info">
<span class="comment-age">(27 Nov '14, 03:09)</span>
<a class="comment-user userinfo" href="/users/5918/n76">n76</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-21526">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21526-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="38850"></a>
<div class="answer" id="answer-container-38850">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/38850/up/" id="post-38850-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-38850-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/38850/down/" id="post-38850-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Here's an example of doing a mass change. Let's say you forgot to add "http://" in front of every 'website' url tag you added and now want to correct this.</p>
<p>In Overpass turbo, you can select your area/edits by modifying the following query:</p>
<pre><code>[out:xml][timeout:25];
// gather results
(
  node["website"~"^[^h][^t][^t][^p].*"]({{bbox}});
  way["website"~"^[^h][^t][^t][^p].*"]({{bbox}});
  relation["website"~"^[^h][^t][^t][^p].*"]({{bbox}});
);
// print results
out meta;
&gt;;
out meta qt;
</code></pre>
<p>You can then open the results of this query in JOSM, and save it to a .osm file. After it's saved, you can use xmlstarlet to modify the tag. You also need to add 'action=modify' to the nodes you changed. Finally, compare the original and your edited file.</p>
<pre><code>xmlstarlet ed -P -u "//tag[<a href="http://help.openstreetmap.org/users/51/ktim"><a href="http://help.openstreetmap.org/users/51/ktim">@k</a></a>='website']/<a href="http://help.openstreetmap.org/users/121/victor-bielawski">@v</a>"  -x 'concat("http://", .)'  ~/Desktop/websites.osm &gt; ~/Desktop/websites-edit.osm
xmlstarlet ed -L -i "//tag[<a href="http://help.openstreetmap.org/users/51/ktim"><a href="http://help.openstreetmap.org/users/51/ktim">@k</a></a>='website']/.."  -t 'attr' -n 'action' -v 'modify' ~/Desktop/websites-edit.osm 
diff -y -W421 ~/Desktop/websites.osm ~/Desktop/websites-edit.osm | less
</code></pre>
<p>Load the edited file into JOSM, validate it, and upload. </p>
<p>Of course the usual caveats regarding mass edits apply, so make sure you are only fixing your own mistakes or have circulated you change with correct mailing list.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/38850/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>26 Nov '14, 13:56</strong>
</p>
<img alt="brianegge's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f221969d01bf7d2a0707c85897d84ec5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/9234/brianegge">brianegge</a><br/>
<span class="score" title="126 reputation points">126</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="5 badges"><span class="silver">●</span><span class="badgecount">5</span></span><span title="11 badges"><span class="bronze">●</span><span class="badgecount">11</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="brianegge has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-38850">
<a name="38865"></a>
<div class="comment" id="comment-38865">
<div class="comment-score" id="post-38865-score"></div>
<div class="comment-text"><p>Thanks Brian,</p>
<p>I did those edits long ago in JOSM but your answer intrigues me nonetheless. Lets say I want to substitute one sub-string for different one? These are all my own additions I'm wanting to edit. It's a special case where I  used a description:en tag set to Mile Zero Milestone and want to change that to read Kilometer Zero Milestone. There  is other information in the description:en that I want to keep which is why I want only to replace the word "Mile" with the word "Kilometer".</p></div>
<div class="comment-info" id="comment-38865-info">
<span class="comment-age">(27 Nov '14, 07:40)</span>
<a class="comment-user userinfo" href="/users/5016/alaskadave">AlaskaDave</a>
</div>
</div>
<a name="38866"></a>
<div class="comment" id="comment-38866">
<div class="comment-score" id="post-38866-score"></div>
<div class="comment-text"><p>A quick look at xmlstarlet convinced me that I don't want to learn its intricacies at the moment. So perhaps you'd be willing to provide the command line? By the way, I'm running Windows, not Unix, and there are approximately 40 nodes (no ways or relations) that need editing. </p>
<p>Thanks again
Dave</p></div>
<div class="comment-info" id="comment-38866-info">
<span class="comment-age">(27 Nov '14, 07:40)</span>
<a class="comment-user userinfo" href="/users/5016/alaskadave">AlaskaDave</a>
</div>
</div>
<a name="38871"></a>
<div class="comment" id="comment-38871">
<div class="comment-score" id="post-38871-score"></div>
<div class="comment-text"><p>xmlstarlet is tricky - but powerful. The two commands I wrote should have been able to have been written as one, but I couldn't figure it out. You can use a text editor to do search/replace. For 40 nodes, it might be easiest to edit them manually in JSOM. You can do 'Search Next', and then edit your tag.</p></div>
<div class="comment-info" id="comment-38871-info">
<span class="comment-age">(27 Nov '14, 12:01)</span>
<a class="comment-user userinfo" href="/users/9234/brianegge">brianegge</a>
</div>
</div>
<a name="38873"></a>
<div class="comment" id="comment-38873">
<div class="comment-score" id="post-38873-score">1</div>
<div class="comment-text"><p>For JOSM the todo list plugin can also become helpful for such tasks.</p></div>
<div class="comment-info" id="comment-38873-info">
<span class="comment-age">(27 Nov '14, 13:41)</span>
<a class="comment-user userinfo" href="/users/158/scai">scai ♦</a>
</div>
</div>
<a name="38888"></a>
<div class="comment" id="comment-38888">
<div class="comment-score" id="post-38888-score"></div>
<div class="comment-text"><p>Thank you both for responding. I can do this edit in JOSM, and yes, the ToDo list plugin is helpful. I've used it before in similar situations. I want to eventually learn how to download OSM data into a local postgreSQL database and manipulate it with SQL commands, with which I am already familiar. The mention of xmlstarlet got me thinking along those lines. </p>
<p>Cheers</p></div>
<div class="comment-info" id="comment-38888-info">
<span class="comment-age">(28 Nov '14, 00:29)</span>
<a class="comment-user userinfo" href="/users/5016/alaskadave">AlaskaDave</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-38850">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-38850-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/21524/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="lgfzgMGmz34LhXACVh0YuQXci6px1xps"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>