<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/16050/pink-tiles-instead-of-map">Pink tiles instead of map</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16050/up/" id="post-16050-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16050-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/16050/down/" id="post-16050-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/16050/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi all,</p>
<p>I've just built an OSM server as per the instructions on www.switch2osm.org using the package method. Everything seems to be working ok. I am able to browse the map on localhost the ubuntu server. The only problem is when I use an browser on the external IP address, all the tiles appear in pink. </p>
<p>I have read that this maybe a cross domain browsing issue with apache. If anyone else has experienced this issue can they let me know and what solution you found.</p>
<p>Thanks in advance,</p>
<p>Dave</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-pink" href="/tags/pink/" rel="tag" title="see questions tagged 'pink'">pink</a>
<a class="post-tag tag-link-map" href="/tags/map/" rel="tag" title="see questions tagged 'map'">map</a>
<a class="post-tag tag-link-tiles" href="/tags/tiles/" rel="tag" title="see questions tagged 'tiles'">tiles</a>
<a class="post-tag tag-link-localhost" href="/tags/localhost/" rel="tag" title="see questions tagged 'localhost'">localhost</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>13 Sep '12, 22:09</strong>
</p>
<img alt="Davieg's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/a4a6d4c69a4768aa486878b00720901c?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4511/davieg">Davieg</a><br/>
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Davieg has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16050">
<a name="16079"></a>
<div class="comment" id="comment-16079">
<div class="comment-score" id="post-16079-score">1</div>
<div class="comment-text"><p>If you don't get any reply on this help site, you might better contact the OSM developers community through its mailing list at dev@openstreetmap.org. (subscription required, see the <a href="http://wiki.openstreetmap.org/wiki/Mailing_lists">mailing list doc</a>)</p></div>
<div class="comment-info" id="comment-16079-info">
<span class="comment-age">(14 Sep '12, 11:41)</span>
<a class="comment-user userinfo" href="/users/87/pieren">Pieren</a>
</div>
</div>
<a name="16224"></a>
<div class="comment" id="comment-16224">
<div class="comment-score" id="post-16224-score"></div>
<div class="comment-text"><p>Based on the other information (socket bind failures etc.) I'm not sure that what you're seeing a purely a cross-site-scripting issue.  As Pieren says, you'll probably get more response on the "dev" mailing list or perhaps on one of the <a href="http://wiki.openstreetmap.org/wiki/IRC">IRC channels</a> (e.g. #osm or #osm-dev).</p>
<p>Is the Ubuntu server a physical box or a VM, and if a VM how is networking set up?</p>
<p>When you say "I can browse the map" does that mean that you've got an OL or Leaflet-based map on the same Ubuntu server as well?  If so, when you browse to the root of the webserver from your remote browser do you get an "It works!" page?</p></div>
<div class="comment-info" id="comment-16224-info">
<span class="comment-age">(18 Sep '12, 16:48)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-16050">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16050-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/16050/pink-tiles-instead-of-map?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/16050/pink-tiles-instead-of-map?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/16050/pink-tiles-instead-of-map?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/16050/pink-tiles-instead-of-map?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="25060"></a>
<div class="answer" id="answer-container-25060">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/25060/up/" id="post-25060-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-25060-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/25060/down/" id="post-25060-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I just found an answer to the pink tile problem.  Just edit your /var/www/osm/slippymap.html file and change "localhost" to the external IP address of your map server.  For me, this was the IP address of the bridged network virtual card on VirtualBox.  Maps now show up.</p>
<p>I tracked this problem by right clicking the broken image and trying to open it in a new browser window.  The URL contained "localhost" rather than the IP of the map server.</p>
<p>Geoff</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/25060/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Aug '13, 07:50</strong>
</p>
<img alt="Snowpaddler's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/52ff2ce08336ff151c3a558682596192?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7052/snowpaddler">Snowpaddler</a><br/>
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Snowpaddler has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-25060">
<a name="25092"></a>
<div class="comment" id="comment-25092">
<div class="comment-score" id="post-25092-score">1</div>
<div class="comment-text"><p>In order to prevent this confusion the upstream slippymap.html file has been changed to use relative URLs. However, this hasn't yet made it into the packages linked to from switch2osm.org.</p>
<p>However, I have now added a comment regarding this issue to switch2osm.org which hopefully clarifies this and prevents people of running into this issue in the future.</p></div>
<div class="comment-info" id="comment-25092-info">
<span class="comment-age">(08 Aug '13, 20:48)</span>
<a class="comment-user userinfo" href="/users/65/apmon">apmon</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-25060">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-25060-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="16331"></a>
<div class="answer" id="answer-container-16331">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16331/up/" id="post-16331-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16331-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/16331/down/" id="post-16331-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Hi datendelphin,</p>
<p>Thanks for your help. I think I made too mank changes to the config files which caused the binding error. I rolled back the PC to a previous configuration ( I'm using vmware) and started to troubleshoot again. I realised I made a schoolboy error. I never changed the IP address for the map server in the slippymap.html file. That explains why it worked on the local host and not on a remote PC. Once I made that change everything worked fine. Maybe this post may help others avoid my mistake.</p>
<p>Thanks again.</p>
<p>Dave</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/16331/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>21 Sep '12, 23:16</strong>
</p>
<img alt="davieg's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/86fe7151ce2322a4242bae79d4250c76?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4571/davieg">davieg</a><br/>
<span class="score" title="16 reputation points">16</span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="davieg has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16331">
</div>
<div class="comment-tools" id="comment-tools-16331">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16331-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="16113"></a>
<div class="answer" id="answer-container-16113">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/16113/up/" id="post-16113-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-16113-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/16113/down/" id="post-16113-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>You should include</p>
<p><code>Header set Access-Control-Allow-Origin "*"</code></p>
<p>in your apache config, next to the lines where you configure mod-tile (look for the LoadTileConfigFile keyword). It should be inside the virtual host you have your tile server running in.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/16113/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>15 Sep '12, 13:52</strong>
</p>
<img alt="datendelphin's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0697f0a3c5fdeff1999768f7df9cb2af?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3029/datendelphin">datendelphin</a><br/>
<span class="score" title="234 reputation points">234</span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="6 badges"><span class="bronze">●</span><span class="badgecount">6</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="datendelphin has one accepted answer">14%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/16113/">
                edited
                <strong>18 Sep '12, 20:34</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-16113">
<a name="16219"></a>
<div class="comment" id="comment-16219">
<div class="comment-score" id="post-16219-score"></div>
<div class="comment-text"><p>Hi datendelphin,</p>
<p>Thanks for responding to my question. I built the server using the instructions on this page (<a href="http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/)">http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/)</a> so I didn't have too much configuration to do. I'm new enough to Linux and am just working my way around it. Which apache config file do I edit is it httpd.conf or httpd-vhosts.conf. There is no mention of mod-tile in http-vhosts.conf and httpd.conf is blank,</p>
<p>Thanks for your help on this ,</p>
<p>Dave</p></div>
<div class="comment-info" id="comment-16219-info">
<span class="comment-age">(18 Sep '12, 14:06)</span>
<a class="comment-user userinfo" href="/users/4511/davieg">Davieg</a>
</div>
</div>
<a name="16220"></a>
<div class="comment" id="comment-16220">
<div class="comment-score" id="post-16220-score"></div>
<div class="comment-text"><p>I just checked the errors that appear when apache restarts and here's what I get: 
/usr/sbin/apache2ctl: 87: ulimit: error setting limit (Operation not permitted)
[Tue Sep 18 13:43:03 2012] [notice] Committing tile config default
[Tue Sep 18 13:43:03 2012] [notice] Loading tile config default at /osm/ for zooms 0 - 18 from tile directory /var/lib/mod_tile with extension .png and mime type image/png
apache2: apr_sockaddr_info_get() failed for NT-LIS-SR-05.nettronics
apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName</p></div>
<div class="comment-info" id="comment-16220-info">
<span class="comment-age">(18 Sep '12, 14:46)</span>
<a class="comment-user userinfo" href="/users/4511/davieg">Davieg</a>
</div>
</div>
<a name="16221"></a>
<div class="comment" id="comment-16221">
<div class="comment-score" id="post-16221-score"></div>
<div class="comment-text"><p>/usr/sbin/apache2ctl: 87: ulimit: error setting limit (Operation not permitted)
[Tue Sep 18 13:43:03 2012] [notice] Committing tile config default
[Tue Sep 18 13:43:03 2012] [notice] Loading tile config default at /osm/ for zooms 0 - 18 from tile directory /var/lib/mod_tile with extension .png and mime type image/png
apache2: apr_sockaddr_info_get() failed for NT-LIS-SR-05.nettronics
apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
(13)Permission denied: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available</p></div>
<div class="comment-info" id="comment-16221-info">
<span class="comment-age">(18 Sep '12, 14:46)</span>
<a class="comment-user userinfo" href="/users/4511/davieg">Davieg</a>
</div>
</div>
<a name="16222"></a>
<div class="comment" id="comment-16222">
<div class="comment-score" id="post-16222-score">1</div>
<div class="comment-text"><p>, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information.</p>
<p>I dont know if this helps with the problem,</p>
<p>Dave</p></div>
<div class="comment-info" id="comment-16222-info">
<span class="comment-age">(18 Sep '12, 14:47)</span>
<a class="comment-user userinfo" href="/users/4511/davieg">Davieg</a>
</div>
</div>
<a name="16229"></a>
<div class="comment" id="comment-16229">
<div class="comment-score" id="post-16229-score">1</div>
<div class="comment-text"><p>You might have other problems as well. "Permission denied: make_sock: could not bind to address 0.0.0.0:80" does not look good.</p>
<p>As to where to add the line I suggested:</p>
<p>grep -rn LoadTileConfigFile /etc/apache2/</p>
<p>should tell you which file to edit.</p></div>
<div class="comment-info" id="comment-16229-info">
<span class="comment-age">(18 Sep '12, 20:37)</span>
<a class="comment-user userinfo" href="/users/3029/datendelphin">datendelphin</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-16113">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-16113-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="32847"></a>
<div class="answer" id="answer-container-32847">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/32847/up/" id="post-32847-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-32847-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/32847/down/" id="post-32847-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p><a href="http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/">http://switch2osm.org/serving-tiles/building-a-tile-server-from-packages/</a></p>
<p>"If you are not opening slippymap.html on localhost and you are seeing only pink tiles, you will need to edit the html page and replace localhost with the correct server name in ‘new OpenLayers.Layer.OSM(“Local Tiles”…’ or change it to a relative URL."</p>
<p>you need to restart the rendering daemon --&gt;    sudo /etc/init.d/renderd restart</p>
<p>It worked for me.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/32847/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>03 May '14, 18:26</strong>
</p>
<img alt="gisAnal's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/60374a0eb625cfe525668f70cf3e4f16?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8776/gisanal">gisAnal</a><br/>
<span class="score" title="1 reputation points">1</span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="gisAnal has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-32847">
</div>
<div class="comment-tools" id="comment-tools-32847">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-32847-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/16050/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="yUJvjBTW2IyEKrKVzL5sOrcZgsOcwc86"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>