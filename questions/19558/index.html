<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/19558/how-do-i-map-a-stream-that-is-in-a-culvert-so-osmorgs-mapnik-will-not-render-it">How do I map a stream that is in a Culvert so osm.org's mapnik will not render it?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19558/up/" id="post-19558-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19558-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/19558/down/" id="post-19558-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/19558/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>How do I map a stream that is in a Culvert so osm.org's mapnik will not render it?</p>
<p><a href="http://www.openstreetmap.org/?lat=41.22165396809578&amp;lon=-73.21808338165283&amp;zoom=18">This shopping center has a stream in a culvert under the ground</a>  I already added tunnel=culvert to the section of the stream that is in the culvert and layer = -1.  OSM.org's mapnik theme still renders the stream.  Am I doing something wrong or is this a bug in the mapnik theme osm.org uses?  What are your thoughts on this?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-culvert" href="/tags/culvert/" rel="tag" title="see questions tagged 'culvert'">culvert</a>
<a class="post-tag tag-link-stream" href="/tags/stream/" rel="tag" title="see questions tagged 'stream'">stream</a>
<a class="post-tag tag-link-tagging" href="/tags/tagging/" rel="tag" title="see questions tagged 'tagging'">tagging</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
<a class="post-tag tag-link-bug" href="/tags/bug/" rel="tag" title="see questions tagged 'bug'">bug</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>03 Feb '13, 22:54</strong>
</p>
<img alt="redsteakraw's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/602a4908e9bea5a3f086bd91654717c4?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4901/redsteakraw">redsteakraw</a><br/>
<span class="score" title="1040 reputation points"><span class="">1.0k</span></span><span title="17 badges"><span class="badge1">●</span><span class="badgecount">17</span></span><span title="24 badges"><span class="silver">●</span><span class="badgecount">24</span></span><span title="37 badges"><span class="bronze">●</span><span class="badgecount">37</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="redsteakraw has 2 accepted answers">22%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/19558/">
                edited
                <strong>03 Feb '13, 22:55</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19558">
</div>
<div class="comment-tools" id="comment-tools-19558">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19558-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/19558/how-do-i-map-a-stream-that-is-in-a-culvert-so-osmorgs-mapnik-will-not-render-it?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/19558/how-do-i-map-a-stream-that-is-in-a-culvert-so-osmorgs-mapnik-will-not-render-it?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/19558/how-do-i-map-a-stream-that-is-in-a-culvert-so-osmorgs-mapnik-will-not-render-it?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/19558/how-do-i-map-a-stream-that-is-in-a-culvert-so-osmorgs-mapnik-will-not-render-it?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="19561"></a>
<div class="answer" id="answer-container-19561">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/19561/up/" id="post-19561-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-19561-score" title="current number of votes">
    8
</div>
<a class="ajax-command post-vote down" href="/vote/19561/down/" id="post-19561-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Yes that is a bug, but you should tag something as what it is anyway, not as what you want it to look like.</p>
<p><a href="http://wiki.openstreetmap.org/wiki/Tagging_for_the_renderer">http://wiki.openstreetmap.org/wiki/Tagging for the renderer</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/19561/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>04 Feb '13, 06:40</strong>
</p>
<img alt="cartinus's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/fed945e27bb98de054a867827550812e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2933/cartinus">cartinus</a><br/>
<span class="score" title="7033 reputation points"><span class="">7.0k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="66 badges"><span class="silver">●</span><span class="badgecount">66</span></span><span title="105 badges"><span class="bronze">●</span><span class="badgecount">105</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="cartinus has 35 accepted answers">27%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-19561">
<a name="20374"></a>
<div class="comment" id="comment-20374">
<div class="comment-score" id="post-20374-score"></div>
<div class="comment-text"><p>Have you filed the bug against mapnik?</p></div>
<div class="comment-info" id="comment-20374-info">
<span class="comment-age">(28 Feb '13, 10:17)</span>
<a class="comment-user userinfo" href="/users/4653/gormo">gormo</a>
</div>
</div>
<a name="20387"></a>
<div class="comment" id="comment-20387">
<div class="comment-score" id="post-20387-score">1</div>
<div class="comment-text"><p>I've only looked at a very old mapnik stylesheet, but the rule for streams and tunnels was : &lt;filter&gt;(([waterway]='stream') and ([tunnel]='yes'))&lt;/filter&gt;. This may still be true, so tunnel=culvert would never trigger the rule.</p></div>
<div class="comment-info" id="comment-20387-info">
<span class="comment-age">(28 Feb '13, 14:19)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
<a name="21111"></a>
<div class="comment" id="comment-21111">
<div class="comment-score" id="post-21111-score">1</div>
<div class="comment-text"><p>"Have you filed a bug" - it would have been handy to give a link to tell us how to ;) - I've worked out it goes on Github, so <a href="https://github.com/mapnik/mapnik/issues/1784">here is a bug asking Mapnik to respect tunnel=culvert</a></p></div>
<div class="comment-info" id="comment-21111-info">
<span class="comment-age">(31 Mar '13, 19:01)</span>
<a class="comment-user userinfo" href="/users/5965/mcld">mcld</a>
</div>
</div>
<a name="21128"></a>
<div class="comment" id="comment-21128">
<div class="comment-score" id="post-21128-score"></div>
<div class="comment-text"><p>Well, I didn't know how, either. <em>/shame</em></p></div>
<div class="comment-info" id="comment-21128-info">
<span class="comment-age">(02 Apr '13, 11:08)</span>
<a class="comment-user userinfo" href="/users/4653/gormo">gormo</a>
</div>
</div>
<a name="22101"></a>
<div class="comment" id="comment-22101">
<div class="comment-score" id="post-22101-score">1</div>
<div class="comment-text"><p>Ummm - it turns out bugs are supposed to go to trac not github... so here's the bug <a href="https://trac.openstreetmap.org/ticket/3341">https://trac.openstreetmap.org/ticket/3341</a> and here's my fix: <a href="https://github.com/openstreetmap/mapnik-stylesheets/pull/7">https://github.com/openstreetmap/mapnik-stylesheets/pull/7</a></p></div>
<div class="comment-info" id="comment-22101-info">
<span class="comment-age">(04 May '13, 22:58)</span>
<a class="comment-user userinfo" href="/users/5965/mcld">mcld</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-19561">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-19561-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="21118"></a>
<div class="answer" id="answer-container-21118">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/21118/up/" id="post-21118-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-21118-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/21118/down/" id="post-21118-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>On the Standard map I used the link in the question and using P2 editor the stream as a node just north of the car park splitting the stream, both North and South of this node the stream bears the tag tunnel=culvert I think this should be tunnel=yes for the long under ground sections or culvert=yes for short under ground sections. the North section appears, from bing to be above ground so should not have either of these tags. Perhaps this is the problem as SK53 as said edit tunnel=yes works here <a href="http://www.openstreetmap.org/?lat=52.332177&amp;lon=-0.181714&amp;zoom=18&amp;layers=M">http://www.openstreetmap.org/?lat=52.332177&amp;lon=-0.181714&amp;zoom=18&amp;layers=M</a></p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/21118/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>01 Apr '13, 13:21</strong>
</p>
<img alt="andy%20mackey's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/efa7ca36d4499200879223dc5ad5ecac?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/644/andy-mackey">andy mackey</a><br/>
<span class="score" title="13238 reputation points"><span class="">13.2k</span></span><span title="87 badges"><span class="badge1">●</span><span class="badgecount">87</span></span><span title="143 badges"><span class="silver">●</span><span class="badgecount">143</span></span><span title="285 badges"><span class="bronze">●</span><span class="badgecount">285</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="andy mackey has 37 accepted answers">4%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/21118/">
                edited
                <strong>05 May '13, 10:29</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-21118">
<a name="22104"></a>
<div class="comment" id="comment-22104">
<div class="comment-score" id="post-22104-score"></div>
<div class="comment-text"><p>I have just edited a short section of your tunnel to tunnel=yes does it work for you <a href="http://www.openstreetmap.org/?mlat=41.222199&amp;mlon=-73.21890&amp;zoom=18&amp;layers=M">http://www.openstreetmap.org/?mlat=41.222199&amp;mlon=-73.21890&amp;zoom=18&amp;layers=M</a></p></div>
<div class="comment-info" id="comment-22104-info">
<span class="comment-age">(05 May '13, 10:21)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="22105"></a>
<div class="comment" id="comment-22105">
<div class="comment-score" id="post-22105-score"></div>
<div class="comment-text"><p><a href="/users/1725/andy">@andy</a>-mackey yes it does (I can see it as a dashed line) but we shouldn't change our mapping to suit the renderer, we need to fix the renderer, since tunnel=culvert is agreed and widely used. <a href="http://wiki.openstreetmap.org/wiki/Key:tunnel">http://wiki.openstreetmap.org/wiki/Key:tunnel</a></p></div>
<div class="comment-info" id="comment-22105-info">
<span class="comment-age">(05 May '13, 10:29)</span>
<a class="comment-user userinfo" href="/users/5965/mcld">mcld</a>
</div>
</div>
<a name="22106"></a>
<div class="comment" id="comment-22106">
<div class="comment-score" id="post-22106-score"></div>
<div class="comment-text"><p>???  isn't tunnel=culvert a bit like street=road so are tunnel=yes and culvert=yes wrong?  If it's just a case of the rendering engine not liking or drawing tunnel=culvert I have to agree with it.</p></div>
<div class="comment-info" id="comment-22106-info">
<span class="comment-age">(05 May '13, 10:40)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="22107"></a>
<div class="comment" id="comment-22107">
<div class="comment-score" id="post-22107-score"></div>
<div class="comment-text"><p>In my humble opinion neither ways of tagging are wrong. tunnel=culvert fits the standard convention of using a more descriptive term to give a narrower description: like using building=yes versus building=church, both are OK, one is a narrower category than the other.</p>
<p>It's fine not to like tunnel=culvert, but if it's agreed AND common AND recommended in the wiki, then the renderer should handle it.</p></div>
<div class="comment-info" id="comment-22107-info">
<span class="comment-age">(05 May '13, 10:46)</span>
<a class="comment-user userinfo" href="/users/5965/mcld">mcld</a>
</div>
</div>
<a name="22108"></a>
<div class="comment" id="comment-22108">
<div class="comment-score" id="post-22108-score"></div>
<div class="comment-text"><p>Thanks mcid I understand now</p></div>
<div class="comment-info" id="comment-22108-info">
<span class="comment-age">(05 May '13, 10:52)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
<a name="22109"></a>
<div class="comment not_top_scorer" id="comment-22109">
<div class="comment-score" id="post-22109-score"></div>
<div class="comment-text"><p>I have an example I mapped here that works with “tunnel=yes” and displays as a feint line 
 <a href="http://www.openstreetmap.org/?mlat=52.331150&amp;mlon=-0.178147&amp;zoom=18&amp;layers=M">http://www.openstreetmap.org/?mlat=52.331150&amp;mlon=-0.178147&amp;zoom=18&amp;layers=M</a></p></div>
<div class="comment-info" id="comment-22109-info">
<span class="comment-age">(05 May '13, 10:55)</span>
<a class="comment-user userinfo" href="/users/644/andy-mackey">andy mackey</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-21118">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-21118-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/19558/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="uLaTjZsmfgT9IOmdHANfyGDMUFzmnImP"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>