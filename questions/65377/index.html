<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/65377/get-all-pois-in-a-country-in-jsoncsv-format">Get all POIs in a country in json/csv format</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65377/up/" id="post-65377-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65377-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/65377/down/" id="post-65377-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/65377/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hi,</p>
<p>I would need all the available points of interest from a country in json/csv format, with the following fields: POI name, POI address, POI city, POI county, POI postcode. Something like what Nominatim returns. I've downloaded the country .osm.pbf file from geofabrik, but the data is not even close to the format I need. What would be the way to go ?</p>
<p>Thanks for your time!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-json" href="/tags/json/" rel="tag" title="see questions tagged 'json'">json</a>
<a class="post-tag tag-link-csv" href="/tags/csv/" rel="tag" title="see questions tagged 'csv'">csv</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-poi" href="/tags/poi/" rel="tag" title="see questions tagged 'poi'">poi</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>16 Aug '18, 00:46</strong>
</p>
<img alt="RollyPeres's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/2607d9c98bfa068899d5b1a0d609f260?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/15537/rollyperes">RollyPeres</a><br/>
<span class="score" title="31 reputation points">31</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="RollyPeres has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-65377">
</div>
<div class="comment-tools" id="comment-tools-65377">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65377-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/65377/get-all-pois-in-a-country-in-jsoncsv-format?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/65377/get-all-pois-in-a-country-in-jsoncsv-format?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/65377/get-all-pois-in-a-country-in-jsoncsv-format?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/65377/get-all-pois-in-a-country-in-jsoncsv-format?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="65386"></a>
<div class="answer" id="answer-container-65386">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/65386/up/" id="post-65386-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-65386-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/65386/down/" id="post-65386-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In principle you could do this with the overpass-api however that will only work for very small countries.</p>
<p>Your best bet is likely a combination of <a href="https://wiki.openstreetmap.org/wiki/Osmconvert">osmconvert</a> (as you will probably want polygon centroids for POIs that are not mapped as nodes) and one of the filter applications for example osmfilter or the <a href="https://osmcode.org/osmium-tool/">osmium command line tool</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/65386/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 Aug '18, 13:19</strong>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SimonPoole has 209 accepted answers">18%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/65386/">
                edited
                <strong>16 Aug '18, 13:19</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-65386">
<a name="65396"></a>
<div class="comment" id="comment-65396">
<div class="comment-score" id="post-65396-score">1</div>
<div class="comment-text"><p>but Overpass will only show the county, city and postcode if they are mapped on the POI. In some countries this information is mapped as separate relations. I think this is also a problem for osmfilter and osmium (but I'm not familiar with them). You will need to process those boundaries somewhere in the workflow to get the CSV you want.</p></div>
<div class="comment-info" id="comment-65396-info">
<span class="comment-age">(17 Aug '18, 06:40)</span>
<a class="comment-user userinfo" href="/users/5390/escada">escada</a>
</div>
</div>
<a name="65424"></a>
<div class="comment" id="comment-65424">
<div class="comment-score" id="post-65424-score"></div>
<div class="comment-text"><p>Thanks Simon for the suggestion. I've taken a look at those tool, however I couldn't find a way to get the data in the needed format. What I managed to do is run the osm.pbf file through osmconvert and get it back in osm format. This file contains a bunch of nodes, ways, relations that I'm not familiar with. Are you aware of a command which would extract me the data in the format that I need ?</p></div>
<div class="comment-info" id="comment-65424-info">
<span class="comment-age">(18 Aug '18, 18:12)</span>
<a class="comment-user userinfo" href="/users/15537/rollyperes">RollyPeres</a>
</div>
</div>
<a name="65425"></a>
<div class="comment" id="comment-65425">
<div class="comment-score" id="post-65425-score"></div>
<div class="comment-text"><p>Exactly what escada commented. In the osm file, some POIs do have a street/postcode/city/county attached to it, but that's rare. For the rest they should probably be calculated somehow from relations or something, but it's not intuitive whatsoever.</p></div>
<div class="comment-info" id="comment-65425-info">
<span class="comment-age">(18 Aug '18, 18:16)</span>
<a class="comment-user userinfo" href="/users/15537/rollyperes">RollyPeres</a>
</div>
</div>
<a name="65426"></a>
<div class="comment" id="comment-65426">
<div class="comment-score" id="post-65426-score"></div>
<div class="comment-text"><p>For POIs without addresses you really need to have the data in a spatially enabled database to be able to determine the address.</p>
<p>There are essentially these cases you have to consider</p>
<ul>
<li>POI is in a (building-)polygon with address tags</li>
<li>POI is in a (building-)polygon which doesn't have address tags but encloses a node (or multiple nodes) with address tags, or has a node (or multiple nodes) with address tags on the outline itself</li>
<li>there is a nearby node or other element with address tags</li>
<li>there is no nearby element with address tags</li>
</ul>
<p>Note: the only tags you can expect to find explicitly tagged with a high likelihood are house number and street (addr:housenumber and addr:street), enclosing administrative or postal entities need to be either deduced from enclosing polygons or from other nearby elements.</p></div>
<div class="comment-info" id="comment-65426-info">
<span class="comment-age">(18 Aug '18, 19:06)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-65386">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-65386-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/65377/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="M6Mo1t4InIJAURhMYVsF8GwKnH3aonjy"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>