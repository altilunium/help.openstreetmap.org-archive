<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/12253/xslt-processor-gives-back-top-results-on-one-dataset-and-no-results-on-another">xslt-processor gives back top-results on one dataset and no results on another</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/12253/up/" id="post-12253-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-12253-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/12253/down/" id="post-12253-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/12253/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>hello and good day dear xml-friends, </p>
<p>i am new to xml so do not bear with me for the questions... i am currently making some tests with an xslt-processor - 
I ve got an script that   runs nicely on one test-dataset - and gives back good and valid results and contrary to this behaviour
i get back silly and dumb results if i run the same script - note: i get back a csv-formatted file with 2 MB that contains 
only tabstops... funny  but true... </p>
<p>so here my script is: </p>
<p>if i run this xslt-code on the following test-dataset i get only bad bad results - only tabstops... nothing more... what causes this errors. note - i get better results if i run the code againgst the second dataset .- see far below... and see  the results at the end of this inital posting....</p>
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt;

    &lt;xsl:output method="text" encoding="utf-8" /&gt;

    &lt;xsl:template match="/"&gt;
        &lt;xsl:apply-templates /&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="osm"&gt;
        &lt;xsl:apply-templates /&gt;
    &lt;/xsl:template&gt;

    &lt;xsl:template match="node[tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a>='amenity' and <a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>='restaurant']]"&gt;
        &lt;xsl:value-of select="./<a href="/users/260/idoneus">@id</a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./@lat"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./<a href="/users/1350/longestaugust">@lon</a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'cuisine']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'name']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'wheelchair']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'website']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'addr:country']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
    &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'addr:city']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
    &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;        
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'addr:street']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x09;&lt;/xsl:text&gt;
        &lt;xsl:value-of select="./tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a> = 'addr:housenumber']/<a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>"/&gt;
        &lt;xsl:text&gt;&amp;#x0A;&lt;/xsl:text&gt;
    &lt;/xsl:template&gt;
        &lt;!-- all non-restaurant nodes --&gt;
    &lt;xsl:template match="node[tag[<a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim"><a href="/users/51/ktim">@k</a></a></a></a></a></a></a></a></a></a>='amenity' and <a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski"><a href="/users/121/victor-bielawski">@v</a></a></a></a></a></a></a></a></a></a>!='restaurant']]" /&gt;

&lt;/xsl:stylesheet&gt;
</code></pre>
<p>if i run this against this test-dataset - then i get only dumb results  a file with only tabstops in. i have no glue what causes the error?</p>

&lt;xml_split:root xmlns:xml_split="http://xmltwig.com/xml_split"&gt;

<pre><code>&lt;node id="25242198" lat="49.0077605" lon="8.3560676" version="9" changeset="10151199" user="keinname" uid="165061" timestamp="2011-12-18T22:59:43Z"&gt;
    &lt;tag k="addr:city" v="Karlsruhe" /&gt;
    &lt;tag k="addr:country" v="DE" /&gt;
    &lt;tag k="addr:housenumber" v="6" /&gt;
    &lt;tag k="addr:postcode" v="76185" /&gt;
    &lt;tag k="addr:street" v="Durmersheimer Straße" /&gt;
    &lt;tag k="amenity" v="restaurant" /&gt;
    &lt;tag k="beer_garden" v="yes" /&gt;
    &lt;tag k="cuisine" v="german" /&gt;
    &lt;tag k="name" v="Beim Schupi" /&gt;
    &lt;tag k="opening_hours" v="Mo-Sa 17:00+; Su 12:00+" /&gt;
    &lt;tag k="phone" v="+49 721 551220" /&gt;
    &lt;tag k="website" v="http://www.schupi.de" /&gt;
&lt;/node&gt;
</code></pre>
<p>[...]...</p>
<p>Note: i get back silly and bad results - only tabstops and nothing more.. </p>
<p>but if if i run the above mentioned xslt-processor-code on the following xml-dataset i get back good results... see below - !!!</p>
<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;osm version="0.6" generator="Osmosis SNAPSHOT-r26564"&gt;
  &lt;node id="185612117" version="5" timestamp="2011-01-08T19:23:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8037523" lon="9.5248779"&gt;
    &lt;tag k="addr:postcode" v="73614"/&gt;
    &lt;tag k="wheelchair" v="yes"/&gt;
    &lt;tag k="website" v="http://www.courage-restaurant.de/"/&gt;
    &lt;tag k="addr:country" v="DE"/&gt;
    &lt;tag k="name" v="Courage"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
    &lt;tag k="addr:street" v="Künkelinstraße"/&gt;
    &lt;tag k="addr:city" v="Schorndorf"/&gt;
    &lt;tag k="addr:housenumber" v="33"/&gt;
  &lt;/node&gt;
  &lt;node id="252619189" version="5" timestamp="2011-01-08T19:21:43Z" uid="290680" user="wheelmap_visitor" changeset="6906586" lat="48.8067032" lon="9.5314986"&gt;
    &lt;tag k="addr:postcode" v="73614"/&gt;
    &lt;tag k="wheelchair" v="yes"/&gt;
    &lt;tag k="website" v="www.kesselhaus-schorndorf.de"/&gt;
    &lt;tag k="addr:country" v="DE"/&gt;
    &lt;tag k="name" v="Kesselhaus"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
    &lt;tag k="addr:street" v="Arnoldstraße"/&gt;
    &lt;tag k="addr:city" v="Schorndorf"/&gt;
    &lt;tag k="addr:housenumber" v="3"/&gt;
  &lt;/node&gt;
  &lt;node id="319597380" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8277913" lon="9.5477029"&gt;
    &lt;tag k="name" v="Gasthaus zur Linde"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="319597382" version="1" timestamp="2008-12-17T21:13:15Z" changeset="444629" lat="48.8282523" lon="9.5503109"&gt;
    &lt;tag k="name" v="China-Garden"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="339591124" version="2" timestamp="2011-09-22T17:33:36Z" uid="290680" user="wheelmap_visitor" changeset="9366746" lat="48.7888015" lon="9.5079525"&gt;
    &lt;tag k="cuisine" v="italian"/&gt;
    &lt;tag k="wheelchair" v="limited"/&gt;
    &lt;tag k="name" v="Pizzeria da Rocco"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="392682646" version="3" timestamp="2010-05-11T19:00:20Z" uid="12973" user="MattGPS" changeset="4671372" lat="48.8315734" lon="9.5468864"&gt;
    &lt;tag k="name" v="Gasthaus an der Wieslauf"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="454516720" version="4" timestamp="2010-12-11T15:30:21Z" uid="12982" user="Michael Schulze" changeset="6625571" lat="48.8031264" lon="9.5344371"&gt;
    &lt;tag k="addr:postcode" v="73614"/&gt;
    &lt;tag k="cuisine" v="regional"/&gt;
    &lt;tag k="website" v="http://www.deutscheshaus-schorndorf.de/"/&gt;
    &lt;tag k="addr:country" v="DE"/&gt;
    &lt;tag k="name" v="Deutsches Haus"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
    &lt;tag k="addr:street" v="Sonnenscheinstraße"/&gt;
    &lt;tag k="addr:city" v="Schorndorf"/&gt;
    &lt;tag k="addr:housenumber" v="13"/&gt;
  &lt;/node&gt;
  &lt;node id="572362430" version="3" timestamp="2010-07-04T06:59:50Z" uid="106522" user="neuntoeter" changeset="5130101" lat="48.807953" lon="9.5379673"&gt;
    &lt;tag k="smoking" v="no"/&gt;
    &lt;tag k="name" v="Club Kneipe"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="613988559" version="1" timestamp="2010-01-15T01:20:03Z" uid="24748" user="mabapla" changeset="3621550" lat="48.7991827" lon="9.551828"&gt;
    &lt;tag k="name" v="Gaststätte Schützenhaus"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
  &lt;node id="859532091" version="1" timestamp="2010-08-13T23:05:14Z" uid="130472" user="fx99" changeset="5486736" lat="48.8062337" lon="9.5278548"&gt;
    &lt;tag k="website" v="http://www.weinstube-buechsenmacher.de/"/&gt;
    &lt;tag k="name" v="Weinstube zum Büchsenmacher"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
    &lt;tag k="addr:housename" v="5"/&gt;
    &lt;tag k="addr:street" v="Höllgasse"/&gt;
  &lt;/node&gt;
  &lt;node id="1625565012" version="1" timestamp="2012-02-09T18:00:04Z" uid="131968" user="changchun_1" changeset="10636279" lat="48.8151893" lon="9.5310692"&gt;
    &lt;tag k="name" v="Gasthaus Sonne"/&gt;
    &lt;tag k="amenity" v="restaurant"/&gt;
  &lt;/node&gt;
&lt;/osm&gt;
</code></pre>
<p>see the -fairly good !! - results i get when i run the xslt-processor on the second dataset: i have no glue why i get such nasty results - when i apply the xslt-processor on the first dataset...!?</p>
<pre><code>185612117   48.8037523  9.5248779       Courage yes <a href="http://www.courage-restaurant.de/">http://www.courage-restaurant.de/</a>   DE  Schorndorf  Künkelinstraße  33

252619189   48.8067032  9.5314986       Kesselhaus  yes www.kesselhaus-schorndorf.de    DE  Schorndorf  Arnoldstraße    3

319597380   48.8277913  9.5477029       Gasthaus zur Linde

319597382   48.8282523  9.5503109       China-Garden

339591124   48.7888015  9.5079525   italian Pizzeria da Rocco   limited

392682646   48.8315734  9.5468864       Gasthaus an der Wieslauf

454516720   48.8031264  9.5344371   regional    Deutsches Haus      <a href="http://www.deutscheshaus-schorndorf.de/">http://www.deutscheshaus-schorndorf.de/</a> DE  Schorndorf  Sonnenscheinstraße  13
</code></pre>
<p>any idea and pointer towards a solution is greatly wellcome... thx in advance!!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-xml" href="/tags/xml/" rel="tag" title="see questions tagged 'xml'">xml</a>
<a class="post-tag tag-link-openstreetmap" href="/tags/openstreetmap/" rel="tag" title="see questions tagged 'openstreetmap'">openstreetmap</a>
<a class="post-tag tag-link-mysql" href="/tags/mysql/" rel="tag" title="see questions tagged 'mysql'">mysql</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>22 Apr '12, 08:02</strong>
</p>
<img alt="tagtheworld's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/600fc90e36ff81dfaba666708cf91dc5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/3389/tagtheworld">tagtheworld</a><br/>
<span class="score" title="0 reputation points">0</span><span title="8 badges"><span class="badge1">●</span><span class="badgecount">8</span></span><span title="8 badges"><span class="silver">●</span><span class="badgecount">8</span></span><span title="9 badges"><span class="bronze">●</span><span class="badgecount">9</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="tagtheworld has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-12253">
</div>
<div class="comment-tools" id="comment-tools-12253">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-12253-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<form action="/questions/12253/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="twyCQ3Mmt3uqCWX9bu7NaCZRzgs2zw6E"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>