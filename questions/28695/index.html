<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/28695/how-can-i-change-nominatims-reverse-geocoding-behaviour">How can I change Nominatim's reverse geocoding behaviour?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28695/up/" id="post-28695-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28695-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/28695/down/" id="post-28695-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/28695/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm conducting some tests against nominatim.openstreetmap.org, looking at reverse geocoding. Based upon my observations I have two questions:</p>
<p>1) Given that I'm looking at data generated from a vehicle, this request and response are unexpected:</p>
<p><a href="http://nominatim.openstreetmap.org/reverse?lat=52.50676&amp;lon=-1.99523&amp;addressdetails=1&amp;format=json&amp;zoom=18">http://nominatim.openstreetmap.org/reverse?lat=52.50676&amp;lon=-1.99523&amp;addressdetails=1&amp;format=json&amp;zoom=18</a></p>
<pre><code>{"place_id":"9146383198","licence":"Data \u00a9 OpenStreetMap contributors, ODbL 1.0. <a href="http://www.openstreetmap.org/copyright">http://www.openstreetmap.org/copyright","osm_type":"way","osm_id":"60694393","lat":"52.506753","lon":"-1.9943365","display_name":"CLOSED</a> for 60 weeks from Sep 2013, Londonderry, Warley, Sandwell, West Midlands, England, B70 6AS, United Kingdom","address":{"footway":"CLOSED for 60 weeks from Sep 2013","neighbourhood":"Londonderry","suburb":"Warley","city":"Sandwell","county":"West Midlands","state_district":"West Midlands","state":"England","postcode":"B70 6AS","country":"United Kingdom","country_code":"gb"}}
</code></pre>
<p>It seems that I need Nominatim to ignore ways with highway=footway - can I achieve this?</p>
<p>2) Can I ask for a reverse geocoded response to include other tag values? I have been able to find the maxspeed tag value by requesting an api lookup following the reverse geocode request, for example:</p>
<p><a href="http://api.openstreetmap.org/api/0.6/way/144176050">http://api.openstreetmap.org/api/0.6/way/144176050</a></p>
<p>This is ok but it would be far better if I could obtain the information from a single reverse geocode call as it seems reasonable to expect to be able to obtain other tag values from Nominatim. Is this possible? I note the Extra Tags shown from the Nominatim data here: <a href="http://nominatim.openstreetmap.org/details.php?place_id=9146205970">http://nominatim.openstreetmap.org/details.php?place_id=9146205970</a></p>
<p>If these things are not possible then I wonder if I could better achieve it I had my own Nominatim instance? I'm prepared to get into the Nominatim coding and make changes if necessary (but obviously need to consider the impact of the change and ensure it avoids any behavioural change for other contributors).</p>
<p>Thanks for any advice.</p>
<p>Note I also asked this question here: <a href="http://stackoverflow.com/questions/20331620/how-can-i-change-nominatims-reverse-geocoding-behaviour">http://stackoverflow.com/questions/20331620/how-can-i-change-nominatims-reverse-geocoding-behaviour</a></p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-reversegeocoding" href="/tags/reversegeocoding/" rel="tag" title="see questions tagged 'reversegeocoding'">reversegeocoding</a>
<a class="post-tag tag-link-maxspeed" href="/tags/maxspeed/" rel="tag" title="see questions tagged 'maxspeed'">maxspeed</a>
<a class="post-tag tag-link-nominatim" href="/tags/nominatim/" rel="tag" title="see questions tagged 'nominatim'">nominatim</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>02 Dec '13, 16:18</strong>
</p>
<img alt="Elliveny's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/68791600aba005984a3eddbd82f6c0ce?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/7931/elliveny">Elliveny</a><br/>
<span class="score" title="66 reputation points">66</span><span title="4 badges"><span class="badge1">●</span><span class="badgecount">4</span></span><span title="4 badges"><span class="silver">●</span><span class="badgecount">4</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Elliveny has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/28695/">
                edited
                <strong>02 Dec '13, 16:20</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28695">
</div>
<div class="comment-tools" id="comment-tools-28695">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28695-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    2 Answers:
                    </div>
<div class="tabsA"><a href="/questions/28695/how-can-i-change-nominatims-reverse-geocoding-behaviour?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/28695/how-can-i-change-nominatims-reverse-geocoding-behaviour?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/28695/how-can-i-change-nominatims-reverse-geocoding-behaviour?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/28695/how-can-i-change-nominatims-reverse-geocoding-behaviour?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="28711"></a>
<div class="answer accepted-answer" id="answer-container-28711">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/28711/up/" id="post-28711-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-28711-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/28711/down/" id="post-28711-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/28711/" rel="nofollow" title="Elliveny has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>Neither of these two problems can be solved with the current API. However, solutions are fairly easy to implement and would be a welcome addition to the API. If you know a bit of PHP and like to get your hands dirty, they are a good place to start contributing to Nominatim. For a more in-depth discussion on how to best proceed, join the <a href="https://lists.openstreetmap.org/listinfo/geocoding">geocoding mailinglist</a> or <a href="http://wiki.openstreetmap.org/wiki/Irc">#osm-nominatim on IRC</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/28711/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>03 Dec '13, 09:14</strong>
</p>
<img alt="lonvia's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d888b712d85dee0aa304297f2dc697c7?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2921/lonvia">lonvia</a><br/>
<span class="score" title="6213 reputation points"><span class="">6.2k</span></span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="57 badges"><span class="silver">●</span><span class="badgecount">57</span></span><span title="89 badges"><span class="bronze">●</span><span class="badgecount">89</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="lonvia has 43 accepted answers">40%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-28711">
</div>
<div class="comment-tools" id="comment-tools-28711">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-28711-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="29394"></a>
<div class="answer" id="answer-container-29394">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/29394/up/" id="post-29394-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-29394-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/29394/down/" id="post-29394-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>if that way was named correctly (or not named at all).  You would have gotten a better hit from a nearby source.   I <a href="http://www.openstreetmap.org/changeset/19672738">fixed</a> that bad tagging for you in OSM in 5min.  It will disappear eventually from nominatim too.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/29394/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>28 Dec '13, 02:25</strong>
</p>
<img alt="gplv2's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/39f5ad4949a7d408894b29769069a869?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/4979/gplv2">gplv2</a><br/>
<span class="score" title="1 reputation points">1</span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="gplv2 has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-29394">
</div>
<div class="comment-tools" id="comment-tools-29394">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-29394-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/28695/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="9FfBiiYKWu4xLbWxijt354UqOwSYBmxN"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>