<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/64751/overpass-filtering-search-to-a-specific-washington">Overpass: Filtering search to a specific Washington</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/64751/up/" id="post-64751-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-64751-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/64751/down/" id="post-64751-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/64751/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>in the US, there are 88 cities named "Washington".</p>
<p>I want to search for bike lanes within a specific Washington by specifying a state and country.</p>
<p>This works and returns bike paths for ALL areas named Washington</p>
<pre><code>[out:json][timeout:25];
(
  area[name="Washington"];
  way(area)[highway="cycleway"];
 );

  (._;&gt;;);
  out;
</code></pre>
<p><strong>BUT this does not . It returns BLANK.</strong></p>
<pre><code>[out:json][timeout:25];
(
  area[name="Washington, MO, USA"];
  way(area)[highway="cycleway"];
 );

  (._;&gt;;);
</code></pre>
<p>out;
why does the area [name=""] not support NOMINATUM convention?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
<a class="post-tag tag-link-city" href="/tags/city/" rel="tag" title="see questions tagged 'city'">city</a>
<a class="post-tag tag-link-area" href="/tags/area/" rel="tag" title="see questions tagged 'area'">area</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>16 Jul '18, 18:47</strong>
</p>
<img alt="Varun-ARGO's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/cbff45c3fef0138cd67bbb0a2866e11b?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/15400/varun-argo">Varun-ARGO</a><br/>
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Varun-ARGO has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/64751/">
                edited
                <strong>16 Jul '18, 19:17</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-64751">
<a name="64752"></a>
<div class="comment" id="comment-64752">
<div class="comment-score" id="post-64752-score">1</div>
<div class="comment-text"><p>As far as I can tell, there isn't a town/city in Washington state called "Washington", so it makes sense that nothing is returned.</p></div>
<div class="comment-info" id="comment-64752-info">
<span class="comment-age">(16 Jul '18, 19:08)</span>
<a class="comment-user userinfo" href="/users/8189/alester">alester</a>
</div>
</div>
<a name="64753"></a>
<div class="comment" id="comment-64753">
<div class="comment-score" id="post-64753-score"></div>
<div class="comment-text"><p>Which Nominatim convention? Querying Nominatim for "Washington, WA, USA" finds all kinds of roads, cities and counties.</p></div>
<div class="comment-info" id="comment-64753-info">
<span class="comment-age">(16 Jul '18, 19:15)</span>
<a class="comment-user userinfo" href="/users/3577/hjart">Hjart</a>
</div>
</div>
<a name="64754"></a>
<div class="comment" id="comment-64754">
<div class="comment-score" id="post-64754-score"></div>
<div class="comment-text"><p>Try Boulder</p>
<p>if area[name="Boulder"]; you get results/</p>
<p>area[name="Boulder, CO, USA"]; you get BLANK</p></div>
<div class="comment-info" id="comment-64754-info">
<span class="comment-age">(16 Jul '18, 19:18)</span>
<a class="comment-user userinfo" href="/users/15400/varun-argo">Varun-ARGO</a>
</div>
</div>
<a name="64765"></a>
<div class="comment" id="comment-64765">
<div class="comment-score" id="post-64765-score"></div>
<div class="comment-text"><p>If you try to perform that query on the OSM website, you will understand why.</p></div>
<div class="comment-info" id="comment-64765-info">
<span class="comment-age">(17 Jul '18, 17:26)</span>
<a class="comment-user userinfo" href="/users/3577/hjart">Hjart</a>
</div>
</div>
<a name="64766"></a>
<div class="comment" id="comment-64766">
<div class="comment-score" id="post-64766-score"></div>
<div class="comment-text"><p>Can you please elaborate?</p></div>
<div class="comment-info" id="comment-64766-info">
<span class="comment-age">(17 Jul '18, 17:27)</span>
<a class="comment-user userinfo" href="/users/15400/varun-argo">Varun-ARGO</a>
</div>
</div>
<a name="64770"></a>
<div class="comment not_top_scorer" id="comment-64770">
<div class="comment-score" id="post-64770-score"></div>
<div class="comment-text"><p>Try <a href="https://www.openstreetmap.org/search?query=Boulder%2CCO%2CUSA">https://www.openstreetmap.org/search?query=Boulder%2CCO%2CUSA</a></p></div>
<div class="comment-info" id="comment-64770-info">
<span class="comment-age">(17 Jul '18, 17:56)</span>
<a class="comment-user userinfo" href="/users/3577/hjart">Hjart</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-64751">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-64751-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/64751/overpass-filtering-search-to-a-specific-washington?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/64751/overpass-filtering-search-to-a-specific-washington?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/64751/overpass-filtering-search-to-a-specific-washington?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/64751/overpass-filtering-search-to-a-specific-washington?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="64755"></a>
<div class="answer" id="answer-container-64755">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/64755/up/" id="post-64755-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-64755-score" title="current number of votes">
    3
</div>
<a class="ajax-command post-vote down" href="/vote/64755/down/" id="post-64755-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p><a href="https://nominatim.openstreetmap.org/search.php?q=Washington+franklin+county+Missouri&amp;polygon_geojson=1&amp;viewbox=">Washington franklin county Missouri</a> should work.</p>
<p>The blank results are when nominatim returns something that isn't searchable as an area or returns an area that doesn't have any of what you are trying to find. I don't have an explanation for the result that it returns for <a href="https://nominatim.openstreetmap.org/search.php?q=Washington%2C+MO%2C+USA&amp;polygon_geojson=1&amp;viewbox=">Washington, MO, USA</a>, but it is clear enough why Overpass API doesn't find anything there.</p>
<p>An alternative is to <a href="https://wiki.openstreetmap.org/wiki/Overpass_API/Overpass_QL#By_area_.28area.29">query by the relation id</a>, along with an offset, like:</p>
<pre><code>area(3600141263);
</code></pre>
<p>(read the whole section for the info about the 3600)</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/64755/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>16 Jul '18, 21:00</strong>
</p>
<img alt="maxerickson's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/c860445e868ebb21da141635a4aa7b06?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10973/maxerickson">maxerickson</a><br/>
<span class="score" title="12700 reputation points"><span class="">12.7k</span></span><span title="10 badges"><span class="badge1">●</span><span class="badgecount">10</span></span><span title="83 badges"><span class="silver">●</span><span class="badgecount">83</span></span><span title="176 badges"><span class="bronze">●</span><span class="badgecount">176</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="maxerickson has 93 accepted answers">32%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-64755">
<a name="64762"></a>
<div class="comment" id="comment-64762">
<div class="comment-score" id="post-64762-score"></div>
<div class="comment-text"><p>Thanks! Is there a way to retrieve relation id by city name?</p></div>
<div class="comment-info" id="comment-64762-info">
<span class="comment-age">(17 Jul '18, 14:06)</span>
<a class="comment-user userinfo" href="/users/15400/varun-argo">Varun-ARGO</a>
</div>
</div>
<a name="64777"></a>
<div class="comment" id="comment-64777">
<div class="comment-score" id="post-64777-score"></div>
<div class="comment-text"><p>I actually misread your question. On the Overpass-<em>Turbo</em> website there is a shortcut for looking up areas that uses Nominatim directly, <code>{{geocodeArea: Washington franklin county Missouri}};</code> Implementing something like that where the result from Nominatim is injected into the Overpass-API script, is a decent way to do the id lookups.</p>
<p>The alternative just using the Overpass-API is to first retrieve the state (or county) area and then restrict the query for the city to that state (use admin_level and name together), and then use the map_to_area statement to get an area.</p>
<p>The Overpass-API areas have the same tags as the OSM objects they are based on, that's why the Nominatim style lookups don't work, the area query will only return an exact match.</p></div>
<div class="comment-info" id="comment-64777-info">
<span class="comment-age">(18 Jul '18, 02:03)</span>
<a class="comment-user userinfo" href="/users/10973/maxerickson">maxerickson</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-64755">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-64755-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/64751/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="zIVa7jsfBiVoqvj3ddZTRS7WrFFMGzSZ"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>