<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/22956/how-to-fetch-house-details-with-a-common-regex-addrstreet-value">How to fetch house details with a common regex addr:street value</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/22956/up/" id="post-22956-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-22956-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/22956/down/" id="post-22956-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/22956/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I'm trying to fetch house locations from streets that match a query search:</p>
<pre><code>{{value="Sancti"}}
&lt;osm-script output="json"&gt;
  &lt;query type="relation"&gt;
    &lt;around lat="40.96515" lon="-5.664" radius="1000"/&gt;
    &lt;has-kv k="addr:street" regv={{value}}/&gt;
  &lt;/query&gt;
  &lt;union&gt;
    &lt;item/&gt;
    &lt;recurse type="down"/&gt;
  &lt;/union&gt;
  &lt;print/&gt;
&lt;/osm-script&gt;
</code></pre>
<p>At this point, I would love to be able to get the same amount of information that can be retrived by nominatim when query for a 'ways' that match addr:street 'relation' value like <a href="http://nominatim.openstreetmap.org/details.php?place_id=50241282">this</a></p>
<p>So, question is, How can I extend query to retrieve info about buildings on the same street ?</p>
<p>Thanks</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-overpass" href="/tags/overpass/" rel="tag" title="see questions tagged 'overpass'">overpass</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>02 Jun '13, 17:30</strong>
</p>
<img alt="inean's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f06f5e1e5c88a1b4a36263e193b5fae9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6544/inean">inean</a><br/>
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="inean has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/22956/">
                edited
                <strong>02 Jun '13, 23:01</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-22956">
<a name="22958"></a>
<div class="comment" id="comment-22958">
<div class="comment-score" id="post-22958-score">1</div>
<div class="comment-text"><p>Please explain what you mean by "fetch relations of which matched ways are parent of". I suspect that you may have a misconception here about how buildings are mapped; they do not usually have a direct relationship to a nearby street, but instead they just carry the street name in their <code>addr:street</code> tag. There is an "associatedStreet" relation but it is not widely used.</p></div>
<div class="comment-info" id="comment-22958-info">
<span class="comment-age">(02 Jun '13, 18:59)</span>
<a class="comment-user userinfo" href="/users/104/frederik-ramm">Frederik Ramm ♦</a>
</div>
</div>
<a name="22960"></a>
<div class="comment" id="comment-22960">
<div class="comment-score" id="post-22960-score"></div>
<div class="comment-text"><p>Ok, I've rewritten question a bit, hope this helps. Said that, Nominatim says that there's some kind of parent-child relation between 'relations' with 'tags' 'type' = 'place:house' and 'ways'. What I want is to get that info with overpass.</p>
<p>I'm trying to implement some kind of adapatative search with overpass to retrieve streets that matchs an user query. At some point, it would be interesting that, with house number info, get coordinates of that building. The main reason to not use Nominating is that I need all available candidates around user coordinates and within a radius.</p></div>
<div class="comment-info" id="comment-22960-info">
<span class="comment-age">(02 Jun '13, 19:56)</span>
<a class="comment-user userinfo" href="/users/6544/inean">inean</a>
</div>
</div>
<a name="23002"></a>
<div class="comment" id="comment-23002">
<div class="comment-score" id="post-23002-score">1</div>
<div class="comment-text"><p>Nominatim does the "parent-child relation" via the name of the street, it's a <a href="http://overpass-turbo.eu/s/ib">simple overpass query</a> you almost did already.</p>
<p>And getting a coordinate for a building is getting the geometry and calculation some middle point.</p>
<p>I agree with Frederik, I can't guess what you really want to do.</p></div>
<div class="comment-info" id="comment-23002-info">
<span class="comment-age">(04 Jun '13, 13:55)</span>
<a class="comment-user userinfo" href="/users/507/_al">_al</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-22956">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-22956-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<form action="/questions/22956/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="RzvlH5VDdlBSLETXrwImAuflgHRnUTwu"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>