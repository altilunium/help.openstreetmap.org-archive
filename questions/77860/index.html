<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/77860/how-can-i-get-the-location-i-want-if-there-are-two-locations-with-same-name">How can I get the location I want if there are two locations with same name?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/77860/up/" id="post-77860-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-77860-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/77860/down/" id="post-77860-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/77860/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I am searching for a map of sub-districts (admin level 6) within a district(admin level 5) in which each sub-dist will be clickable on my webpage. The problem is there are some districts with one of its sub-district having same name as the district itself. when I search for the district I get the sub-district instead.</p>
<p>Sub District with same name
<img alt="alt text" src="https://help.openstreetmap.org/upfiles/2020-12-06_23_02_52-overpass_turbo_-_Brave.png"/></p>
<p>What i want<img alt="alt text" src="https://help.openstreetmap.org/upfiles/2020-12-06_23_02_44-overpass_turbo_-_Brave.png"/></p>
<pre><code>[out:json];

{{geocodeArea: chittoor, Andhra Pradesh, india}}-&gt;.searchArea;

(

  relation["type"="boundary"][admin_level = 6](area.searchArea);

);
out;

(
    relation[admin_level = 6];
);
out skel;
</code></pre>
<p>Here i am trying to use output of one set as input for next set? How can i archive this?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-output" href="/tags/output/" rel="tag" title="see questions tagged 'output'">output</a>
<a class="post-tag tag-link-input" href="/tags/input/" rel="tag" title="see questions tagged 'input'">input</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>06 Dec '20, 17:36</strong>
</p>
<img alt="PramodG's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/203cf23bc7b343ffbec5dbb92c2857f6?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/19360/pramodg">PramodG</a><br/>
<span class="score" title="11 reputation points">11</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="PramodG has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/77860/">
                edited
                <strong>07 Dec '20, 18:49</strong>
</a>
</p>
<img alt="TZorn's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ddebc8d5f4e0458413eacf65e36561a9?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10133/tzorn">TZorn</a><br/>
<span class="score" title="12350 reputation points"><span class="">12.3k</span></span><span title="7 badges"><span class="badge1">●</span><span class="badgecount">7</span></span><span title="64 badges"><span class="silver">●</span><span class="badgecount">64</span></span><span title="225 badges"><span class="bronze">●</span><span class="badgecount">225</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-77860">
</div>
<div class="comment-tools" id="comment-tools-77860">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-77860-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/77860/how-can-i-get-the-location-i-want-if-there-are-two-locations-with-same-name?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/77860/how-can-i-get-the-location-i-want-if-there-are-two-locations-with-same-name?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/77860/how-can-i-get-the-location-i-want-if-there-are-two-locations-with-same-name?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/77860/how-can-i-get-the-location-i-want-if-there-are-two-locations-with-same-name?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="77861"></a>
<div class="answer" id="answer-container-77861">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/77861/up/" id="post-77861-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-77861-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/77861/down/" id="post-77861-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I think you cant rely on geocodeArea for this type of operation. Instead you will need an unambiguous search string using standard overpass syntax (for instance possibly based on the wikidata item) and convert that to an area using the overpass statement which can then be assigned to the .searchArea set, something like area[wikidata="Q11103437"]-&gt;.searchArea;. (Of course if you know the object's OSM Id you can access the area by adding a magic number to the id).</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/77861/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>06 Dec '20, 18:55</strong>
</p>
<img alt="SK53's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/06cd84075f1adc2870ad102c7233e661?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/647/sk53">SK53 ♦</a><br/>
<span class="score" title="28084 reputation points"><span class="">28.1k</span></span><span title="48 badges"><span class="badge1">●</span><span class="badgecount">48</span></span><span title="268 badges"><span class="silver">●</span><span class="badgecount">268</span></span><span title="433 badges"><span class="bronze">●</span><span class="badgecount">433</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SK53 has 121 accepted answers">22%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-77861">
<a name="77862"></a>
<div class="comment" id="comment-77862">
<div class="comment-score" id="post-77862-score"></div>
<div class="comment-text"><p>I am doing something like that in python, but geocode return list (geo_result VARIABLE) of location matching the district name so both the sub-district and district are returned. How can i select the right one?</p>
<p>geolocator = Nominatim(user_agent="city_compare")
geo_results = geolocator.geocode(dist_name, exactly_one=False)</p>
<h1>Searching for relation in result set</h1>
<p>for r in geo_results:
      #print(r.address, r.raw.get("osm_type"))
      if r.raw.get("osm_type") == "relation" and r.raw.get('type')=='administrative':
             city = r
             break
       # Calculating area id
       area_id = int(city.raw.get("osm_id")) + 3600000000
       #print(area_id)
       # Excecuting overpass call
       query2 = """
           [out:json];
           area({})-&gt;.searchArea;</p>
<pre><code>       (
           relation["type"="boundary"][admin_level = 6](area.searchArea);
        );
      out geom;""".format(area_id)
   url = 'https://overpass-api.de/api/interpreter'
   r= requests.get(url, params={'data': query2})
</code></pre></div>
<div class="comment-info" id="comment-77862-info">
<span class="comment-age">(06 Dec '20, 19:10)</span>
<a class="comment-user userinfo" href="/users/19360/pramodg">PramodG</a>
</div>
</div>
<a name="77865"></a>
<div class="comment" id="comment-77865">
<div class="comment-score" id="post-77865-score"></div>
<div class="comment-text"><p>Ah, my approach gets round this Nominatim issue in Overpass, but does not resolve the actual Nominatim issue.</p></div>
<div class="comment-info" id="comment-77865-info">
<span class="comment-age">(07 Dec '20, 13:03)</span>
<a class="comment-user userinfo" href="/users/647/sk53">SK53 ♦</a>
</div>
</div>
<a name="77866"></a>
<div class="comment" id="comment-77866">
<div class="comment-score" id="post-77866-score"></div>
<div class="comment-text"><p>It will probably work to use the <code>place_rank</code> in the Nominatim results. If it doesn't, query Nominatim or Overpass-API for the details of each candidate (at which point you will have the admin_level tag).</p></div>
<div class="comment-info" id="comment-77866-info">
<span class="comment-age">(07 Dec '20, 21:47)</span>
<a class="comment-user userinfo" href="/users/10973/maxerickson">maxerickson</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-77861">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-77861-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/77860/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="NiMJy84jpZntQVNEYRnuSQO9nqVmkuku"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>