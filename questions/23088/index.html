<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/23088/how-to-correctly-import-aster-data-contours-into-a-postgis-database">How to correctly import ASTER data (contours) into a PostGIS database</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/23088/up/" id="post-23088-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-23088-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/23088/down/" id="post-23088-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/23088/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>I've got a tile-server up and running on an Ubuntu 12.04 VM (I followed this guide exactly to create this: <a href="http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/">http://switch2osm.org/serving-tiles/manually-building-a-tile-server-12-04/</a>)</p>
<p>I tried to add contours following the <a href="http://wiki.openstreetmap.org/wiki/Contours">http://wiki.openstreetmap.org/wiki/Contours</a> guide.</p>
<p>I downloaded the area of interest as ASTER Global Digital Elevation Model V002 data and imported this into the database as described - no errors were encountered during this process.</p>
<p>I then added the styles and layers listed under the "For mapnik version 2.1 the xml changed a little bit, so I added this in osm.xml" section into my osm.xml file.</p>
<p>Now I cannot render any tiles.
If I remove the added stuff from the osm.xml file then it all works again. (This is repeatable).</p>
<p>If I run the tile server interactively via the console with the command renderd -f -c /usr/local/etc/renderd.conf then errors parsing the sql in the style rules appear:</p>
<pre><code>column "way" does not exist.
</code></pre>
<p>Which it doesn't - the script "import_ASTGTM2.sh" on the contours page does not include this column - the contours table has the columns gid, Id, height and geometry.</p>
<p>The deprecated script for importing the SRTM3 data DOES contain this column so I'm guessing it's an oversight in the ASTER script? I have no idea how to adapt it though to include this column.</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-contours" href="/tags/contours/" rel="tag" title="see questions tagged 'contours'">contours</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
<a class="post-tag tag-link-tileserver" href="/tags/tileserver/" rel="tag" title="see questions tagged 'tileserver'">tileserver</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>07 Jun '13, 02:55</strong>
</p>
<img alt="Tangotonyb's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/d0323e670bafa590ec131e5d08f1b85e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/6579/tangotonyb">Tangotonyb</a><br/>
<span class="score" title="51 reputation points">51</span><span title="3 badges"><span class="badge1">●</span><span class="badgecount">3</span></span><span title="3 badges"><span class="silver">●</span><span class="badgecount">3</span></span><span title="7 badges"><span class="bronze">●</span><span class="badgecount">7</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Tangotonyb has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/23088/">
                edited
                <strong>07 Jun '13, 16:29</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-23088">
<a name="23091"></a>
<div class="comment" id="comment-23091">
<div class="comment-score" id="post-23091-score">1</div>
<div class="comment-text"><p>There's a bit of the "manually building a tile server" guide that says "We’ll run it interctively first...".  That causes renderd output to appear interactively instead of in a system log file /var/log/syslog.<br/>
</p>
<p>Perhaps try that and edit your question to include any errors listd in there, if you see any?</p></div>
<div class="comment-info" id="comment-23091-info">
<span class="comment-age">(07 Jun '13, 09:21)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="23092"></a>
<div class="comment" id="comment-23092">
<div class="comment-score" id="post-23092-score">1</div>
<div class="comment-text"><p>Thanks - good call I should have seen that - question updated.</p></div>
<div class="comment-info" id="comment-23092-info">
<span class="comment-age">(07 Jun '13, 09:48)</span>
<a class="comment-user userinfo" href="/users/6579/tangotonyb">Tangotonyb</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-23088">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-23088-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/23088/how-to-correctly-import-aster-data-contours-into-a-postgis-database?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/23088/how-to-correctly-import-aster-data-contours-into-a-postgis-database?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/23088/how-to-correctly-import-aster-data-contours-into-a-postgis-database?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/23088/how-to-correctly-import-aster-data-contours-into-a-postgis-database?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="23114"></a>
<div class="answer accepted-answer" id="answer-container-23114">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/23114/up/" id="post-23114-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-23114-score" title="current number of votes">
    4
</div>
<a class="ajax-command post-vote down" href="/vote/23114/down/" id="post-23114-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="accept-answer on" href="/accept_answer/23114/" rel="nofollow" title="Tangotonyb has selected this answer as the correct answer">
</a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In the Aster script, the column is named 'geometry' instead of way. Change the script or Mapnik postgis request accordingly.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/23114/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>08 Jun '13, 19:06</strong>
</p>
<img alt="yvecai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/3c7cffe544d6a1c46c97a25b2fdcdedc?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5587/yvecai">yvecai</a><br/>
<span class="score" title="1481 reputation points"><span class="">1.5k</span></span><span title="12 badges"><span class="silver">●</span><span class="badgecount">12</span></span><span title="26 badges"><span class="bronze">●</span><span class="badgecount">26</span></span><br>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="yvecai has 7 accepted answers">9%</span>
</br></p>
</div>
</div>
<div class="comments-container" id="comments-container-23114">
<a name="23156"></a>
<div class="comment" id="comment-23156">
<div class="comment-score" id="post-23156-score">2</div>
<div class="comment-text"><p>Thankyou - works nicely</p></div>
<div class="comment-info" id="comment-23156-info">
<span class="comment-age">(09 Jun '13, 17:25)</span>
<a class="comment-user userinfo" href="/users/6579/tangotonyb">Tangotonyb</a>
</div>
</div>
<a name="23161"></a>
<div class="comment" id="comment-23161">
<div class="comment-score" id="post-23161-score">1</div>
<div class="comment-text"><p>Have added a note to the talk page of <a href="//wiki.openstreetmap.org/wiki/Contours">the wiki page contours</a>. If someone here can, please add this info to the relevant section of the manual.</p></div>
<div class="comment-info" id="comment-23161-info">
<span class="comment-age">(09 Jun '13, 20:23)</span>
<a class="comment-user userinfo" href="/users/5179/aseerel4c26">aseerel4c26 ♦</a>
</div>
</div>
<a name="23554"></a>
<div class="comment" id="comment-23554">
<div class="comment-score" id="post-23554-score"></div>
<div class="comment-text"><p>Speaking entirely personally, I'd be worried that doing this would overcomplicate the "manually-building-a-tile-server-12-04" page.  A "minutely mapnik" section of that would probably be a higher priority.</p></div>
<div class="comment-info" id="comment-23554-info">
<span class="comment-age">(20 Jun '13, 13:10)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-23114">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-23114-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/23088/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="Zmd6gatQTAfJLfEwvIxIeh0yEwUwqDKF"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>