<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/10891/vector-layer-disappears-when-switching-to-osm-layer">Vector layer disappears when switching to OSM layer...</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/10891/up/" id="post-10891-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-10891-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/10891/down/" id="post-10891-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/10891/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>In the following code if I use the WMS layer my polygons (the geos variable) are displayed properly. If I switch to the OSM layer the OSM layer displays just fine, but the vector layer disappears from the map (despite being in the layers collection. Any ideas?</p>
<pre><code>var options = {
                projection: "EPSG:4326",
                displayProjection: "EPSG:4326",
                numZoomLevels: 20
            };
            that.map = new OpenLayers.Map('map', options);
//            that.layer = new OpenLayers.Layer.WMS("OpenLayers WMS",
//                "http://vmap0.tiles.osgeo.org/wms/vmap0",
//                { layers: 'basic' });

            that.layer = new OpenLayers.Layer.OSM({ opacity: 50 });

            var featurecollection = {
                "type": "FeatureCollection",
                "features": [
                    { "geometry": {
                        "type": "GeometryCollection",
                        "geometries": geos
                    },
                        "type": "Feature",
                        "properties": {}
                    }
                ]
            };

            var geojson_format = new OpenLayers.Format.GeoJSON();            
            var vector_layer = new OpenLayers.Layer.Vector();

            that.map.addLayers([vector_layer, that.layer]);

            vector_layer.events.register("featureadded", that.map.layers[1], that.zoomToLeftHalf);
            vector_layer.addFeatures(geojson_format.read(featurecollection));
</code></pre>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-wms" href="/tags/wms/" rel="tag" title="see questions tagged 'wms'">wms</a>
<a class="post-tag tag-link-osm" href="/tags/osm/" rel="tag" title="see questions tagged 'osm'">osm</a>
<a class="post-tag tag-link-vector" href="/tags/vector/" rel="tag" title="see questions tagged 'vector'">vector</a>
<a class="post-tag tag-link-openlayers" href="/tags/openlayers/" rel="tag" title="see questions tagged 'openlayers'">openlayers</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>01 Mar '12, 04:09</strong>
</p>
<img alt="coreyperkins's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/4063cd31f7de485431927b28f82828c0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2949/coreyperkins">coreyperkins</a><br/>
<span class="score" title="1 reputation points">1</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="coreyperkins has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/10891/">
                edited
                <strong>01 Mar '12, 17:08</strong>
</a>
</p>
<img alt="SomeoneElse's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/0bf1aa22f7f5e045b0eb8beb79fe7907?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/387/someoneelse">SomeoneElse ♦</a><br/>
<span class="score" title="36866 reputation points"><span class="">36.9k</span></span><span title="71 badges"><span class="badge1">●</span><span class="badgecount">71</span></span><span title="370 badges"><span class="silver">●</span><span class="badgecount">370</span></span><span title="866 badges"><span class="bronze">●</span><span class="badgecount">866</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-10891">
</div>
<div class="comment-tools" id="comment-tools-10891">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-10891-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<form action="/questions/10891/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="9aE661PSuEPLMZ2SGF6p1bwwHGzzjiUD"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>