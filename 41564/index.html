<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/41564/how-to-query-and-process-geojson-objects-from-an-api">How to query and process GeoJSON objects from an API?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/41564/up/" id="post-41564-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-41564-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/41564/down/" id="post-41564-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/41564/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>For my master's thesis, I need to geocode many postal addresses (my dataset provides zip code, city and street) that are all located in Germany. However, this was not successful for a subset of around 70,000 observations. Apparently, the geocoder failed to convert the addresses due to minor mistakes in the data. Eyeballing led me to the impression that the most prevalent reasons are the following</p>
<ul>
<li>minor spelling mistakes in terms of the city name. Example: "Neunburg v. Wald" instead of "Neunburg vorm Wald" or "Hessheim" instead of "Heßheim"</li>
<li>missing part of the name. Example: "Pohlheim" instead of "Pohlheim-Watzenborn"</li>
<li>the string in the city column refers to village that belongs to the city of interest</li>
<li>wrong match between zip code and city name (maybe because the address was recorded before a change in the zip code occured, e.g. two zip codes were merged)</li>
</ul>
<p><a href="http://photon.komoot.de/">Photon</a> appears to be able to identify many of the addresses which is why I would like to use their API to auto-correct my addresses. I would like to run a Java code on my local machine that queries a GeoJSON object for each of my addresses stored in a csv file using the Photon API and then save the answer in the very same file. This seems to be a standard problem but unfortunately I could not find a straight forward tutorial (I have little to no knowledge of Java). Is there available code which I can build upon? Thank you for your help!</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-auto-correct" href="/tags/auto-correct/" rel="tag" title="see questions tagged 'auto-correct'">auto-correct</a>
<a class="post-tag tag-link-autocomplete" href="/tags/autocomplete/" rel="tag" title="see questions tagged 'autocomplete'">autocomplete</a>
<a class="post-tag tag-link-api" href="/tags/api/" rel="tag" title="see questions tagged 'api'">api</a>
<a class="post-tag tag-link-geocoding" href="/tags/geocoding/" rel="tag" title="see questions tagged 'geocoding'">geocoding</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>08 Mar '15, 22:06</strong>
</p>
<img alt="scoopert's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/f1ac39ece091aedaeb2d8b0a48351daf?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/10475/scoopert">scoopert</a><br/>
<span class="score" title="11 reputation points">11</span><span title="2 badges"><span class="badge1">●</span><span class="badgecount">2</span></span><span title="2 badges"><span class="silver">●</span><span class="badgecount">2</span></span><span title="4 badges"><span class="bronze">●</span><span class="badgecount">4</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="scoopert has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/41564/">
                edited
                <strong>09 Aug '16, 11:22</strong>
</a>
</p>
<img alt="aseerel4c26's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/66f0dc05b44574e3894be07b0b37cf37?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/5179/aseerel4c26">aseerel4c26 ♦</a><br/>
<span class="score" title="32615 reputation points"><span class="">32.6k</span></span><span title="18 badges"><span class="badge1">●</span><span class="badgecount">18</span></span><span title="248 badges"><span class="silver">●</span><span class="badgecount">248</span></span><span title="554 badges"><span class="bronze">●</span><span class="badgecount">554</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-41564">
</div>
<div class="comment-tools" id="comment-tools-41564">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-41564-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/41564/how-to-query-and-process-geojson-objects-from-an-api?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/41564/how-to-query-and-process-geojson-objects-from-an-api?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/41564/how-to-query-and-process-geojson-objects-from-an-api?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/41564/how-to-query-and-process-geojson-objects-from-an-api?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="41575"></a>
<div class="answer" id="answer-container-41575">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/41575/up/" id="post-41575-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-41575-score" title="current number of votes">
    2
</div>
<a class="ajax-command post-vote down" href="/vote/41575/down/" id="post-41575-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>While I don't quite see what significant hurdle learning enough Java to query an API and write the results to a file could be, you can obviously use any other language to access the API. </p>
<p>A further note: while we, obviously, can't speak for Komoot here, I suspect you should plan on running a local install of Photon for your project.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/41575/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Mar '15, 14:06</strong>
</p>
<img alt="SimonPoole's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/ad2513d6f8e3d709d576ace900c12fa5?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2053/simonpoole">SimonPoole ♦</a><br/>
<span class="score" title="44667 reputation points"><span class="">44.7k</span></span><span title="13 badges"><span class="badge1">●</span><span class="badgecount">13</span></span><span title="326 badges"><span class="silver">●</span><span class="badgecount">326</span></span><span title="701 badges"><span class="bronze">●</span><span class="badgecount">701</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="SimonPoole has 209 accepted answers">18%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-41575">
<a name="41576"></a>
<div class="comment" id="comment-41576">
<div class="comment-score" id="post-41576-score"></div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/2053/simonpoole">@SimonPoole</a> thanks for your reply. Would you bother to give me a link that sets me up with sufficient material to tackle this problem? The problem is that I do not know what specifically I need to work through and with regards to my deadline I would like to avoid a lengthy search.</p></div>
<div class="comment-info" id="comment-41576-info">
<span class="comment-age">(09 Mar '15, 14:20)</span>
<a class="comment-user userinfo" href="/users/10475/scoopert">scoopert</a>
</div>
</div>
<a name="41592"></a>
<div class="comment" id="comment-41592">
<div class="comment-score" id="post-41592-score"></div>
<div class="comment-text"><p>You haven't indicated at all what level of (computer/programming) knowledge you have, further is java is a hard requirement or if there is a language you are comfortable with, that you would prefer etc.</p></div>
<div class="comment-info" id="comment-41592-info">
<span class="comment-age">(09 Mar '15, 19:59)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
<a name="41593"></a>
<div class="comment" id="comment-41593">
<div class="comment-score" id="post-41593-score"></div>
<div class="comment-text"><p>I have a very basic knowledge of programming: I started with PHP, continued with C (completed half an online course) and at some point took an introductory course in Java at university. I think that I know most basic concepts of programming but lack experience.</p></div>
<div class="comment-info" id="comment-41593-info">
<span class="comment-age">(09 Mar '15, 21:42)</span>
<a class="comment-user userinfo" href="/users/10475/scoopert">scoopert</a>
</div>
</div>
<a name="41630"></a>
<div class="comment" id="comment-41630">
<div class="comment-score" id="post-41630-score">2</div>
<div class="comment-text"><p>I beleive any beginners JAVA textbook plus a google search for JAVA API JSON (turns up literally dozens of suitable examples) will be suficient.</p>
<p>Simply read the original addrss file, query photon, write the original address and the best match from Photon to the output file.</p></div>
<div class="comment-info" id="comment-41630-info">
<span class="comment-age">(11 Mar '15, 08:13)</span>
<a class="comment-user userinfo" href="/users/2053/simonpoole">SimonPoole ♦</a>
</div>
</div>
<a name="41670"></a>
<div class="comment" id="comment-41670">
<div class="comment-score" id="post-41670-score">1</div>
<div class="comment-text"><p><a href="http://help.openstreetmap.org/users/2053/simonpoole"></a><a href="http://help.openstreetmap.org/users/2053/simonpoole">@SimonPoole</a> As you claimed, it turned out not to be a major problem. Though it took me a whole day, now I have my code compiling and running using a csv file. However, I am not sure yet what logic I should implement to pick "the best match" from Photon to avoid that the coordinates refer to a completely different point in the country. One possibility I can imagine is that I exploit the fact that the postal address additionally provides the state. Thus, I can check whether Photon's response and my original data match. But this is a pretty poor check as states are big. Do you have a suggestion?</p></div>
<div class="comment-info" id="comment-41670-info">
<span class="comment-age">(13 Mar '15, 08:36)</span>
<a class="comment-user userinfo" href="/users/10475/scoopert">scoopert</a>
</div>
</div>
<a name="41671"></a>
<div class="comment not_top_scorer" id="comment-41671">
<div class="comment-score" id="post-41671-score"></div>
<div class="comment-text"><p>As a response to your note in your original post: I have checked with Komoot to ensure that I stay within their usage policy, so there's no problem in this regard.</p></div>
<div class="comment-info" id="comment-41671-info">
<span class="comment-age">(13 Mar '15, 08:38)</span>
<a class="comment-user userinfo" href="/users/10475/scoopert">scoopert</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-41575">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-41575-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/41564/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="1II99q2fHkkJ8n1TO99ouPqfVIZDOBbZ"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>