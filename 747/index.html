<meta charset="UTF-8"><link rel="stylesheet" type="text/css" href="../style.css"><div id="CALeft">
<div class="headNormal">
<h1><a href="/questions/747/given-a-latlon-how-do-i-find-the-precise-position-on-the-tile">Given a lat/lon, how do I find the precise position on the tile?</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/747/up/" id="post-747-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-747-score" title="current number of votes">
    10
</div>
<a class="ajax-command post-vote down" href="/vote/747/down/" id="post-747-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/747/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
   4
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Given a latitude and longitude, I can find the correct tile number - but how do I find the correct position (in pixel) on the tile?</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-tile" href="/tags/tile/" rel="tag" title="see questions tagged 'tile'">tile</a>
<a class="post-tag tag-link-latitude" href="/tags/latitude/" rel="tag" title="see questions tagged 'latitude'">latitude</a>
<a class="post-tag tag-link-calulation" href="/tags/calulation/" rel="tag" title="see questions tagged 'calulation'">calulation</a>
<a class="post-tag tag-link-longitude" href="/tags/longitude/" rel="tag" title="see questions tagged 'longitude'">longitude</a>
<a class="post-tag tag-link-position" href="/tags/position/" rel="tag" title="see questions tagged 'position'">position</a>
</div>
<div class="post-controls" id="question-controls">
<div class="community-wiki">
        This question is marked "community wiki".
        
    </div>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>07 Sep '10, 08:14</strong>
</p>
<img alt="petschge's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/465f344e31e8ba1be0e0401414815db0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8/petschge">petschge</a><br/>
<span class="score" title="8279 reputation points"><span class="">8.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="73 badges"><span class="silver">●</span><span class="badgecount">73</span></span><span title="98 badges"><span class="bronze">●</span><span class="badgecount">98</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="petschge has 29 accepted answers">21%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/747/">
                closed
                <strong>17 Feb '11, 14:03</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-747">
<a name="3135"></a>
<div class="comment" id="comment-3135">
<div class="comment-score" id="post-3135-score">2</div>
<div class="comment-text"><p>related to  <a href="http://help.openstreetmap.org/questions/2687/coordinates-to-pixels-based-on-zoom">the question about coordinates to pixels</a></p></div>
<div class="comment-info" id="comment-3135-info">
<span class="comment-age">(17 Feb '11, 14:37)</span>
<a class="comment-user userinfo" href="/users/188/emj">emj</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-747">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-747-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    4 Answers:
                    </div>
<div class="tabsA"><a href="/questions/747/given-a-latlon-how-do-i-find-the-precise-position-on-the-tile?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/747/given-a-latlon-how-do-i-find-the-precise-position-on-the-tile?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/747/given-a-latlon-how-do-i-find-the-precise-position-on-the-tile?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/747/given-a-latlon-how-do-i-find-the-precise-position-on-the-tile?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="748"></a>
<div class="answer answered-by-owner" id="answer-container-748">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/748/up/" id="post-748-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-748-score" title="current number of votes">
    12
</div>
<a class="ajax-command post-vote down" href="/vote/748/down/" id="post-748-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>When you calulate the tile number according to <a href="http://wiki.openstreetmap.org/wiki/Tilenames">the wiki</a> you will actually get a floating point number.</p>
<p>The integer part indicates which tile you are (or should be) looking at.</p>
<p>The fractional part indicates the position within the tile. As a tile is 256 pixel wide, multiplying the fractional part with 256 will give you the pixel position from the top left.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/748/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>07 Sep '10, 08:16</strong>
</p>
<img alt="petschge's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/465f344e31e8ba1be0e0401414815db0?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/8/petschge">petschge</a><br/>
<span class="score" title="8279 reputation points"><span class="">8.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="73 badges"><span class="silver">●</span><span class="badgecount">73</span></span><span title="98 badges"><span class="bronze">●</span><span class="badgecount">98</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="petschge has 29 accepted answers">21%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/748/">
                edited
                <strong>07 Sep '10, 10:19</strong>
</a>
</p>
<img alt="Gnonthgol's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/44a4438f0146dfd898e24c221fd28b58?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/131/gnonthgol">Gnonthgol ♦</a><br/>
<span class="score" title="13750 reputation points"><span class="">13.8k</span></span><span title="16 badges"><span class="badge1">●</span><span class="badgecount">16</span></span><span title="103 badges"><span class="silver">●</span><span class="badgecount">103</span></span><span title="198 badges"><span class="bronze">●</span><span class="badgecount">198</span></span></p>
</div>
</div>
<div class="comments-container" id="comments-container-748">
<a name="82162"></a>
<div class="comment" id="comment-82162">
<div class="comment-score" id="post-82162-score"></div>
<div class="comment-text"><p>Can you show a detailed example?
for example we have
lat : 36
lon: 6
we create square earth map with real scale in autocad
how we can find the position x,y of the coordinates in the map?
i don't see an example or a formula in the wiki</p></div>
<div class="comment-info" id="comment-82162-info">
<span class="comment-age">(14 Oct '21, 06:27)</span>
<a class="comment-user userinfo" href="/users/20898/seghier">Seghier</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-748">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-748-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="749"></a>
<div class="answer" id="answer-container-749">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/749/up/" id="post-749-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-749-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/749/down/" id="post-749-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>If you just want to see the position on the map, you can use <em>mlat</em> and <em>mlon</em> to get a <a href="http://www.openstreetmap.org/?mlat=48.03611&amp;mlon=10.55885&amp;zoom=16&amp;layers=M">marker</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/749/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>07 Sep '10, 13:39</strong>
</p>
<img alt="scai's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/52d3234f3be58156770e8a91d575bfbd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/158/scai">scai ♦</a><br/>
<span class="score" title="33317 reputation points"><span class="">33.3k</span></span><span title="21 badges"><span class="badge1">●</span><span class="badgecount">21</span></span><span title="309 badges"><span class="silver">●</span><span class="badgecount">309</span></span><span title="459 badges"><span class="bronze">●</span><span class="badgecount">459</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="scai has 168 accepted answers">23%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-749">
<a name="82163"></a>
<div class="comment" id="comment-82163">
<div class="comment-score" id="post-82163-score"></div>
<div class="comment-text"><p>what you mean by mlat and mlon?
where is the formula?</p></div>
<div class="comment-info" id="comment-82163-info">
<span class="comment-age">(14 Oct '21, 06:29)</span>
<a class="comment-user userinfo" href="/users/20898/seghier">Seghier</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-749">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-749-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="8971"></a>
<div class="answer" id="answer-container-8971">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/8971/up/" id="post-8971-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-8971-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/8971/down/" id="post-8971-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>I've written the following conversion functions to convert from Lat/Long coordinates to OSM pixel x,y coordinates for a given zoom level.</p>
<pre><code>Friend Sub LatLongToPixelXYOSM(ByVal latitude As Double, ByVal longitude As Double, ByVal zoomLevel As Integer, ByRef pixelX As Integer, ByRef pixelY As Integer)
        Dim MinLatitude = -85.05112878
        Dim MaxLatitude = 85.05112878
        Dim MinLongitude = -180
        Dim MaxLongitude = 180
        Dim mapSize = Math.Pow(2, zoomLevel) * 256

        latitude = Clip(latitude, MinLatitude, MaxLatitude)
        longitude = Clip(longitude, MinLongitude, MaxLongitude)

        Dim p As PointF = New Point()
        p.X = CSng((longitude + 180.0) / 360.0 * (1 &lt;&lt; zoomLevel))
        p.Y = CSng((1.0 - Math.Log(Math.Tan(latitude * Math.PI / 180.0) + 1.0 / Math.Cos(toRadians(latitude))) / Math.PI) / 2.0 * (1 &lt;&lt; zoomLevel))

        Dim tilex As Integer = CInt(Math.Truncate(p.X))
        Dim tiley As Integer = CInt(Math.Truncate(p.Y))
        pixelX = ClipByRange((tilex * 256) + ((p.X - tilex) * 256), mapSize - 1)
        pixelY = ClipByRange((tiley * 256) + ((p.Y - tiley) * 256), mapSize - 1)
    End Sub

Friend Sub PixelXYToLatLongOSM(ByVal pixelX As Integer, ByVal pixelY As Integer, ByVal zoomLevel As Integer, ByRef latitude As Double, ByRef longitude As Double)
        Dim mapSize = Math.Pow(2, zoomLevel) * 256
        Dim tileX As Integer = Math.Truncate(pixelX / 256)
        Dim tileY As Integer = Math.Truncate(pixelY / 256)

        Dim p As PointF = New Point()
        Dim n As Double = Math.PI - ((2.0 * Math.PI * (ClipByRange(pixelY, mapSize - 1) / 256)) / Math.Pow(2.0, zoomLevel))

        longitude = CSng(((ClipByRange(pixelX, mapSize - 1) / 256) / Math.Pow(2.0, zoomLevel) * 360.0) - 180.0)
        latitude = CSng(180.0 / Math.PI * Math.Atan(Math.Sinh(n)))
    End Sub

Private Function ClipByRange(ByVal n As Double, ByVal range As Double)
        Return n Mod range
End Function

Private Function Clip(ByVal n As Double, ByVal minValue As Double, ByVal maxValue As Double)
      Return Math.Min(Math.Max(n, minValue), maxValue)
End Function
</code></pre>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/8971/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>14 Nov '11, 10:27</strong>
</p>
<img alt="johnmeilak's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/388bd8953c15a6093aae795c7991145e?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/2361/johnmeilak">johnmeilak</a><br/>
<span class="score" title="25 reputation points">25</span><span title="1 badges"><span class="bronze">●</span><span class="badgecount">1</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="johnmeilak has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-8971">
</div>
<div class="comment-tools" id="comment-tools-8971">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-8971-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<a name="86461"></a>
<div class="answer" id="answer-container-86461">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/86461/up/" id="post-86461-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-86461-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/86461/down/" id="post-86461-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>In the editor, press CTRL+SHIFT+L to display the Location Panel.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/86461/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>09 Jan '23, 11:19</strong>
</p>
<img alt="joper34's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/63bf3553cfc4f167abe24eaad9deaad1?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/22606/joper34">joper34</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="joper34 has no accepted answers">0%</span>
</p>
</div>
<div class="post-update-info post-update-info-edited">
<p style="line-height:12px;">
<a href="/revisions/86461/">
                edited
                <strong>09 Jan '23, 11:24</strong>
</a>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-86461">
</div>
<div class="comment-tools" id="comment-tools-86461">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-86461-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/747/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="mdzIUtfXG7Zuyp7R8J2dnIS9V0RcUN17"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>