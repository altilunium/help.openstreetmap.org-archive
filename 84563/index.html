<meta charset="utf-8"/><link href="../style.css" rel="stylesheet" type="text/css"/><div id="CALeft"><center><a href="../"><img id="ll" src="https://help.openstreetmap.org/upfiles/osm_help_logo_6.png"/></a></center>
<div class="headNormal">
<h1><a href="/questions/84563/how-can-i-removerender-without-symbols-text-and-boundaries-stack-osm2pgsql-mapnik-apache-mod_tile">How can I remove/render without symbols, text and boundaries? stack - osm2pgsql, mapnik, apache, mod_tile</a></h1>
</div>
<div class="" id="main-body">
<div id="askform">
<table id="question-table" style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/84563/up/" id="post-84563-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-84563-score" title="current number of votes">
    0
</div>
<a class="ajax-command post-vote down" href="/vote/84563/down/" id="post-84563-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
<a class="ajax-command favorite-mark" href="/mark_favorite/84563/" id="favorite-mark" rel="nofollow" title="mark/unmark this question as favorite (click again to cancel)"> </a>
<div class="favorite-count" id="favorite-count">
</div>
</div>
</td>
<td>
<div id="item-right">
<div class="question-body">
<p>Hello,</p>
<p>I'm on struggle street now, hence posting here - 
I am running my own ubuntu 22.04 tile server, per the switch2osm.org guide, and it's running great.
I've since started trying to customize it, by trying to remove text, symbols/icons and (administrative) boundaries - the purple ones. </p>
<p>I've scoured the web for answer, similar questions and more, with minor success - I've deleted the majority of text using the <em>3rd</em> tip by SomeoneElse <a href="https://help.openstreetmap.org/questions/84525/how-to-render-osm-map-tiles-without-text-osm2pgsql-mapnik-apache-mod_tile">here</a> - however, I'm finding some building names and street numbers are still appearing. </p>
<p>My biggest struggle, however, has been removing all symbols and purple boundaries. I've tried simply deleting the "admin.mss" and "symbols" folder, altering the names, modifying the colour variables in the mss file and a whole heap of other hacks/attempts but to no avail (in most cases, when updating there is no difference, even if the files are deleted).</p>
<p>Unfortunately I'm quite new, so I apologies beforehand for the possible hand holding I'll need.</p>
<p>I'd really appreciate any/all advice. Thanks</p>
</div>
<div class="tags-container tags" id="question-tags">
<a class="post-tag tag-link-boundaries" href="/tags/boundaries/" rel="tag" title="see questions tagged 'boundaries'">boundaries</a>
<a class="post-tag tag-link-rendering" href="/tags/rendering/" rel="tag" title="see questions tagged 'rendering'">rendering</a>
<a class="post-tag tag-link-icon" href="/tags/icon/" rel="tag" title="see questions tagged 'icon'">icon</a>
<a class="post-tag tag-link-mapnik" href="/tags/mapnik/" rel="tag" title="see questions tagged 'mapnik'">mapnik</a>
<a class="post-tag tag-link-text" href="/tags/text/" rel="tag" title="see questions tagged 'text'">text</a>
</div>
<div class="post-controls" id="question-controls">
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        asked
        <strong>23 May '22, 03:02</strong>
</p>
<img alt="hicallmeal's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/65bdb297b654bac58eb3679ec6789055?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/21807/hicallmeal">hicallmeal</a><br/>
<span class="score" title="11 reputation points">11</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="2 badges"><span class="bronze">●</span><span class="badgecount">2</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="hicallmeal has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-84563">
</div>
<div class="comment-tools" id="comment-tools-84563">
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-84563-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
<hr/>
<div class="tabBar">
<a name="sort-top"></a>
<div class="headQuestions">
                    One Answer:
                    </div>
<div class="tabsA"><a href="/questions/84563/how-can-i-removerender-without-symbols-text-and-boundaries-stack-osm2pgsql-mapnik-apache-mod_tile?sort=active" title="most recently updated answers/comments will be shown first">active answers</a><a href="/questions/84563/how-can-i-removerender-without-symbols-text-and-boundaries-stack-osm2pgsql-mapnik-apache-mod_tile?sort=oldest" title="oldest answers will be shown first">oldest answers</a><a href="/questions/84563/how-can-i-removerender-without-symbols-text-and-boundaries-stack-osm2pgsql-mapnik-apache-mod_tile?sort=newest" title="newest answers will be shown first">newest answers</a><a class="on" href="/questions/84563/how-can-i-removerender-without-symbols-text-and-boundaries-stack-osm2pgsql-mapnik-apache-mod_tile?sort=votes" title="most voted answers will be shown first">popular answers</a></div>
</div>
<a name="84564"></a>
<div class="answer" id="answer-container-84564">
<table style="width:100%;">
<tr>
<td style="width:30px;vertical-align:top">
<div class="vote-buttons">
<a class="ajax-command post-vote up" href="/vote/84564/up/" id="post-84564-upvote" rel="nofollow" title="I like this post (click again to cancel)"> </a>
<div class="post-score" id="post-84564-score" title="current number of votes">
    1
</div>
<a class="ajax-command post-vote down" href="/vote/84564/down/" id="post-84564-downvote" rel="nofollow" title="I dont like this post (click again to cancel)"> </a>
</div>
</td>
<td>
<div class="item-right">
<div class="answer-body">
<p>The project is driven by layers defined in <code>project.mml</code>. Many of the things you ask for are rendered by individual layers. You can remove them if you don't want them, but if your plan is to maintain a for of the main style, I think it would be better if you just disable them using <code>status: off</code>.</p>
<p>As for specific symbols and such, the project file also defines the SQL queries used to fetch data for rendering. They're also defined in the <code>.mms</code> files under <code>style</code>. you can either remove the fetch of the data from the SQL queries (but beware on how you  edit the file if you plan to maintain the fork) or comment out (with <code>/* */</code> à la C/C++/others) in the style files.</p>
<p>I keep my own fork <a href="https://github.com/StyXman/openstreetmap-carto/tree/elevation/develop">here</a>. Here I <a href="https://github.com/StyXman/openstreetmap-carto/blob/elevation/develop/project.mml#L1703=">disable a whole layer</a>. Here I do <a href="https://github.com/StyXman/openstreetmap-carto/blob/elevation/develop/project.mml#L166=">all kinds of modifications to the SQL queries</a> to change or reduce the amount of rendered data. Here I <a href="https://github.com/StyXman/openstreetmap-carto/blob/elevation/develop/style/landcover.mss#L162=">disable a whole style block</a>.</p>
</div>
<div class="answer-controls post-controls">
<span class="action-link"><a class="ajax-command withprompt copy" href="/answer_link/84564/" rel="nofollow" title="answer permanent link">permanent link</a></span>
</div>
<div class="post-update-info-container">
<div class="post-update-info post-update-info-user">
<p style="line-height:12px;">
        answered
        <strong>23 May '22, 10:03</strong>
</p>
<img alt="Marcos%20Dione's gravatar image" class="gravatar" height="32" src="https://secure.gravatar.com/avatar/e4587465b2b1b94834e5e625b80a29dd?s=32&amp;d=identicon&amp;r=g" width="32"/>
<p><a href="/users/15564/marcos-dione">Marcos Dione</a><br/>
<span class="score" title="71 reputation points">71</span><span title="1 badges"><span class="badge1">●</span><span class="badgecount">1</span></span><span title="1 badges"><span class="silver">●</span><span class="badgecount">1</span></span><span title="3 badges"><span class="bronze">●</span><span class="badgecount">3</span></span><br/>
<span class="accept_rate" title="Rate of the user's accepted answers">accept rate:</span>
<span title="Marcos Dione has no accepted answers">0%</span>
</p>
</div>
</div>
<div class="comments-container" id="comments-container-84564">
<a name="84565"></a>
<div class="comment" id="comment-84565">
<div class="comment-score" id="post-84565-score"></div>
<div class="comment-text"><p>Hey Marcos, thanks for the reply!
So that looked really promising, so I tried out adding status:off to a bunch of items (like you did in that example), including amenities and boundaries, and I also commented out the whole amenity.mss file excluding the variables just to be safe. Unfortunately I must either be doing something wrong, as no matter what I do, the changes don't appear (my process is, carto project.mml &gt; mapnik, find and delete all .meta tiles, restart server and renderd, if all fails then I run the osm2pgsql command). At this point, I'm worried I'm not clearing the cached tiles or perhaps I'm running it differently to you. Any ideas?</p></div>
<div class="comment-info" id="comment-84565-info">
<span class="comment-age">(23 May '22, 11:14)</span>
<a class="comment-user userinfo" href="/users/21807/hicallmeal">hicallmeal</a>
</div>
</div>
<a name="84571"></a>
<div class="comment" id="comment-84571">
<div class="comment-score" id="post-84571-score"></div>
<div class="comment-text"><p>I'm sorry, but I don't know anything about the rest of your stack. What I do locally is to edit the style with a text editor and check changes in kosmtik. Once I'm happy with my changes I might do some rendering or otherwise wait for the next opportunity to do it (I only render places that I go visit or maybe the city where I live).</p></div>
<div class="comment-info" id="comment-84571-info">
<span class="comment-age">(23 May '22, 21:11)</span>
<a class="comment-user userinfo" href="/users/15564/marcos-dione">Marcos Dione</a>
</div>
</div>
<a name="84675"></a>
<div class="comment" id="comment-84675">
<div class="comment-score" id="post-84675-score">1</div>
<div class="comment-text"><blockquote>
<p>At this point, I'm worried I'm not clearing the cached tiles</p>
</blockquote>
<p>Tiles might still be cached locally, to protect against that request them locally from a new incognito browser window (close any other incognito browser windows and create a new one).</p></div>
<div class="comment-info" id="comment-84675-info">
<span class="comment-age">(02 Jun '22, 12:27)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="84676"></a>
<div class="comment" id="comment-84676">
<div class="comment-score" id="post-84676-score">1</div>
<div class="comment-text"><p>To see what is actually in the database for a particular OSM object, try this
(as the user who owns the database)</p>
<pre><code>psql gis
gis=&gt; select * from planet_osm_polygon where osm_id=142724406;
gis=&gt; select * from planet_osm_line where osm_id=142724406;
gis=&gt; select * from planet_osm_point where osm_id=142724406;
</code></pre>
<p>nodes will be in planet_osm_point, unclosed ways and relations in planet_osm_line, and closed ways and relations in planet_osm_polygon.</p>
<p>You can look at the tags in there to see what tags are "escaping into the database" for a particular feature.  You can also do things like this:</p>
<pre><code>select count(*) from planet_osm_line where name='High Street';
</code></pre></div>
<div class="comment-info" id="comment-84676-info">
<span class="comment-age">(02 Jun '22, 12:33)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
<a name="84735"></a>
<div class="comment" id="comment-84735">
<div class="comment-score" id="post-84735-score"></div>
<div class="comment-text"><p>Hey <a href="https://help.openstreetmap.org/users/387/someoneelse">@SomeoneElse</a>, I tried playing around with some of that stuff you suggested but I'm going to be honest, this is far beyond me. </p>
<p>Really not where to start or what to do. I really appreciate your advice/assistance. Might just have to leave it here for now.</p></div>
<div class="comment-info" id="comment-84735-info">
<span class="comment-age">(08 Jun '22, 12:14)</span>
<a class="comment-user userinfo" href="/users/21807/hicallmeal">hicallmeal</a>
</div>
</div>
<a name="84736"></a>
<div class="comment not_top_scorer" id="comment-84736">
<div class="comment-score" id="post-84736-score"></div>
<div class="comment-text"><p>Ultimately, if you want to change the way that osm2pgsql / renderd / mapnik displays things, you do need some sort of basic knowledge of the database that underpins it.</p>
<p>Does anything at <a href="https://ircama.github.io/osm-carto-tutorials/">https://ircama.github.io/osm-carto-tutorials/</a> help?  Failing that, would <a href="https://umap.openstreetmap.fr/en/">https://umap.openstreetmap.fr/en/</a> allow you to do whatever you are trying to do?</p></div>
<div class="comment-info" id="comment-84736-info">
<span class="comment-age">(08 Jun '22, 14:25)</span>
<a class="comment-user userinfo" href="/users/387/someoneelse">SomeoneElse ♦</a>
</div>
</div>
</div>
<div class="comment-tools" id="comment-tools-84564">
<span class="comments-showing">
            showing 5 of 6
        </span>
<a class="show-all-comments-link" href="#">show 1 more comments</a>
</div>
<div class="clear"></div>
<div class="comment-form-container" id="comment-84564-form-container">
</div>
<div class="clear"></div>
</div>
</td>
</tr>
</table>
</div>
<div class="paginator-container-left">
</div>
<form action="/questions/84563/answer/" id="fmanswer" method="post">
<input name="csrfmiddlewaretoken" type="hidden" value="Fd9PvTOvte5hI3ObH0HffCdnO2mxyzKC"/>
<div style="clear:both">
</div>
</form>
</div>
</div>
</div>